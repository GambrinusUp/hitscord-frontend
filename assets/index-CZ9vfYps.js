var KM=Object.defineProperty;var YM=(e,t,n)=>t in e?KM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zv=(e,t,n)=>YM(e,typeof t!="symbol"?t+"":t,n);function XM(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ci(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bv={exports:{}},Cl={},Uv={exports:{}},ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC;function QM(){if(lC)return ht;lC=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;function g(U){return U===null||typeof U!="object"?null:(U=h&&U[h]||U["@@iterator"],typeof U=="function"?U:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function C(U,G,te){this.props=U,this.context=G,this.refs=b,this.updater=te||S}C.prototype.isReactComponent={},C.prototype.setState=function(U,G){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,G,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function T(){}T.prototype=C.prototype;function R(U,G,te){this.props=U,this.context=G,this.refs=b,this.updater=te||S}var m=R.prototype=new T;m.constructor=R,y(m,C.prototype),m.isPureReactComponent=!0;var v=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function D(U,G,te){var ne,Q={},se=null,X=null;if(G!=null)for(ne in G.ref!==void 0&&(X=G.ref),G.key!==void 0&&(se=""+G.key),G)x.call(G,ne)&&!k.hasOwnProperty(ne)&&(Q[ne]=G[ne]);var oe=arguments.length-2;if(oe===1)Q.children=te;else if(1<oe){for(var K=Array(oe),Z=0;Z<oe;Z++)K[Z]=arguments[Z+2];Q.children=K}if(U&&U.defaultProps)for(ne in oe=U.defaultProps,oe)Q[ne]===void 0&&(Q[ne]=oe[ne]);return{$$typeof:e,type:U,key:se,ref:X,props:Q,_owner:_.current}}function M(U,G){return{$$typeof:e,type:U.type,key:G,ref:U.ref,props:U.props,_owner:U._owner}}function P(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function L(U){var G={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(te){return G[te]})}var O=/\/+/g;function V(U,G){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):G.toString(36)}function H(U,G,te,ne,Q){var se=typeof U;(se==="undefined"||se==="boolean")&&(U=null);var X=!1;if(U===null)X=!0;else switch(se){case"string":case"number":X=!0;break;case"object":switch(U.$$typeof){case e:case t:X=!0}}if(X)return X=U,Q=Q(X),U=ne===""?"."+V(X,0):ne,v(Q)?(te="",U!=null&&(te=U.replace(O,"$&/")+"/"),H(Q,G,te,"",function(Z){return Z})):Q!=null&&(P(Q)&&(Q=M(Q,te+(!Q.key||X&&X.key===Q.key?"":(""+Q.key).replace(O,"$&/")+"/")+U)),G.push(Q)),1;if(X=0,ne=ne===""?".":ne+":",v(U))for(var oe=0;oe<U.length;oe++){se=U[oe];var K=ne+V(se,oe);X+=H(se,G,te,K,Q)}else if(K=g(U),typeof K=="function")for(U=K.call(U),oe=0;!(se=U.next()).done;)se=se.value,K=ne+V(se,oe++),X+=H(se,G,te,K,Q);else if(se==="object")throw G=String(U),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return X}function q(U,G,te){if(U==null)return U;var ne=[],Q=0;return H(U,ne,"","",function(se){return G.call(te,se,Q++)}),ne}function N(U){if(U._status===-1){var G=U._result;G=G(),G.then(function(te){(U._status===0||U._status===-1)&&(U._status=1,U._result=te)},function(te){(U._status===0||U._status===-1)&&(U._status=2,U._result=te)}),U._status===-1&&(U._status=0,U._result=G)}if(U._status===1)return U._result.default;throw U._result}var B={current:null},$={transition:null},F={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:$,ReactCurrentOwner:_};function z(){throw Error("act(...) is not supported in production builds of React.")}return ht.Children={map:q,forEach:function(U,G,te){q(U,function(){G.apply(this,arguments)},te)},count:function(U){var G=0;return q(U,function(){G++}),G},toArray:function(U){return q(U,function(G){return G})||[]},only:function(U){if(!P(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},ht.Component=C,ht.Fragment=n,ht.Profiler=s,ht.PureComponent=R,ht.StrictMode=r,ht.Suspense=f,ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,ht.act=z,ht.cloneElement=function(U,G,te){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var ne=y({},U.props),Q=U.key,se=U.ref,X=U._owner;if(G!=null){if(G.ref!==void 0&&(se=G.ref,X=_.current),G.key!==void 0&&(Q=""+G.key),U.type&&U.type.defaultProps)var oe=U.type.defaultProps;for(K in G)x.call(G,K)&&!k.hasOwnProperty(K)&&(ne[K]=G[K]===void 0&&oe!==void 0?oe[K]:G[K])}var K=arguments.length-2;if(K===1)ne.children=te;else if(1<K){oe=Array(K);for(var Z=0;Z<K;Z++)oe[Z]=arguments[Z+2];ne.children=oe}return{$$typeof:e,type:U.type,key:Q,ref:se,props:ne,_owner:X}},ht.createContext=function(U){return U={$$typeof:a,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},ht.createElement=D,ht.createFactory=function(U){var G=D.bind(null,U);return G.type=U,G},ht.createRef=function(){return{current:null}},ht.forwardRef=function(U){return{$$typeof:c,render:U}},ht.isValidElement=P,ht.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:N}},ht.memo=function(U,G){return{$$typeof:d,type:U,compare:G===void 0?null:G}},ht.startTransition=function(U){var G=$.transition;$.transition={};try{U()}finally{$.transition=G}},ht.unstable_act=z,ht.useCallback=function(U,G){return B.current.useCallback(U,G)},ht.useContext=function(U){return B.current.useContext(U)},ht.useDebugValue=function(){},ht.useDeferredValue=function(U){return B.current.useDeferredValue(U)},ht.useEffect=function(U,G){return B.current.useEffect(U,G)},ht.useId=function(){return B.current.useId()},ht.useImperativeHandle=function(U,G,te){return B.current.useImperativeHandle(U,G,te)},ht.useInsertionEffect=function(U,G){return B.current.useInsertionEffect(U,G)},ht.useLayoutEffect=function(U,G){return B.current.useLayoutEffect(U,G)},ht.useMemo=function(U,G){return B.current.useMemo(U,G)},ht.useReducer=function(U,G,te){return B.current.useReducer(U,G,te)},ht.useRef=function(U){return B.current.useRef(U)},ht.useState=function(U){return B.current.useState(U)},ht.useSyncExternalStore=function(U,G,te){return B.current.useSyncExternalStore(U,G,te)},ht.useTransition=function(){return B.current.useTransition()},ht.version="18.3.1",ht}var dC;function _h(){return dC||(dC=1,Uv.exports=QM()),Uv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC;function JM(){if(uC)return Cl;uC=1;var e=_h(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(c,f,d){var p,h={},g=null,S=null;d!==void 0&&(g=""+d),f.key!==void 0&&(g=""+f.key),f.ref!==void 0&&(S=f.ref);for(p in f)r.call(f,p)&&!o.hasOwnProperty(p)&&(h[p]=f[p]);if(c&&c.defaultProps)for(p in f=c.defaultProps,f)h[p]===void 0&&(h[p]=f[p]);return{$$typeof:t,type:c,key:g,ref:S,props:h,_owner:s.current}}return Cl.Fragment=n,Cl.jsx=a,Cl.jsxs=a,Cl}var fC;function ZM(){return fC||(fC=1,Bv.exports=JM()),Bv.exports}var u=ZM(),sf={},Vv={exports:{}},er={},Hv={exports:{}},Wv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pC;function eN(){return pC||(pC=1,function(e){function t($,F){var z=$.length;$.push(F);e:for(;0<z;){var U=z-1>>>1,G=$[U];if(0<s(G,F))$[U]=F,$[z]=G,z=U;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var F=$[0],z=$.pop();if(z!==F){$[0]=z;e:for(var U=0,G=$.length,te=G>>>1;U<te;){var ne=2*(U+1)-1,Q=$[ne],se=ne+1,X=$[se];if(0>s(Q,z))se<G&&0>s(X,Q)?($[U]=X,$[se]=z,U=se):($[U]=Q,$[ne]=z,U=ne);else if(se<G&&0>s(X,z))$[U]=X,$[se]=z,U=se;else break e}}return F}function s($,F){var z=$.sortIndex-F.sortIndex;return z!==0?z:$.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();e.unstable_now=function(){return a.now()-c}}var f=[],d=[],p=1,h=null,g=3,S=!1,y=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m($){for(var F=n(d);F!==null;){if(F.callback===null)r(d);else if(F.startTime<=$)r(d),F.sortIndex=F.expirationTime,t(f,F);else break;F=n(d)}}function v($){if(b=!1,m($),!y)if(n(f)!==null)y=!0,N(x);else{var F=n(d);F!==null&&B(v,F.startTime-$)}}function x($,F){y=!1,b&&(b=!1,T(D),D=-1),S=!0;var z=g;try{for(m(F),h=n(f);h!==null&&(!(h.expirationTime>F)||$&&!L());){var U=h.callback;if(typeof U=="function"){h.callback=null,g=h.priorityLevel;var G=U(h.expirationTime<=F);F=e.unstable_now(),typeof G=="function"?h.callback=G:h===n(f)&&r(f),m(F)}else r(f);h=n(f)}if(h!==null)var te=!0;else{var ne=n(d);ne!==null&&B(v,ne.startTime-F),te=!1}return te}finally{h=null,g=z,S=!1}}var _=!1,k=null,D=-1,M=5,P=-1;function L(){return!(e.unstable_now()-P<M)}function O(){if(k!==null){var $=e.unstable_now();P=$;var F=!0;try{F=k(!0,$)}finally{F?V():(_=!1,k=null)}}else _=!1}var V;if(typeof R=="function")V=function(){R(O)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,q=H.port2;H.port1.onmessage=O,V=function(){q.postMessage(null)}}else V=function(){C(O,0)};function N($){k=$,_||(_=!0,V())}function B($,F){D=C(function(){$(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){y||S||(y=!0,N(x))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function($){switch(g){case 1:case 2:case 3:var F=3;break;default:F=g}var z=g;g=F;try{return $()}finally{g=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,F){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var z=g;g=$;try{return F()}finally{g=z}},e.unstable_scheduleCallback=function($,F,z){var U=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,$){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=z+G,$={id:p++,callback:F,priorityLevel:$,startTime:z,expirationTime:G,sortIndex:-1},z>U?($.sortIndex=z,t(d,$),n(f)===null&&$===n(d)&&(b?(T(D),D=-1):b=!0,B(v,z-U))):($.sortIndex=G,t(f,$),y||S||(y=!0,N(x))),$},e.unstable_shouldYield=L,e.unstable_wrapCallback=function($){var F=g;return function(){var z=g;g=F;try{return $.apply(this,arguments)}finally{g=z}}}}(Wv)),Wv}var hC;function tN(){return hC||(hC=1,Hv.exports=eN()),Hv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC;function nN(){if(mC)return er;mC=1;var e=_h(),t=tN();function n(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,w=1;w<arguments.length;w++)l+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,l){a(i,l),a(i+"Capture",l)}function a(i,l){for(s[i]=l,i=0;i<l.length;i++)r.add(l[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function g(i){return f.call(h,i)?!0:f.call(p,i)?!1:d.test(i)?h[i]=!0:(p[i]=!0,!1)}function S(i,l,w,E){if(w!==null&&w.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return E?!1:w!==null?!w.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function y(i,l,w,E){if(l===null||typeof l>"u"||S(i,l,w,E))return!0;if(E)return!1;if(w!==null)switch(w.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(i,l,w,E,j,A,W){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=E,this.attributeNamespace=j,this.mustUseProperty=w,this.propertyName=i,this.type=l,this.sanitizeURL=A,this.removeEmptyString=W}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new b(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];C[l]=new b(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new b(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new b(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new b(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new b(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new b(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new b(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new b(i,5,!1,i.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function R(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(T,R);C[l]=new b(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(T,R);C[l]=new b(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(T,R);C[l]=new b(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new b(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new b(i,1,!1,i.toLowerCase(),null,!0,!0)});function m(i,l,w,E){var j=C.hasOwnProperty(l)?C[l]:null;(j!==null?j.type!==0:E||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(y(l,w,j,E)&&(w=null),E||j===null?g(l)&&(w===null?i.removeAttribute(l):i.setAttribute(l,""+w)):j.mustUseProperty?i[j.propertyName]=w===null?j.type===3?!1:"":w:(l=j.attributeName,E=j.attributeNamespace,w===null?i.removeAttribute(l):(j=j.type,w=j===3||j===4&&w===!0?"":""+w,E?i.setAttributeNS(E,l,w):i.setAttribute(l,w))))}var v=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),L=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),$=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var z=Object.assign,U;function G(i){if(U===void 0)try{throw Error()}catch(w){var l=w.stack.trim().match(/\n( *(at )?)/);U=l&&l[1]||""}return`
`+U+i}var te=!1;function ne(i,l){if(!i||te)return"";te=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(de){var E=de}Reflect.construct(i,[],l)}else{try{l.call()}catch(de){E=de}i.call(l.prototype)}else{try{throw Error()}catch(de){E=de}i()}}catch(de){if(de&&E&&typeof de.stack=="string"){for(var j=de.stack.split(`
`),A=E.stack.split(`
`),W=j.length-1,Y=A.length-1;1<=W&&0<=Y&&j[W]!==A[Y];)Y--;for(;1<=W&&0<=Y;W--,Y--)if(j[W]!==A[Y]){if(W!==1||Y!==1)do if(W--,Y--,0>Y||j[W]!==A[Y]){var J=`
`+j[W].replace(" at new "," at ");return i.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",i.displayName)),J}while(1<=W&&0<=Y);break}}}finally{te=!1,Error.prepareStackTrace=w}return(i=i?i.displayName||i.name:"")?G(i):""}function Q(i){switch(i.tag){case 5:return G(i.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return i=ne(i.type,!1),i;case 11:return i=ne(i.type.render,!1),i;case 1:return i=ne(i.type,!0),i;default:return""}}function se(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case _:return"Portal";case M:return"Profiler";case D:return"StrictMode";case V:return"Suspense";case H:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case P:return(i._context.displayName||"Context")+".Provider";case O:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case q:return l=i.displayName||null,l!==null?l:se(i.type)||"Memo";case N:l=i._payload,i=i._init;try{return se(i(l))}catch{}}return null}function X(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(l);case 8:return l===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function oe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function K(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Z(i){var l=K(i)?"checked":"value",w=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),E=""+i[l];if(!i.hasOwnProperty(l)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var j=w.get,A=w.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return j.call(this)},set:function(W){E=""+W,A.call(this,W)}}),Object.defineProperty(i,l,{enumerable:w.enumerable}),{getValue:function(){return E},setValue:function(W){E=""+W},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function fe(i){i._valueTracker||(i._valueTracker=Z(i))}function xe(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var w=l.getValue(),E="";return i&&(E=K(i)?i.checked?"true":"false":i.value),i=E,i!==w?(l.setValue(i),!0):!1}function ye(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ee(i,l){var w=l.checked;return z({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??i._wrapperState.initialChecked})}function Be(i,l){var w=l.defaultValue==null?"":l.defaultValue,E=l.checked!=null?l.checked:l.defaultChecked;w=oe(l.value!=null?l.value:w),i._wrapperState={initialChecked:E,initialValue:w,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function et(i,l){l=l.checked,l!=null&&m(i,"checked",l,!1)}function pe(i,l){et(i,l);var w=oe(l.value),E=l.type;if(w!=null)E==="number"?(w===0&&i.value===""||i.value!=w)&&(i.value=""+w):i.value!==""+w&&(i.value=""+w);else if(E==="submit"||E==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?je(i,l.type,w):l.hasOwnProperty("defaultValue")&&je(i,l.type,oe(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function _e(i,l,w){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var E=l.type;if(!(E!=="submit"&&E!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,w||l===i.value||(i.value=l),i.defaultValue=l}w=i.name,w!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,w!==""&&(i.name=w)}function je(i,l,w){(l!=="number"||ye(i.ownerDocument)!==i)&&(w==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+w&&(i.defaultValue=""+w))}var Ue=Array.isArray;function Je(i,l,w,E){if(i=i.options,l){l={};for(var j=0;j<w.length;j++)l["$"+w[j]]=!0;for(w=0;w<i.length;w++)j=l.hasOwnProperty("$"+i[w].value),i[w].selected!==j&&(i[w].selected=j),j&&E&&(i[w].defaultSelected=!0)}else{for(w=""+oe(w),l=null,j=0;j<i.length;j++){if(i[j].value===w){i[j].selected=!0,E&&(i[j].defaultSelected=!0);return}l!==null||i[j].disabled||(l=i[j])}l!==null&&(l.selected=!0)}}function Ze(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return z({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Fe(i,l){var w=l.value;if(w==null){if(w=l.children,l=l.defaultValue,w!=null){if(l!=null)throw Error(n(92));if(Ue(w)){if(1<w.length)throw Error(n(93));w=w[0]}l=w}l==null&&(l=""),w=l}i._wrapperState={initialValue:oe(w)}}function be(i,l){var w=oe(l.value),E=oe(l.defaultValue);w!=null&&(w=""+w,w!==i.value&&(i.value=w),l.defaultValue==null&&i.defaultValue!==w&&(i.defaultValue=w)),E!=null&&(i.defaultValue=""+E)}function Ve(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function He(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ye(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?He(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Le,ct=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,w,E,j){MSApp.execUnsafeLocalFunction(function(){return i(l,w,E,j)})}:i}(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(Le=Le||document.createElement("div"),Le.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Le.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function vt(i,l){if(l){var w=i.firstChild;if(w&&w===i.lastChild&&w.nodeType===3){w.nodeValue=l;return}}i.textContent=l}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];Object.keys(ut).forEach(function(i){pt.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),ut[l]=ut[i]})});function Ge(i,l,w){return l==null||typeof l=="boolean"||l===""?"":w||typeof l!="number"||l===0||ut.hasOwnProperty(i)&&ut[i]?(""+l).trim():l+"px"}function bt(i,l){i=i.style;for(var w in l)if(l.hasOwnProperty(w)){var E=w.indexOf("--")===0,j=Ge(w,l[w],E);w==="float"&&(w="cssFloat"),E?i.setProperty(w,j):i[w]=j}}var pr=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ko(i,l){if(l){if(pr[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Is(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ca=null;function zc(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var hr=null,Io=null,Do=null;function Gd(i){if(i=cl(i)){if(typeof hr!="function")throw Error(n(280));var l=i.stateNode;l&&(l=wu(l),hr(i.stateNode,i.type,l))}}function Kd(i){Io?Do?Do.push(i):Do=[i]:Io=i}function Yd(){if(Io){var i=Io,l=Do;if(Do=Io=null,Gd(i),l)for(i=0;i<l.length;i++)Gd(l[i])}}function Xd(i,l){return i(l)}function Gt(){}var Ys=!1;function jb(i,l,w){if(Ys)return i(l,w);Ys=!0;try{return Xd(i,l,w)}finally{Ys=!1,(Io!==null||Do!==null)&&(Gt(),Yd())}}function Bc(i,l){var w=i.stateNode;if(w===null)return null;var E=wu(w);if(E===null)return null;w=E[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(i=i.type,E=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!E;break e;default:i=!1}if(i)return null;if(w&&typeof w!="function")throw Error(n(231,l,typeof w));return w}var sg=!1;if(c)try{var Uc={};Object.defineProperty(Uc,"passive",{get:function(){sg=!0}}),window.addEventListener("test",Uc,Uc),window.removeEventListener("test",Uc,Uc)}catch{sg=!1}function eP(i,l,w,E,j,A,W,Y,J){var de=Array.prototype.slice.call(arguments,3);try{l.apply(w,de)}catch(Ce){this.onError(Ce)}}var Vc=!1,Qd=null,Jd=!1,og=null,tP={onError:function(i){Vc=!0,Qd=i}};function nP(i,l,w,E,j,A,W,Y,J){Vc=!1,Qd=null,eP.apply(tP,arguments)}function rP(i,l,w,E,j,A,W,Y,J){if(nP.apply(this,arguments),Vc){if(Vc){var de=Qd;Vc=!1,Qd=null}else throw Error(n(198));Jd||(Jd=!0,og=de)}}function bi(i){var l=i,w=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(w=l.return),i=l.return;while(i)}return l.tag===3?w:null}function Pb(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function Mb(i){if(bi(i)!==i)throw Error(n(188))}function sP(i){var l=i.alternate;if(!l){if(l=bi(i),l===null)throw Error(n(188));return l!==i?null:i}for(var w=i,E=l;;){var j=w.return;if(j===null)break;var A=j.alternate;if(A===null){if(E=j.return,E!==null){w=E;continue}break}if(j.child===A.child){for(A=j.child;A;){if(A===w)return Mb(j),i;if(A===E)return Mb(j),l;A=A.sibling}throw Error(n(188))}if(w.return!==E.return)w=j,E=A;else{for(var W=!1,Y=j.child;Y;){if(Y===w){W=!0,w=j,E=A;break}if(Y===E){W=!0,E=j,w=A;break}Y=Y.sibling}if(!W){for(Y=A.child;Y;){if(Y===w){W=!0,w=A,E=j;break}if(Y===E){W=!0,E=A,w=j;break}Y=Y.sibling}if(!W)throw Error(n(189))}}if(w.alternate!==E)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?i:l}function Nb(i){return i=sP(i),i!==null?Lb(i):null}function Lb(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=Lb(i);if(l!==null)return l;i=i.sibling}return null}var Ob=t.unstable_scheduleCallback,Ab=t.unstable_cancelCallback,oP=t.unstable_shouldYield,iP=t.unstable_requestPaint,Qt=t.unstable_now,aP=t.unstable_getCurrentPriorityLevel,ig=t.unstable_ImmediatePriority,$b=t.unstable_UserBlockingPriority,Zd=t.unstable_NormalPriority,cP=t.unstable_LowPriority,Fb=t.unstable_IdlePriority,eu=null,Ds=null;function lP(i){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(eu,i,void 0,(i.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:fP,dP=Math.log,uP=Math.LN2;function fP(i){return i>>>=0,i===0?32:31-(dP(i)/uP|0)|0}var tu=64,nu=4194304;function Hc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ru(i,l){var w=i.pendingLanes;if(w===0)return 0;var E=0,j=i.suspendedLanes,A=i.pingedLanes,W=w&268435455;if(W!==0){var Y=W&~j;Y!==0?E=Hc(Y):(A&=W,A!==0&&(E=Hc(A)))}else W=w&~j,W!==0?E=Hc(W):A!==0&&(E=Hc(A));if(E===0)return 0;if(l!==0&&l!==E&&(l&j)===0&&(j=E&-E,A=l&-l,j>=A||j===16&&(A&4194240)!==0))return l;if((E&4)!==0&&(E|=w&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=E;0<l;)w=31-qr(l),j=1<<w,E|=i[w],l&=~j;return E}function pP(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hP(i,l){for(var w=i.suspendedLanes,E=i.pingedLanes,j=i.expirationTimes,A=i.pendingLanes;0<A;){var W=31-qr(A),Y=1<<W,J=j[W];J===-1?((Y&w)===0||(Y&E)!==0)&&(j[W]=pP(Y,l)):J<=l&&(i.expiredLanes|=Y),A&=~Y}}function ag(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function zb(){var i=tu;return tu<<=1,(tu&4194240)===0&&(tu=64),i}function cg(i){for(var l=[],w=0;31>w;w++)l.push(i);return l}function Wc(i,l,w){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-qr(l),i[l]=w}function mP(i,l){var w=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var E=i.eventTimes;for(i=i.expirationTimes;0<w;){var j=31-qr(w),A=1<<j;l[j]=0,E[j]=-1,i[j]=-1,w&=~A}}function lg(i,l){var w=i.entangledLanes|=l;for(i=i.entanglements;w;){var E=31-qr(w),j=1<<E;j&l|i[E]&l&&(i[E]|=l),w&=~j}}var Tt=0;function Bb(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ub,dg,Vb,Hb,Wb,ug=!1,su=[],jo=null,Po=null,Mo=null,qc=new Map,Gc=new Map,No=[],gP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qb(i,l){switch(i){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":Mo=null;break;case"pointerover":case"pointerout":qc.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(l.pointerId)}}function Kc(i,l,w,E,j,A){return i===null||i.nativeEvent!==A?(i={blockedOn:l,domEventName:w,eventSystemFlags:E,nativeEvent:A,targetContainers:[j]},l!==null&&(l=cl(l),l!==null&&dg(l)),i):(i.eventSystemFlags|=E,l=i.targetContainers,j!==null&&l.indexOf(j)===-1&&l.push(j),i)}function vP(i,l,w,E,j){switch(l){case"focusin":return jo=Kc(jo,i,l,w,E,j),!0;case"dragenter":return Po=Kc(Po,i,l,w,E,j),!0;case"mouseover":return Mo=Kc(Mo,i,l,w,E,j),!0;case"pointerover":var A=j.pointerId;return qc.set(A,Kc(qc.get(A)||null,i,l,w,E,j)),!0;case"gotpointercapture":return A=j.pointerId,Gc.set(A,Kc(Gc.get(A)||null,i,l,w,E,j)),!0}return!1}function Gb(i){var l=xi(i.target);if(l!==null){var w=bi(l);if(w!==null){if(l=w.tag,l===13){if(l=Pb(w),l!==null){i.blockedOn=l,Wb(i.priority,function(){Vb(w)});return}}else if(l===3&&w.stateNode.current.memoizedState.isDehydrated){i.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ou(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var w=pg(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(w===null){w=i.nativeEvent;var E=new w.constructor(w.type,w);Ca=E,w.target.dispatchEvent(E),Ca=null}else return l=cl(w),l!==null&&dg(l),i.blockedOn=w,!1;l.shift()}return!0}function Kb(i,l,w){ou(i)&&w.delete(l)}function yP(){ug=!1,jo!==null&&ou(jo)&&(jo=null),Po!==null&&ou(Po)&&(Po=null),Mo!==null&&ou(Mo)&&(Mo=null),qc.forEach(Kb),Gc.forEach(Kb)}function Yc(i,l){i.blockedOn===l&&(i.blockedOn=null,ug||(ug=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,yP)))}function Xc(i){function l(j){return Yc(j,i)}if(0<su.length){Yc(su[0],i);for(var w=1;w<su.length;w++){var E=su[w];E.blockedOn===i&&(E.blockedOn=null)}}for(jo!==null&&Yc(jo,i),Po!==null&&Yc(Po,i),Mo!==null&&Yc(Mo,i),qc.forEach(l),Gc.forEach(l),w=0;w<No.length;w++)E=No[w],E.blockedOn===i&&(E.blockedOn=null);for(;0<No.length&&(w=No[0],w.blockedOn===null);)Gb(w),w.blockedOn===null&&No.shift()}var _a=v.ReactCurrentBatchConfig,iu=!0;function wP(i,l,w,E){var j=Tt,A=_a.transition;_a.transition=null;try{Tt=1,fg(i,l,w,E)}finally{Tt=j,_a.transition=A}}function SP(i,l,w,E){var j=Tt,A=_a.transition;_a.transition=null;try{Tt=4,fg(i,l,w,E)}finally{Tt=j,_a.transition=A}}function fg(i,l,w,E){if(iu){var j=pg(i,l,w,E);if(j===null)Dg(i,l,E,au,w),qb(i,E);else if(vP(j,i,l,w,E))E.stopPropagation();else if(qb(i,E),l&4&&-1<gP.indexOf(i)){for(;j!==null;){var A=cl(j);if(A!==null&&Ub(A),A=pg(i,l,w,E),A===null&&Dg(i,l,E,au,w),A===j)break;j=A}j!==null&&E.stopPropagation()}else Dg(i,l,E,null,w)}}var au=null;function pg(i,l,w,E){if(au=null,i=zc(E),i=xi(i),i!==null)if(l=bi(i),l===null)i=null;else if(w=l.tag,w===13){if(i=Pb(l),i!==null)return i;i=null}else if(w===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return au=i,null}function Yb(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aP()){case ig:return 1;case $b:return 4;case Zd:case cP:return 16;case Fb:return 536870912;default:return 16}default:return 16}}var Lo=null,hg=null,cu=null;function Xb(){if(cu)return cu;var i,l=hg,w=l.length,E,j="value"in Lo?Lo.value:Lo.textContent,A=j.length;for(i=0;i<w&&l[i]===j[i];i++);var W=w-i;for(E=1;E<=W&&l[w-E]===j[A-E];E++);return cu=j.slice(i,1<E?1-E:void 0)}function lu(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function du(){return!0}function Qb(){return!1}function mr(i){function l(w,E,j,A,W){this._reactName=w,this._targetInst=j,this.type=E,this.nativeEvent=A,this.target=W,this.currentTarget=null;for(var Y in i)i.hasOwnProperty(Y)&&(w=i[Y],this[Y]=w?w(A):A[Y]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?du:Qb,this.isPropagationStopped=Qb,this}return z(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=du)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=du)},persist:function(){},isPersistent:du}),l}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mg=mr(Ra),Qc=z({},Ra,{view:0,detail:0}),bP=mr(Qc),gg,vg,Jc,uu=z({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wg,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Jc&&(Jc&&i.type==="mousemove"?(gg=i.screenX-Jc.screenX,vg=i.screenY-Jc.screenY):vg=gg=0,Jc=i),gg)},movementY:function(i){return"movementY"in i?i.movementY:vg}}),Jb=mr(uu),xP=z({},uu,{dataTransfer:0}),CP=mr(xP),_P=z({},Qc,{relatedTarget:0}),yg=mr(_P),RP=z({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),TP=mr(RP),EP=z({},Ra,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),kP=mr(EP),IP=z({},Ra,{data:0}),Zb=mr(IP),DP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MP(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=PP[i])?!!l[i]:!1}function wg(){return MP}var NP=z({},Qc,{key:function(i){if(i.key){var l=DP[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=lu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?jP[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wg,charCode:function(i){return i.type==="keypress"?lu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?lu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),LP=mr(NP),OP=z({},uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ex=mr(OP),AP=z({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wg}),$P=mr(AP),FP=z({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),zP=mr(FP),BP=z({},uu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),UP=mr(BP),VP=[9,13,27,32],Sg=c&&"CompositionEvent"in window,Zc=null;c&&"documentMode"in document&&(Zc=document.documentMode);var HP=c&&"TextEvent"in window&&!Zc,tx=c&&(!Sg||Zc&&8<Zc&&11>=Zc),nx=" ",rx=!1;function sx(i,l){switch(i){case"keyup":return VP.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ox(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ta=!1;function WP(i,l){switch(i){case"compositionend":return ox(l);case"keypress":return l.which!==32?null:(rx=!0,nx);case"textInput":return i=l.data,i===nx&&rx?null:i;default:return null}}function qP(i,l){if(Ta)return i==="compositionend"||!Sg&&sx(i,l)?(i=Xb(),cu=hg=Lo=null,Ta=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return tx&&l.locale!=="ko"?null:l.data;default:return null}}var GP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ix(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!GP[i.type]:l==="textarea"}function ax(i,l,w,E){Kd(E),l=gu(l,"onChange"),0<l.length&&(w=new mg("onChange","change",null,w,E),i.push({event:w,listeners:l}))}var el=null,tl=null;function KP(i){Rx(i,0)}function fu(i){var l=ja(i);if(xe(l))return i}function YP(i,l){if(i==="change")return l}var cx=!1;if(c){var bg;if(c){var xg="oninput"in document;if(!xg){var lx=document.createElement("div");lx.setAttribute("oninput","return;"),xg=typeof lx.oninput=="function"}bg=xg}else bg=!1;cx=bg&&(!document.documentMode||9<document.documentMode)}function dx(){el&&(el.detachEvent("onpropertychange",ux),tl=el=null)}function ux(i){if(i.propertyName==="value"&&fu(tl)){var l=[];ax(l,tl,i,zc(i)),jb(KP,l)}}function XP(i,l,w){i==="focusin"?(dx(),el=l,tl=w,el.attachEvent("onpropertychange",ux)):i==="focusout"&&dx()}function QP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return fu(tl)}function JP(i,l){if(i==="click")return fu(l)}function ZP(i,l){if(i==="input"||i==="change")return fu(l)}function eM(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Gr=typeof Object.is=="function"?Object.is:eM;function nl(i,l){if(Gr(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var w=Object.keys(i),E=Object.keys(l);if(w.length!==E.length)return!1;for(E=0;E<w.length;E++){var j=w[E];if(!f.call(l,j)||!Gr(i[j],l[j]))return!1}return!0}function fx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function px(i,l){var w=fx(i);i=0;for(var E;w;){if(w.nodeType===3){if(E=i+w.textContent.length,i<=l&&E>=l)return{node:w,offset:l-i};i=E}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=fx(w)}}function hx(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?hx(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function mx(){for(var i=window,l=ye();l instanceof i.HTMLIFrameElement;){try{var w=typeof l.contentWindow.location.href=="string"}catch{w=!1}if(w)i=l.contentWindow;else break;l=ye(i.document)}return l}function Cg(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function tM(i){var l=mx(),w=i.focusedElem,E=i.selectionRange;if(l!==w&&w&&w.ownerDocument&&hx(w.ownerDocument.documentElement,w)){if(E!==null&&Cg(w)){if(l=E.start,i=E.end,i===void 0&&(i=l),"selectionStart"in w)w.selectionStart=l,w.selectionEnd=Math.min(i,w.value.length);else if(i=(l=w.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var j=w.textContent.length,A=Math.min(E.start,j);E=E.end===void 0?A:Math.min(E.end,j),!i.extend&&A>E&&(j=E,E=A,A=j),j=px(w,A);var W=px(w,E);j&&W&&(i.rangeCount!==1||i.anchorNode!==j.node||i.anchorOffset!==j.offset||i.focusNode!==W.node||i.focusOffset!==W.offset)&&(l=l.createRange(),l.setStart(j.node,j.offset),i.removeAllRanges(),A>E?(i.addRange(l),i.extend(W.node,W.offset)):(l.setEnd(W.node,W.offset),i.addRange(l)))}}for(l=[],i=w;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<l.length;w++)i=l[w],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var nM=c&&"documentMode"in document&&11>=document.documentMode,Ea=null,_g=null,rl=null,Rg=!1;function gx(i,l,w){var E=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;Rg||Ea==null||Ea!==ye(E)||(E=Ea,"selectionStart"in E&&Cg(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),rl&&nl(rl,E)||(rl=E,E=gu(_g,"onSelect"),0<E.length&&(l=new mg("onSelect","select",null,l,w),i.push({event:l,listeners:E}),l.target=Ea)))}function pu(i,l){var w={};return w[i.toLowerCase()]=l.toLowerCase(),w["Webkit"+i]="webkit"+l,w["Moz"+i]="moz"+l,w}var ka={animationend:pu("Animation","AnimationEnd"),animationiteration:pu("Animation","AnimationIteration"),animationstart:pu("Animation","AnimationStart"),transitionend:pu("Transition","TransitionEnd")},Tg={},vx={};c&&(vx=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function hu(i){if(Tg[i])return Tg[i];if(!ka[i])return i;var l=ka[i],w;for(w in l)if(l.hasOwnProperty(w)&&w in vx)return Tg[i]=l[w];return i}var yx=hu("animationend"),wx=hu("animationiteration"),Sx=hu("animationstart"),bx=hu("transitionend"),xx=new Map,Cx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(i,l){xx.set(i,l),o(l,[i])}for(var Eg=0;Eg<Cx.length;Eg++){var kg=Cx[Eg],rM=kg.toLowerCase(),sM=kg[0].toUpperCase()+kg.slice(1);Oo(rM,"on"+sM)}Oo(yx,"onAnimationEnd"),Oo(wx,"onAnimationIteration"),Oo(Sx,"onAnimationStart"),Oo("dblclick","onDoubleClick"),Oo("focusin","onFocus"),Oo("focusout","onBlur"),Oo(bx,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oM=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function _x(i,l,w){var E=i.type||"unknown-event";i.currentTarget=w,rP(E,l,void 0,i),i.currentTarget=null}function Rx(i,l){l=(l&4)!==0;for(var w=0;w<i.length;w++){var E=i[w],j=E.event;E=E.listeners;e:{var A=void 0;if(l)for(var W=E.length-1;0<=W;W--){var Y=E[W],J=Y.instance,de=Y.currentTarget;if(Y=Y.listener,J!==A&&j.isPropagationStopped())break e;_x(j,Y,de),A=J}else for(W=0;W<E.length;W++){if(Y=E[W],J=Y.instance,de=Y.currentTarget,Y=Y.listener,J!==A&&j.isPropagationStopped())break e;_x(j,Y,de),A=J}}}if(Jd)throw i=og,Jd=!1,og=null,i}function Lt(i,l){var w=l[Og];w===void 0&&(w=l[Og]=new Set);var E=i+"__bubble";w.has(E)||(Tx(l,i,2,!1),w.add(E))}function Ig(i,l,w){var E=0;l&&(E|=4),Tx(w,i,E,l)}var mu="_reactListening"+Math.random().toString(36).slice(2);function ol(i){if(!i[mu]){i[mu]=!0,r.forEach(function(w){w!=="selectionchange"&&(oM.has(w)||Ig(w,!1,i),Ig(w,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[mu]||(l[mu]=!0,Ig("selectionchange",!1,l))}}function Tx(i,l,w,E){switch(Yb(l)){case 1:var j=wP;break;case 4:j=SP;break;default:j=fg}w=j.bind(null,l,w,i),j=void 0,!sg||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(j=!0),E?j!==void 0?i.addEventListener(l,w,{capture:!0,passive:j}):i.addEventListener(l,w,!0):j!==void 0?i.addEventListener(l,w,{passive:j}):i.addEventListener(l,w,!1)}function Dg(i,l,w,E,j){var A=E;if((l&1)===0&&(l&2)===0&&E!==null)e:for(;;){if(E===null)return;var W=E.tag;if(W===3||W===4){var Y=E.stateNode.containerInfo;if(Y===j||Y.nodeType===8&&Y.parentNode===j)break;if(W===4)for(W=E.return;W!==null;){var J=W.tag;if((J===3||J===4)&&(J=W.stateNode.containerInfo,J===j||J.nodeType===8&&J.parentNode===j))return;W=W.return}for(;Y!==null;){if(W=xi(Y),W===null)return;if(J=W.tag,J===5||J===6){E=A=W;continue e}Y=Y.parentNode}}E=E.return}jb(function(){var de=A,Ce=zc(w),Re=[];e:{var Se=xx.get(i);if(Se!==void 0){var ze=mg,qe=i;switch(i){case"keypress":if(lu(w)===0)break e;case"keydown":case"keyup":ze=LP;break;case"focusin":qe="focus",ze=yg;break;case"focusout":qe="blur",ze=yg;break;case"beforeblur":case"afterblur":ze=yg;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=Jb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=CP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=$P;break;case yx:case wx:case Sx:ze=TP;break;case bx:ze=zP;break;case"scroll":ze=bP;break;case"wheel":ze=UP;break;case"copy":case"cut":case"paste":ze=kP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=ex}var Ke=(l&4)!==0,Jt=!Ke&&i==="scroll",ae=Ke?Se!==null?Se+"Capture":null:Se;Ke=[];for(var ee=de,ce;ee!==null;){ce=ee;var Te=ce.stateNode;if(ce.tag===5&&Te!==null&&(ce=Te,ae!==null&&(Te=Bc(ee,ae),Te!=null&&Ke.push(il(ee,Te,ce)))),Jt)break;ee=ee.return}0<Ke.length&&(Se=new ze(Se,qe,null,w,Ce),Re.push({event:Se,listeners:Ke}))}}if((l&7)===0){e:{if(Se=i==="mouseover"||i==="pointerover",ze=i==="mouseout"||i==="pointerout",Se&&w!==Ca&&(qe=w.relatedTarget||w.fromElement)&&(xi(qe)||qe[Xs]))break e;if((ze||Se)&&(Se=Ce.window===Ce?Ce:(Se=Ce.ownerDocument)?Se.defaultView||Se.parentWindow:window,ze?(qe=w.relatedTarget||w.toElement,ze=de,qe=qe?xi(qe):null,qe!==null&&(Jt=bi(qe),qe!==Jt||qe.tag!==5&&qe.tag!==6)&&(qe=null)):(ze=null,qe=de),ze!==qe)){if(Ke=Jb,Te="onMouseLeave",ae="onMouseEnter",ee="mouse",(i==="pointerout"||i==="pointerover")&&(Ke=ex,Te="onPointerLeave",ae="onPointerEnter",ee="pointer"),Jt=ze==null?Se:ja(ze),ce=qe==null?Se:ja(qe),Se=new Ke(Te,ee+"leave",ze,w,Ce),Se.target=Jt,Se.relatedTarget=ce,Te=null,xi(Ce)===de&&(Ke=new Ke(ae,ee+"enter",qe,w,Ce),Ke.target=ce,Ke.relatedTarget=Jt,Te=Ke),Jt=Te,ze&&qe)t:{for(Ke=ze,ae=qe,ee=0,ce=Ke;ce;ce=Ia(ce))ee++;for(ce=0,Te=ae;Te;Te=Ia(Te))ce++;for(;0<ee-ce;)Ke=Ia(Ke),ee--;for(;0<ce-ee;)ae=Ia(ae),ce--;for(;ee--;){if(Ke===ae||ae!==null&&Ke===ae.alternate)break t;Ke=Ia(Ke),ae=Ia(ae)}Ke=null}else Ke=null;ze!==null&&Ex(Re,Se,ze,Ke,!1),qe!==null&&Jt!==null&&Ex(Re,Jt,qe,Ke,!0)}}e:{if(Se=de?ja(de):window,ze=Se.nodeName&&Se.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Se.type==="file")var Xe=YP;else if(ix(Se))if(cx)Xe=ZP;else{Xe=QP;var rt=XP}else(ze=Se.nodeName)&&ze.toLowerCase()==="input"&&(Se.type==="checkbox"||Se.type==="radio")&&(Xe=JP);if(Xe&&(Xe=Xe(i,de))){ax(Re,Xe,w,Ce);break e}rt&&rt(i,Se,de),i==="focusout"&&(rt=Se._wrapperState)&&rt.controlled&&Se.type==="number"&&je(Se,"number",Se.value)}switch(rt=de?ja(de):window,i){case"focusin":(ix(rt)||rt.contentEditable==="true")&&(Ea=rt,_g=de,rl=null);break;case"focusout":rl=_g=Ea=null;break;case"mousedown":Rg=!0;break;case"contextmenu":case"mouseup":case"dragend":Rg=!1,gx(Re,w,Ce);break;case"selectionchange":if(nM)break;case"keydown":case"keyup":gx(Re,w,Ce)}var st;if(Sg)e:{switch(i){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Ta?sx(i,w)&&(it="onCompositionEnd"):i==="keydown"&&w.keyCode===229&&(it="onCompositionStart");it&&(tx&&w.locale!=="ko"&&(Ta||it!=="onCompositionStart"?it==="onCompositionEnd"&&Ta&&(st=Xb()):(Lo=Ce,hg="value"in Lo?Lo.value:Lo.textContent,Ta=!0)),rt=gu(de,it),0<rt.length&&(it=new Zb(it,i,null,w,Ce),Re.push({event:it,listeners:rt}),st?it.data=st:(st=ox(w),st!==null&&(it.data=st)))),(st=HP?WP(i,w):qP(i,w))&&(de=gu(de,"onBeforeInput"),0<de.length&&(Ce=new Zb("onBeforeInput","beforeinput",null,w,Ce),Re.push({event:Ce,listeners:de}),Ce.data=st))}Rx(Re,l)})}function il(i,l,w){return{instance:i,listener:l,currentTarget:w}}function gu(i,l){for(var w=l+"Capture",E=[];i!==null;){var j=i,A=j.stateNode;j.tag===5&&A!==null&&(j=A,A=Bc(i,w),A!=null&&E.unshift(il(i,A,j)),A=Bc(i,l),A!=null&&E.push(il(i,A,j))),i=i.return}return E}function Ia(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Ex(i,l,w,E,j){for(var A=l._reactName,W=[];w!==null&&w!==E;){var Y=w,J=Y.alternate,de=Y.stateNode;if(J!==null&&J===E)break;Y.tag===5&&de!==null&&(Y=de,j?(J=Bc(w,A),J!=null&&W.unshift(il(w,J,Y))):j||(J=Bc(w,A),J!=null&&W.push(il(w,J,Y)))),w=w.return}W.length!==0&&i.push({event:l,listeners:W})}var iM=/\r\n?/g,aM=/\u0000|\uFFFD/g;function kx(i){return(typeof i=="string"?i:""+i).replace(iM,`
`).replace(aM,"")}function vu(i,l,w){if(l=kx(l),kx(i)!==l&&w)throw Error(n(425))}function yu(){}var jg=null,Pg=null;function Mg(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ng=typeof setTimeout=="function"?setTimeout:void 0,cM=typeof clearTimeout=="function"?clearTimeout:void 0,Ix=typeof Promise=="function"?Promise:void 0,lM=typeof queueMicrotask=="function"?queueMicrotask:typeof Ix<"u"?function(i){return Ix.resolve(null).then(i).catch(dM)}:Ng;function dM(i){setTimeout(function(){throw i})}function Lg(i,l){var w=l,E=0;do{var j=w.nextSibling;if(i.removeChild(w),j&&j.nodeType===8)if(w=j.data,w==="/$"){if(E===0){i.removeChild(j),Xc(l);return}E--}else w!=="$"&&w!=="$?"&&w!=="$!"||E++;w=j}while(w);Xc(l)}function Ao(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function Dx(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var w=i.data;if(w==="$"||w==="$!"||w==="$?"){if(l===0)return i;l--}else w==="/$"&&l++}i=i.previousSibling}return null}var Da=Math.random().toString(36).slice(2),js="__reactFiber$"+Da,al="__reactProps$"+Da,Xs="__reactContainer$"+Da,Og="__reactEvents$"+Da,uM="__reactListeners$"+Da,fM="__reactHandles$"+Da;function xi(i){var l=i[js];if(l)return l;for(var w=i.parentNode;w;){if(l=w[Xs]||w[js]){if(w=l.alternate,l.child!==null||w!==null&&w.child!==null)for(i=Dx(i);i!==null;){if(w=i[js])return w;i=Dx(i)}return l}i=w,w=i.parentNode}return null}function cl(i){return i=i[js]||i[Xs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ja(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function wu(i){return i[al]||null}var Ag=[],Pa=-1;function $o(i){return{current:i}}function Ot(i){0>Pa||(i.current=Ag[Pa],Ag[Pa]=null,Pa--)}function Mt(i,l){Pa++,Ag[Pa]=i.current,i.current=l}var Fo={},Mn=$o(Fo),Yn=$o(!1),Ci=Fo;function Ma(i,l){var w=i.type.contextTypes;if(!w)return Fo;var E=i.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===l)return E.__reactInternalMemoizedMaskedChildContext;var j={},A;for(A in w)j[A]=l[A];return E&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=j),j}function Xn(i){return i=i.childContextTypes,i!=null}function Su(){Ot(Yn),Ot(Mn)}function jx(i,l,w){if(Mn.current!==Fo)throw Error(n(168));Mt(Mn,l),Mt(Yn,w)}function Px(i,l,w){var E=i.stateNode;if(l=l.childContextTypes,typeof E.getChildContext!="function")return w;E=E.getChildContext();for(var j in E)if(!(j in l))throw Error(n(108,X(i)||"Unknown",j));return z({},w,E)}function bu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Fo,Ci=Mn.current,Mt(Mn,i),Mt(Yn,Yn.current),!0}function Mx(i,l,w){var E=i.stateNode;if(!E)throw Error(n(169));w?(i=Px(i,l,Ci),E.__reactInternalMemoizedMergedChildContext=i,Ot(Yn),Ot(Mn),Mt(Mn,i)):Ot(Yn),Mt(Yn,w)}var Qs=null,xu=!1,$g=!1;function Nx(i){Qs===null?Qs=[i]:Qs.push(i)}function pM(i){xu=!0,Nx(i)}function zo(){if(!$g&&Qs!==null){$g=!0;var i=0,l=Tt;try{var w=Qs;for(Tt=1;i<w.length;i++){var E=w[i];do E=E(!0);while(E!==null)}Qs=null,xu=!1}catch(j){throw Qs!==null&&(Qs=Qs.slice(i+1)),Ob(ig,zo),j}finally{Tt=l,$g=!1}}return null}var Na=[],La=0,Cu=null,_u=0,jr=[],Pr=0,_i=null,Js=1,Zs="";function Ri(i,l){Na[La++]=_u,Na[La++]=Cu,Cu=i,_u=l}function Lx(i,l,w){jr[Pr++]=Js,jr[Pr++]=Zs,jr[Pr++]=_i,_i=i;var E=Js;i=Zs;var j=32-qr(E)-1;E&=~(1<<j),w+=1;var A=32-qr(l)+j;if(30<A){var W=j-j%5;A=(E&(1<<W)-1).toString(32),E>>=W,j-=W,Js=1<<32-qr(l)+j|w<<j|E,Zs=A+i}else Js=1<<A|w<<j|E,Zs=i}function Fg(i){i.return!==null&&(Ri(i,1),Lx(i,1,0))}function zg(i){for(;i===Cu;)Cu=Na[--La],Na[La]=null,_u=Na[--La],Na[La]=null;for(;i===_i;)_i=jr[--Pr],jr[Pr]=null,Zs=jr[--Pr],jr[Pr]=null,Js=jr[--Pr],jr[Pr]=null}var gr=null,vr=null,Ft=!1,Kr=null;function Ox(i,l){var w=Or(5,null,null,0);w.elementType="DELETED",w.stateNode=l,w.return=i,l=i.deletions,l===null?(i.deletions=[w],i.flags|=16):l.push(w)}function Ax(i,l){switch(i.tag){case 5:var w=i.type;return l=l.nodeType!==1||w.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,gr=i,vr=Ao(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,gr=i,vr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(w=_i!==null?{id:Js,overflow:Zs}:null,i.memoizedState={dehydrated:l,treeContext:w,retryLane:1073741824},w=Or(18,null,null,0),w.stateNode=l,w.return=i,i.child=w,gr=i,vr=null,!0):!1;default:return!1}}function Bg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Ug(i){if(Ft){var l=vr;if(l){var w=l;if(!Ax(i,l)){if(Bg(i))throw Error(n(418));l=Ao(w.nextSibling);var E=gr;l&&Ax(i,l)?Ox(E,w):(i.flags=i.flags&-4097|2,Ft=!1,gr=i)}}else{if(Bg(i))throw Error(n(418));i.flags=i.flags&-4097|2,Ft=!1,gr=i}}}function $x(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;gr=i}function Ru(i){if(i!==gr)return!1;if(!Ft)return $x(i),Ft=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!Mg(i.type,i.memoizedProps)),l&&(l=vr)){if(Bg(i))throw Fx(),Error(n(418));for(;l;)Ox(i,l),l=Ao(l.nextSibling)}if($x(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var w=i.data;if(w==="/$"){if(l===0){vr=Ao(i.nextSibling);break e}l--}else w!=="$"&&w!=="$!"&&w!=="$?"||l++}i=i.nextSibling}vr=null}}else vr=gr?Ao(i.stateNode.nextSibling):null;return!0}function Fx(){for(var i=vr;i;)i=Ao(i.nextSibling)}function Oa(){vr=gr=null,Ft=!1}function Vg(i){Kr===null?Kr=[i]:Kr.push(i)}var hM=v.ReactCurrentBatchConfig;function ll(i,l,w){if(i=w.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var E=w.stateNode}if(!E)throw Error(n(147,i));var j=E,A=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===A?l.ref:(l=function(W){var Y=j.refs;W===null?delete Y[A]:Y[A]=W},l._stringRef=A,l)}if(typeof i!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,i))}return i}function Tu(i,l){throw i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function zx(i){var l=i._init;return l(i._payload)}function Bx(i){function l(ae,ee){if(i){var ce=ae.deletions;ce===null?(ae.deletions=[ee],ae.flags|=16):ce.push(ee)}}function w(ae,ee){if(!i)return null;for(;ee!==null;)l(ae,ee),ee=ee.sibling;return null}function E(ae,ee){for(ae=new Map;ee!==null;)ee.key!==null?ae.set(ee.key,ee):ae.set(ee.index,ee),ee=ee.sibling;return ae}function j(ae,ee){return ae=Ko(ae,ee),ae.index=0,ae.sibling=null,ae}function A(ae,ee,ce){return ae.index=ce,i?(ce=ae.alternate,ce!==null?(ce=ce.index,ce<ee?(ae.flags|=2,ee):ce):(ae.flags|=2,ee)):(ae.flags|=1048576,ee)}function W(ae){return i&&ae.alternate===null&&(ae.flags|=2),ae}function Y(ae,ee,ce,Te){return ee===null||ee.tag!==6?(ee=Nv(ce,ae.mode,Te),ee.return=ae,ee):(ee=j(ee,ce),ee.return=ae,ee)}function J(ae,ee,ce,Te){var Xe=ce.type;return Xe===k?Ce(ae,ee,ce.props.children,Te,ce.key):ee!==null&&(ee.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===N&&zx(Xe)===ee.type)?(Te=j(ee,ce.props),Te.ref=ll(ae,ee,ce),Te.return=ae,Te):(Te=Xu(ce.type,ce.key,ce.props,null,ae.mode,Te),Te.ref=ll(ae,ee,ce),Te.return=ae,Te)}function de(ae,ee,ce,Te){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ce.containerInfo||ee.stateNode.implementation!==ce.implementation?(ee=Lv(ce,ae.mode,Te),ee.return=ae,ee):(ee=j(ee,ce.children||[]),ee.return=ae,ee)}function Ce(ae,ee,ce,Te,Xe){return ee===null||ee.tag!==7?(ee=Mi(ce,ae.mode,Te,Xe),ee.return=ae,ee):(ee=j(ee,ce),ee.return=ae,ee)}function Re(ae,ee,ce){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Nv(""+ee,ae.mode,ce),ee.return=ae,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case x:return ce=Xu(ee.type,ee.key,ee.props,null,ae.mode,ce),ce.ref=ll(ae,null,ee),ce.return=ae,ce;case _:return ee=Lv(ee,ae.mode,ce),ee.return=ae,ee;case N:var Te=ee._init;return Re(ae,Te(ee._payload),ce)}if(Ue(ee)||F(ee))return ee=Mi(ee,ae.mode,ce,null),ee.return=ae,ee;Tu(ae,ee)}return null}function Se(ae,ee,ce,Te){var Xe=ee!==null?ee.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Xe!==null?null:Y(ae,ee,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case x:return ce.key===Xe?J(ae,ee,ce,Te):null;case _:return ce.key===Xe?de(ae,ee,ce,Te):null;case N:return Xe=ce._init,Se(ae,ee,Xe(ce._payload),Te)}if(Ue(ce)||F(ce))return Xe!==null?null:Ce(ae,ee,ce,Te,null);Tu(ae,ce)}return null}function ze(ae,ee,ce,Te,Xe){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return ae=ae.get(ce)||null,Y(ee,ae,""+Te,Xe);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case x:return ae=ae.get(Te.key===null?ce:Te.key)||null,J(ee,ae,Te,Xe);case _:return ae=ae.get(Te.key===null?ce:Te.key)||null,de(ee,ae,Te,Xe);case N:var rt=Te._init;return ze(ae,ee,ce,rt(Te._payload),Xe)}if(Ue(Te)||F(Te))return ae=ae.get(ce)||null,Ce(ee,ae,Te,Xe,null);Tu(ee,Te)}return null}function qe(ae,ee,ce,Te){for(var Xe=null,rt=null,st=ee,it=ee=0,Sn=null;st!==null&&it<ce.length;it++){st.index>it?(Sn=st,st=null):Sn=st.sibling;var xt=Se(ae,st,ce[it],Te);if(xt===null){st===null&&(st=Sn);break}i&&st&&xt.alternate===null&&l(ae,st),ee=A(xt,ee,it),rt===null?Xe=xt:rt.sibling=xt,rt=xt,st=Sn}if(it===ce.length)return w(ae,st),Ft&&Ri(ae,it),Xe;if(st===null){for(;it<ce.length;it++)st=Re(ae,ce[it],Te),st!==null&&(ee=A(st,ee,it),rt===null?Xe=st:rt.sibling=st,rt=st);return Ft&&Ri(ae,it),Xe}for(st=E(ae,st);it<ce.length;it++)Sn=ze(st,ae,it,ce[it],Te),Sn!==null&&(i&&Sn.alternate!==null&&st.delete(Sn.key===null?it:Sn.key),ee=A(Sn,ee,it),rt===null?Xe=Sn:rt.sibling=Sn,rt=Sn);return i&&st.forEach(function(Yo){return l(ae,Yo)}),Ft&&Ri(ae,it),Xe}function Ke(ae,ee,ce,Te){var Xe=F(ce);if(typeof Xe!="function")throw Error(n(150));if(ce=Xe.call(ce),ce==null)throw Error(n(151));for(var rt=Xe=null,st=ee,it=ee=0,Sn=null,xt=ce.next();st!==null&&!xt.done;it++,xt=ce.next()){st.index>it?(Sn=st,st=null):Sn=st.sibling;var Yo=Se(ae,st,xt.value,Te);if(Yo===null){st===null&&(st=Sn);break}i&&st&&Yo.alternate===null&&l(ae,st),ee=A(Yo,ee,it),rt===null?Xe=Yo:rt.sibling=Yo,rt=Yo,st=Sn}if(xt.done)return w(ae,st),Ft&&Ri(ae,it),Xe;if(st===null){for(;!xt.done;it++,xt=ce.next())xt=Re(ae,xt.value,Te),xt!==null&&(ee=A(xt,ee,it),rt===null?Xe=xt:rt.sibling=xt,rt=xt);return Ft&&Ri(ae,it),Xe}for(st=E(ae,st);!xt.done;it++,xt=ce.next())xt=ze(st,ae,it,xt.value,Te),xt!==null&&(i&&xt.alternate!==null&&st.delete(xt.key===null?it:xt.key),ee=A(xt,ee,it),rt===null?Xe=xt:rt.sibling=xt,rt=xt);return i&&st.forEach(function(GM){return l(ae,GM)}),Ft&&Ri(ae,it),Xe}function Jt(ae,ee,ce,Te){if(typeof ce=="object"&&ce!==null&&ce.type===k&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case x:e:{for(var Xe=ce.key,rt=ee;rt!==null;){if(rt.key===Xe){if(Xe=ce.type,Xe===k){if(rt.tag===7){w(ae,rt.sibling),ee=j(rt,ce.props.children),ee.return=ae,ae=ee;break e}}else if(rt.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===N&&zx(Xe)===rt.type){w(ae,rt.sibling),ee=j(rt,ce.props),ee.ref=ll(ae,rt,ce),ee.return=ae,ae=ee;break e}w(ae,rt);break}else l(ae,rt);rt=rt.sibling}ce.type===k?(ee=Mi(ce.props.children,ae.mode,Te,ce.key),ee.return=ae,ae=ee):(Te=Xu(ce.type,ce.key,ce.props,null,ae.mode,Te),Te.ref=ll(ae,ee,ce),Te.return=ae,ae=Te)}return W(ae);case _:e:{for(rt=ce.key;ee!==null;){if(ee.key===rt)if(ee.tag===4&&ee.stateNode.containerInfo===ce.containerInfo&&ee.stateNode.implementation===ce.implementation){w(ae,ee.sibling),ee=j(ee,ce.children||[]),ee.return=ae,ae=ee;break e}else{w(ae,ee);break}else l(ae,ee);ee=ee.sibling}ee=Lv(ce,ae.mode,Te),ee.return=ae,ae=ee}return W(ae);case N:return rt=ce._init,Jt(ae,ee,rt(ce._payload),Te)}if(Ue(ce))return qe(ae,ee,ce,Te);if(F(ce))return Ke(ae,ee,ce,Te);Tu(ae,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,ee!==null&&ee.tag===6?(w(ae,ee.sibling),ee=j(ee,ce),ee.return=ae,ae=ee):(w(ae,ee),ee=Nv(ce,ae.mode,Te),ee.return=ae,ae=ee),W(ae)):w(ae,ee)}return Jt}var Aa=Bx(!0),Ux=Bx(!1),Eu=$o(null),ku=null,$a=null,Hg=null;function Wg(){Hg=$a=ku=null}function qg(i){var l=Eu.current;Ot(Eu),i._currentValue=l}function Gg(i,l,w){for(;i!==null;){var E=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,E!==null&&(E.childLanes|=l)):E!==null&&(E.childLanes&l)!==l&&(E.childLanes|=l),i===w)break;i=i.return}}function Fa(i,l){ku=i,Hg=$a=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(Qn=!0),i.firstContext=null)}function Mr(i){var l=i._currentValue;if(Hg!==i)if(i={context:i,memoizedValue:l,next:null},$a===null){if(ku===null)throw Error(n(308));$a=i,ku.dependencies={lanes:0,firstContext:i}}else $a=$a.next=i;return l}var Ti=null;function Kg(i){Ti===null?Ti=[i]:Ti.push(i)}function Vx(i,l,w,E){var j=l.interleaved;return j===null?(w.next=w,Kg(l)):(w.next=j.next,j.next=w),l.interleaved=w,eo(i,E)}function eo(i,l){i.lanes|=l;var w=i.alternate;for(w!==null&&(w.lanes|=l),w=i,i=i.return;i!==null;)i.childLanes|=l,w=i.alternate,w!==null&&(w.childLanes|=l),w=i,i=i.return;return w.tag===3?w.stateNode:null}var Bo=!1;function Yg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hx(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function to(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function Uo(i,l,w){var E=i.updateQueue;if(E===null)return null;if(E=E.shared,(yt&2)!==0){var j=E.pending;return j===null?l.next=l:(l.next=j.next,j.next=l),E.pending=l,eo(i,w)}return j=E.interleaved,j===null?(l.next=l,Kg(E)):(l.next=j.next,j.next=l),E.interleaved=l,eo(i,w)}function Iu(i,l,w){if(l=l.updateQueue,l!==null&&(l=l.shared,(w&4194240)!==0)){var E=l.lanes;E&=i.pendingLanes,w|=E,l.lanes=w,lg(i,w)}}function Wx(i,l){var w=i.updateQueue,E=i.alternate;if(E!==null&&(E=E.updateQueue,w===E)){var j=null,A=null;if(w=w.firstBaseUpdate,w!==null){do{var W={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};A===null?j=A=W:A=A.next=W,w=w.next}while(w!==null);A===null?j=A=l:A=A.next=l}else j=A=l;w={baseState:E.baseState,firstBaseUpdate:j,lastBaseUpdate:A,shared:E.shared,effects:E.effects},i.updateQueue=w;return}i=w.lastBaseUpdate,i===null?w.firstBaseUpdate=l:i.next=l,w.lastBaseUpdate=l}function Du(i,l,w,E){var j=i.updateQueue;Bo=!1;var A=j.firstBaseUpdate,W=j.lastBaseUpdate,Y=j.shared.pending;if(Y!==null){j.shared.pending=null;var J=Y,de=J.next;J.next=null,W===null?A=de:W.next=de,W=J;var Ce=i.alternate;Ce!==null&&(Ce=Ce.updateQueue,Y=Ce.lastBaseUpdate,Y!==W&&(Y===null?Ce.firstBaseUpdate=de:Y.next=de,Ce.lastBaseUpdate=J))}if(A!==null){var Re=j.baseState;W=0,Ce=de=J=null,Y=A;do{var Se=Y.lane,ze=Y.eventTime;if((E&Se)===Se){Ce!==null&&(Ce=Ce.next={eventTime:ze,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var qe=i,Ke=Y;switch(Se=l,ze=w,Ke.tag){case 1:if(qe=Ke.payload,typeof qe=="function"){Re=qe.call(ze,Re,Se);break e}Re=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Ke.payload,Se=typeof qe=="function"?qe.call(ze,Re,Se):qe,Se==null)break e;Re=z({},Re,Se);break e;case 2:Bo=!0}}Y.callback!==null&&Y.lane!==0&&(i.flags|=64,Se=j.effects,Se===null?j.effects=[Y]:Se.push(Y))}else ze={eventTime:ze,lane:Se,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Ce===null?(de=Ce=ze,J=Re):Ce=Ce.next=ze,W|=Se;if(Y=Y.next,Y===null){if(Y=j.shared.pending,Y===null)break;Se=Y,Y=Se.next,Se.next=null,j.lastBaseUpdate=Se,j.shared.pending=null}}while(!0);if(Ce===null&&(J=Re),j.baseState=J,j.firstBaseUpdate=de,j.lastBaseUpdate=Ce,l=j.shared.interleaved,l!==null){j=l;do W|=j.lane,j=j.next;while(j!==l)}else A===null&&(j.shared.lanes=0);Ii|=W,i.lanes=W,i.memoizedState=Re}}function qx(i,l,w){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var E=i[l],j=E.callback;if(j!==null){if(E.callback=null,E=w,typeof j!="function")throw Error(n(191,j));j.call(E)}}}var dl={},Ps=$o(dl),ul=$o(dl),fl=$o(dl);function Ei(i){if(i===dl)throw Error(n(174));return i}function Xg(i,l){switch(Mt(fl,l),Mt(ul,i),Mt(Ps,dl),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Ye(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=Ye(l,i)}Ot(Ps),Mt(Ps,l)}function za(){Ot(Ps),Ot(ul),Ot(fl)}function Gx(i){Ei(fl.current);var l=Ei(Ps.current),w=Ye(l,i.type);l!==w&&(Mt(ul,i),Mt(Ps,w))}function Qg(i){ul.current===i&&(Ot(Ps),Ot(ul))}var Bt=$o(0);function ju(i){for(var l=i;l!==null;){if(l.tag===13){var w=l.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Jg=[];function Zg(){for(var i=0;i<Jg.length;i++)Jg[i]._workInProgressVersionPrimary=null;Jg.length=0}var Pu=v.ReactCurrentDispatcher,ev=v.ReactCurrentBatchConfig,ki=0,Ut=null,fn=null,yn=null,Mu=!1,pl=!1,hl=0,mM=0;function Nn(){throw Error(n(321))}function tv(i,l){if(l===null)return!1;for(var w=0;w<l.length&&w<i.length;w++)if(!Gr(i[w],l[w]))return!1;return!0}function nv(i,l,w,E,j,A){if(ki=A,Ut=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Pu.current=i===null||i.memoizedState===null?wM:SM,i=w(E,j),pl){A=0;do{if(pl=!1,hl=0,25<=A)throw Error(n(301));A+=1,yn=fn=null,l.updateQueue=null,Pu.current=bM,i=w(E,j)}while(pl)}if(Pu.current=Ou,l=fn!==null&&fn.next!==null,ki=0,yn=fn=Ut=null,Mu=!1,l)throw Error(n(300));return i}function rv(){var i=hl!==0;return hl=0,i}function Ms(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Ut.memoizedState=yn=i:yn=yn.next=i,yn}function Nr(){if(fn===null){var i=Ut.alternate;i=i!==null?i.memoizedState:null}else i=fn.next;var l=yn===null?Ut.memoizedState:yn.next;if(l!==null)yn=l,fn=i;else{if(i===null)throw Error(n(310));fn=i,i={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},yn===null?Ut.memoizedState=yn=i:yn=yn.next=i}return yn}function ml(i,l){return typeof l=="function"?l(i):l}function sv(i){var l=Nr(),w=l.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=i;var E=fn,j=E.baseQueue,A=w.pending;if(A!==null){if(j!==null){var W=j.next;j.next=A.next,A.next=W}E.baseQueue=j=A,w.pending=null}if(j!==null){A=j.next,E=E.baseState;var Y=W=null,J=null,de=A;do{var Ce=de.lane;if((ki&Ce)===Ce)J!==null&&(J=J.next={lane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),E=de.hasEagerState?de.eagerState:i(E,de.action);else{var Re={lane:Ce,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null};J===null?(Y=J=Re,W=E):J=J.next=Re,Ut.lanes|=Ce,Ii|=Ce}de=de.next}while(de!==null&&de!==A);J===null?W=E:J.next=Y,Gr(E,l.memoizedState)||(Qn=!0),l.memoizedState=E,l.baseState=W,l.baseQueue=J,w.lastRenderedState=E}if(i=w.interleaved,i!==null){j=i;do A=j.lane,Ut.lanes|=A,Ii|=A,j=j.next;while(j!==i)}else j===null&&(w.lanes=0);return[l.memoizedState,w.dispatch]}function ov(i){var l=Nr(),w=l.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=i;var E=w.dispatch,j=w.pending,A=l.memoizedState;if(j!==null){w.pending=null;var W=j=j.next;do A=i(A,W.action),W=W.next;while(W!==j);Gr(A,l.memoizedState)||(Qn=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),w.lastRenderedState=A}return[A,E]}function Kx(){}function Yx(i,l){var w=Ut,E=Nr(),j=l(),A=!Gr(E.memoizedState,j);if(A&&(E.memoizedState=j,Qn=!0),E=E.queue,iv(Jx.bind(null,w,E,i),[i]),E.getSnapshot!==l||A||yn!==null&&yn.memoizedState.tag&1){if(w.flags|=2048,gl(9,Qx.bind(null,w,E,j,l),void 0,null),wn===null)throw Error(n(349));(ki&30)!==0||Xx(w,l,j)}return j}function Xx(i,l,w){i.flags|=16384,i={getSnapshot:l,value:w},l=Ut.updateQueue,l===null?(l={lastEffect:null,stores:null},Ut.updateQueue=l,l.stores=[i]):(w=l.stores,w===null?l.stores=[i]:w.push(i))}function Qx(i,l,w,E){l.value=w,l.getSnapshot=E,Zx(l)&&e1(i)}function Jx(i,l,w){return w(function(){Zx(l)&&e1(i)})}function Zx(i){var l=i.getSnapshot;i=i.value;try{var w=l();return!Gr(i,w)}catch{return!0}}function e1(i){var l=eo(i,1);l!==null&&Jr(l,i,1,-1)}function t1(i){var l=Ms();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:i},l.queue=i,i=i.dispatch=yM.bind(null,Ut,i),[l.memoizedState,i]}function gl(i,l,w,E){return i={tag:i,create:l,destroy:w,deps:E,next:null},l=Ut.updateQueue,l===null?(l={lastEffect:null,stores:null},Ut.updateQueue=l,l.lastEffect=i.next=i):(w=l.lastEffect,w===null?l.lastEffect=i.next=i:(E=w.next,w.next=i,i.next=E,l.lastEffect=i)),i}function n1(){return Nr().memoizedState}function Nu(i,l,w,E){var j=Ms();Ut.flags|=i,j.memoizedState=gl(1|l,w,void 0,E===void 0?null:E)}function Lu(i,l,w,E){var j=Nr();E=E===void 0?null:E;var A=void 0;if(fn!==null){var W=fn.memoizedState;if(A=W.destroy,E!==null&&tv(E,W.deps)){j.memoizedState=gl(l,w,A,E);return}}Ut.flags|=i,j.memoizedState=gl(1|l,w,A,E)}function r1(i,l){return Nu(8390656,8,i,l)}function iv(i,l){return Lu(2048,8,i,l)}function s1(i,l){return Lu(4,2,i,l)}function o1(i,l){return Lu(4,4,i,l)}function i1(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function a1(i,l,w){return w=w!=null?w.concat([i]):null,Lu(4,4,i1.bind(null,l,i),w)}function av(){}function c1(i,l){var w=Nr();l=l===void 0?null:l;var E=w.memoizedState;return E!==null&&l!==null&&tv(l,E[1])?E[0]:(w.memoizedState=[i,l],i)}function l1(i,l){var w=Nr();l=l===void 0?null:l;var E=w.memoizedState;return E!==null&&l!==null&&tv(l,E[1])?E[0]:(i=i(),w.memoizedState=[i,l],i)}function d1(i,l,w){return(ki&21)===0?(i.baseState&&(i.baseState=!1,Qn=!0),i.memoizedState=w):(Gr(w,l)||(w=zb(),Ut.lanes|=w,Ii|=w,i.baseState=!0),l)}function gM(i,l){var w=Tt;Tt=w!==0&&4>w?w:4,i(!0);var E=ev.transition;ev.transition={};try{i(!1),l()}finally{Tt=w,ev.transition=E}}function u1(){return Nr().memoizedState}function vM(i,l,w){var E=qo(i);if(w={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null},f1(i))p1(l,w);else if(w=Vx(i,l,w,E),w!==null){var j=Hn();Jr(w,i,E,j),h1(w,l,E)}}function yM(i,l,w){var E=qo(i),j={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null};if(f1(i))p1(l,j);else{var A=i.alternate;if(i.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var W=l.lastRenderedState,Y=A(W,w);if(j.hasEagerState=!0,j.eagerState=Y,Gr(Y,W)){var J=l.interleaved;J===null?(j.next=j,Kg(l)):(j.next=J.next,J.next=j),l.interleaved=j;return}}catch{}finally{}w=Vx(i,l,j,E),w!==null&&(j=Hn(),Jr(w,i,E,j),h1(w,l,E))}}function f1(i){var l=i.alternate;return i===Ut||l!==null&&l===Ut}function p1(i,l){pl=Mu=!0;var w=i.pending;w===null?l.next=l:(l.next=w.next,w.next=l),i.pending=l}function h1(i,l,w){if((w&4194240)!==0){var E=l.lanes;E&=i.pendingLanes,w|=E,l.lanes=w,lg(i,w)}}var Ou={readContext:Mr,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},wM={readContext:Mr,useCallback:function(i,l){return Ms().memoizedState=[i,l===void 0?null:l],i},useContext:Mr,useEffect:r1,useImperativeHandle:function(i,l,w){return w=w!=null?w.concat([i]):null,Nu(4194308,4,i1.bind(null,l,i),w)},useLayoutEffect:function(i,l){return Nu(4194308,4,i,l)},useInsertionEffect:function(i,l){return Nu(4,2,i,l)},useMemo:function(i,l){var w=Ms();return l=l===void 0?null:l,i=i(),w.memoizedState=[i,l],i},useReducer:function(i,l,w){var E=Ms();return l=w!==void 0?w(l):l,E.memoizedState=E.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},E.queue=i,i=i.dispatch=vM.bind(null,Ut,i),[E.memoizedState,i]},useRef:function(i){var l=Ms();return i={current:i},l.memoizedState=i},useState:t1,useDebugValue:av,useDeferredValue:function(i){return Ms().memoizedState=i},useTransition:function(){var i=t1(!1),l=i[0];return i=gM.bind(null,i[1]),Ms().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,w){var E=Ut,j=Ms();if(Ft){if(w===void 0)throw Error(n(407));w=w()}else{if(w=l(),wn===null)throw Error(n(349));(ki&30)!==0||Xx(E,l,w)}j.memoizedState=w;var A={value:w,getSnapshot:l};return j.queue=A,r1(Jx.bind(null,E,A,i),[i]),E.flags|=2048,gl(9,Qx.bind(null,E,A,w,l),void 0,null),w},useId:function(){var i=Ms(),l=wn.identifierPrefix;if(Ft){var w=Zs,E=Js;w=(E&~(1<<32-qr(E)-1)).toString(32)+w,l=":"+l+"R"+w,w=hl++,0<w&&(l+="H"+w.toString(32)),l+=":"}else w=mM++,l=":"+l+"r"+w.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},SM={readContext:Mr,useCallback:c1,useContext:Mr,useEffect:iv,useImperativeHandle:a1,useInsertionEffect:s1,useLayoutEffect:o1,useMemo:l1,useReducer:sv,useRef:n1,useState:function(){return sv(ml)},useDebugValue:av,useDeferredValue:function(i){var l=Nr();return d1(l,fn.memoizedState,i)},useTransition:function(){var i=sv(ml)[0],l=Nr().memoizedState;return[i,l]},useMutableSource:Kx,useSyncExternalStore:Yx,useId:u1,unstable_isNewReconciler:!1},bM={readContext:Mr,useCallback:c1,useContext:Mr,useEffect:iv,useImperativeHandle:a1,useInsertionEffect:s1,useLayoutEffect:o1,useMemo:l1,useReducer:ov,useRef:n1,useState:function(){return ov(ml)},useDebugValue:av,useDeferredValue:function(i){var l=Nr();return fn===null?l.memoizedState=i:d1(l,fn.memoizedState,i)},useTransition:function(){var i=ov(ml)[0],l=Nr().memoizedState;return[i,l]},useMutableSource:Kx,useSyncExternalStore:Yx,useId:u1,unstable_isNewReconciler:!1};function Yr(i,l){if(i&&i.defaultProps){l=z({},l),i=i.defaultProps;for(var w in i)l[w]===void 0&&(l[w]=i[w]);return l}return l}function cv(i,l,w,E){l=i.memoizedState,w=w(E,l),w=w==null?l:z({},l,w),i.memoizedState=w,i.lanes===0&&(i.updateQueue.baseState=w)}var Au={isMounted:function(i){return(i=i._reactInternals)?bi(i)===i:!1},enqueueSetState:function(i,l,w){i=i._reactInternals;var E=Hn(),j=qo(i),A=to(E,j);A.payload=l,w!=null&&(A.callback=w),l=Uo(i,A,j),l!==null&&(Jr(l,i,j,E),Iu(l,i,j))},enqueueReplaceState:function(i,l,w){i=i._reactInternals;var E=Hn(),j=qo(i),A=to(E,j);A.tag=1,A.payload=l,w!=null&&(A.callback=w),l=Uo(i,A,j),l!==null&&(Jr(l,i,j,E),Iu(l,i,j))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var w=Hn(),E=qo(i),j=to(w,E);j.tag=2,l!=null&&(j.callback=l),l=Uo(i,j,E),l!==null&&(Jr(l,i,E,w),Iu(l,i,E))}};function m1(i,l,w,E,j,A,W){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(E,A,W):l.prototype&&l.prototype.isPureReactComponent?!nl(w,E)||!nl(j,A):!0}function g1(i,l,w){var E=!1,j=Fo,A=l.contextType;return typeof A=="object"&&A!==null?A=Mr(A):(j=Xn(l)?Ci:Mn.current,E=l.contextTypes,A=(E=E!=null)?Ma(i,j):Fo),l=new l(w,A),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Au,i.stateNode=l,l._reactInternals=i,E&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=j,i.__reactInternalMemoizedMaskedChildContext=A),l}function v1(i,l,w,E){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(w,E),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(w,E),l.state!==i&&Au.enqueueReplaceState(l,l.state,null)}function lv(i,l,w,E){var j=i.stateNode;j.props=w,j.state=i.memoizedState,j.refs={},Yg(i);var A=l.contextType;typeof A=="object"&&A!==null?j.context=Mr(A):(A=Xn(l)?Ci:Mn.current,j.context=Ma(i,A)),j.state=i.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(cv(i,l,A,w),j.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(l=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),l!==j.state&&Au.enqueueReplaceState(j,j.state,null),Du(i,w,j,E),j.state=i.memoizedState),typeof j.componentDidMount=="function"&&(i.flags|=4194308)}function Ba(i,l){try{var w="",E=l;do w+=Q(E),E=E.return;while(E);var j=w}catch(A){j=`
Error generating stack: `+A.message+`
`+A.stack}return{value:i,source:l,stack:j,digest:null}}function dv(i,l,w){return{value:i,source:null,stack:w??null,digest:l??null}}function uv(i,l){try{console.error(l.value)}catch(w){setTimeout(function(){throw w})}}var xM=typeof WeakMap=="function"?WeakMap:Map;function y1(i,l,w){w=to(-1,w),w.tag=3,w.payload={element:null};var E=l.value;return w.callback=function(){Hu||(Hu=!0,Tv=E),uv(i,l)},w}function w1(i,l,w){w=to(-1,w),w.tag=3;var E=i.type.getDerivedStateFromError;if(typeof E=="function"){var j=l.value;w.payload=function(){return E(j)},w.callback=function(){uv(i,l)}}var A=i.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(w.callback=function(){uv(i,l),typeof E!="function"&&(Ho===null?Ho=new Set([this]):Ho.add(this));var W=l.stack;this.componentDidCatch(l.value,{componentStack:W!==null?W:""})}),w}function S1(i,l,w){var E=i.pingCache;if(E===null){E=i.pingCache=new xM;var j=new Set;E.set(l,j)}else j=E.get(l),j===void 0&&(j=new Set,E.set(l,j));j.has(w)||(j.add(w),i=OM.bind(null,i,l,w),l.then(i,i))}function b1(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function x1(i,l,w,E,j){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(l=to(-1,1),l.tag=2,Uo(w,l,1))),w.lanes|=1),i):(i.flags|=65536,i.lanes=j,i)}var CM=v.ReactCurrentOwner,Qn=!1;function Vn(i,l,w,E){l.child=i===null?Ux(l,null,w,E):Aa(l,i.child,w,E)}function C1(i,l,w,E,j){w=w.render;var A=l.ref;return Fa(l,j),E=nv(i,l,w,E,A,j),w=rv(),i!==null&&!Qn?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~j,no(i,l,j)):(Ft&&w&&Fg(l),l.flags|=1,Vn(i,l,E,j),l.child)}function _1(i,l,w,E,j){if(i===null){var A=w.type;return typeof A=="function"&&!Mv(A)&&A.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(l.tag=15,l.type=A,R1(i,l,A,E,j)):(i=Xu(w.type,null,E,l,l.mode,j),i.ref=l.ref,i.return=l,l.child=i)}if(A=i.child,(i.lanes&j)===0){var W=A.memoizedProps;if(w=w.compare,w=w!==null?w:nl,w(W,E)&&i.ref===l.ref)return no(i,l,j)}return l.flags|=1,i=Ko(A,E),i.ref=l.ref,i.return=l,l.child=i}function R1(i,l,w,E,j){if(i!==null){var A=i.memoizedProps;if(nl(A,E)&&i.ref===l.ref)if(Qn=!1,l.pendingProps=E=A,(i.lanes&j)!==0)(i.flags&131072)!==0&&(Qn=!0);else return l.lanes=i.lanes,no(i,l,j)}return fv(i,l,w,E,j)}function T1(i,l,w){var E=l.pendingProps,j=E.children,A=i!==null?i.memoizedState:null;if(E.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(Va,yr),yr|=w;else{if((w&1073741824)===0)return i=A!==null?A.baseLanes|w:w,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,Mt(Va,yr),yr|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=A!==null?A.baseLanes:w,Mt(Va,yr),yr|=E}else A!==null?(E=A.baseLanes|w,l.memoizedState=null):E=w,Mt(Va,yr),yr|=E;return Vn(i,l,j,w),l.child}function E1(i,l){var w=l.ref;(i===null&&w!==null||i!==null&&i.ref!==w)&&(l.flags|=512,l.flags|=2097152)}function fv(i,l,w,E,j){var A=Xn(w)?Ci:Mn.current;return A=Ma(l,A),Fa(l,j),w=nv(i,l,w,E,A,j),E=rv(),i!==null&&!Qn?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~j,no(i,l,j)):(Ft&&E&&Fg(l),l.flags|=1,Vn(i,l,w,j),l.child)}function k1(i,l,w,E,j){if(Xn(w)){var A=!0;bu(l)}else A=!1;if(Fa(l,j),l.stateNode===null)Fu(i,l),g1(l,w,E),lv(l,w,E,j),E=!0;else if(i===null){var W=l.stateNode,Y=l.memoizedProps;W.props=Y;var J=W.context,de=w.contextType;typeof de=="object"&&de!==null?de=Mr(de):(de=Xn(w)?Ci:Mn.current,de=Ma(l,de));var Ce=w.getDerivedStateFromProps,Re=typeof Ce=="function"||typeof W.getSnapshotBeforeUpdate=="function";Re||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(Y!==E||J!==de)&&v1(l,W,E,de),Bo=!1;var Se=l.memoizedState;W.state=Se,Du(l,E,W,j),J=l.memoizedState,Y!==E||Se!==J||Yn.current||Bo?(typeof Ce=="function"&&(cv(l,w,Ce,E),J=l.memoizedState),(Y=Bo||m1(l,w,Y,E,Se,J,de))?(Re||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(l.flags|=4194308)):(typeof W.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=E,l.memoizedState=J),W.props=E,W.state=J,W.context=de,E=Y):(typeof W.componentDidMount=="function"&&(l.flags|=4194308),E=!1)}else{W=l.stateNode,Hx(i,l),Y=l.memoizedProps,de=l.type===l.elementType?Y:Yr(l.type,Y),W.props=de,Re=l.pendingProps,Se=W.context,J=w.contextType,typeof J=="object"&&J!==null?J=Mr(J):(J=Xn(w)?Ci:Mn.current,J=Ma(l,J));var ze=w.getDerivedStateFromProps;(Ce=typeof ze=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(Y!==Re||Se!==J)&&v1(l,W,E,J),Bo=!1,Se=l.memoizedState,W.state=Se,Du(l,E,W,j);var qe=l.memoizedState;Y!==Re||Se!==qe||Yn.current||Bo?(typeof ze=="function"&&(cv(l,w,ze,E),qe=l.memoizedState),(de=Bo||m1(l,w,de,E,Se,qe,J)||!1)?(Ce||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(E,qe,J),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(E,qe,J)),typeof W.componentDidUpdate=="function"&&(l.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof W.componentDidUpdate!="function"||Y===i.memoizedProps&&Se===i.memoizedState||(l.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||Y===i.memoizedProps&&Se===i.memoizedState||(l.flags|=1024),l.memoizedProps=E,l.memoizedState=qe),W.props=E,W.state=qe,W.context=J,E=de):(typeof W.componentDidUpdate!="function"||Y===i.memoizedProps&&Se===i.memoizedState||(l.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||Y===i.memoizedProps&&Se===i.memoizedState||(l.flags|=1024),E=!1)}return pv(i,l,w,E,A,j)}function pv(i,l,w,E,j,A){E1(i,l);var W=(l.flags&128)!==0;if(!E&&!W)return j&&Mx(l,w,!1),no(i,l,A);E=l.stateNode,CM.current=l;var Y=W&&typeof w.getDerivedStateFromError!="function"?null:E.render();return l.flags|=1,i!==null&&W?(l.child=Aa(l,i.child,null,A),l.child=Aa(l,null,Y,A)):Vn(i,l,Y,A),l.memoizedState=E.state,j&&Mx(l,w,!0),l.child}function I1(i){var l=i.stateNode;l.pendingContext?jx(i,l.pendingContext,l.pendingContext!==l.context):l.context&&jx(i,l.context,!1),Xg(i,l.containerInfo)}function D1(i,l,w,E,j){return Oa(),Vg(j),l.flags|=256,Vn(i,l,w,E),l.child}var hv={dehydrated:null,treeContext:null,retryLane:0};function mv(i){return{baseLanes:i,cachePool:null,transitions:null}}function j1(i,l,w){var E=l.pendingProps,j=Bt.current,A=!1,W=(l.flags&128)!==0,Y;if((Y=W)||(Y=i!==null&&i.memoizedState===null?!1:(j&2)!==0),Y?(A=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(j|=1),Mt(Bt,j&1),i===null)return Ug(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(W=E.children,i=E.fallback,A?(E=l.mode,A=l.child,W={mode:"hidden",children:W},(E&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=W):A=Qu(W,E,0,null),i=Mi(i,E,w,null),A.return=l,i.return=l,A.sibling=i,l.child=A,l.child.memoizedState=mv(w),l.memoizedState=hv,i):gv(l,W));if(j=i.memoizedState,j!==null&&(Y=j.dehydrated,Y!==null))return _M(i,l,W,E,Y,j,w);if(A){A=E.fallback,W=l.mode,j=i.child,Y=j.sibling;var J={mode:"hidden",children:E.children};return(W&1)===0&&l.child!==j?(E=l.child,E.childLanes=0,E.pendingProps=J,l.deletions=null):(E=Ko(j,J),E.subtreeFlags=j.subtreeFlags&14680064),Y!==null?A=Ko(Y,A):(A=Mi(A,W,w,null),A.flags|=2),A.return=l,E.return=l,E.sibling=A,l.child=E,E=A,A=l.child,W=i.child.memoizedState,W=W===null?mv(w):{baseLanes:W.baseLanes|w,cachePool:null,transitions:W.transitions},A.memoizedState=W,A.childLanes=i.childLanes&~w,l.memoizedState=hv,E}return A=i.child,i=A.sibling,E=Ko(A,{mode:"visible",children:E.children}),(l.mode&1)===0&&(E.lanes=w),E.return=l,E.sibling=null,i!==null&&(w=l.deletions,w===null?(l.deletions=[i],l.flags|=16):w.push(i)),l.child=E,l.memoizedState=null,E}function gv(i,l){return l=Qu({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function $u(i,l,w,E){return E!==null&&Vg(E),Aa(l,i.child,null,w),i=gv(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function _M(i,l,w,E,j,A,W){if(w)return l.flags&256?(l.flags&=-257,E=dv(Error(n(422))),$u(i,l,W,E)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(A=E.fallback,j=l.mode,E=Qu({mode:"visible",children:E.children},j,0,null),A=Mi(A,j,W,null),A.flags|=2,E.return=l,A.return=l,E.sibling=A,l.child=E,(l.mode&1)!==0&&Aa(l,i.child,null,W),l.child.memoizedState=mv(W),l.memoizedState=hv,A);if((l.mode&1)===0)return $u(i,l,W,null);if(j.data==="$!"){if(E=j.nextSibling&&j.nextSibling.dataset,E)var Y=E.dgst;return E=Y,A=Error(n(419)),E=dv(A,E,void 0),$u(i,l,W,E)}if(Y=(W&i.childLanes)!==0,Qn||Y){if(E=wn,E!==null){switch(W&-W){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(E.suspendedLanes|W))!==0?0:j,j!==0&&j!==A.retryLane&&(A.retryLane=j,eo(i,j),Jr(E,i,j,-1))}return Pv(),E=dv(Error(n(421))),$u(i,l,W,E)}return j.data==="$?"?(l.flags|=128,l.child=i.child,l=AM.bind(null,i),j._reactRetry=l,null):(i=A.treeContext,vr=Ao(j.nextSibling),gr=l,Ft=!0,Kr=null,i!==null&&(jr[Pr++]=Js,jr[Pr++]=Zs,jr[Pr++]=_i,Js=i.id,Zs=i.overflow,_i=l),l=gv(l,E.children),l.flags|=4096,l)}function P1(i,l,w){i.lanes|=l;var E=i.alternate;E!==null&&(E.lanes|=l),Gg(i.return,l,w)}function vv(i,l,w,E,j){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:E,tail:w,tailMode:j}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=E,A.tail=w,A.tailMode=j)}function M1(i,l,w){var E=l.pendingProps,j=E.revealOrder,A=E.tail;if(Vn(i,l,E.children,w),E=Bt.current,(E&2)!==0)E=E&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&P1(i,w,l);else if(i.tag===19)P1(i,w,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}E&=1}if(Mt(Bt,E),(l.mode&1)===0)l.memoizedState=null;else switch(j){case"forwards":for(w=l.child,j=null;w!==null;)i=w.alternate,i!==null&&ju(i)===null&&(j=w),w=w.sibling;w=j,w===null?(j=l.child,l.child=null):(j=w.sibling,w.sibling=null),vv(l,!1,j,w,A);break;case"backwards":for(w=null,j=l.child,l.child=null;j!==null;){if(i=j.alternate,i!==null&&ju(i)===null){l.child=j;break}i=j.sibling,j.sibling=w,w=j,j=i}vv(l,!0,w,null,A);break;case"together":vv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Fu(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function no(i,l,w){if(i!==null&&(l.dependencies=i.dependencies),Ii|=l.lanes,(w&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,w=Ko(i,i.pendingProps),l.child=w,w.return=l;i.sibling!==null;)i=i.sibling,w=w.sibling=Ko(i,i.pendingProps),w.return=l;w.sibling=null}return l.child}function RM(i,l,w){switch(l.tag){case 3:I1(l),Oa();break;case 5:Gx(l);break;case 1:Xn(l.type)&&bu(l);break;case 4:Xg(l,l.stateNode.containerInfo);break;case 10:var E=l.type._context,j=l.memoizedProps.value;Mt(Eu,E._currentValue),E._currentValue=j;break;case 13:if(E=l.memoizedState,E!==null)return E.dehydrated!==null?(Mt(Bt,Bt.current&1),l.flags|=128,null):(w&l.child.childLanes)!==0?j1(i,l,w):(Mt(Bt,Bt.current&1),i=no(i,l,w),i!==null?i.sibling:null);Mt(Bt,Bt.current&1);break;case 19:if(E=(w&l.childLanes)!==0,(i.flags&128)!==0){if(E)return M1(i,l,w);l.flags|=128}if(j=l.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Mt(Bt,Bt.current),E)break;return null;case 22:case 23:return l.lanes=0,T1(i,l,w)}return no(i,l,w)}var N1,yv,L1,O1;N1=function(i,l){for(var w=l.child;w!==null;){if(w.tag===5||w.tag===6)i.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===l)break;for(;w.sibling===null;){if(w.return===null||w.return===l)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},yv=function(){},L1=function(i,l,w,E){var j=i.memoizedProps;if(j!==E){i=l.stateNode,Ei(Ps.current);var A=null;switch(w){case"input":j=Ee(i,j),E=Ee(i,E),A=[];break;case"select":j=z({},j,{value:void 0}),E=z({},E,{value:void 0}),A=[];break;case"textarea":j=Ze(i,j),E=Ze(i,E),A=[];break;default:typeof j.onClick!="function"&&typeof E.onClick=="function"&&(i.onclick=yu)}ko(w,E);var W;w=null;for(de in j)if(!E.hasOwnProperty(de)&&j.hasOwnProperty(de)&&j[de]!=null)if(de==="style"){var Y=j[de];for(W in Y)Y.hasOwnProperty(W)&&(w||(w={}),w[W]="")}else de!=="dangerouslySetInnerHTML"&&de!=="children"&&de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&de!=="autoFocus"&&(s.hasOwnProperty(de)?A||(A=[]):(A=A||[]).push(de,null));for(de in E){var J=E[de];if(Y=j!=null?j[de]:void 0,E.hasOwnProperty(de)&&J!==Y&&(J!=null||Y!=null))if(de==="style")if(Y){for(W in Y)!Y.hasOwnProperty(W)||J&&J.hasOwnProperty(W)||(w||(w={}),w[W]="");for(W in J)J.hasOwnProperty(W)&&Y[W]!==J[W]&&(w||(w={}),w[W]=J[W])}else w||(A||(A=[]),A.push(de,w)),w=J;else de==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,Y=Y?Y.__html:void 0,J!=null&&Y!==J&&(A=A||[]).push(de,J)):de==="children"?typeof J!="string"&&typeof J!="number"||(A=A||[]).push(de,""+J):de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&(s.hasOwnProperty(de)?(J!=null&&de==="onScroll"&&Lt("scroll",i),A||Y===J||(A=[])):(A=A||[]).push(de,J))}w&&(A=A||[]).push("style",w);var de=A;(l.updateQueue=de)&&(l.flags|=4)}},O1=function(i,l,w,E){w!==E&&(l.flags|=4)};function vl(i,l){if(!Ft)switch(i.tailMode){case"hidden":l=i.tail;for(var w=null;l!==null;)l.alternate!==null&&(w=l),l=l.sibling;w===null?i.tail=null:w.sibling=null;break;case"collapsed":w=i.tail;for(var E=null;w!==null;)w.alternate!==null&&(E=w),w=w.sibling;E===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:E.sibling=null}}function Ln(i){var l=i.alternate!==null&&i.alternate.child===i.child,w=0,E=0;if(l)for(var j=i.child;j!==null;)w|=j.lanes|j.childLanes,E|=j.subtreeFlags&14680064,E|=j.flags&14680064,j.return=i,j=j.sibling;else for(j=i.child;j!==null;)w|=j.lanes|j.childLanes,E|=j.subtreeFlags,E|=j.flags,j.return=i,j=j.sibling;return i.subtreeFlags|=E,i.childLanes=w,l}function TM(i,l,w){var E=l.pendingProps;switch(zg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(l),null;case 1:return Xn(l.type)&&Su(),Ln(l),null;case 3:return E=l.stateNode,za(),Ot(Yn),Ot(Mn),Zg(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(i===null||i.child===null)&&(Ru(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Kr!==null&&(Iv(Kr),Kr=null))),yv(i,l),Ln(l),null;case 5:Qg(l);var j=Ei(fl.current);if(w=l.type,i!==null&&l.stateNode!=null)L1(i,l,w,E,j),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!E){if(l.stateNode===null)throw Error(n(166));return Ln(l),null}if(i=Ei(Ps.current),Ru(l)){E=l.stateNode,w=l.type;var A=l.memoizedProps;switch(E[js]=l,E[al]=A,i=(l.mode&1)!==0,w){case"dialog":Lt("cancel",E),Lt("close",E);break;case"iframe":case"object":case"embed":Lt("load",E);break;case"video":case"audio":for(j=0;j<sl.length;j++)Lt(sl[j],E);break;case"source":Lt("error",E);break;case"img":case"image":case"link":Lt("error",E),Lt("load",E);break;case"details":Lt("toggle",E);break;case"input":Be(E,A),Lt("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!A.multiple},Lt("invalid",E);break;case"textarea":Fe(E,A),Lt("invalid",E)}ko(w,A),j=null;for(var W in A)if(A.hasOwnProperty(W)){var Y=A[W];W==="children"?typeof Y=="string"?E.textContent!==Y&&(A.suppressHydrationWarning!==!0&&vu(E.textContent,Y,i),j=["children",Y]):typeof Y=="number"&&E.textContent!==""+Y&&(A.suppressHydrationWarning!==!0&&vu(E.textContent,Y,i),j=["children",""+Y]):s.hasOwnProperty(W)&&Y!=null&&W==="onScroll"&&Lt("scroll",E)}switch(w){case"input":fe(E),_e(E,A,!0);break;case"textarea":fe(E),Ve(E);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(E.onclick=yu)}E=j,l.updateQueue=E,E!==null&&(l.flags|=4)}else{W=j.nodeType===9?j:j.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=He(w)),i==="http://www.w3.org/1999/xhtml"?w==="script"?(i=W.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof E.is=="string"?i=W.createElement(w,{is:E.is}):(i=W.createElement(w),w==="select"&&(W=i,E.multiple?W.multiple=!0:E.size&&(W.size=E.size))):i=W.createElementNS(i,w),i[js]=l,i[al]=E,N1(i,l,!1,!1),l.stateNode=i;e:{switch(W=Is(w,E),w){case"dialog":Lt("cancel",i),Lt("close",i),j=E;break;case"iframe":case"object":case"embed":Lt("load",i),j=E;break;case"video":case"audio":for(j=0;j<sl.length;j++)Lt(sl[j],i);j=E;break;case"source":Lt("error",i),j=E;break;case"img":case"image":case"link":Lt("error",i),Lt("load",i),j=E;break;case"details":Lt("toggle",i),j=E;break;case"input":Be(i,E),j=Ee(i,E),Lt("invalid",i);break;case"option":j=E;break;case"select":i._wrapperState={wasMultiple:!!E.multiple},j=z({},E,{value:void 0}),Lt("invalid",i);break;case"textarea":Fe(i,E),j=Ze(i,E),Lt("invalid",i);break;default:j=E}ko(w,j),Y=j;for(A in Y)if(Y.hasOwnProperty(A)){var J=Y[A];A==="style"?bt(i,J):A==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&ct(i,J)):A==="children"?typeof J=="string"?(w!=="textarea"||J!=="")&&vt(i,J):typeof J=="number"&&vt(i,""+J):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(s.hasOwnProperty(A)?J!=null&&A==="onScroll"&&Lt("scroll",i):J!=null&&m(i,A,J,W))}switch(w){case"input":fe(i),_e(i,E,!1);break;case"textarea":fe(i),Ve(i);break;case"option":E.value!=null&&i.setAttribute("value",""+oe(E.value));break;case"select":i.multiple=!!E.multiple,A=E.value,A!=null?Je(i,!!E.multiple,A,!1):E.defaultValue!=null&&Je(i,!!E.multiple,E.defaultValue,!0);break;default:typeof j.onClick=="function"&&(i.onclick=yu)}switch(w){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Ln(l),null;case 6:if(i&&l.stateNode!=null)O1(i,l,i.memoizedProps,E);else{if(typeof E!="string"&&l.stateNode===null)throw Error(n(166));if(w=Ei(fl.current),Ei(Ps.current),Ru(l)){if(E=l.stateNode,w=l.memoizedProps,E[js]=l,(A=E.nodeValue!==w)&&(i=gr,i!==null))switch(i.tag){case 3:vu(E.nodeValue,w,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&vu(E.nodeValue,w,(i.mode&1)!==0)}A&&(l.flags|=4)}else E=(w.nodeType===9?w:w.ownerDocument).createTextNode(E),E[js]=l,l.stateNode=E}return Ln(l),null;case 13:if(Ot(Bt),E=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ft&&vr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Fx(),Oa(),l.flags|=98560,A=!1;else if(A=Ru(l),E!==null&&E.dehydrated!==null){if(i===null){if(!A)throw Error(n(318));if(A=l.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[js]=l}else Oa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ln(l),A=!1}else Kr!==null&&(Iv(Kr),Kr=null),A=!0;if(!A)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=w,l):(E=E!==null,E!==(i!==null&&i.memoizedState!==null)&&E&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(Bt.current&1)!==0?pn===0&&(pn=3):Pv())),l.updateQueue!==null&&(l.flags|=4),Ln(l),null);case 4:return za(),yv(i,l),i===null&&ol(l.stateNode.containerInfo),Ln(l),null;case 10:return qg(l.type._context),Ln(l),null;case 17:return Xn(l.type)&&Su(),Ln(l),null;case 19:if(Ot(Bt),A=l.memoizedState,A===null)return Ln(l),null;if(E=(l.flags&128)!==0,W=A.rendering,W===null)if(E)vl(A,!1);else{if(pn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(W=ju(i),W!==null){for(l.flags|=128,vl(A,!1),E=W.updateQueue,E!==null&&(l.updateQueue=E,l.flags|=4),l.subtreeFlags=0,E=w,w=l.child;w!==null;)A=w,i=E,A.flags&=14680066,W=A.alternate,W===null?(A.childLanes=0,A.lanes=i,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=W.childLanes,A.lanes=W.lanes,A.child=W.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=W.memoizedProps,A.memoizedState=W.memoizedState,A.updateQueue=W.updateQueue,A.type=W.type,i=W.dependencies,A.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),w=w.sibling;return Mt(Bt,Bt.current&1|2),l.child}i=i.sibling}A.tail!==null&&Qt()>Ha&&(l.flags|=128,E=!0,vl(A,!1),l.lanes=4194304)}else{if(!E)if(i=ju(W),i!==null){if(l.flags|=128,E=!0,w=i.updateQueue,w!==null&&(l.updateQueue=w,l.flags|=4),vl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!W.alternate&&!Ft)return Ln(l),null}else 2*Qt()-A.renderingStartTime>Ha&&w!==1073741824&&(l.flags|=128,E=!0,vl(A,!1),l.lanes=4194304);A.isBackwards?(W.sibling=l.child,l.child=W):(w=A.last,w!==null?w.sibling=W:l.child=W,A.last=W)}return A.tail!==null?(l=A.tail,A.rendering=l,A.tail=l.sibling,A.renderingStartTime=Qt(),l.sibling=null,w=Bt.current,Mt(Bt,E?w&1|2:w&1),l):(Ln(l),null);case 22:case 23:return jv(),E=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==E&&(l.flags|=8192),E&&(l.mode&1)!==0?(yr&1073741824)!==0&&(Ln(l),l.subtreeFlags&6&&(l.flags|=8192)):Ln(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function EM(i,l){switch(zg(l),l.tag){case 1:return Xn(l.type)&&Su(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return za(),Ot(Yn),Ot(Mn),Zg(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return Qg(l),null;case 13:if(Ot(Bt),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Oa()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return Ot(Bt),null;case 4:return za(),null;case 10:return qg(l.type._context),null;case 22:case 23:return jv(),null;case 24:return null;default:return null}}var zu=!1,On=!1,kM=typeof WeakSet=="function"?WeakSet:Set,We=null;function Ua(i,l){var w=i.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(E){Kt(i,l,E)}else w.current=null}function wv(i,l,w){try{w()}catch(E){Kt(i,l,E)}}var A1=!1;function IM(i,l){if(jg=iu,i=mx(),Cg(i)){if("selectionStart"in i)var w={start:i.selectionStart,end:i.selectionEnd};else e:{w=(w=i.ownerDocument)&&w.defaultView||window;var E=w.getSelection&&w.getSelection();if(E&&E.rangeCount!==0){w=E.anchorNode;var j=E.anchorOffset,A=E.focusNode;E=E.focusOffset;try{w.nodeType,A.nodeType}catch{w=null;break e}var W=0,Y=-1,J=-1,de=0,Ce=0,Re=i,Se=null;t:for(;;){for(var ze;Re!==w||j!==0&&Re.nodeType!==3||(Y=W+j),Re!==A||E!==0&&Re.nodeType!==3||(J=W+E),Re.nodeType===3&&(W+=Re.nodeValue.length),(ze=Re.firstChild)!==null;)Se=Re,Re=ze;for(;;){if(Re===i)break t;if(Se===w&&++de===j&&(Y=W),Se===A&&++Ce===E&&(J=W),(ze=Re.nextSibling)!==null)break;Re=Se,Se=Re.parentNode}Re=ze}w=Y===-1||J===-1?null:{start:Y,end:J}}else w=null}w=w||{start:0,end:0}}else w=null;for(Pg={focusedElem:i,selectionRange:w},iu=!1,We=l;We!==null;)if(l=We,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,We=i;else for(;We!==null;){l=We;try{var qe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var Ke=qe.memoizedProps,Jt=qe.memoizedState,ae=l.stateNode,ee=ae.getSnapshotBeforeUpdate(l.elementType===l.type?Ke:Yr(l.type,Ke),Jt);ae.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var ce=l.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Te){Kt(l,l.return,Te)}if(i=l.sibling,i!==null){i.return=l.return,We=i;break}We=l.return}return qe=A1,A1=!1,qe}function yl(i,l,w){var E=l.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var j=E=E.next;do{if((j.tag&i)===i){var A=j.destroy;j.destroy=void 0,A!==void 0&&wv(l,w,A)}j=j.next}while(j!==E)}}function Bu(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var w=l=l.next;do{if((w.tag&i)===i){var E=w.create;w.destroy=E()}w=w.next}while(w!==l)}}function Sv(i){var l=i.ref;if(l!==null){var w=i.stateNode;switch(i.tag){case 5:i=w;break;default:i=w}typeof l=="function"?l(i):l.current=i}}function $1(i){var l=i.alternate;l!==null&&(i.alternate=null,$1(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[js],delete l[al],delete l[Og],delete l[uM],delete l[fM])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function F1(i){return i.tag===5||i.tag===3||i.tag===4}function z1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||F1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bv(i,l,w){var E=i.tag;if(E===5||E===6)i=i.stateNode,l?w.nodeType===8?w.parentNode.insertBefore(i,l):w.insertBefore(i,l):(w.nodeType===8?(l=w.parentNode,l.insertBefore(i,w)):(l=w,l.appendChild(i)),w=w._reactRootContainer,w!=null||l.onclick!==null||(l.onclick=yu));else if(E!==4&&(i=i.child,i!==null))for(bv(i,l,w),i=i.sibling;i!==null;)bv(i,l,w),i=i.sibling}function xv(i,l,w){var E=i.tag;if(E===5||E===6)i=i.stateNode,l?w.insertBefore(i,l):w.appendChild(i);else if(E!==4&&(i=i.child,i!==null))for(xv(i,l,w),i=i.sibling;i!==null;)xv(i,l,w),i=i.sibling}var Rn=null,Xr=!1;function Vo(i,l,w){for(w=w.child;w!==null;)B1(i,l,w),w=w.sibling}function B1(i,l,w){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(eu,w)}catch{}switch(w.tag){case 5:On||Ua(w,l);case 6:var E=Rn,j=Xr;Rn=null,Vo(i,l,w),Rn=E,Xr=j,Rn!==null&&(Xr?(i=Rn,w=w.stateNode,i.nodeType===8?i.parentNode.removeChild(w):i.removeChild(w)):Rn.removeChild(w.stateNode));break;case 18:Rn!==null&&(Xr?(i=Rn,w=w.stateNode,i.nodeType===8?Lg(i.parentNode,w):i.nodeType===1&&Lg(i,w),Xc(i)):Lg(Rn,w.stateNode));break;case 4:E=Rn,j=Xr,Rn=w.stateNode.containerInfo,Xr=!0,Vo(i,l,w),Rn=E,Xr=j;break;case 0:case 11:case 14:case 15:if(!On&&(E=w.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){j=E=E.next;do{var A=j,W=A.destroy;A=A.tag,W!==void 0&&((A&2)!==0||(A&4)!==0)&&wv(w,l,W),j=j.next}while(j!==E)}Vo(i,l,w);break;case 1:if(!On&&(Ua(w,l),E=w.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=w.memoizedProps,E.state=w.memoizedState,E.componentWillUnmount()}catch(Y){Kt(w,l,Y)}Vo(i,l,w);break;case 21:Vo(i,l,w);break;case 22:w.mode&1?(On=(E=On)||w.memoizedState!==null,Vo(i,l,w),On=E):Vo(i,l,w);break;default:Vo(i,l,w)}}function U1(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var w=i.stateNode;w===null&&(w=i.stateNode=new kM),l.forEach(function(E){var j=$M.bind(null,i,E);w.has(E)||(w.add(E),E.then(j,j))})}}function Qr(i,l){var w=l.deletions;if(w!==null)for(var E=0;E<w.length;E++){var j=w[E];try{var A=i,W=l,Y=W;e:for(;Y!==null;){switch(Y.tag){case 5:Rn=Y.stateNode,Xr=!1;break e;case 3:Rn=Y.stateNode.containerInfo,Xr=!0;break e;case 4:Rn=Y.stateNode.containerInfo,Xr=!0;break e}Y=Y.return}if(Rn===null)throw Error(n(160));B1(A,W,j),Rn=null,Xr=!1;var J=j.alternate;J!==null&&(J.return=null),j.return=null}catch(de){Kt(j,l,de)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)V1(l,i),l=l.sibling}function V1(i,l){var w=i.alternate,E=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Qr(l,i),Ns(i),E&4){try{yl(3,i,i.return),Bu(3,i)}catch(Ke){Kt(i,i.return,Ke)}try{yl(5,i,i.return)}catch(Ke){Kt(i,i.return,Ke)}}break;case 1:Qr(l,i),Ns(i),E&512&&w!==null&&Ua(w,w.return);break;case 5:if(Qr(l,i),Ns(i),E&512&&w!==null&&Ua(w,w.return),i.flags&32){var j=i.stateNode;try{vt(j,"")}catch(Ke){Kt(i,i.return,Ke)}}if(E&4&&(j=i.stateNode,j!=null)){var A=i.memoizedProps,W=w!==null?w.memoizedProps:A,Y=i.type,J=i.updateQueue;if(i.updateQueue=null,J!==null)try{Y==="input"&&A.type==="radio"&&A.name!=null&&et(j,A),Is(Y,W);var de=Is(Y,A);for(W=0;W<J.length;W+=2){var Ce=J[W],Re=J[W+1];Ce==="style"?bt(j,Re):Ce==="dangerouslySetInnerHTML"?ct(j,Re):Ce==="children"?vt(j,Re):m(j,Ce,Re,de)}switch(Y){case"input":pe(j,A);break;case"textarea":be(j,A);break;case"select":var Se=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!A.multiple;var ze=A.value;ze!=null?Je(j,!!A.multiple,ze,!1):Se!==!!A.multiple&&(A.defaultValue!=null?Je(j,!!A.multiple,A.defaultValue,!0):Je(j,!!A.multiple,A.multiple?[]:"",!1))}j[al]=A}catch(Ke){Kt(i,i.return,Ke)}}break;case 6:if(Qr(l,i),Ns(i),E&4){if(i.stateNode===null)throw Error(n(162));j=i.stateNode,A=i.memoizedProps;try{j.nodeValue=A}catch(Ke){Kt(i,i.return,Ke)}}break;case 3:if(Qr(l,i),Ns(i),E&4&&w!==null&&w.memoizedState.isDehydrated)try{Xc(l.containerInfo)}catch(Ke){Kt(i,i.return,Ke)}break;case 4:Qr(l,i),Ns(i);break;case 13:Qr(l,i),Ns(i),j=i.child,j.flags&8192&&(A=j.memoizedState!==null,j.stateNode.isHidden=A,!A||j.alternate!==null&&j.alternate.memoizedState!==null||(Rv=Qt())),E&4&&U1(i);break;case 22:if(Ce=w!==null&&w.memoizedState!==null,i.mode&1?(On=(de=On)||Ce,Qr(l,i),On=de):Qr(l,i),Ns(i),E&8192){if(de=i.memoizedState!==null,(i.stateNode.isHidden=de)&&!Ce&&(i.mode&1)!==0)for(We=i,Ce=i.child;Ce!==null;){for(Re=We=Ce;We!==null;){switch(Se=We,ze=Se.child,Se.tag){case 0:case 11:case 14:case 15:yl(4,Se,Se.return);break;case 1:Ua(Se,Se.return);var qe=Se.stateNode;if(typeof qe.componentWillUnmount=="function"){E=Se,w=Se.return;try{l=E,qe.props=l.memoizedProps,qe.state=l.memoizedState,qe.componentWillUnmount()}catch(Ke){Kt(E,w,Ke)}}break;case 5:Ua(Se,Se.return);break;case 22:if(Se.memoizedState!==null){q1(Re);continue}}ze!==null?(ze.return=Se,We=ze):q1(Re)}Ce=Ce.sibling}e:for(Ce=null,Re=i;;){if(Re.tag===5){if(Ce===null){Ce=Re;try{j=Re.stateNode,de?(A=j.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(Y=Re.stateNode,J=Re.memoizedProps.style,W=J!=null&&J.hasOwnProperty("display")?J.display:null,Y.style.display=Ge("display",W))}catch(Ke){Kt(i,i.return,Ke)}}}else if(Re.tag===6){if(Ce===null)try{Re.stateNode.nodeValue=de?"":Re.memoizedProps}catch(Ke){Kt(i,i.return,Ke)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===i)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===i)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===i)break e;Ce===Re&&(Ce=null),Re=Re.return}Ce===Re&&(Ce=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:Qr(l,i),Ns(i),E&4&&U1(i);break;case 21:break;default:Qr(l,i),Ns(i)}}function Ns(i){var l=i.flags;if(l&2){try{e:{for(var w=i.return;w!==null;){if(F1(w)){var E=w;break e}w=w.return}throw Error(n(160))}switch(E.tag){case 5:var j=E.stateNode;E.flags&32&&(vt(j,""),E.flags&=-33);var A=z1(i);xv(i,A,j);break;case 3:case 4:var W=E.stateNode.containerInfo,Y=z1(i);bv(i,Y,W);break;default:throw Error(n(161))}}catch(J){Kt(i,i.return,J)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function DM(i,l,w){We=i,H1(i)}function H1(i,l,w){for(var E=(i.mode&1)!==0;We!==null;){var j=We,A=j.child;if(j.tag===22&&E){var W=j.memoizedState!==null||zu;if(!W){var Y=j.alternate,J=Y!==null&&Y.memoizedState!==null||On;Y=zu;var de=On;if(zu=W,(On=J)&&!de)for(We=j;We!==null;)W=We,J=W.child,W.tag===22&&W.memoizedState!==null?G1(j):J!==null?(J.return=W,We=J):G1(j);for(;A!==null;)We=A,H1(A),A=A.sibling;We=j,zu=Y,On=de}W1(i)}else(j.subtreeFlags&8772)!==0&&A!==null?(A.return=j,We=A):W1(i)}}function W1(i){for(;We!==null;){var l=We;if((l.flags&8772)!==0){var w=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:On||Bu(5,l);break;case 1:var E=l.stateNode;if(l.flags&4&&!On)if(w===null)E.componentDidMount();else{var j=l.elementType===l.type?w.memoizedProps:Yr(l.type,w.memoizedProps);E.componentDidUpdate(j,w.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var A=l.updateQueue;A!==null&&qx(l,A,E);break;case 3:var W=l.updateQueue;if(W!==null){if(w=null,l.child!==null)switch(l.child.tag){case 5:w=l.child.stateNode;break;case 1:w=l.child.stateNode}qx(l,W,w)}break;case 5:var Y=l.stateNode;if(w===null&&l.flags&4){w=Y;var J=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&w.focus();break;case"img":J.src&&(w.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var de=l.alternate;if(de!==null){var Ce=de.memoizedState;if(Ce!==null){var Re=Ce.dehydrated;Re!==null&&Xc(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}On||l.flags&512&&Sv(l)}catch(Se){Kt(l,l.return,Se)}}if(l===i){We=null;break}if(w=l.sibling,w!==null){w.return=l.return,We=w;break}We=l.return}}function q1(i){for(;We!==null;){var l=We;if(l===i){We=null;break}var w=l.sibling;if(w!==null){w.return=l.return,We=w;break}We=l.return}}function G1(i){for(;We!==null;){var l=We;try{switch(l.tag){case 0:case 11:case 15:var w=l.return;try{Bu(4,l)}catch(J){Kt(l,w,J)}break;case 1:var E=l.stateNode;if(typeof E.componentDidMount=="function"){var j=l.return;try{E.componentDidMount()}catch(J){Kt(l,j,J)}}var A=l.return;try{Sv(l)}catch(J){Kt(l,A,J)}break;case 5:var W=l.return;try{Sv(l)}catch(J){Kt(l,W,J)}}}catch(J){Kt(l,l.return,J)}if(l===i){We=null;break}var Y=l.sibling;if(Y!==null){Y.return=l.return,We=Y;break}We=l.return}}var jM=Math.ceil,Uu=v.ReactCurrentDispatcher,Cv=v.ReactCurrentOwner,Lr=v.ReactCurrentBatchConfig,yt=0,wn=null,nn=null,Tn=0,yr=0,Va=$o(0),pn=0,wl=null,Ii=0,Vu=0,_v=0,Sl=null,Jn=null,Rv=0,Ha=1/0,ro=null,Hu=!1,Tv=null,Ho=null,Wu=!1,Wo=null,qu=0,bl=0,Ev=null,Gu=-1,Ku=0;function Hn(){return(yt&6)!==0?Qt():Gu!==-1?Gu:Gu=Qt()}function qo(i){return(i.mode&1)===0?1:(yt&2)!==0&&Tn!==0?Tn&-Tn:hM.transition!==null?(Ku===0&&(Ku=zb()),Ku):(i=Tt,i!==0||(i=window.event,i=i===void 0?16:Yb(i.type)),i)}function Jr(i,l,w,E){if(50<bl)throw bl=0,Ev=null,Error(n(185));Wc(i,w,E),((yt&2)===0||i!==wn)&&(i===wn&&((yt&2)===0&&(Vu|=w),pn===4&&Go(i,Tn)),Zn(i,E),w===1&&yt===0&&(l.mode&1)===0&&(Ha=Qt()+500,xu&&zo()))}function Zn(i,l){var w=i.callbackNode;hP(i,l);var E=ru(i,i===wn?Tn:0);if(E===0)w!==null&&Ab(w),i.callbackNode=null,i.callbackPriority=0;else if(l=E&-E,i.callbackPriority!==l){if(w!=null&&Ab(w),l===1)i.tag===0?pM(Y1.bind(null,i)):Nx(Y1.bind(null,i)),lM(function(){(yt&6)===0&&zo()}),w=null;else{switch(Bb(E)){case 1:w=ig;break;case 4:w=$b;break;case 16:w=Zd;break;case 536870912:w=Fb;break;default:w=Zd}w=rC(w,K1.bind(null,i))}i.callbackPriority=l,i.callbackNode=w}}function K1(i,l){if(Gu=-1,Ku=0,(yt&6)!==0)throw Error(n(327));var w=i.callbackNode;if(Wa()&&i.callbackNode!==w)return null;var E=ru(i,i===wn?Tn:0);if(E===0)return null;if((E&30)!==0||(E&i.expiredLanes)!==0||l)l=Yu(i,E);else{l=E;var j=yt;yt|=2;var A=Q1();(wn!==i||Tn!==l)&&(ro=null,Ha=Qt()+500,ji(i,l));do try{NM();break}catch(Y){X1(i,Y)}while(!0);Wg(),Uu.current=A,yt=j,nn!==null?l=0:(wn=null,Tn=0,l=pn)}if(l!==0){if(l===2&&(j=ag(i),j!==0&&(E=j,l=kv(i,j))),l===1)throw w=wl,ji(i,0),Go(i,E),Zn(i,Qt()),w;if(l===6)Go(i,E);else{if(j=i.current.alternate,(E&30)===0&&!PM(j)&&(l=Yu(i,E),l===2&&(A=ag(i),A!==0&&(E=A,l=kv(i,A))),l===1))throw w=wl,ji(i,0),Go(i,E),Zn(i,Qt()),w;switch(i.finishedWork=j,i.finishedLanes=E,l){case 0:case 1:throw Error(n(345));case 2:Pi(i,Jn,ro);break;case 3:if(Go(i,E),(E&130023424)===E&&(l=Rv+500-Qt(),10<l)){if(ru(i,0)!==0)break;if(j=i.suspendedLanes,(j&E)!==E){Hn(),i.pingedLanes|=i.suspendedLanes&j;break}i.timeoutHandle=Ng(Pi.bind(null,i,Jn,ro),l);break}Pi(i,Jn,ro);break;case 4:if(Go(i,E),(E&4194240)===E)break;for(l=i.eventTimes,j=-1;0<E;){var W=31-qr(E);A=1<<W,W=l[W],W>j&&(j=W),E&=~A}if(E=j,E=Qt()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*jM(E/1960))-E,10<E){i.timeoutHandle=Ng(Pi.bind(null,i,Jn,ro),E);break}Pi(i,Jn,ro);break;case 5:Pi(i,Jn,ro);break;default:throw Error(n(329))}}}return Zn(i,Qt()),i.callbackNode===w?K1.bind(null,i):null}function kv(i,l){var w=Sl;return i.current.memoizedState.isDehydrated&&(ji(i,l).flags|=256),i=Yu(i,l),i!==2&&(l=Jn,Jn=w,l!==null&&Iv(l)),i}function Iv(i){Jn===null?Jn=i:Jn.push.apply(Jn,i)}function PM(i){for(var l=i;;){if(l.flags&16384){var w=l.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var E=0;E<w.length;E++){var j=w[E],A=j.getSnapshot;j=j.value;try{if(!Gr(A(),j))return!1}catch{return!1}}}if(w=l.child,l.subtreeFlags&16384&&w!==null)w.return=l,l=w;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Go(i,l){for(l&=~_v,l&=~Vu,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var w=31-qr(l),E=1<<w;i[w]=-1,l&=~E}}function Y1(i){if((yt&6)!==0)throw Error(n(327));Wa();var l=ru(i,0);if((l&1)===0)return Zn(i,Qt()),null;var w=Yu(i,l);if(i.tag!==0&&w===2){var E=ag(i);E!==0&&(l=E,w=kv(i,E))}if(w===1)throw w=wl,ji(i,0),Go(i,l),Zn(i,Qt()),w;if(w===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,Pi(i,Jn,ro),Zn(i,Qt()),null}function Dv(i,l){var w=yt;yt|=1;try{return i(l)}finally{yt=w,yt===0&&(Ha=Qt()+500,xu&&zo())}}function Di(i){Wo!==null&&Wo.tag===0&&(yt&6)===0&&Wa();var l=yt;yt|=1;var w=Lr.transition,E=Tt;try{if(Lr.transition=null,Tt=1,i)return i()}finally{Tt=E,Lr.transition=w,yt=l,(yt&6)===0&&zo()}}function jv(){yr=Va.current,Ot(Va)}function ji(i,l){i.finishedWork=null,i.finishedLanes=0;var w=i.timeoutHandle;if(w!==-1&&(i.timeoutHandle=-1,cM(w)),nn!==null)for(w=nn.return;w!==null;){var E=w;switch(zg(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Su();break;case 3:za(),Ot(Yn),Ot(Mn),Zg();break;case 5:Qg(E);break;case 4:za();break;case 13:Ot(Bt);break;case 19:Ot(Bt);break;case 10:qg(E.type._context);break;case 22:case 23:jv()}w=w.return}if(wn=i,nn=i=Ko(i.current,null),Tn=yr=l,pn=0,wl=null,_v=Vu=Ii=0,Jn=Sl=null,Ti!==null){for(l=0;l<Ti.length;l++)if(w=Ti[l],E=w.interleaved,E!==null){w.interleaved=null;var j=E.next,A=w.pending;if(A!==null){var W=A.next;A.next=j,E.next=W}w.pending=E}Ti=null}return i}function X1(i,l){do{var w=nn;try{if(Wg(),Pu.current=Ou,Mu){for(var E=Ut.memoizedState;E!==null;){var j=E.queue;j!==null&&(j.pending=null),E=E.next}Mu=!1}if(ki=0,yn=fn=Ut=null,pl=!1,hl=0,Cv.current=null,w===null||w.return===null){pn=1,wl=l,nn=null;break}e:{var A=i,W=w.return,Y=w,J=l;if(l=Tn,Y.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var de=J,Ce=Y,Re=Ce.tag;if((Ce.mode&1)===0&&(Re===0||Re===11||Re===15)){var Se=Ce.alternate;Se?(Ce.updateQueue=Se.updateQueue,Ce.memoizedState=Se.memoizedState,Ce.lanes=Se.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var ze=b1(W);if(ze!==null){ze.flags&=-257,x1(ze,W,Y,A,l),ze.mode&1&&S1(A,de,l),l=ze,J=de;var qe=l.updateQueue;if(qe===null){var Ke=new Set;Ke.add(J),l.updateQueue=Ke}else qe.add(J);break e}else{if((l&1)===0){S1(A,de,l),Pv();break e}J=Error(n(426))}}else if(Ft&&Y.mode&1){var Jt=b1(W);if(Jt!==null){(Jt.flags&65536)===0&&(Jt.flags|=256),x1(Jt,W,Y,A,l),Vg(Ba(J,Y));break e}}A=J=Ba(J,Y),pn!==4&&(pn=2),Sl===null?Sl=[A]:Sl.push(A),A=W;do{switch(A.tag){case 3:A.flags|=65536,l&=-l,A.lanes|=l;var ae=y1(A,J,l);Wx(A,ae);break e;case 1:Y=J;var ee=A.type,ce=A.stateNode;if((A.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Ho===null||!Ho.has(ce)))){A.flags|=65536,l&=-l,A.lanes|=l;var Te=w1(A,Y,l);Wx(A,Te);break e}}A=A.return}while(A!==null)}Z1(w)}catch(Xe){l=Xe,nn===w&&w!==null&&(nn=w=w.return);continue}break}while(!0)}function Q1(){var i=Uu.current;return Uu.current=Ou,i===null?Ou:i}function Pv(){(pn===0||pn===3||pn===2)&&(pn=4),wn===null||(Ii&268435455)===0&&(Vu&268435455)===0||Go(wn,Tn)}function Yu(i,l){var w=yt;yt|=2;var E=Q1();(wn!==i||Tn!==l)&&(ro=null,ji(i,l));do try{MM();break}catch(j){X1(i,j)}while(!0);if(Wg(),yt=w,Uu.current=E,nn!==null)throw Error(n(261));return wn=null,Tn=0,pn}function MM(){for(;nn!==null;)J1(nn)}function NM(){for(;nn!==null&&!oP();)J1(nn)}function J1(i){var l=nC(i.alternate,i,yr);i.memoizedProps=i.pendingProps,l===null?Z1(i):nn=l,Cv.current=null}function Z1(i){var l=i;do{var w=l.alternate;if(i=l.return,(l.flags&32768)===0){if(w=TM(w,l,yr),w!==null){nn=w;return}}else{if(w=EM(w,l),w!==null){w.flags&=32767,nn=w;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{pn=6,nn=null;return}}if(l=l.sibling,l!==null){nn=l;return}nn=l=i}while(l!==null);pn===0&&(pn=5)}function Pi(i,l,w){var E=Tt,j=Lr.transition;try{Lr.transition=null,Tt=1,LM(i,l,w,E)}finally{Lr.transition=j,Tt=E}return null}function LM(i,l,w,E){do Wa();while(Wo!==null);if((yt&6)!==0)throw Error(n(327));w=i.finishedWork;var j=i.finishedLanes;if(w===null)return null;if(i.finishedWork=null,i.finishedLanes=0,w===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var A=w.lanes|w.childLanes;if(mP(i,A),i===wn&&(nn=wn=null,Tn=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||Wu||(Wu=!0,rC(Zd,function(){return Wa(),null})),A=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||A){A=Lr.transition,Lr.transition=null;var W=Tt;Tt=1;var Y=yt;yt|=4,Cv.current=null,IM(i,w),V1(w,i),tM(Pg),iu=!!jg,Pg=jg=null,i.current=w,DM(w),iP(),yt=Y,Tt=W,Lr.transition=A}else i.current=w;if(Wu&&(Wu=!1,Wo=i,qu=j),A=i.pendingLanes,A===0&&(Ho=null),lP(w.stateNode),Zn(i,Qt()),l!==null)for(E=i.onRecoverableError,w=0;w<l.length;w++)j=l[w],E(j.value,{componentStack:j.stack,digest:j.digest});if(Hu)throw Hu=!1,i=Tv,Tv=null,i;return(qu&1)!==0&&i.tag!==0&&Wa(),A=i.pendingLanes,(A&1)!==0?i===Ev?bl++:(bl=0,Ev=i):bl=0,zo(),null}function Wa(){if(Wo!==null){var i=Bb(qu),l=Lr.transition,w=Tt;try{if(Lr.transition=null,Tt=16>i?16:i,Wo===null)var E=!1;else{if(i=Wo,Wo=null,qu=0,(yt&6)!==0)throw Error(n(331));var j=yt;for(yt|=4,We=i.current;We!==null;){var A=We,W=A.child;if((We.flags&16)!==0){var Y=A.deletions;if(Y!==null){for(var J=0;J<Y.length;J++){var de=Y[J];for(We=de;We!==null;){var Ce=We;switch(Ce.tag){case 0:case 11:case 15:yl(8,Ce,A)}var Re=Ce.child;if(Re!==null)Re.return=Ce,We=Re;else for(;We!==null;){Ce=We;var Se=Ce.sibling,ze=Ce.return;if($1(Ce),Ce===de){We=null;break}if(Se!==null){Se.return=ze,We=Se;break}We=ze}}}var qe=A.alternate;if(qe!==null){var Ke=qe.child;if(Ke!==null){qe.child=null;do{var Jt=Ke.sibling;Ke.sibling=null,Ke=Jt}while(Ke!==null)}}We=A}}if((A.subtreeFlags&2064)!==0&&W!==null)W.return=A,We=W;else e:for(;We!==null;){if(A=We,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:yl(9,A,A.return)}var ae=A.sibling;if(ae!==null){ae.return=A.return,We=ae;break e}We=A.return}}var ee=i.current;for(We=ee;We!==null;){W=We;var ce=W.child;if((W.subtreeFlags&2064)!==0&&ce!==null)ce.return=W,We=ce;else e:for(W=ee;We!==null;){if(Y=We,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:Bu(9,Y)}}catch(Xe){Kt(Y,Y.return,Xe)}if(Y===W){We=null;break e}var Te=Y.sibling;if(Te!==null){Te.return=Y.return,We=Te;break e}We=Y.return}}if(yt=j,zo(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(eu,i)}catch{}E=!0}return E}finally{Tt=w,Lr.transition=l}}return!1}function eC(i,l,w){l=Ba(w,l),l=y1(i,l,1),i=Uo(i,l,1),l=Hn(),i!==null&&(Wc(i,1,l),Zn(i,l))}function Kt(i,l,w){if(i.tag===3)eC(i,i,w);else for(;l!==null;){if(l.tag===3){eC(l,i,w);break}else if(l.tag===1){var E=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ho===null||!Ho.has(E))){i=Ba(w,i),i=w1(l,i,1),l=Uo(l,i,1),i=Hn(),l!==null&&(Wc(l,1,i),Zn(l,i));break}}l=l.return}}function OM(i,l,w){var E=i.pingCache;E!==null&&E.delete(l),l=Hn(),i.pingedLanes|=i.suspendedLanes&w,wn===i&&(Tn&w)===w&&(pn===4||pn===3&&(Tn&130023424)===Tn&&500>Qt()-Rv?ji(i,0):_v|=w),Zn(i,l)}function tC(i,l){l===0&&((i.mode&1)===0?l=1:(l=nu,nu<<=1,(nu&130023424)===0&&(nu=4194304)));var w=Hn();i=eo(i,l),i!==null&&(Wc(i,l,w),Zn(i,w))}function AM(i){var l=i.memoizedState,w=0;l!==null&&(w=l.retryLane),tC(i,w)}function $M(i,l){var w=0;switch(i.tag){case 13:var E=i.stateNode,j=i.memoizedState;j!==null&&(w=j.retryLane);break;case 19:E=i.stateNode;break;default:throw Error(n(314))}E!==null&&E.delete(l),tC(i,w)}var nC;nC=function(i,l,w){if(i!==null)if(i.memoizedProps!==l.pendingProps||Yn.current)Qn=!0;else{if((i.lanes&w)===0&&(l.flags&128)===0)return Qn=!1,RM(i,l,w);Qn=(i.flags&131072)!==0}else Qn=!1,Ft&&(l.flags&1048576)!==0&&Lx(l,_u,l.index);switch(l.lanes=0,l.tag){case 2:var E=l.type;Fu(i,l),i=l.pendingProps;var j=Ma(l,Mn.current);Fa(l,w),j=nv(null,l,E,i,j,w);var A=rv();return l.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Xn(E)?(A=!0,bu(l)):A=!1,l.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,Yg(l),j.updater=Au,l.stateNode=j,j._reactInternals=l,lv(l,E,i,w),l=pv(null,l,E,!0,A,w)):(l.tag=0,Ft&&A&&Fg(l),Vn(null,l,j,w),l=l.child),l;case 16:E=l.elementType;e:{switch(Fu(i,l),i=l.pendingProps,j=E._init,E=j(E._payload),l.type=E,j=l.tag=zM(E),i=Yr(E,i),j){case 0:l=fv(null,l,E,i,w);break e;case 1:l=k1(null,l,E,i,w);break e;case 11:l=C1(null,l,E,i,w);break e;case 14:l=_1(null,l,E,Yr(E.type,i),w);break e}throw Error(n(306,E,""))}return l;case 0:return E=l.type,j=l.pendingProps,j=l.elementType===E?j:Yr(E,j),fv(i,l,E,j,w);case 1:return E=l.type,j=l.pendingProps,j=l.elementType===E?j:Yr(E,j),k1(i,l,E,j,w);case 3:e:{if(I1(l),i===null)throw Error(n(387));E=l.pendingProps,A=l.memoizedState,j=A.element,Hx(i,l),Du(l,E,null,w);var W=l.memoizedState;if(E=W.element,A.isDehydrated)if(A={element:E,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){j=Ba(Error(n(423)),l),l=D1(i,l,E,w,j);break e}else if(E!==j){j=Ba(Error(n(424)),l),l=D1(i,l,E,w,j);break e}else for(vr=Ao(l.stateNode.containerInfo.firstChild),gr=l,Ft=!0,Kr=null,w=Ux(l,null,E,w),l.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Oa(),E===j){l=no(i,l,w);break e}Vn(i,l,E,w)}l=l.child}return l;case 5:return Gx(l),i===null&&Ug(l),E=l.type,j=l.pendingProps,A=i!==null?i.memoizedProps:null,W=j.children,Mg(E,j)?W=null:A!==null&&Mg(E,A)&&(l.flags|=32),E1(i,l),Vn(i,l,W,w),l.child;case 6:return i===null&&Ug(l),null;case 13:return j1(i,l,w);case 4:return Xg(l,l.stateNode.containerInfo),E=l.pendingProps,i===null?l.child=Aa(l,null,E,w):Vn(i,l,E,w),l.child;case 11:return E=l.type,j=l.pendingProps,j=l.elementType===E?j:Yr(E,j),C1(i,l,E,j,w);case 7:return Vn(i,l,l.pendingProps,w),l.child;case 8:return Vn(i,l,l.pendingProps.children,w),l.child;case 12:return Vn(i,l,l.pendingProps.children,w),l.child;case 10:e:{if(E=l.type._context,j=l.pendingProps,A=l.memoizedProps,W=j.value,Mt(Eu,E._currentValue),E._currentValue=W,A!==null)if(Gr(A.value,W)){if(A.children===j.children&&!Yn.current){l=no(i,l,w);break e}}else for(A=l.child,A!==null&&(A.return=l);A!==null;){var Y=A.dependencies;if(Y!==null){W=A.child;for(var J=Y.firstContext;J!==null;){if(J.context===E){if(A.tag===1){J=to(-1,w&-w),J.tag=2;var de=A.updateQueue;if(de!==null){de=de.shared;var Ce=de.pending;Ce===null?J.next=J:(J.next=Ce.next,Ce.next=J),de.pending=J}}A.lanes|=w,J=A.alternate,J!==null&&(J.lanes|=w),Gg(A.return,w,l),Y.lanes|=w;break}J=J.next}}else if(A.tag===10)W=A.type===l.type?null:A.child;else if(A.tag===18){if(W=A.return,W===null)throw Error(n(341));W.lanes|=w,Y=W.alternate,Y!==null&&(Y.lanes|=w),Gg(W,w,l),W=A.sibling}else W=A.child;if(W!==null)W.return=A;else for(W=A;W!==null;){if(W===l){W=null;break}if(A=W.sibling,A!==null){A.return=W.return,W=A;break}W=W.return}A=W}Vn(i,l,j.children,w),l=l.child}return l;case 9:return j=l.type,E=l.pendingProps.children,Fa(l,w),j=Mr(j),E=E(j),l.flags|=1,Vn(i,l,E,w),l.child;case 14:return E=l.type,j=Yr(E,l.pendingProps),j=Yr(E.type,j),_1(i,l,E,j,w);case 15:return R1(i,l,l.type,l.pendingProps,w);case 17:return E=l.type,j=l.pendingProps,j=l.elementType===E?j:Yr(E,j),Fu(i,l),l.tag=1,Xn(E)?(i=!0,bu(l)):i=!1,Fa(l,w),g1(l,E,j),lv(l,E,j,w),pv(null,l,E,!0,i,w);case 19:return M1(i,l,w);case 22:return T1(i,l,w)}throw Error(n(156,l.tag))};function rC(i,l){return Ob(i,l)}function FM(i,l,w,E){this.tag=i,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(i,l,w,E){return new FM(i,l,w,E)}function Mv(i){return i=i.prototype,!(!i||!i.isReactComponent)}function zM(i){if(typeof i=="function")return Mv(i)?1:0;if(i!=null){if(i=i.$$typeof,i===O)return 11;if(i===q)return 14}return 2}function Ko(i,l){var w=i.alternate;return w===null?(w=Or(i.tag,l,i.key,i.mode),w.elementType=i.elementType,w.type=i.type,w.stateNode=i.stateNode,w.alternate=i,i.alternate=w):(w.pendingProps=l,w.type=i.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=i.flags&14680064,w.childLanes=i.childLanes,w.lanes=i.lanes,w.child=i.child,w.memoizedProps=i.memoizedProps,w.memoizedState=i.memoizedState,w.updateQueue=i.updateQueue,l=i.dependencies,w.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},w.sibling=i.sibling,w.index=i.index,w.ref=i.ref,w}function Xu(i,l,w,E,j,A){var W=2;if(E=i,typeof i=="function")Mv(i)&&(W=1);else if(typeof i=="string")W=5;else e:switch(i){case k:return Mi(w.children,j,A,l);case D:W=8,j|=8;break;case M:return i=Or(12,w,l,j|2),i.elementType=M,i.lanes=A,i;case V:return i=Or(13,w,l,j),i.elementType=V,i.lanes=A,i;case H:return i=Or(19,w,l,j),i.elementType=H,i.lanes=A,i;case B:return Qu(w,j,A,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case P:W=10;break e;case L:W=9;break e;case O:W=11;break e;case q:W=14;break e;case N:W=16,E=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return l=Or(W,w,l,j),l.elementType=i,l.type=E,l.lanes=A,l}function Mi(i,l,w,E){return i=Or(7,i,E,l),i.lanes=w,i}function Qu(i,l,w,E){return i=Or(22,i,E,l),i.elementType=B,i.lanes=w,i.stateNode={isHidden:!1},i}function Nv(i,l,w){return i=Or(6,i,null,l),i.lanes=w,i}function Lv(i,l,w){return l=Or(4,i.children!==null?i.children:[],i.key,l),l.lanes=w,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function BM(i,l,w,E,j){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cg(0),this.expirationTimes=cg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cg(0),this.identifierPrefix=E,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function Ov(i,l,w,E,j,A,W,Y,J){return i=new BM(i,l,w,Y,J),l===1?(l=1,A===!0&&(l|=8)):l=0,A=Or(3,null,null,l),i.current=A,A.stateNode=i,A.memoizedState={element:E,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yg(A),i}function UM(i,l,w){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:E==null?null:""+E,children:i,containerInfo:l,implementation:w}}function sC(i){if(!i)return Fo;i=i._reactInternals;e:{if(bi(i)!==i||i.tag!==1)throw Error(n(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Xn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(i.tag===1){var w=i.type;if(Xn(w))return Px(i,w,l)}return l}function oC(i,l,w,E,j,A,W,Y,J){return i=Ov(w,E,!0,i,j,A,W,Y,J),i.context=sC(null),w=i.current,E=Hn(),j=qo(w),A=to(E,j),A.callback=l??null,Uo(w,A,j),i.current.lanes=j,Wc(i,j,E),Zn(i,E),i}function Ju(i,l,w,E){var j=l.current,A=Hn(),W=qo(j);return w=sC(w),l.context===null?l.context=w:l.pendingContext=w,l=to(A,W),l.payload={element:i},E=E===void 0?null:E,E!==null&&(l.callback=E),i=Uo(j,l,W),i!==null&&(Jr(i,j,W,A),Iu(i,j,W)),W}function Zu(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function iC(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var w=i.retryLane;i.retryLane=w!==0&&w<l?w:l}}function Av(i,l){iC(i,l),(i=i.alternate)&&iC(i,l)}function VM(){return null}var aC=typeof reportError=="function"?reportError:function(i){console.error(i)};function $v(i){this._internalRoot=i}ef.prototype.render=$v.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));Ju(i,l,null,null)},ef.prototype.unmount=$v.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Di(function(){Ju(null,i,null,null)}),l[Xs]=null}};function ef(i){this._internalRoot=i}ef.prototype.unstable_scheduleHydration=function(i){if(i){var l=Hb();i={blockedOn:null,target:i,priority:l};for(var w=0;w<No.length&&l!==0&&l<No[w].priority;w++);No.splice(w,0,i),w===0&&Gb(i)}};function Fv(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function tf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function cC(){}function HM(i,l,w,E,j){if(j){if(typeof E=="function"){var A=E;E=function(){var de=Zu(W);A.call(de)}}var W=oC(l,E,i,0,null,!1,!1,"",cC);return i._reactRootContainer=W,i[Xs]=W.current,ol(i.nodeType===8?i.parentNode:i),Di(),W}for(;j=i.lastChild;)i.removeChild(j);if(typeof E=="function"){var Y=E;E=function(){var de=Zu(J);Y.call(de)}}var J=Ov(i,0,!1,null,null,!1,!1,"",cC);return i._reactRootContainer=J,i[Xs]=J.current,ol(i.nodeType===8?i.parentNode:i),Di(function(){Ju(l,J,w,E)}),J}function nf(i,l,w,E,j){var A=w._reactRootContainer;if(A){var W=A;if(typeof j=="function"){var Y=j;j=function(){var J=Zu(W);Y.call(J)}}Ju(l,W,i,j)}else W=HM(w,l,i,j,E);return Zu(W)}Ub=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var w=Hc(l.pendingLanes);w!==0&&(lg(l,w|1),Zn(l,Qt()),(yt&6)===0&&(Ha=Qt()+500,zo()))}break;case 13:Di(function(){var E=eo(i,1);if(E!==null){var j=Hn();Jr(E,i,1,j)}}),Av(i,1)}},dg=function(i){if(i.tag===13){var l=eo(i,134217728);if(l!==null){var w=Hn();Jr(l,i,134217728,w)}Av(i,134217728)}},Vb=function(i){if(i.tag===13){var l=qo(i),w=eo(i,l);if(w!==null){var E=Hn();Jr(w,i,l,E)}Av(i,l)}},Hb=function(){return Tt},Wb=function(i,l){var w=Tt;try{return Tt=i,l()}finally{Tt=w}},hr=function(i,l,w){switch(l){case"input":if(pe(i,w),l=w.name,w.type==="radio"&&l!=null){for(w=i;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<w.length;l++){var E=w[l];if(E!==i&&E.form===i.form){var j=wu(E);if(!j)throw Error(n(90));xe(E),pe(E,j)}}}break;case"textarea":be(i,w);break;case"select":l=w.value,l!=null&&Je(i,!!w.multiple,l,!1)}},Xd=Dv,Gt=Di;var WM={usingClientEntryPoint:!1,Events:[cl,ja,wu,Kd,Yd,Dv]},xl={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qM={bundleType:xl.bundleType,version:xl.version,rendererPackageName:xl.rendererPackageName,rendererConfig:xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Nb(i),i===null?null:i.stateNode},findFiberByHostInstance:xl.findFiberByHostInstance||VM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{eu=rf.inject(qM),Ds=rf}catch{}}return er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WM,er.createPortal=function(i,l){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(l))throw Error(n(200));return UM(i,l,null,w)},er.createRoot=function(i,l){if(!Fv(i))throw Error(n(299));var w=!1,E="",j=aC;return l!=null&&(l.unstable_strictMode===!0&&(w=!0),l.identifierPrefix!==void 0&&(E=l.identifierPrefix),l.onRecoverableError!==void 0&&(j=l.onRecoverableError)),l=Ov(i,1,!1,null,null,w,!1,E,j),i[Xs]=l.current,ol(i.nodeType===8?i.parentNode:i),new $v(l)},er.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Nb(l),i=i===null?null:i.stateNode,i},er.flushSync=function(i){return Di(i)},er.hydrate=function(i,l,w){if(!tf(l))throw Error(n(200));return nf(null,i,l,!0,w)},er.hydrateRoot=function(i,l,w){if(!Fv(i))throw Error(n(405));var E=w!=null&&w.hydratedSources||null,j=!1,A="",W=aC;if(w!=null&&(w.unstable_strictMode===!0&&(j=!0),w.identifierPrefix!==void 0&&(A=w.identifierPrefix),w.onRecoverableError!==void 0&&(W=w.onRecoverableError)),l=oC(l,null,i,1,w??null,j,!1,A,W),i[Xs]=l.current,ol(i),E)for(i=0;i<E.length;i++)w=E[i],j=w._getVersion,j=j(w._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[w,j]:l.mutableSourceEagerHydrationData.push(w,j);return new ef(l)},er.render=function(i,l,w){if(!tf(l))throw Error(n(200));return nf(null,i,l,!1,w)},er.unmountComponentAtNode=function(i){if(!tf(i))throw Error(n(40));return i._reactRootContainer?(Di(function(){nf(null,null,i,!1,function(){i._reactRootContainer=null,i[Xs]=null})}),!0):!1},er.unstable_batchedUpdates=Dv,er.unstable_renderSubtreeIntoContainer=function(i,l,w,E){if(!tf(w))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return nf(i,l,w,!1,E)},er.version="18.3.1-next-f1338f8080-20240426",er}var gC;function rE(){if(gC)return Vv.exports;gC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Vv.exports=nN(),Vv.exports}var vC;function rN(){if(vC)return sf;vC=1;var e=rE();return sf.createRoot=e.createRoot,sf.hydrateRoot=e.hydrateRoot,sf}var sN=rN(),I=_h();const wt=ci(I),sE=XM({__proto__:null,default:wt},[I]);var qv={exports:{}},Gv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yC;function oN(){if(yC)return Gv;yC=1;var e=_h();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=e.useRef,o=e.useEffect,a=e.useMemo,c=e.useDebugValue;return Gv.useSyncExternalStoreWithSelector=function(f,d,p,h,g){var S=s(null);if(S.current===null){var y={hasValue:!1,value:null};S.current=y}else y=S.current;S=a(function(){function C(x){if(!T){if(T=!0,R=x,x=h(x),g!==void 0&&y.hasValue){var _=y.value;if(g(_,x))return m=_}return m=x}if(_=m,n(R,x))return _;var k=h(x);return g!==void 0&&g(_,k)?(R=x,_):(R=x,m=k)}var T=!1,R,m,v=p===void 0?null:p;return[function(){return C(d())},v===null?void 0:function(){return C(v())}]},[d,p,h,g]);var b=r(f,S[0],S[1]);return o(function(){y.hasValue=!0,y.value=b},[b]),c(b),b},Gv}var wC;function iN(){return wC||(wC=1,qv.exports=oN()),qv.exports}var aN=iN();function cN(e){e()}function lN(){let e=null,t=null;return{clear(){e=null,t=null},notify(){cN(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!r||e===null||(r=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var SC={notify(){},get:()=>[]};function dN(e,t){let n,r=SC,s=0,o=!1;function a(b){p();const C=r.subscribe(b);let T=!1;return()=>{T||(T=!0,C(),h())}}function c(){r.notify()}function f(){y.onStateChange&&y.onStateChange()}function d(){return o}function p(){s++,n||(n=e.subscribe(f),r=lN())}function h(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=SC)}function g(){o||(o=!0,p())}function S(){o&&(o=!1,h())}const y={addNestedSub:a,notifyNestedSubs:c,handleChangeWrapper:f,isSubscribed:d,trySubscribe:g,tryUnsubscribe:S,getListeners:()=>r};return y}var uN=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fN=uN(),pN=()=>typeof navigator<"u"&&navigator.product==="ReactNative",hN=pN(),mN=()=>fN||hN?I.useLayoutEffect:I.useEffect,gN=mN(),Kv=Symbol.for("react-redux-context"),Yv=typeof globalThis<"u"?globalThis:{};function vN(){if(!I.createContext)return{};const e=Yv[Kv]??(Yv[Kv]=new Map);let t=e.get(I.createContext);return t||(t=I.createContext(null),e.set(I.createContext,t)),t}var oi=vN();function yN(e){const{children:t,context:n,serverState:r,store:s}=e,o=I.useMemo(()=>{const f=dN(s);return{store:s,subscription:f,getServerState:r?()=>r:void 0}},[s,r]),a=I.useMemo(()=>s.getState(),[s]);gN(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),a!==s.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,a]);const c=n||oi;return I.createElement(c.Provider,{value:o},t)}var wN=yN;function e0(e=oi){return function(){return I.useContext(e)}}var oE=e0();function iE(e=oi){const t=e===oi?oE:e0(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var SN=iE();function bN(e=oi){const t=e===oi?SN:iE(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var xN=bN(),CN=(e,t)=>e===t;function _N(e=oi){const t=e===oi?oE:e0(e),n=(r,s={})=>{const{equalityFn:o=CN}=typeof s=="function"?{equalityFn:s}:s,a=t(),{store:c,subscription:f,getServerState:d}=a;I.useRef(!0);const p=I.useCallback({[r.name](g){return r(g)}}[r.name],[r]),h=aN.useSyncExternalStoreWithSelector(f.addNestedSub,c.getState,d||c.getState,p,o);return I.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var RN=_N(),$s=function(){return $s=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},$s.apply(this,arguments)};function aE(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function TN(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Df="right-scroll-bar-position",jf="width-before-scroll-bar",EN="with-scroll-bars-hidden",kN="--removed-body-scroll-bar-size";function Xv(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function IN(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var DN=typeof window<"u"?I.useLayoutEffect:I.useEffect,bC=new WeakMap;function jN(e,t){var n=IN(null,function(r){return e.forEach(function(s){return Xv(s,r)})});return DN(function(){var r=bC.get(n);if(r){var s=new Set(r),o=new Set(e),a=n.current;s.forEach(function(c){o.has(c)||Xv(c,null)}),o.forEach(function(c){s.has(c)||Xv(c,a)})}bC.set(n,e)},[e]),n}function PN(e){return e}function MN(e,t){t===void 0&&(t=PN);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var a=t(o,r);return n.push(a),function(){n=n.filter(function(c){return c!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(c){return o(c)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var c=n;n=[],c.forEach(o),a=n}var f=function(){var p=a;a=[],p.forEach(o)},d=function(){return Promise.resolve().then(f)};d(),n={push:function(p){a.push(p),d()},filter:function(p){return a=a.filter(p),n}}}};return s}function NN(e){e===void 0&&(e={});var t=MN(null);return t.options=$s({async:!0,ssr:!1},e),t}var cE=function(e){var t=e.sideCar,n=aE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,$s({},n))};cE.isSideCarExport=!0;function LN(e,t){return e.useMedium(t),cE}var lE=NN(),Qv=function(){},Rh=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:Qv,onWheelCapture:Qv,onTouchMoveCapture:Qv}),s=r[0],o=r[1],a=e.forwardProps,c=e.children,f=e.className,d=e.removeScrollBar,p=e.enabled,h=e.shards,g=e.sideCar,S=e.noIsolation,y=e.inert,b=e.allowPinchZoom,C=e.as,T=C===void 0?"div":C,R=e.gapMode,m=aE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),v=g,x=jN([n,t]),_=$s($s({},m),s);return I.createElement(I.Fragment,null,p&&I.createElement(v,{sideCar:lE,removeScrollBar:d,shards:h,noIsolation:S,inert:y,setCallbacks:o,allowPinchZoom:!!b,lockRef:n,gapMode:R}),a?I.cloneElement(I.Children.only(c),$s($s({},_),{ref:x})):I.createElement(T,$s({},_,{className:f,ref:x}),c))});Rh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rh.classNames={fullWidth:jf,zeroRight:Df};var ON=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AN(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ON();return t&&e.setAttribute("nonce",t),e}function $N(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function FN(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var zN=function(){var e=0,t=null;return{add:function(n){e==0&&(t=AN())&&($N(t,n),FN(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},BN=function(){var e=zN();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},dE=function(){var e=BN(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},UN={left:0,top:0,right:0,gap:0},Jv=function(e){return parseInt(e||"",10)||0},VN=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Jv(n),Jv(r),Jv(s)]},HN=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return UN;var t=VN(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},WN=dE(),ac="data-scroll-locked",qN=function(e,t,n,r){var s=e.left,o=e.top,a=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(EN,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(ac,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Df,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(jf,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Df," .").concat(Df,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(jf," .").concat(jf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ac,`] {
    `).concat(kN,": ").concat(c,`px;
  }
`)},xC=function(){var e=parseInt(document.body.getAttribute(ac)||"0",10);return isFinite(e)?e:0},GN=function(){I.useEffect(function(){return document.body.setAttribute(ac,(xC()+1).toString()),function(){var e=xC()-1;e<=0?document.body.removeAttribute(ac):document.body.setAttribute(ac,e.toString())}},[])},KN=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;GN();var o=I.useMemo(function(){return HN(s)},[s]);return I.createElement(WN,{styles:qN(o,!t,s,n?"":"!important")})},Zy=!1;if(typeof window<"u")try{var of=Object.defineProperty({},"passive",{get:function(){return Zy=!0,!0}});window.addEventListener("test",of,of),window.removeEventListener("test",of,of)}catch{Zy=!1}var qa=Zy?{passive:!1}:!1,YN=function(e){return e.tagName==="TEXTAREA"},uE=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!YN(e)&&n[t]==="visible")},XN=function(e){return uE(e,"overflowY")},QN=function(e){return uE(e,"overflowX")},CC=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=fE(e,r);if(s){var o=pE(e,r),a=o[1],c=o[2];if(a>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},JN=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},ZN=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},fE=function(e,t){return e==="v"?XN(t):QN(t)},pE=function(e,t){return e==="v"?JN(t):ZN(t)},eL=function(e,t){return e==="h"&&t==="rtl"?-1:1},tL=function(e,t,n,r,s){var o=eL(e,window.getComputedStyle(t).direction),a=o*r,c=n.target,f=t.contains(c),d=!1,p=a>0,h=0,g=0;do{var S=pE(e,c),y=S[0],b=S[1],C=S[2],T=b-C-o*y;(y||T)&&fE(e,c)&&(h+=T,g+=y),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!f&&c!==document.body||f&&(t.contains(c)||t===c));return(p&&Math.abs(h)<1||!p&&Math.abs(g)<1)&&(d=!0),d},af=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},_C=function(e){return[e.deltaX,e.deltaY]},RC=function(e){return e&&"current"in e?e.current:e},nL=function(e,t){return e[0]===t[0]&&e[1]===t[1]},rL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},sL=0,Ga=[];function oL(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),s=I.useState(sL++)[0],o=I.useState(dE)[0],a=I.useRef(e);I.useEffect(function(){a.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var b=TN([e.lockRef.current],(e.shards||[]).map(RC),!0).filter(Boolean);return b.forEach(function(C){return C.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),b.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var c=I.useCallback(function(b,C){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!a.current.allowPinchZoom;var T=af(b),R=n.current,m="deltaX"in b?b.deltaX:R[0]-T[0],v="deltaY"in b?b.deltaY:R[1]-T[1],x,_=b.target,k=Math.abs(m)>Math.abs(v)?"h":"v";if("touches"in b&&k==="h"&&_.type==="range")return!1;var D=CC(k,_);if(!D)return!0;if(D?x=k:(x=k==="v"?"h":"v",D=CC(k,_)),!D)return!1;if(!r.current&&"changedTouches"in b&&(m||v)&&(r.current=x),!x)return!0;var M=r.current||x;return tL(M,C,b,M==="h"?m:v)},[]),f=I.useCallback(function(b){var C=b;if(!(!Ga.length||Ga[Ga.length-1]!==o)){var T="deltaY"in C?_C(C):af(C),R=t.current.filter(function(x){return x.name===C.type&&(x.target===C.target||C.target===x.shadowParent)&&nL(x.delta,T)})[0];if(R&&R.should){C.cancelable&&C.preventDefault();return}if(!R){var m=(a.current.shards||[]).map(RC).filter(Boolean).filter(function(x){return x.contains(C.target)}),v=m.length>0?c(C,m[0]):!a.current.noIsolation;v&&C.cancelable&&C.preventDefault()}}},[]),d=I.useCallback(function(b,C,T,R){var m={name:b,delta:C,target:T,should:R,shadowParent:iL(T)};t.current.push(m),setTimeout(function(){t.current=t.current.filter(function(v){return v!==m})},1)},[]),p=I.useCallback(function(b){n.current=af(b),r.current=void 0},[]),h=I.useCallback(function(b){d(b.type,_C(b),b.target,c(b,e.lockRef.current))},[]),g=I.useCallback(function(b){d(b.type,af(b),b.target,c(b,e.lockRef.current))},[]);I.useEffect(function(){return Ga.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",f,qa),document.addEventListener("touchmove",f,qa),document.addEventListener("touchstart",p,qa),function(){Ga=Ga.filter(function(b){return b!==o}),document.removeEventListener("wheel",f,qa),document.removeEventListener("touchmove",f,qa),document.removeEventListener("touchstart",p,qa)}},[]);var S=e.removeScrollBar,y=e.inert;return I.createElement(I.Fragment,null,y?I.createElement(o,{styles:rL(s)}):null,S?I.createElement(KN,{gapMode:e.gapMode}):null)}function iL(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const aL=LN(lE,oL);var Zp=I.forwardRef(function(e,t){return I.createElement(Rh,$s({},e,{ref:t,sideCar:aL}))});Zp.classNames=Rh.classNames;function xn(e){return Object.keys(e)}function Zv(e){return e&&typeof e=="object"&&!Array.isArray(e)}function t0(e,t){const n={...e},r=t;return Zv(e)&&Zv(t)&&Object.keys(t).forEach(s=>{Zv(r[s])&&s in e?n[s]=t0(n[s],r[s]):n[s]=r[s]}),n}function cL(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function lL(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function oa(e){const t=lL(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function ey(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function hE(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const s=`${r/16}${e}`;return t?ey(s):s}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(o=>n(o)).join(",");if(r.includes(" "))return r.split(" ").map(o=>n(o)).join(" ");if(r.includes(e))return t?ey(r):r;const s=r.replace("px","");if(!Number.isNaN(Number(s))){const o=`${Number(s)/16}${e}`;return t?ey(o):o}}return r}return n}const he=hE("rem",{shouldScale:!0}),TC=hE("em");function li(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function mE(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function di(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function cr(e){const t=I.createContext(null);return[({children:s,value:o})=>u.jsx(t.Provider,{value:o,children:s}),()=>{const s=I.useContext(t);if(s===null)throw new Error(e);return s}]}function ui(e=null){const t=I.createContext(e);return[({children:s,value:o})=>u.jsx(t.Provider,{value:o,children:s}),()=>I.useContext(t)]}function EC(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function eh(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function dL(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function uL(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function fL(e,t,n){return eh(e,n)===eh(t,n)}function gE({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:s=!1,dir:o="rtl",orientation:a}){return c=>{var y;n==null||n(c);const f=Array.from(((y=eh(c.currentTarget,e))==null?void 0:y.querySelectorAll(t))||[]).filter(b=>fL(c.currentTarget,b,e)),d=f.findIndex(b=>c.currentTarget===b),p=uL(d,f,r),h=dL(d,f,r),g=o==="rtl"?h:p,S=o==="rtl"?p:h;switch(c.key){case"ArrowRight":{a==="horizontal"&&(c.stopPropagation(),c.preventDefault(),f[g].focus(),s&&f[g].click());break}case"ArrowLeft":{a==="horizontal"&&(c.stopPropagation(),c.preventDefault(),f[S].focus(),s&&f[S].click());break}case"ArrowUp":{a==="vertical"&&(c.stopPropagation(),c.preventDefault(),f[h].focus(),s&&f[h].click());break}case"ArrowDown":{a==="vertical"&&(c.stopPropagation(),c.preventDefault(),f[p].focus(),s&&f[p].click());break}case"Home":{c.stopPropagation(),c.preventDefault(),!f[0].disabled&&f[0].focus();break}case"End":{c.stopPropagation(),c.preventDefault();const b=f.length-1;!f[b].disabled&&f[b].focus();break}}}}const pL={app:100,modal:200,popover:300,overlay:400,max:9999};function lr(e){return pL[e]}const ew=()=>{};function hL(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||ew:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function nt(e,t="size",n=!0){if(e!==void 0)return mE(e)?n?he(e):e:`var(--${t}-${e})`}function Nt(e){return nt(e,"mantine-spacing")}function jt(e){return e===void 0?"var(--mantine-radius-default)":nt(e,"mantine-radius")}function en(e){return nt(e,"mantine-font-size")}function mL(e){return nt(e,"mantine-line-height",!1)}function n0(e){if(e)return nt(e,"mantine-shadow",!1)}function tr(e,t){return n=>{e==null||e(n),t==null||t(n)}}function gL(e,t){return e in t?oa(t[e]):oa(e)}function vE(e,t){const n=e.map(r=>({value:r,px:gL(r,t)}));return n.sort((r,s)=>r.px-s.px),n}function Fs(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function vL(e,t,n){var r;return n?Array.from(((r=eh(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(s=>s===n):null}function yL(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function br(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function yE(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Vi(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const wL=()=>{};function Th(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,s=Vi(e),o=I.useRef(0),a=Object.assign(I.useCallback((...c)=>{window.clearTimeout(o.current);const f=()=>{o.current!==0&&(o.current=0,s(...c))};a.flush=f,o.current=window.setTimeout(f,n)},[s,n]),{flush:wL});return I.useEffect(()=>()=>{window.clearTimeout(o.current),r&&a.flush()},[a,r]),a}const kC=["mousedown","touchstart"];function SL(e,t,n){const r=I.useRef(null);return I.useEffect(()=>{const s=o=>{const{target:a}=o??{};if(Array.isArray(n)){const c=(a==null?void 0:a.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(a)&&a.tagName!=="HTML";n.every(d=>!!d&&!o.composedPath().includes(d))&&!c&&e()}else r.current&&!r.current.contains(a)&&e()};return(t||kC).forEach(o=>document.addEventListener(o,s)),()=>{(t||kC).forEach(o=>document.removeEventListener(o,s))}},[r,e,n]),r}function bL({timeout:e=2e3}={}){const[t,n]=I.useState(null),[r,s]=I.useState(!1),[o,a]=I.useState(null),c=p=>{window.clearTimeout(o),a(window.setTimeout(()=>s(!1),e)),s(p)};return{copy:p=>{"clipboard"in navigator?navigator.clipboard.writeText(p).then(()=>c(!0)).catch(h=>n(h)):n(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{s(!1),n(null),window.clearTimeout(o)},error:t,copied:r}}function xL(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function CL(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function _L(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,s]=I.useState(n?t:CL(e)),o=I.useRef(null);return I.useEffect(()=>{if("matchMedia"in window)return o.current=window.matchMedia(e),s(o.current.matches),xL(o.current,a=>s(a.matches))},[e]),r}const bc=typeof document<"u"?I.useLayoutEffect:I.useEffect;function zn(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function wE({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(null),r=()=>{var s;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((s=n.current)==null||s.focus({preventScroll:!0}))};return zn(()=>{let s=-1;const o=a=>{a.key==="Tab"&&window.clearTimeout(s)};return document.addEventListener("keydown",o),e?n.current=document.activeElement:t&&(s=window.setTimeout(r,10)),()=>{window.clearTimeout(s),document.removeEventListener("keydown",o)}},[e,t]),r}const RL=/input|select|textarea|button|object/,SE="a, input, select, textarea, button, object, [tabindex]";function TL(e){return e.style.display==="none"}function EL(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(TL(n))return!1;n=n.parentNode}return!0}function bE(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function tw(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(bE(e));return(RL.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&EL(e)}function xE(e){const t=bE(e);return(Number.isNaN(t)||t>=0)&&tw(e)}function kL(e){return Array.from(e.querySelectorAll(SE)).filter(xE)}function IL(e,t){const n=kL(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],s=e.getRootNode();let o=r===s.activeElement||e===s.activeElement;const a=s.activeElement;if(a.tagName==="INPUT"&&a.getAttribute("type")==="radio"&&(o=n.filter(p=>p.getAttribute("type")==="radio"&&p.getAttribute("name")===a.getAttribute("name")).includes(r)),!o)return;t.preventDefault();const f=n[t.shiftKey?n.length-1:0];f&&f.focus()}function DL(e=!0){const t=I.useRef(null),n=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(SE));o=a.find(xE)||a.find(tw)||null,!o&&tw(s)&&(o=s)}o&&o.focus({preventScroll:!0})},r=I.useCallback(s=>{e&&s!==null&&t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&n(s)}),t.current=s):t.current=null)},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const s=o=>{o.key==="Tab"&&t.current&&IL(t.current,o)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e]),r}const jL=e=>(e+1)%1e6;function PL(){const[,e]=I.useReducer(jL,0);return e}const ML=wt.useId||(()=>{});function NL(){const e=ML();return e?`mantine-${e.replace(/:/g,"")}`:""}function Cs(e){const t=NL(),[n,r]=I.useState(t);return bc(()=>{r(yE())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function LL(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function th(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function CE(...e){const t=new Map;return n=>{if(e.forEach(r=>{const s=th(r,n);s&&t.set(r,s)}),t.size>0)return()=>{e.forEach(r=>{const s=t.get(r);s?s():th(r,null)}),t.clear()}}}function dn(...e){return I.useCallback(CE(...e),e)}function _E(e){return{x:br(e.x,0,1),y:br(e.y,0,1)}}function r0(e,t,n="ltr"){const r=I.useRef(null),s=I.useRef(!1),o=I.useRef(!1),a=I.useRef(0),[c,f]=I.useState(!1);return I.useEffect(()=>{s.current=!0},[]),I.useEffect(()=>{const d=r.current,p=({x:m,y:v})=>{cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{if(s.current&&d){d.style.userSelect="none";const x=d.getBoundingClientRect();if(x.width&&x.height){const _=br((m-x.left)/x.width,0,1);e({x:n==="ltr"?_:1-_,y:br((v-x.top)/x.height,0,1)})}}})},h=()=>{document.addEventListener("mousemove",C),document.addEventListener("mouseup",y),document.addEventListener("touchmove",R),document.addEventListener("touchend",y)},g=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",R),document.removeEventListener("touchend",y)},S=()=>{!o.current&&s.current&&(o.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),f(!0),h())},y=()=>{o.current&&s.current&&(o.current=!1,f(!1),g(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},b=m=>{S(),m.preventDefault(),C(m)},C=m=>p({x:m.clientX,y:m.clientY}),T=m=>{m.cancelable&&m.preventDefault(),S(),R(m)},R=m=>{m.cancelable&&m.preventDefault(),p({x:m.changedTouches[0].clientX,y:m.changedTouches[0].clientY})};return d==null||d.addEventListener("mousedown",b),d==null||d.addEventListener("touchstart",T,{passive:!1}),()=>{d&&(d.removeEventListener("mousedown",b),d.removeEventListener("touchstart",T))}},[n,e]),{ref:r,active:c}}function gn({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[s,o]=I.useState(t!==void 0?t:n),a=(c,...f)=>{o(c),r==null||r(c,...f)};return e!==void 0?[e,r,!0]:[s,a,!1]}function Xo(e,t){const n=t-e+1;return Array.from({length:n},(r,s)=>s+e)}const cf="dots";function OL({total:e,siblings:t=1,boundaries:n=1,page:r,initialPage:s=1,onChange:o}){const a=Math.max(Math.trunc(e),0),[c,f]=gn({value:r,onChange:o,defaultValue:s,finalValue:s}),d=b=>{b<=0?f(1):b>a?f(a):f(b)},p=()=>d(c+1),h=()=>d(c-1),g=()=>d(1),S=()=>d(a);return{range:I.useMemo(()=>{if(t*2+3+n*2>=a)return Xo(1,a);const C=Math.max(c-t,n),T=Math.min(c+t,a-n),R=C>n+2,m=T<a-(n+1);if(!R&&m){const v=t*2+n+2;return[...Xo(1,v),cf,...Xo(a-(n-1),a)]}if(R&&!m){const v=n+1+2*t;return[...Xo(1,n),cf,...Xo(a-v,a)]}return[...Xo(1,n),cf,...Xo(C,T),cf,...Xo(a-n+1,a)]},[a,t,c]),active:c,setPage:d,next:p,previous:h,first:g,last:S}}function Eh(e,t){return _L("(prefers-reduced-motion: reduce)",e,t)}function _t(e=!1,t){const{onOpen:n,onClose:r}={},[s,o]=I.useState(e),a=I.useCallback(()=>{o(d=>d||(n==null||n(),!0))},[n]),c=I.useCallback(()=>{o(d=>d&&(r==null||r(),!1))},[r]),f=I.useCallback(()=>{s?c():a()},[c,a,s]);return[s,{open:a,close:c,toggle:f}]}function AL(e){const t=I.useRef(void 0);return I.useEffect(()=>{t.current=e},[e]),t.current}function $L(){return navigator.userAgent.includes("OPR")}function FL(){const[e,t]=I.useState(!1);bc(()=>{t(typeof window<"u"&&!$L()&&"EyeDropper"in window)},[]);const n=I.useCallback((r={})=>e?new window.EyeDropper().open(r):Promise.resolve(void 0),[e]);return{supported:e,open:n}}var zL={};function BL(){return typeof process<"u"&&zL?"production":"development"}function IC(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function kh(e){var n;const t=wt.version;return typeof wt.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function RE(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=RE(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ln(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=RE(e))&&(r&&(r+=" "),r+=t);return r}const UL={};function VL(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,s])=>{t[r]?t[r]=ln(t[r],s):t[r]=s})}),t}function Ih({theme:e,classNames:t,props:n,stylesCtx:r}){const o=(Array.isArray(t)?t:[t]).map(a=>typeof a=="function"?a(e,n,r):a||UL);return VL(o)}function nh({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((o,a)=>typeof a=="function"?{...o,...a(e,n,r)}:{...o,...a},{})}const TE=I.createContext(null);function fi(){const e=I.useContext(TE);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function HL(){return fi().cssVariablesResolver}function WL(){return fi().classNamesPrefix}function s0(){return fi().getStyleNonce}function qL(){return fi().withStaticClasses}function GL(){return fi().headless}function KL(){var e;return(e=fi().stylesTransform)==null?void 0:e.sx}function YL(){var e;return(e=fi().stylesTransform)==null?void 0:e.styles}function EE(){return fi().env||"default"}function XL(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function QL(e){let t=e.replace("#","");if(t.length===3){const a=t.split("");t=[a[0],a[0],a[1],a[1],a[2],a[2]].join("")}if(t.length===8){const a=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a}}const n=parseInt(t,16),r=n>>16&255,s=n>>8&255,o=n&255;return{r,g:s,b:o,a:1}}function JL(e){const[t,n,r,s]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:s||1}}function ZL(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),s=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100,a=n[5]?parseFloat(n[5]):void 0,c=(1-Math.abs(2*o-1))*s,f=r/60,d=c*(1-Math.abs(f%2-1)),p=o-c/2;let h,g,S;return f>=0&&f<1?(h=c,g=d,S=0):f>=1&&f<2?(h=d,g=c,S=0):f>=2&&f<3?(h=0,g=c,S=d):f>=3&&f<4?(h=0,g=d,S=c):f>=4&&f<5?(h=d,g=0,S=c):(h=c,g=0,S=d),{r:Math.round((h+p)*255),g:Math.round((g+p)*255),b:Math.round((S+p)*255),a:a||1}}function o0(e){return XL(e)?QL(e):e.startsWith("rgb")?JL(e):e.startsWith("hsl")?ZL(e):{r:0,g:0,b:0,a:1}}function lf(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:s,a:o}=o0(e),a=1-t,c=f=>Math.round(f*a);return`rgba(${c(n)}, ${c(r)}, ${c(s)}, ${o})`}function hd(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function ty(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function eO(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function tO(e){if(e.startsWith("oklch("))return(eO(e)||0)/100;const{r:t,g:n,b:r}=o0(e),s=t/255,o=n/255,a=r/255,c=ty(s),f=ty(o),d=ty(a);return .2126*c+.7152*f+.0722*d}function _l(e,t=.179){return e.startsWith("var(")?!1:tO(e)>t}function pi({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:_l(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:_l(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:_l(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,s]=e.split("."),o=s?Number(s):void 0,a=r in t.colors;if(a){const c=o!==void 0?t.colors[r][o]:t.colors[r][hd(t,n||"light")];return{color:r,value:c,shade:o,isThemeColor:a,isLight:_l(c,t.luminanceThreshold),variable:s?`--mantine-color-${r}-${o}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:a,isLight:_l(e,t.luminanceThreshold),shade:o,variable:void 0}}function Wt(e,t){const n=pi({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function nw(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)??t.defaultGradient.deg??0},r=Wt(n.from,t),s=Wt(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${s} 100%)`}function As(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const o=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${o}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:s}=o0(e);return`rgba(${n}, ${r}, ${s}, ${t})`}const Ka=As,nO=({color:e,theme:t,variant:n,gradient:r,autoContrast:s})=>{const o=pi({color:e,theme:t}),a=typeof s=="boolean"?s:t.autoContrast;if(n==="filled"){const c=a&&o.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return o.isThemeColor?o.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:c,border:`${he(1)} solid transparent`}:{background:`var(--mantine-color-${o.color}-${o.shade})`,hover:`var(--mantine-color-${o.color}-${o.shade===9?8:o.shade+1})`,color:c,border:`${he(1)} solid transparent`}:{background:e,hover:lf(e,.1),color:c,border:`${he(1)} solid transparent`}}if(n==="light"){if(o.isThemeColor){if(o.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${he(1)} solid transparent`};const c=t.colors[o.color][o.shade];return{background:As(c,.1),hover:As(c,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${he(1)} solid transparent`}}return{background:As(e,.1),hover:As(e,.12),color:e,border:`${he(1)} solid transparent`}}if(n==="outline")return o.isThemeColor?o.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${he(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:As(t.colors[o.color][o.shade],.05),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${he(1)} solid var(--mantine-color-${o.color}-${o.shade})`}:{background:"transparent",hover:As(e,.05),color:e,border:`${he(1)} solid ${e}`};if(n==="subtle"){if(o.isThemeColor){if(o.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${he(1)} solid transparent`};const c=t.colors[o.color][o.shade];return{background:"transparent",hover:As(c,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${he(1)} solid transparent`}}return{background:"transparent",hover:As(e,.12),color:e,border:`${he(1)} solid transparent`}}return n==="transparent"?o.isThemeColor?o.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${he(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${he(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${he(1)} solid transparent`}:n==="white"?o.isThemeColor?o.shade===void 0?{background:"var(--mantine-color-white)",hover:lf(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${he(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:lf(t.white,.01),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${he(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:lf(t.white,.01),color:e,border:`${he(1)} solid transparent`}:n==="gradient"?{background:nw(r,t),hover:nw(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${he(1)} solid var(--mantine-color-default-border)`}:{}},rO={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},DC="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",i0={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:rO,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:nO,autoContrast:!1,luminanceThreshold:.3,fontFamily:DC,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:DC,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:he(34),lineHeight:"1.3"},h2:{fontSize:he(26),lineHeight:"1.35"},h3:{fontSize:he(22),lineHeight:"1.4"},h4:{fontSize:he(18),lineHeight:"1.45"},h5:{fontSize:he(16),lineHeight:"1.5"},h6:{fontSize:he(14),lineHeight:"1.5"}}},fontSizes:{xs:he(12),sm:he(14),md:he(16),lg:he(18),xl:he(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:he(2),sm:he(4),md:he(8),lg:he(16),xl:he(32)},spacing:{xs:he(10),sm:he(12),md:he(16),lg:he(20),xl:he(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${he(1)} ${he(3)} rgba(0, 0, 0, 0.05), 0 ${he(1)} ${he(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${he(1)} ${he(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${he(10)} ${he(15)} ${he(-5)}, rgba(0, 0, 0, 0.04) 0 ${he(7)} ${he(7)} ${he(-5)}`,md:`0 ${he(1)} ${he(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${he(20)} ${he(25)} ${he(-5)}, rgba(0, 0, 0, 0.04) 0 ${he(10)} ${he(10)} ${he(-5)}`,lg:`0 ${he(1)} ${he(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${he(28)} ${he(23)} ${he(-7)}, rgba(0, 0, 0, 0.04) 0 ${he(12)} ${he(12)} ${he(-7)}`,xl:`0 ${he(1)} ${he(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${he(36)} ${he(28)} ${he(-7)}, rgba(0, 0, 0, 0.04) 0 ${he(17)} ${he(17)} ${he(-7)}`},other:{},components:{}};function jC(e){return e==="auto"||e==="dark"||e==="light"}function sO({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return jC(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&jC(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const oO="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",PC="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function ny(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function MC(e){if(!(e.primaryColor in e.colors))throw new Error(oO);if(typeof e.primaryShade=="object"&&(!ny(e.primaryShade.dark)||!ny(e.primaryShade.light)))throw new Error(PC);if(typeof e.primaryShade=="number"&&!ny(e.primaryShade))throw new Error(PC)}function iO(e,t){var r;if(!t)return MC(e),e;const n=t0(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),MC(n),n}const a0=I.createContext(null),aO=()=>I.useContext(a0)||i0;function jn(){const e=I.useContext(a0);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function kE({theme:e,children:t,inherit:n=!0}){const r=aO(),s=I.useMemo(()=>iO(n?r:i0,e),[e,r,n]);return u.jsx(a0.Provider,{value:s,children:t})}kE.displayName="@mantine/core/MantineThemeProvider";function cO(){const e=jn(),t=s0(),n=xn(e.breakpoints).reduce((r,s)=>{const o=e.breakpoints[s].includes("px"),a=oa(e.breakpoints[s]),c=o?`${a-.1}px`:TC(a-.1),f=o?`${a}px`:TC(a);return`${r}@media (max-width: ${c}) {.mantine-visible-from-${s} {display: none !important;}}@media (min-width: ${f}) {.mantine-hidden-from-${s} {display: none !important;}}`},"");return u.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function ry(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Rl(e,t){return(Array.isArray(e)?e:[e]).reduce((r,s)=>`${s}{${r}}`,t)}function lO(e,t){const n=ry(e.variables),r=n?Rl(t,n):"",s=ry(e.dark),o=ry(e.light),a=s?Rl(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,s):"",c=o?Rl(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${a}${c}`}function xc({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&pi({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function NC(e,t){return xc({color:e.colors[e.primaryColor][hd(e,t)],theme:e,autoContrast:null})}function df({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:s=!0}){if(!e.colors[t])return{};if(n==="light"){const c=hd(e,"light"),f={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${c})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${c===9?8:c+1})`,[`--mantine-color-${r}-light`]:Ka(e.colors[t][c],.1),[`--mantine-color-${r}-light-hover`]:Ka(e.colors[t][c],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${c})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${c})`,[`--mantine-color-${r}-outline-hover`]:Ka(e.colors[t][c],.05)};return s?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...f}:f}const o=hd(e,"dark"),a={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${o})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${o===9?8:o+1})`,[`--mantine-color-${r}-light`]:Ka(e.colors[t][Math.max(0,o-2)],.15),[`--mantine-color-${r}-light-hover`]:Ka(e.colors[t][Math.max(0,o-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(o-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(o-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Ka(e.colors[t][Math.max(o-4,0)],.05)};return s?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...a}:a}function dO(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function Ya(e,t,n){xn(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const IE=e=>{const t=hd(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:he(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":NC(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":NC(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Ya(r.variables,e.breakpoints,"breakpoint"),Ya(r.variables,e.spacing,"spacing"),Ya(r.variables,e.fontSizes,"font-size"),Ya(r.variables,e.lineHeights,"line-height"),Ya(r.variables,e.shadows,"shadow"),Ya(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((o,a)=>{r.variables[`--mantine-primary-color-${a}`]=`var(--mantine-color-${e.primaryColor}-${a})`}),xn(e.colors).forEach(o=>{const a=e.colors[o];if(dO(a)){Object.assign(r.light,df({theme:e,name:a.name,color:a.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,df({theme:e,name:a.name,color:a.dark,colorScheme:"dark",withColorValues:!0}));return}a.forEach((c,f)=>{r.variables[`--mantine-color-${o}-${f}`]=c}),Object.assign(r.light,df({theme:e,color:o,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,df({theme:e,color:o,colorScheme:"dark",withColorValues:!1}))});const s=e.headings.sizes;return xn(s).forEach(o=>{r.variables[`--mantine-${o}-font-size`]=s[o].fontSize,r.variables[`--mantine-${o}-line-height`]=s[o].lineHeight,r.variables[`--mantine-${o}-font-weight`]=s[o].fontWeight||e.headings.fontWeight}),r};function uO({theme:e,generator:t}){const n=IE(e),r=t==null?void 0:t(e);return r?t0(n,r):n}const sy=IE(i0);function fO(e){const t={variables:{},light:{},dark:{}};return xn(e.variables).forEach(n=>{sy.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),xn(e.light).forEach(n=>{sy.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),xn(e.dark).forEach(n=>{sy.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function pO(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function DE({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=jn(),r=s0(),s=HL(),o=uO({theme:n,generator:s}),a=e===":root"&&t,c=a?fO(o):o,f=lO(c,e);return f?u.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${f}${a?"":pO(e)}`}}):null}DE.displayName="@mantine/CssVariables";function hO(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function Xa(e,t){var s,o;const n=typeof window<"u"&&"matchMedia"in window&&((s=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:s.matches),r=e!=="auto"?e:n?"dark":"light";(o=t())==null||o.setAttribute("data-mantine-color-scheme",r)}function mO({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const s=I.useRef(null),[o,a]=I.useState(()=>e.get(t)),c=r||o,f=I.useCallback(p=>{r||(Xa(p,n),a(p),e.set(p))},[e.set,c,r]),d=I.useCallback(()=>{a(t),Xa(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(f),e.unsubscribe),[e.subscribe,e.unsubscribe]),bc(()=>{Xa(e.get(t),n)},[]),I.useEffect(()=>{var h;if(r)return Xa(r,n),()=>{};r===void 0&&Xa(o,n),typeof window<"u"&&"matchMedia"in window&&(s.current=window.matchMedia("(prefers-color-scheme: dark)"));const p=g=>{o==="auto"&&Xa(g.matches?"dark":"light",n)};return(h=s.current)==null||h.addEventListener("change",p),()=>{var g;return(g=s.current)==null?void 0:g.removeEventListener("change",p)}},[o,r]),{colorScheme:c,setColorScheme:f,clearColorScheme:d}}function gO({respectReducedMotion:e,getRootElement:t}){bc(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}hO();function jE({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:s=!0,deduplicateCssVariables:o=!0,withCssVariables:a=!0,cssVariablesSelector:c=":root",classNamesPrefix:f="mantine",colorSchemeManager:d=sO(),defaultColorScheme:p="light",getRootElement:h=()=>document.documentElement,cssVariablesResolver:g,forceColorScheme:S,stylesTransform:y,env:b}){const{colorScheme:C,setColorScheme:T,clearColorScheme:R}=mO({defaultColorScheme:p,forceColorScheme:S,manager:d,getRootElement:h});return gO({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:h}),u.jsx(TE.Provider,{value:{colorScheme:C,setColorScheme:T,clearColorScheme:R,getRootElement:h,classNamesPrefix:f,getStyleNonce:n,cssVariablesResolver:g,cssVariablesSelector:c,withStaticClasses:r,stylesTransform:y,env:b},children:u.jsxs(kE,{theme:e,children:[a&&u.jsx(DE,{cssVariablesSelector:c,deduplicateCssVariables:o}),s&&u.jsx(cO,{}),t]})})}jE.displayName="@mantine/core/MantineProvider";function Br({classNames:e,styles:t,props:n,stylesCtx:r}){const s=jn();return{resolvedClassNames:Ih({theme:s,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:nh({theme:s,styles:t,props:n,stylesCtx:r||void 0})}}const vO={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function yO({theme:e,options:t,unstyled:n}){return ln((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||vO[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function wO({selector:e,stylesCtx:t,options:n,props:r,theme:s}){return Ih({theme:s,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function LC({selector:e,stylesCtx:t,theme:n,classNames:r,props:s}){return Ih({theme:n,classNames:r,props:s,stylesCtx:t})[e]}function SO({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function bO({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function xO({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(s=>`${t}-${s}-${n}`)}function CO({themeName:e,theme:t,selector:n,props:r,stylesCtx:s}){return e.map(o=>{var a,c;return(c=Ih({theme:t,classNames:(a=t.components[o])==null?void 0:a.classNames,props:r,stylesCtx:s}))==null?void 0:c[n]})}function _O({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function RO({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:s,classNames:o,classes:a,unstyled:c,className:f,rootSelector:d,props:p,stylesCtx:h,withStaticClasses:g,headless:S,transformedStyles:y}){return ln(yO({theme:e,options:t,unstyled:c||S}),CO({theme:e,themeName:n,selector:r,props:p,stylesCtx:h}),_O({options:t,classes:a,selector:r,unstyled:c}),LC({selector:r,stylesCtx:h,theme:e,classNames:o,props:p}),LC({selector:r,stylesCtx:h,theme:e,classNames:y,props:p}),wO({selector:r,stylesCtx:h,options:t,props:p,theme:e}),SO({rootSelector:d,selector:r,className:f}),bO({selector:r,classes:a,unstyled:c||S}),g&&!S&&xO({themeName:n,classNamesPrefix:s,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function TO({theme:e,themeName:t,props:n,stylesCtx:r,selector:s}){return t.map(o=>{var a;return nh({theme:e,styles:(a=e.components[o])==null?void 0:a.styles,props:n,stylesCtx:r})[s]}).reduce((o,a)=>({...o,...a}),{})}function rw({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...rw({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function EO(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...li(n[r])}}),t),{})}function kO({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:s,selector:o,themeName:a,headless:c}){var f;return(f=EO([c?{}:t==null?void 0:t(n,r,s),...a.map(d=>{var p,h,g;return(g=(h=(p=n.components)==null?void 0:p[d])==null?void 0:h.vars)==null?void 0:g.call(h,n,r,s)}),e==null?void 0:e(n,r,s)]))==null?void 0:f[o]}function IO({theme:e,themeName:t,selector:n,options:r,props:s,stylesCtx:o,rootSelector:a,styles:c,style:f,vars:d,varsResolver:p,headless:h,withStylesTransform:g}){return{...!g&&TO({theme:e,themeName:t,props:s,stylesCtx:o,selector:n}),...!g&&nh({theme:e,styles:c,props:s,stylesCtx:o})[n],...!g&&nh({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||s,stylesCtx:o})[n],...kO({theme:e,props:s,stylesCtx:o,vars:d,varsResolver:p,selector:n,themeName:t,headless:h}),...a===n?rw({style:f,theme:e}):null,...rw({style:r==null?void 0:r.style,theme:e})}}function DO({props:e,stylesCtx:t,themeName:n}){var a;const r=jn(),s=(a=YL())==null?void 0:a();return{getTransformedStyles:c=>s?[...c.map(d=>s(d,{props:e,theme:r,ctx:t})),...n.map(d=>{var p;return s((p=r.components[d])==null?void 0:p.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!s}}function Oe({name:e,classes:t,props:n,stylesCtx:r,className:s,style:o,rootSelector:a="root",unstyled:c,classNames:f,styles:d,vars:p,varsResolver:h}){const g=jn(),S=WL(),y=qL(),b=GL(),C=(Array.isArray(e)?e:[e]).filter(m=>m),{withStylesTransform:T,getTransformedStyles:R}=DO({props:n,stylesCtx:r,themeName:C});return(m,v)=>({className:RO({theme:g,options:v,themeName:C,selector:m,classNamesPrefix:S,classNames:f,classes:t,unstyled:c,className:s,rootSelector:a,props:n,stylesCtx:r,withStaticClasses:y,headless:b,transformedStyles:R([v==null?void 0:v.styles,d])}),style:IO({theme:g,themeName:C,selector:m,options:v,props:n,stylesCtx:r,rootSelector:a,styles:d,style:o,vars:p,varsResolver:h,headless:b,withStylesTransform:T})})}function Rd(e,t){return typeof e=="boolean"?e:t.autoContrast}function le(e,t,n){var a;const r=jn(),s=(a=r.components[e])==null?void 0:a.defaultProps,o=typeof s=="function"?s(r):s;return{...t,...o,...li(n)}}function oy(e){return xn(e).reduce((t,n)=>e[n]!==void 0?`${t}${cL(n)}:${e[n]};`:t,"").trim()}function jO({selector:e,styles:t,media:n,container:r}){const s=t?oy(t):"",o=Array.isArray(n)?n.map(c=>`@media${c.query}{${e}{${oy(c.styles)}}}`):[],a=Array.isArray(r)?r.map(c=>`@container ${c.query}{${e}{${oy(c.styles)}}}`):[];return`${s?`${e}{${s}}`:""}${o.join("")}${a.join("")}`.trim()}function Cc(e){const t=s0();return u.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:jO(e)}})}function _c(e){const{m:t,mx:n,my:r,mt:s,mb:o,ml:a,mr:c,me:f,ms:d,p,px:h,py:g,pt:S,pb:y,pl:b,pr:C,pe:T,ps:R,bd:m,bg:v,c:x,opacity:_,ff:k,fz:D,fw:M,lts:P,ta:L,lh:O,fs:V,tt:H,td:q,w:N,miw:B,maw:$,h:F,mih:z,mah:U,bgsz:G,bgp:te,bgr:ne,bga:Q,pos:se,top:X,left:oe,bottom:K,right:Z,inset:fe,display:xe,flex:ye,hiddenFrom:Ee,visibleFrom:Be,lightHidden:et,darkHidden:pe,sx:_e,...je}=e;return{styleProps:li({m:t,mx:n,my:r,mt:s,mb:o,ml:a,mr:c,me:f,ms:d,p,px:h,py:g,pt:S,pb:y,pl:b,pr:C,pe:T,ps:R,bd:m,bg:v,c:x,opacity:_,ff:k,fz:D,fw:M,lts:P,ta:L,lh:O,fs:V,tt:H,td:q,w:N,miw:B,maw:$,h:F,mih:z,mah:U,bgsz:G,bgp:te,bgr:ne,bga:Q,pos:se,top:X,left:oe,bottom:K,right:Z,inset:fe,display:xe,flex:ye,hiddenFrom:Ee,visibleFrom:Be,lightHidden:et,darkHidden:pe,sx:_e}),rest:je}}const PO={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function c0(e,t){const n=pi({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function MO(e,t){const n=pi({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:c0(e,t)}function NO(e,t){if(typeof e=="number")return he(e);if(typeof e=="string"){const[n,r,...s]=e.split(" ").filter(a=>a.trim()!=="");let o=`${he(n)}`;return r&&(o+=` ${r}`),s.length>0&&(o+=` ${c0(s.join(" "),t)}`),o.trim()}return e}const OC={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function LO(e){return typeof e=="string"&&e in OC?OC[e]:e}const OO=["h1","h2","h3","h4","h5","h6"];function AO(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&OO.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?he(e):e}function $O(e){return e}const FO=["h1","h2","h3","h4","h5","h6"];function zO(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&FO.includes(e)?`var(--mantine-${e}-line-height)`:e}function BO(e){return typeof e=="number"?he(e):e}function UO(e,t){if(typeof e=="number")return he(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return he(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const iy={color:c0,textColor:MO,fontSize:AO,spacing:UO,identity:$O,size:BO,lineHeight:zO,fontFamily:LO,border:NO};function AC(e){return e.replace("(min-width: ","").replace("em)","")}function VO({media:e,...t}){const r=Object.keys(e).sort((s,o)=>Number(AC(s))-Number(AC(o))).map(s=>({query:s,styles:e[s]}));return{...t,media:r}}function HO(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function WO(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function qO(e){return typeof e=="object"&&e!==null?xn(e).filter(t=>t!=="base"):[]}function GO(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function PE({styleProps:e,data:t,theme:n}){return VO(xn(e).reduce((r,s)=>{if(s==="hiddenFrom"||s==="visibleFrom"||s==="sx")return r;const o=t[s],a=Array.isArray(o.property)?o.property:[o.property],c=WO(e[s]);if(!HO(e[s]))return a.forEach(d=>{r.inlineStyles[d]=iy[o.type](c,n)}),r;r.hasResponsiveStyles=!0;const f=qO(e[s]);return a.forEach(d=>{c&&(r.styles[d]=iy[o.type](c,n)),f.forEach(p=>{const h=`(min-width: ${n.breakpoints[p]})`;r.media[h]={...r.media[h],[d]:iy[o.type](GO(e[s],p),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function Dh(){return`__m__-${I.useId().replace(/:/g,"")}`}function l0(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...l0(r,t)}),{}):typeof e=="function"?e(t):e??{}}function ME(e){return e.startsWith("data-")?e:`data-${e}`}function KO(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[ME(n)]=e[n]),t},{})}function NE(e){return e?typeof e=="string"?{[ME(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...NE(n)}),{}):KO(e):null}function sw(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...sw(r,t)}),{}):typeof e=="function"?e(t):e??{}}function YO({theme:e,style:t,vars:n,styleProps:r}){const s=sw(t,e),o=sw(n,e);return{...s,...o,...r}}const LE=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:s,mod:o,size:a,hiddenFrom:c,visibleFrom:f,lightHidden:d,darkHidden:p,renderRoot:h,__size:g,...S},y)=>{var D;const b=jn(),C=e||"div",{styleProps:T,rest:R}=_c(S),m=KL(),v=(D=m==null?void 0:m())==null?void 0:D(T.sx),x=Dh(),_=PE({styleProps:T,theme:b,data:PO}),k={ref:y,style:YO({theme:b,style:t,vars:n,styleProps:_.inlineStyles}),className:ln(r,v,{[x]:_.hasResponsiveStyles,"mantine-light-hidden":d,"mantine-dark-hidden":p,[`mantine-hidden-from-${c}`]:c,[`mantine-visible-from-${f}`]:f}),"data-variant":s,"data-size":mE(a)?void 0:a||void 0,size:g,...NE(o),...R};return u.jsxs(u.Fragment,{children:[_.hasResponsiveStyles&&u.jsx(Cc,{selector:`.${x}`,styles:_.styles,media:_.media}),typeof h=="function"?h(k):u.jsx(C,{...k})]})});LE.displayName="@mantine/core/Box";const ie=LE;function OE(e){return e}function XO(e){const t=e;return n=>{const r=I.forwardRef((s,o)=>u.jsx(t,{...n,...s,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function we(e){const t=I.forwardRef(e);return t.extend=OE,t.withProps=n=>{const r=I.forwardRef((s,o)=>u.jsx(t,{...n,...s,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function _n(e){const t=I.forwardRef(e);return t.withProps=n=>{const r=I.forwardRef((s,o)=>u.jsx(t,{...n,...s,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=OE,t}const QO=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function wo(){return I.useContext(QO)}var jh=rE();const Hl=ci(jh);function JO(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function ay(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const Tl=typeof window<"u"&&window.requestAnimationFrame;function ZO({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const s=I.useRef(null),o=0,a={display:"none",height:0,overflow:"hidden"},[c,f]=I.useState(r?{}:a),d=y=>{jh.flushSync(()=>f(y))},p=y=>{d(b=>({...b,...y}))};function h(y){const b=e||JO(y);return{transition:`height ${b}ms ${t}, opacity ${b}ms ${t}`}}zn(()=>{typeof Tl=="function"&&Tl(r?()=>{p({willChange:"height",display:"block",overflow:"hidden"}),Tl(()=>{const y=ay(s);p({...h(y),height:y})})}:()=>{const y=ay(s);p({...h(y),willChange:"height",height:y}),Tl(()=>p({height:o,overflow:"hidden"}))})},[r]);const g=y=>{if(!(y.target!==s.current||y.propertyName!=="height"))if(r){const b=ay(s);b===c.height?d({}):p({height:b}),n()}else c.height===o&&(d(a),n())};function S({style:y={},refKey:b="ref",...C}={}){const T=C[b];return{"aria-hidden":!r,...C,[b]:CE(s,T),onTransitionEnd:g,style:{boxSizing:"border-box",...y,...c}}}return S}const eA={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},Td=we((e,t)=>{const{children:n,in:r,transitionDuration:s,transitionTimingFunction:o,style:a,onTransitionEnd:c,animateOpacity:f,...d}=le("Collapse",eA,e),p=jn(),h=Eh(),S=(p.respectReducedMotion?h:!1)?0:s,y=ZO({opened:r,transitionDuration:S,transitionTimingFunction:o,onTransitionEnd:c});return S===0?r?u.jsx(ie,{...d,children:n}):null:u.jsx(ie,{...y({style:{opacity:r||!f?1:0,transition:f?`opacity ${S}ms ${o}`:"none",...l0(a,p)},ref:t,...d}),children:n})});Td.displayName="@mantine/core/Collapse";function Ph(){return typeof window<"u"}function Rc(e){return AE(e)?(e.nodeName||"").toLowerCase():"#document"}function nr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Hs(e){var t;return(t=(AE(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function AE(e){return Ph()?e instanceof Node||e instanceof nr(e).Node:!1}function At(e){return Ph()?e instanceof Element||e instanceof nr(e).Element:!1}function _r(e){return Ph()?e instanceof HTMLElement||e instanceof nr(e).HTMLElement:!1}function ow(e){return!Ph()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof nr(e).ShadowRoot}function Ed(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=zr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function tA(e){return["table","td","th"].includes(Rc(e))}function Mh(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function d0(e){const t=Nh(),n=At(e)?zr(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function nA(e){let t=ho(e);for(;_r(t)&&!ii(t);){if(d0(t))return t;if(Mh(t))return null;t=ho(t)}return null}function Nh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ii(e){return["html","body","#document"].includes(Rc(e))}function zr(e){return nr(e).getComputedStyle(e)}function Lh(e){return At(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ho(e){if(Rc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ow(e)&&e.host||Hs(e);return ow(t)?t.host:t}function $E(e){const t=ho(e);return ii(t)?e.ownerDocument?e.ownerDocument.body:e.body:_r(t)&&Ed(t)?t:$E(t)}function co(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=$E(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),a=nr(s);if(o){const c=iw(a);return t.concat(a,a.visualViewport||[],Ed(s)?s:[],c&&n?co(c):[])}return t.concat(s,co(s,[],n))}function iw(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $C(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function md(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&ow(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function FE(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function zE(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function rA(e){return iA()?!1:!FC()&&e.width===0&&e.height===0||FC()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function sA(){return/apple/i.test(navigator.vendor)}function FC(){const e=/android/i;return e.test(FE())||e.test(zE())}function oA(){return FE().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function iA(){return zE().includes("jsdom/")}function aw(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function aA(e){return"nativeEvent"in e}function cA(e){return e.matches("html,body")}function Wi(e){return(e==null?void 0:e.ownerDocument)||document}function cy(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function rc(e){return"composedPath"in e?e.composedPath()[0]:e.target}const lA="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function dA(e){return _r(e)&&e.matches(lA)}const bs=Math.min,$n=Math.max,rh=Math.round,uf=Math.floor,zs=e=>({x:e,y:e}),uA={left:"right",right:"left",bottom:"top",top:"bottom"},fA={start:"end",end:"start"};function cw(e,t,n){return $n(e,bs(t,n))}function mo(e,t){return typeof e=="function"?e(t):e}function xs(e){return e.split("-")[0]}function Tc(e){return e.split("-")[1]}function u0(e){return e==="x"?"y":"x"}function f0(e){return e==="y"?"height":"width"}function go(e){return["top","bottom"].includes(xs(e))?"y":"x"}function p0(e){return u0(go(e))}function pA(e,t,n){n===void 0&&(n=!1);const r=Tc(e),s=p0(e),o=f0(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=sh(a)),[a,sh(a)]}function hA(e){const t=sh(e);return[lw(e),t,lw(t)]}function lw(e){return e.replace(/start|end/g,t=>fA[t])}function mA(e,t,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?o:a;default:return[]}}function gA(e,t,n,r){const s=Tc(e);let o=mA(xs(e),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(lw)))),o}function sh(e){return e.replace(/left|right|bottom|top/g,t=>uA[t])}function vA(e){return{top:0,right:0,bottom:0,left:0,...e}}function h0(e){return typeof e!="number"?vA(e):{top:e,right:e,bottom:e,left:e}}function hc(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function zC(e,t,n){let{reference:r,floating:s}=e;const o=go(t),a=p0(t),c=f0(a),f=xs(t),d=o==="y",p=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,g=r[c]/2-s[c]/2;let S;switch(f){case"top":S={x:p,y:r.y-s.height};break;case"bottom":S={x:p,y:r.y+r.height};break;case"right":S={x:r.x+r.width,y:h};break;case"left":S={x:r.x-s.width,y:h};break;default:S={x:r.x,y:r.y}}switch(Tc(t)){case"start":S[a]-=g*(n&&d?-1:1);break;case"end":S[a]+=g*(n&&d?-1:1);break}return S}const yA=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,c=o.filter(Boolean),f=await(a.isRTL==null?void 0:a.isRTL(t));let d=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:p,y:h}=zC(d,r,f),g=r,S={},y=0;for(let b=0;b<c.length;b++){const{name:C,fn:T}=c[b],{x:R,y:m,data:v,reset:x}=await T({x:p,y:h,initialPlacement:r,placement:g,strategy:s,middlewareData:S,rects:d,platform:a,elements:{reference:e,floating:t}});p=R??p,h=m??h,S={...S,[C]:{...S[C],...v}},x&&y<=50&&(y++,typeof x=="object"&&(x.placement&&(g=x.placement),x.rects&&(d=x.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):x.rects),{x:p,y:h}=zC(d,g,f)),b=-1)}return{x:p,y:h,placement:g,strategy:s,middlewareData:S}};async function m0(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:a,elements:c,strategy:f}=e,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:g=!1,padding:S=0}=mo(t,e),y=h0(S),C=c[g?h==="floating"?"reference":"floating":h],T=hc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(C)))==null||n?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:d,rootBoundary:p,strategy:f})),R=h==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,m=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),v=await(o.isElement==null?void 0:o.isElement(m))?await(o.getScale==null?void 0:o.getScale(m))||{x:1,y:1}:{x:1,y:1},x=hc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:R,offsetParent:m,strategy:f}):R);return{top:(T.top-x.top+y.top)/v.y,bottom:(x.bottom-T.bottom+y.bottom)/v.y,left:(T.left-x.left+y.left)/v.x,right:(x.right-T.right+y.right)/v.x}}const wA=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:a,elements:c,middlewareData:f}=t,{element:d,padding:p=0}=mo(e,t)||{};if(d==null)return{};const h=h0(p),g={x:n,y:r},S=p0(s),y=f0(S),b=await a.getDimensions(d),C=S==="y",T=C?"top":"left",R=C?"bottom":"right",m=C?"clientHeight":"clientWidth",v=o.reference[y]+o.reference[S]-g[S]-o.floating[y],x=g[S]-o.reference[S],_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let k=_?_[m]:0;(!k||!await(a.isElement==null?void 0:a.isElement(_)))&&(k=c.floating[m]||o.floating[y]);const D=v/2-x/2,M=k/2-b[y]/2-1,P=bs(h[T],M),L=bs(h[R],M),O=P,V=k-b[y]-L,H=k/2-b[y]/2+D,q=cw(O,H,V),N=!f.arrow&&Tc(s)!=null&&H!==q&&o.reference[y]/2-(H<O?P:L)-b[y]/2<0,B=N?H<O?H-O:H-V:0;return{[S]:g[S]+B,data:{[S]:q,centerOffset:H-q-B,...N&&{alignmentOffset:B}},reset:N}}}),SA=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:c,platform:f,elements:d}=t,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:g,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...C}=mo(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const T=xs(s),R=go(c),m=xs(c)===c,v=await(f.isRTL==null?void 0:f.isRTL(d.floating)),x=g||(m||!b?[sh(c)]:hA(c)),_=y!=="none";!g&&_&&x.push(...gA(c,b,y,v));const k=[c,...x],D=await m0(t,C),M=[];let P=((r=o.flip)==null?void 0:r.overflows)||[];if(p&&M.push(D[T]),h){const H=pA(s,a,v);M.push(D[H[0]],D[H[1]])}if(P=[...P,{placement:s,overflows:M}],!M.every(H=>H<=0)){var L,O;const H=(((L=o.flip)==null?void 0:L.index)||0)+1,q=k[H];if(q)return{data:{index:H,overflows:P},reset:{placement:q}};let N=(O=P.filter(B=>B.overflows[0]<=0).sort((B,$)=>B.overflows[1]-$.overflows[1])[0])==null?void 0:O.placement;if(!N)switch(S){case"bestFit":{var V;const B=(V=P.filter($=>{if(_){const F=go($.placement);return F===R||F==="y"}return!0}).map($=>[$.placement,$.overflows.filter(F=>F>0).reduce((F,z)=>F+z,0)]).sort(($,F)=>$[1]-F[1])[0])==null?void 0:V[0];B&&(N=B);break}case"initialPlacement":N=c;break}if(s!==N)return{reset:{placement:N}}}return{}}}};function BE(e){const t=bs(...e.map(o=>o.left)),n=bs(...e.map(o=>o.top)),r=$n(...e.map(o=>o.right)),s=$n(...e.map(o=>o.bottom));return{x:t,y:n,width:r-t,height:s-n}}function bA(e){const t=e.slice().sort((s,o)=>s.y-o.y),n=[];let r=null;for(let s=0;s<t.length;s++){const o=t[s];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(s=>hc(BE(s)))}const xA=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:o,strategy:a}=t,{padding:c=2,x:f,y:d}=mo(e,t),p=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),h=bA(p),g=hc(BE(p)),S=h0(c);function y(){if(h.length===2&&h[0].left>h[1].right&&f!=null&&d!=null)return h.find(C=>f>C.left-S.left&&f<C.right+S.right&&d>C.top-S.top&&d<C.bottom+S.bottom)||g;if(h.length>=2){if(go(n)==="y"){const P=h[0],L=h[h.length-1],O=xs(n)==="top",V=P.top,H=L.bottom,q=O?P.left:L.left,N=O?P.right:L.right,B=N-q,$=H-V;return{top:V,bottom:H,left:q,right:N,width:B,height:$,x:q,y:V}}const C=xs(n)==="left",T=$n(...h.map(P=>P.right)),R=bs(...h.map(P=>P.left)),m=h.filter(P=>C?P.left===R:P.right===T),v=m[0].top,x=m[m.length-1].bottom,_=R,k=T,D=k-_,M=x-v;return{top:v,bottom:x,left:_,right:k,width:D,height:M,x:_,y:v}}return g}const b=await o.getElementRects({reference:{getBoundingClientRect:y},floating:r.floating,strategy:a});return s.reference.x!==b.reference.x||s.reference.y!==b.reference.y||s.reference.width!==b.reference.width||s.reference.height!==b.reference.height?{reset:{rects:b}}:{}}}};async function CA(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=xs(n),c=Tc(n),f=go(n)==="y",d=["left","top"].includes(a)?-1:1,p=o&&f?-1:1,h=mo(t,e);let{mainAxis:g,crossAxis:S,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return c&&typeof y=="number"&&(S=c==="end"?y*-1:y),f?{x:S*p,y:g*d}:{x:g*d,y:S*p}}const _A=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:a,middlewareData:c}=t,f=await CA(t,e);return a===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:s+f.x,y:o+f.y,data:{...f,placement:a}}}}},RA=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:c={fn:C=>{let{x:T,y:R}=C;return{x:T,y:R}}},...f}=mo(e,t),d={x:n,y:r},p=await m0(t,f),h=go(xs(s)),g=u0(h);let S=d[g],y=d[h];if(o){const C=g==="y"?"top":"left",T=g==="y"?"bottom":"right",R=S+p[C],m=S-p[T];S=cw(R,S,m)}if(a){const C=h==="y"?"top":"left",T=h==="y"?"bottom":"right",R=y+p[C],m=y-p[T];y=cw(R,y,m)}const b=c.fn({...t,[g]:S,[h]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[g]:o,[h]:a}}}}}},TA=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=t,{offset:c=0,mainAxis:f=!0,crossAxis:d=!0}=mo(e,t),p={x:n,y:r},h=go(s),g=u0(h);let S=p[g],y=p[h];const b=mo(c,t),C=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(f){const m=g==="y"?"height":"width",v=o.reference[g]-o.floating[m]+C.mainAxis,x=o.reference[g]+o.reference[m]-C.mainAxis;S<v?S=v:S>x&&(S=x)}if(d){var T,R;const m=g==="y"?"width":"height",v=["top","left"].includes(xs(s)),x=o.reference[h]-o.floating[m]+(v&&((T=a.offset)==null?void 0:T[h])||0)+(v?0:C.crossAxis),_=o.reference[h]+o.reference[m]+(v?0:((R=a.offset)==null?void 0:R[h])||0)-(v?C.crossAxis:0);y<x?y=x:y>_&&(y=_)}return{[g]:S,[h]:y}}}},EA=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:a,elements:c}=t,{apply:f=()=>{},...d}=mo(e,t),p=await m0(t,d),h=xs(s),g=Tc(s),S=go(s)==="y",{width:y,height:b}=o.floating;let C,T;h==="top"||h==="bottom"?(C=h,T=g===(await(a.isRTL==null?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(T=h,C=g==="end"?"top":"bottom");const R=b-p.top-p.bottom,m=y-p.left-p.right,v=bs(b-p[C],R),x=bs(y-p[T],m),_=!t.middlewareData.shift;let k=v,D=x;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(D=m),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=R),_&&!g){const P=$n(p.left,0),L=$n(p.right,0),O=$n(p.top,0),V=$n(p.bottom,0);S?D=y-2*(P!==0||L!==0?P+L:$n(p.left,p.right)):k=b-2*(O!==0||V!==0?O+V:$n(p.top,p.bottom))}await f({...t,availableWidth:D,availableHeight:k});const M=await a.getDimensions(c.floating);return y!==M.width||b!==M.height?{reset:{rects:!0}}:{}}}};function UE(e){const t=zr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=_r(e),o=s?e.offsetWidth:n,a=s?e.offsetHeight:r,c=rh(n)!==o||rh(r)!==a;return c&&(n=o,r=a),{width:n,height:r,$:c}}function g0(e){return At(e)?e:e.contextElement}function cc(e){const t=g0(e);if(!_r(t))return zs(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=UE(t);let a=(o?rh(n.width):n.width)/r,c=(o?rh(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const kA=zs(0);function VE(e){const t=nr(e);return!Nh()||!t.visualViewport?kA:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function IA(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==nr(e)?!1:t}function ia(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=g0(e);let a=zs(1);t&&(r?At(r)&&(a=cc(r)):a=cc(e));const c=IA(o,n,r)?VE(o):zs(0);let f=(s.left+c.x)/a.x,d=(s.top+c.y)/a.y,p=s.width/a.x,h=s.height/a.y;if(o){const g=nr(o),S=r&&At(r)?nr(r):r;let y=g,b=iw(y);for(;b&&r&&S!==y;){const C=cc(b),T=b.getBoundingClientRect(),R=zr(b),m=T.left+(b.clientLeft+parseFloat(R.paddingLeft))*C.x,v=T.top+(b.clientTop+parseFloat(R.paddingTop))*C.y;f*=C.x,d*=C.y,p*=C.x,h*=C.y,f+=m,d+=v,y=nr(b),b=iw(y)}}return hc({width:p,height:h,x:f,y:d})}function v0(e,t){const n=Lh(e).scrollLeft;return t?t.left+n:ia(Hs(e)).left+n}function HE(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:v0(e,r)),o=r.top+t.scrollTop;return{x:s,y:o}}function DA(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",a=Hs(r),c=t?Mh(t.floating):!1;if(r===a||c&&o)return n;let f={scrollLeft:0,scrollTop:0},d=zs(1);const p=zs(0),h=_r(r);if((h||!h&&!o)&&((Rc(r)!=="body"||Ed(a))&&(f=Lh(r)),_r(r))){const S=ia(r);d=cc(r),p.x=S.x+r.clientLeft,p.y=S.y+r.clientTop}const g=a&&!h&&!o?HE(a,f,!0):zs(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-f.scrollLeft*d.x+p.x+g.x,y:n.y*d.y-f.scrollTop*d.y+p.y+g.y}}function jA(e){return Array.from(e.getClientRects())}function PA(e){const t=Hs(e),n=Lh(e),r=e.ownerDocument.body,s=$n(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=$n(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+v0(e);const c=-n.scrollTop;return zr(r).direction==="rtl"&&(a+=$n(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:c}}function MA(e,t){const n=nr(e),r=Hs(e),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,c=0,f=0;if(s){o=s.width,a=s.height;const d=Nh();(!d||d&&t==="fixed")&&(c=s.offsetLeft,f=s.offsetTop)}return{width:o,height:a,x:c,y:f}}function NA(e,t){const n=ia(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=_r(e)?cc(e):zs(1),a=e.clientWidth*o.x,c=e.clientHeight*o.y,f=s*o.x,d=r*o.y;return{width:a,height:c,x:f,y:d}}function BC(e,t,n){let r;if(t==="viewport")r=MA(e,n);else if(t==="document")r=PA(Hs(e));else if(At(t))r=NA(t,n);else{const s=VE(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return hc(r)}function WE(e,t){const n=ho(e);return n===t||!At(n)||ii(n)?!1:zr(n).position==="fixed"||WE(n,t)}function LA(e,t){const n=t.get(e);if(n)return n;let r=co(e,[],!1).filter(c=>At(c)&&Rc(c)!=="body"),s=null;const o=zr(e).position==="fixed";let a=o?ho(e):e;for(;At(a)&&!ii(a);){const c=zr(a),f=d0(a);!f&&c.position==="fixed"&&(s=null),(o?!f&&!s:!f&&c.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Ed(a)&&!f&&WE(e,a))?r=r.filter(p=>p!==a):s=c,a=ho(a)}return t.set(e,r),r}function OA(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?Mh(t)?[]:LA(t,this._c):[].concat(n),r],c=a[0],f=a.reduce((d,p)=>{const h=BC(t,p,s);return d.top=$n(h.top,d.top),d.right=bs(h.right,d.right),d.bottom=bs(h.bottom,d.bottom),d.left=$n(h.left,d.left),d},BC(t,c,s));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function AA(e){const{width:t,height:n}=UE(e);return{width:t,height:n}}function $A(e,t,n){const r=_r(t),s=Hs(t),o=n==="fixed",a=ia(e,!0,o,t);let c={scrollLeft:0,scrollTop:0};const f=zs(0);if(r||!r&&!o)if((Rc(t)!=="body"||Ed(s))&&(c=Lh(t)),r){const g=ia(t,!0,o,t);f.x=g.x+t.clientLeft,f.y=g.y+t.clientTop}else s&&(f.x=v0(s));const d=s&&!r&&!o?HE(s,c):zs(0),p=a.left+c.scrollLeft-f.x-d.x,h=a.top+c.scrollTop-f.y-d.y;return{x:p,y:h,width:a.width,height:a.height}}function ly(e){return zr(e).position==="static"}function UC(e,t){if(!_r(e)||zr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Hs(e)===n&&(n=n.ownerDocument.body),n}function qE(e,t){const n=nr(e);if(Mh(e))return n;if(!_r(e)){let s=ho(e);for(;s&&!ii(s);){if(At(s)&&!ly(s))return s;s=ho(s)}return n}let r=UC(e,t);for(;r&&tA(r)&&ly(r);)r=UC(r,t);return r&&ii(r)&&ly(r)&&!d0(r)?n:r||nA(e)||n}const FA=async function(e){const t=this.getOffsetParent||qE,n=this.getDimensions,r=await n(e.floating);return{reference:$A(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function zA(e){return zr(e).direction==="rtl"}const BA={convertOffsetParentRelativeRectToViewportRelativeRect:DA,getDocumentElement:Hs,getClippingRect:OA,getOffsetParent:qE,getElementRects:FA,getClientRects:jA,getDimensions:AA,getScale:cc,isElement:At,isRTL:zA};function GE(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function UA(e,t){let n=null,r;const s=Hs(e);function o(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function a(c,f){c===void 0&&(c=!1),f===void 0&&(f=1),o();const d=e.getBoundingClientRect(),{left:p,top:h,width:g,height:S}=d;if(c||t(),!g||!S)return;const y=uf(h),b=uf(s.clientWidth-(p+g)),C=uf(s.clientHeight-(h+S)),T=uf(p),m={rootMargin:-y+"px "+-b+"px "+-C+"px "+-T+"px",threshold:$n(0,bs(1,f))||1};let v=!0;function x(_){const k=_[0].intersectionRatio;if(k!==f){if(!v)return a();k?a(!1,k):r=setTimeout(()=>{a(!1,1e-7)},1e3)}k===1&&!GE(d,e.getBoundingClientRect())&&a(),v=!1}try{n=new IntersectionObserver(x,{...m,root:s.ownerDocument})}catch{n=new IntersectionObserver(x,m)}n.observe(e)}return a(!0),o}function VA(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,d=g0(e),p=s||o?[...d?co(d):[],...co(t)]:[];p.forEach(T=>{s&&T.addEventListener("scroll",n,{passive:!0}),o&&T.addEventListener("resize",n)});const h=d&&c?UA(d,n):null;let g=-1,S=null;a&&(S=new ResizeObserver(T=>{let[R]=T;R&&R.target===d&&S&&(S.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var m;(m=S)==null||m.observe(t)})),n()}),d&&!f&&S.observe(d),S.observe(t));let y,b=f?ia(e):null;f&&C();function C(){const T=ia(e);b&&!GE(b,T)&&n(),b=T,y=requestAnimationFrame(C)}return n(),()=>{var T;p.forEach(R=>{s&&R.removeEventListener("scroll",n),o&&R.removeEventListener("resize",n)}),h==null||h(),(T=S)==null||T.disconnect(),S=null,f&&cancelAnimationFrame(y)}}const HA=_A,WA=RA,qA=SA,GA=EA,VC=wA,KA=xA,YA=TA,XA=(e,t,n)=>{const r=new Map,s={platform:BA,...n},o={...s.platform,_c:r};return yA(e,t,{...s,platform:o})};var Pf=typeof document<"u"?I.useLayoutEffect:I.useEffect;function oh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!oh(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!oh(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function KE(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function HC(e,t){const n=KE(e);return Math.round(t*n)/n}function dy(e){const t=I.useRef(e);return Pf(()=>{t.current=e}),t}function QA(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:c=!0,whileElementsMounted:f,open:d}=e,[p,h]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,S]=I.useState(r);oh(g,r)||S(r);const[y,b]=I.useState(null),[C,T]=I.useState(null),R=I.useCallback($=>{$!==_.current&&(_.current=$,b($))},[]),m=I.useCallback($=>{$!==k.current&&(k.current=$,T($))},[]),v=o||y,x=a||C,_=I.useRef(null),k=I.useRef(null),D=I.useRef(p),M=f!=null,P=dy(f),L=dy(s),O=dy(d),V=I.useCallback(()=>{if(!_.current||!k.current)return;const $={placement:t,strategy:n,middleware:g};L.current&&($.platform=L.current),XA(_.current,k.current,$).then(F=>{const z={...F,isPositioned:O.current!==!1};H.current&&!oh(D.current,z)&&(D.current=z,jh.flushSync(()=>{h(z)}))})},[g,t,n,L,O]);Pf(()=>{d===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[d]);const H=I.useRef(!1);Pf(()=>(H.current=!0,()=>{H.current=!1}),[]),Pf(()=>{if(v&&(_.current=v),x&&(k.current=x),v&&x){if(P.current)return P.current(v,x,V);V()}},[v,x,V,P,M]);const q=I.useMemo(()=>({reference:_,floating:k,setReference:R,setFloating:m}),[R,m]),N=I.useMemo(()=>({reference:v,floating:x}),[v,x]),B=I.useMemo(()=>{const $={position:n,left:0,top:0};if(!N.floating)return $;const F=HC(N.floating,p.x),z=HC(N.floating,p.y);return c?{...$,transform:"translate("+F+"px, "+z+"px)",...KE(N.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:z}},[n,c,N.floating,p.x,p.y]);return I.useMemo(()=>({...p,update:V,refs:q,elements:N,floatingStyles:B}),[p,V,q,N,B])}const JA=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?VC({element:r.current,padding:s}).fn(n):{}:r?VC({element:r,padding:s}).fn(n):{}}}},YE=(e,t)=>({...HA(e),options:[e,t]}),y0=(e,t)=>({...WA(e),options:[e,t]}),WC=(e,t)=>({...YA(e),options:[e,t]}),ih=(e,t)=>({...qA(e),options:[e,t]}),ZA=(e,t)=>({...GA(e),options:[e,t]}),ed=(e,t)=>({...KA(e),options:[e,t]}),XE=(e,t)=>({...JA(e),options:[e,t]});function e3(e){return I.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const QE={...sE},t3=QE.useInsertionEffect,n3=t3||(e=>e());function oo(e){const t=I.useRef(()=>{});return n3(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var Bs=typeof document<"u"?I.useLayoutEffect:I.useEffect;let qC=!1,r3=0;const GC=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+r3++;function s3(){const[e,t]=I.useState(()=>qC?GC():void 0);return Bs(()=>{e==null&&t(GC())},[]),I.useEffect(()=>{qC=!0},[]),e}const o3=QE.useId,JE=o3||s3;function i3(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const a3=I.createContext(null),c3=I.createContext(null),w0=()=>{var e;return((e=I.useContext(a3))==null?void 0:e.id)||null},S0=()=>I.useContext(c3);function b0(e){return"data-floating-ui-"+e}function uy(e){const t=I.useRef(e);return Bs(()=>{t.current=e}),t}const KC=b0("safe-polygon");function Mf(e,t,n){return n&&!aw(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function l3(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:s,events:o,elements:a}=e,{enabled:c=!0,delay:f=0,handleClose:d=null,mouseOnly:p=!1,restMs:h=0,move:g=!0}=t,S=S0(),y=w0(),b=uy(d),C=uy(f),T=uy(n),R=I.useRef(),m=I.useRef(-1),v=I.useRef(),x=I.useRef(-1),_=I.useRef(!0),k=I.useRef(!1),D=I.useRef(()=>{}),M=I.useRef(!1),P=I.useCallback(()=>{var B;const $=(B=s.current.openEvent)==null?void 0:B.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[s]);I.useEffect(()=>{if(!c)return;function B($){let{open:F}=$;F||(clearTimeout(m.current),clearTimeout(x.current),_.current=!0,M.current=!1)}return o.on("openchange",B),()=>{o.off("openchange",B)}},[c,o]),I.useEffect(()=>{if(!c||!b.current||!n)return;function B(F){P()&&r(!1,F,"hover")}const $=Wi(a.floating).documentElement;return $.addEventListener("mouseleave",B),()=>{$.removeEventListener("mouseleave",B)}},[a.floating,n,r,c,b,P]);const L=I.useCallback(function(B,$,F){$===void 0&&($=!0),F===void 0&&(F="hover");const z=Mf(C.current,"close",R.current);z&&!v.current?(clearTimeout(m.current),m.current=window.setTimeout(()=>r(!1,B,F),z)):$&&(clearTimeout(m.current),r(!1,B,F))},[C,r]),O=oo(()=>{D.current(),v.current=void 0}),V=oo(()=>{if(k.current){const B=Wi(a.floating).body;B.style.pointerEvents="",B.removeAttribute(KC),k.current=!1}}),H=oo(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);I.useEffect(()=>{if(!c)return;function B(U){if(clearTimeout(m.current),_.current=!1,p&&!aw(R.current)||h>0&&!Mf(C.current,"open"))return;const G=Mf(C.current,"open",R.current);G?m.current=window.setTimeout(()=>{T.current||r(!0,U,"hover")},G):n||r(!0,U,"hover")}function $(U){if(H())return;D.current();const G=Wi(a.floating);if(clearTimeout(x.current),M.current=!1,b.current&&s.current.floatingContext){n||clearTimeout(m.current),v.current=b.current({...s.current.floatingContext,tree:S,x:U.clientX,y:U.clientY,onClose(){V(),O(),H()||L(U,!0,"safe-polygon")}});const ne=v.current;G.addEventListener("mousemove",ne),D.current=()=>{G.removeEventListener("mousemove",ne)};return}(R.current==="touch"?!md(a.floating,U.relatedTarget):!0)&&L(U)}function F(U){H()||s.current.floatingContext&&(b.current==null||b.current({...s.current.floatingContext,tree:S,x:U.clientX,y:U.clientY,onClose(){V(),O(),H()||L(U)}})(U))}if(At(a.domReference)){var z;const U=a.domReference;return n&&U.addEventListener("mouseleave",F),(z=a.floating)==null||z.addEventListener("mouseleave",F),g&&U.addEventListener("mousemove",B,{once:!0}),U.addEventListener("mouseenter",B),U.addEventListener("mouseleave",$),()=>{var G;n&&U.removeEventListener("mouseleave",F),(G=a.floating)==null||G.removeEventListener("mouseleave",F),g&&U.removeEventListener("mousemove",B),U.removeEventListener("mouseenter",B),U.removeEventListener("mouseleave",$)}}},[a,c,e,p,h,g,L,O,V,r,n,T,S,C,b,s,H]),Bs(()=>{var B;if(c&&n&&(B=b.current)!=null&&B.__options.blockPointerEvents&&P()){k.current=!0;const F=a.floating;if(At(a.domReference)&&F){var $;const z=Wi(a.floating).body;z.setAttribute(KC,"");const U=a.domReference,G=S==null||($=S.nodesRef.current.find(te=>te.id===y))==null||($=$.context)==null?void 0:$.elements.floating;return G&&(G.style.pointerEvents=""),z.style.pointerEvents="none",U.style.pointerEvents="auto",F.style.pointerEvents="auto",()=>{z.style.pointerEvents="",U.style.pointerEvents="",F.style.pointerEvents=""}}}},[c,n,y,a,S,b,P]),Bs(()=>{n||(R.current=void 0,M.current=!1,O(),V())},[n,O,V]),I.useEffect(()=>()=>{O(),clearTimeout(m.current),clearTimeout(x.current),V()},[c,a.domReference,O,V]);const q=I.useMemo(()=>{function B($){R.current=$.pointerType}return{onPointerDown:B,onPointerEnter:B,onMouseMove($){const{nativeEvent:F}=$;function z(){!_.current&&!T.current&&r(!0,F,"hover")}p&&!aw(R.current)||n||h===0||M.current&&$.movementX**2+$.movementY**2<2||(clearTimeout(x.current),R.current==="touch"?z():(M.current=!0,x.current=window.setTimeout(z,h)))}}},[p,r,n,T,h]),N=I.useMemo(()=>({onMouseEnter(){clearTimeout(m.current)},onMouseLeave(B){H()||L(B.nativeEvent,!1)}}),[L,H]);return I.useMemo(()=>c?{reference:q,floating:N}:{},[c,q,N])}const dw=()=>{},ZE=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:dw,setState:dw,isInstantPhase:!1}),d3=()=>I.useContext(ZE);function u3(e){const{children:t,delay:n,timeoutMs:r=0}=e,[s,o]=I.useReducer((f,d)=>({...f,...d}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),a=I.useRef(null),c=I.useCallback(f=>{o({currentId:f})},[]);return Bs(()=>{s.currentId?a.current===null?a.current=s.currentId:s.isInstantPhase||o({isInstantPhase:!0}):(s.isInstantPhase&&o({isInstantPhase:!1}),a.current=null)},[s.currentId,s.isInstantPhase]),I.createElement(ZE.Provider,{value:I.useMemo(()=>({...s,setState:o,setCurrentId:c}),[s,c])},t)}function f3(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:s}=e,{id:o,enabled:a=!0}=t,c=o??s,f=d3(),{currentId:d,setCurrentId:p,initialDelay:h,setState:g,timeoutMs:S}=f;return Bs(()=>{a&&d&&(g({delay:{open:1,close:Mf(h,"close")}}),d!==c&&r(!1))},[a,c,r,g,d,h]),Bs(()=>{function y(){r(!1),g({delay:h,currentId:null})}if(a&&d&&!n&&d===c){if(S){const b=window.setTimeout(y,S);return()=>{clearTimeout(b)}}y()}},[a,n,g,d,c,r,h,S]),Bs(()=>{a&&(p===dw||!n||p(c))},[a,n,p,c]),f}function fy(e,t){let n=e.filter(s=>{var o;return s.parentId===t&&((o=s.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=e.filter(s=>{var o;return(o=r)==null?void 0:o.some(a=>{var c;return s.parentId===a.id&&((c=s.context)==null?void 0:c.open)})}),n=n.concat(r);return n}const p3="data-floating-ui-focusable",h3={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},m3={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},YC=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function g3(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:s,dataRef:o}=e,{enabled:a=!0,escapeKey:c=!0,outsidePress:f=!0,outsidePressEvent:d="pointerdown",referencePress:p=!1,referencePressEvent:h="pointerdown",ancestorScroll:g=!1,bubbles:S,capture:y}=t,b=S0(),C=oo(typeof f=="function"?f:()=>!1),T=typeof f=="function"?C:f,R=I.useRef(!1),m=I.useRef(!1),{escapeKey:v,outsidePress:x}=YC(S),{escapeKey:_,outsidePress:k}=YC(y),D=I.useRef(!1),M=oo(q=>{var N;if(!n||!a||!c||q.key!=="Escape"||D.current)return;const B=(N=o.current.floatingContext)==null?void 0:N.nodeId,$=b?fy(b.nodesRef.current,B):[];if(!v&&(q.stopPropagation(),$.length>0)){let F=!0;if($.forEach(z=>{var U;if((U=z.context)!=null&&U.open&&!z.context.dataRef.current.__escapeKeyBubbles){F=!1;return}}),!F)return}r(!1,aA(q)?q.nativeEvent:q,"escape-key")}),P=oo(q=>{var N;const B=()=>{var $;M(q),($=rc(q))==null||$.removeEventListener("keydown",B)};(N=rc(q))==null||N.addEventListener("keydown",B)}),L=oo(q=>{var N;const B=R.current;R.current=!1;const $=m.current;if(m.current=!1,d==="click"&&$||B||typeof T=="function"&&!T(q))return;const F=rc(q),z="["+b0("inert")+"]",U=Wi(s.floating).querySelectorAll(z);let G=At(F)?F:null;for(;G&&!ii(G);){const se=ho(G);if(ii(se)||!At(se))break;G=se}if(U.length&&At(F)&&!cA(F)&&!md(F,s.floating)&&Array.from(U).every(se=>!md(G,se)))return;if(_r(F)&&H){const se=F.clientWidth>0&&F.scrollWidth>F.clientWidth,X=F.clientHeight>0&&F.scrollHeight>F.clientHeight;let oe=X&&q.offsetX>F.clientWidth;if(X&&zr(F).direction==="rtl"&&(oe=q.offsetX<=F.offsetWidth-F.clientWidth),oe||se&&q.offsetY>F.clientHeight)return}const te=(N=o.current.floatingContext)==null?void 0:N.nodeId,ne=b&&fy(b.nodesRef.current,te).some(se=>{var X;return cy(q,(X=se.context)==null?void 0:X.elements.floating)});if(cy(q,s.floating)||cy(q,s.domReference)||ne)return;const Q=b?fy(b.nodesRef.current,te):[];if(Q.length>0){let se=!0;if(Q.forEach(X=>{var oe;if((oe=X.context)!=null&&oe.open&&!X.context.dataRef.current.__outsidePressBubbles){se=!1;return}}),!se)return}r(!1,q,"outside-press")}),O=oo(q=>{var N;const B=()=>{var $;L(q),($=rc(q))==null||$.removeEventListener(d,B)};(N=rc(q))==null||N.addEventListener(d,B)});I.useEffect(()=>{if(!n||!a)return;o.current.__escapeKeyBubbles=v,o.current.__outsidePressBubbles=x;let q=-1;function N(U){r(!1,U,"ancestor-scroll")}function B(){window.clearTimeout(q),D.current=!0}function $(){q=window.setTimeout(()=>{D.current=!1},Nh()?5:0)}const F=Wi(s.floating);c&&(F.addEventListener("keydown",_?P:M,_),F.addEventListener("compositionstart",B),F.addEventListener("compositionend",$)),T&&F.addEventListener(d,k?O:L,k);let z=[];return g&&(At(s.domReference)&&(z=co(s.domReference)),At(s.floating)&&(z=z.concat(co(s.floating))),!At(s.reference)&&s.reference&&s.reference.contextElement&&(z=z.concat(co(s.reference.contextElement)))),z=z.filter(U=>{var G;return U!==((G=F.defaultView)==null?void 0:G.visualViewport)}),z.forEach(U=>{U.addEventListener("scroll",N,{passive:!0})}),()=>{c&&(F.removeEventListener("keydown",_?P:M,_),F.removeEventListener("compositionstart",B),F.removeEventListener("compositionend",$)),T&&F.removeEventListener(d,k?O:L,k),z.forEach(U=>{U.removeEventListener("scroll",N)}),window.clearTimeout(q)}},[o,s,c,T,d,n,r,g,a,v,x,M,_,P,L,k,O]),I.useEffect(()=>{R.current=!1},[T,d]);const V=I.useMemo(()=>({onKeyDown:M,[h3[h]]:q=>{p&&r(!1,q.nativeEvent,"reference-press")}}),[M,r,p,h]),H=I.useMemo(()=>({onKeyDown:M,onMouseDown(){m.current=!0},onMouseUp(){m.current=!0},[m3[d]]:()=>{R.current=!0}}),[M,d]);return I.useMemo(()=>a?{reference:V,floating:H}:{},[a,V,H])}function v3(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=JE(),o=I.useRef({}),[a]=I.useState(()=>i3()),c=w0()!=null,[f,d]=I.useState(r.reference),p=oo((S,y,b)=>{o.current.openEvent=S?y:void 0,a.emit("openchange",{open:S,event:y,reason:b,nested:c}),n==null||n(S,y,b)}),h=I.useMemo(()=>({setPositionReference:d}),[]),g=I.useMemo(()=>({reference:f||r.reference||null,floating:r.floating||null,domReference:r.reference}),[f,r.reference,r.floating]);return I.useMemo(()=>({dataRef:o,open:t,onOpenChange:p,elements:g,events:a,floatingId:s,refs:h}),[t,p,g,a,s,h])}function x0(e){e===void 0&&(e={});const{nodeId:t}=e,n=v3({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[o,a]=I.useState(null),[c,f]=I.useState(null),p=(s==null?void 0:s.domReference)||o,h=I.useRef(null),g=S0();Bs(()=>{p&&(h.current=p)},[p]);const S=QA({...e,elements:{...s,...c&&{reference:c}}}),y=I.useCallback(m=>{const v=At(m)?{getBoundingClientRect:()=>m.getBoundingClientRect(),contextElement:m}:m;f(v),S.refs.setReference(v)},[S.refs]),b=I.useCallback(m=>{(At(m)||m===null)&&(h.current=m,a(m)),(At(S.refs.reference.current)||S.refs.reference.current===null||m!==null&&!At(m))&&S.refs.setReference(m)},[S.refs]),C=I.useMemo(()=>({...S.refs,setReference:b,setPositionReference:y,domReference:h}),[S.refs,b,y]),T=I.useMemo(()=>({...S.elements,domReference:p}),[S.elements,p]),R=I.useMemo(()=>({...S,...r,refs:C,elements:T,nodeId:t}),[S,C,T,t,r]);return Bs(()=>{r.dataRef.current.floatingContext=R;const m=g==null?void 0:g.nodesRef.current.find(v=>v.id===t);m&&(m.context=R)}),I.useMemo(()=>({...S,context:R,refs:C,elements:T}),[S,C,T,R])}function y3(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:s,dataRef:o,elements:a}=e,{enabled:c=!0,visibleOnly:f=!0}=t,d=I.useRef(!1),p=I.useRef(),h=I.useRef(!0);I.useEffect(()=>{if(!c)return;const S=nr(a.domReference);function y(){!n&&_r(a.domReference)&&a.domReference===$C(Wi(a.domReference))&&(d.current=!0)}function b(){h.current=!0}return S.addEventListener("blur",y),S.addEventListener("keydown",b,!0),()=>{S.removeEventListener("blur",y),S.removeEventListener("keydown",b,!0)}},[a.domReference,n,c]),I.useEffect(()=>{if(!c)return;function S(y){let{reason:b}=y;(b==="reference-press"||b==="escape-key")&&(d.current=!0)}return s.on("openchange",S),()=>{s.off("openchange",S)}},[s,c]),I.useEffect(()=>()=>{clearTimeout(p.current)},[]);const g=I.useMemo(()=>({onPointerDown(S){rA(S.nativeEvent)||(h.current=!1)},onMouseLeave(){d.current=!1},onFocus(S){if(d.current)return;const y=rc(S.nativeEvent);if(f&&At(y))try{if(sA()&&oA())throw Error();if(!y.matches(":focus-visible"))return}catch{if(!h.current&&!dA(y))return}r(!0,S.nativeEvent,"focus")},onBlur(S){d.current=!1;const y=S.relatedTarget,b=S.nativeEvent,C=At(y)&&y.hasAttribute(b0("focus-guard"))&&y.getAttribute("data-type")==="outside";p.current=window.setTimeout(()=>{var T;const R=$C(a.domReference?a.domReference.ownerDocument:document);!y&&R===a.domReference||md((T=o.current.floatingContext)==null?void 0:T.refs.floating.current,R)||md(a.domReference,R)||C||r(!1,b,"focus")})}}),[o,a.domReference,r,f]);return I.useMemo(()=>c?{reference:g}:{},[c,g])}const XC="active",QC="selected";function py(e,t,n){const r=new Map,s=n==="item";let o=e;if(s&&e){const{[XC]:a,[QC]:c,...f}=e;o=f}return{...n==="floating"&&{tabIndex:-1,[p3]:""},...o,...t.map(a=>{const c=a?a[n]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((a,c)=>(c&&Object.entries(c).forEach(f=>{let[d,p]=f;if(!(s&&[XC,QC].includes(d)))if(d.indexOf("on")===0){if(r.has(d)||r.set(d,[]),typeof p=="function"){var h;(h=r.get(d))==null||h.push(p),a[d]=function(){for(var g,S=arguments.length,y=new Array(S),b=0;b<S;b++)y[b]=arguments[b];return(g=r.get(d))==null?void 0:g.map(C=>C(...y)).find(C=>C!==void 0)}}}else a[d]=p}),a),{})}}function w3(e){e===void 0&&(e=[]);const t=e.map(c=>c==null?void 0:c.reference),n=e.map(c=>c==null?void 0:c.floating),r=e.map(c=>c==null?void 0:c.item),s=I.useCallback(c=>py(c,e,"reference"),t),o=I.useCallback(c=>py(c,e,"floating"),n),a=I.useCallback(c=>py(c,e,"item"),r);return I.useMemo(()=>({getReferenceProps:s,getFloatingProps:o,getItemProps:a}),[s,o,a])}const S3=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function b3(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:s}=e,{enabled:o=!0,role:a="dialog"}=t,c=(n=S3.get(a))!=null?n:a,f=JE(),p=w0()!=null,h=I.useMemo(()=>c==="tooltip"||a==="label"?{["aria-"+(a==="label"?"labelledby":"describedby")]:r?s:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":c==="alertdialog"?"dialog":c,"aria-controls":r?s:void 0,...c==="listbox"&&{role:"combobox"},...c==="menu"&&{id:f},...c==="menu"&&p&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},[c,s,p,r,f,a]),g=I.useMemo(()=>{const y={id:s,...c&&{role:c}};return c==="tooltip"||a==="label"?y:{...y,...c==="menu"&&{"aria-labelledby":f}}},[c,s,f,a]),S=I.useCallback(y=>{let{active:b,selected:C}=y;const T={role:"option",...b&&{id:s+"-option"}};switch(a){case"select":return{...T,"aria-selected":b&&C};case"combobox":return{...T,...b&&{"aria-selected":!0}}}return{}},[s,a]);return I.useMemo(()=>o?{reference:h,floating:g,item:S}:{},[o,h,g,S])}const[x3,Ur]=cr("ScrollArea.Root component was not found in tree");function mc(e,t){const n=Vi(t);bc(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}const C3=I.forwardRef((e,t)=>{const{style:n,...r}=e,s=Ur(),[o,a]=I.useState(0),[c,f]=I.useState(0),d=!!(o&&c);return mc(s.scrollbarX,()=>{var h;const p=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(p),f(p)}),mc(s.scrollbarY,()=>{var h;const p=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(p),a(p)}),d?u.jsx("div",{...r,ref:t,style:{...n,width:o,height:c}}):null}),_3=I.forwardRef((e,t)=>{const n=Ur(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?u.jsx(C3,{...e,ref:t}):null}),R3={scrollHideDelay:1e3,type:"hover"},ek=I.forwardRef((e,t)=>{const n=le("ScrollAreaRoot",R3,e),{type:r,scrollHideDelay:s,scrollbars:o,...a}=n,[c,f]=I.useState(null),[d,p]=I.useState(null),[h,g]=I.useState(null),[S,y]=I.useState(null),[b,C]=I.useState(null),[T,R]=I.useState(0),[m,v]=I.useState(0),[x,_]=I.useState(!1),[k,D]=I.useState(!1),M=dn(t,P=>f(P));return u.jsx(x3,{value:{type:r,scrollHideDelay:s,scrollArea:c,viewport:d,onViewportChange:p,content:h,onContentChange:g,scrollbarX:S,onScrollbarXChange:y,scrollbarXEnabled:x,onScrollbarXEnabledChange:_,scrollbarY:b,onScrollbarYChange:C,scrollbarYEnabled:k,onScrollbarYEnabledChange:D,onCornerWidthChange:R,onCornerHeightChange:v},children:u.jsx(ie,{...a,ref:M,__vars:{"--sa-corner-width":o!=="xy"?"0px":`${T}px`,"--sa-corner-height":o!=="xy"?"0px":`${m}px`}})})});ek.displayName="@mantine/core/ScrollAreaRoot";function tk(e,t){const n=e/t;return Number.isNaN(n)?0:n}function Oh(e){const t=tk(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function nk(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function T3(e,[t,n]){return Math.min(n,Math.max(t,e))}function JC(e,t,n="ltr"){const r=Oh(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,a=t.content-t.viewport,c=o-r,f=n==="ltr"?[0,a]:[a*-1,0],d=T3(e,f);return nk([0,a],[0,c])(d)}function E3(e,t,n,r="ltr"){const s=Oh(n),o=s/2,a=t||o,c=s-a,f=n.scrollbar.paddingStart+a,d=n.scrollbar.size-n.scrollbar.paddingEnd-c,p=n.content-n.viewport,h=r==="ltr"?[0,p]:[p*-1,0];return nk([f,d],h)(e)}function rk(e,t){return e>0&&e<t}function ah(e){return e?parseInt(e,10):0}function Xi(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[k3,sk]=cr("ScrollAreaScrollbar was not found in tree"),ok=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:f,onWheelScroll:d,onResize:p,...h}=e,g=Ur(),[S,y]=I.useState(null),b=dn(t,D=>y(D)),C=I.useRef(null),T=I.useRef(""),{viewport:R}=g,m=n.content-n.viewport,v=Vi(d),x=Vi(c),_=Th(p,10),k=D=>{if(C.current){const M=D.clientX-C.current.left,P=D.clientY-C.current.top;f({x:M,y:P})}};return I.useEffect(()=>{const D=M=>{const P=M.target;(S==null?void 0:S.contains(P))&&v(M,m)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[R,S,m,v]),I.useEffect(x,[n,x]),mc(S,_),mc(g.content,_),u.jsx(k3,{value:{scrollbar:S,hasThumb:r,onThumbChange:Vi(s),onThumbPointerUp:Vi(o),onThumbPositionChange:x,onThumbPointerDown:Vi(a)},children:u.jsx("div",{...h,ref:b,"data-mantine-scrollbar":!0,style:{position:"absolute",...h.style},onPointerDown:Xi(e.onPointerDown,D=>{D.preventDefault(),D.button===0&&(D.target.setPointerCapture(D.pointerId),C.current=S.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",k(D))}),onPointerMove:Xi(e.onPointerMove,k),onPointerUp:Xi(e.onPointerUp,D=>{const M=D.target;M.hasPointerCapture(D.pointerId)&&(D.preventDefault(),M.releasePointerCapture(D.pointerId))}),onLostPointerCapture:()=>{document.body.style.webkitUserSelect=T.current,C.current=null}})})}),ik=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:s,...o}=e,a=Ur(),[c,f]=I.useState(),d=I.useRef(null),p=dn(t,d,a.onScrollbarXChange);return I.useEffect(()=>{d.current&&f(getComputedStyle(d.current))},[d]),u.jsx(ok,{"data-orientation":"horizontal",...o,ref:p,sizes:n,style:{...s,"--sa-thumb-width":`${Oh(n)}px`},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,g)=>{if(a.viewport){const S=a.viewport.scrollLeft+h.deltaX;e.onWheelScroll(S),rk(S,g)&&h.preventDefault()}},onResize:()=>{d.current&&a.viewport&&c&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:ah(c.paddingLeft),paddingEnd:ah(c.paddingRight)}})}})});ik.displayName="@mantine/core/ScrollAreaScrollbarX";const ak=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:s,...o}=e,a=Ur(),[c,f]=I.useState(),d=I.useRef(null),p=dn(t,d,a.onScrollbarYChange);return I.useEffect(()=>{d.current&&f(window.getComputedStyle(d.current))},[]),u.jsx(ok,{...o,"data-orientation":"vertical",ref:p,sizes:n,style:{"--sa-thumb-height":`${Oh(n)}px`,...s},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,g)=>{if(a.viewport){const S=a.viewport.scrollTop+h.deltaY;e.onWheelScroll(S),rk(S,g)&&h.preventDefault()}},onResize:()=>{d.current&&a.viewport&&c&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:ah(c.paddingTop),paddingEnd:ah(c.paddingBottom)}})}})});ak.displayName="@mantine/core/ScrollAreaScrollbarY";const Ah=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:s}=wo(),o=Ur(),a=I.useRef(null),c=I.useRef(0),[f,d]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=tk(f.viewport,f.content),h={...r,sizes:f,onSizesChange:d,hasThumb:p>0&&p<1,onThumbChange:S=>{a.current=S},onThumbPointerUp:()=>{c.current=0},onThumbPointerDown:S=>{c.current=S}},g=(S,y)=>E3(S,c.current,f,y);return n==="horizontal"?u.jsx(ik,{...h,ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const S=o.viewport.scrollLeft,y=JC(S,f,s);a.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:S=>{o.viewport&&(o.viewport.scrollLeft=S)},onDragScroll:S=>{o.viewport&&(o.viewport.scrollLeft=g(S,s))}}):n==="vertical"?u.jsx(ak,{...h,ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const S=o.viewport.scrollTop,y=JC(S,f);f.scrollbar.size===0?a.current.style.setProperty("--thumb-opacity","0"):a.current.style.setProperty("--thumb-opacity","1"),a.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:S=>{o.viewport&&(o.viewport.scrollTop=S)},onDragScroll:S=>{o.viewport&&(o.viewport.scrollTop=g(S))}}):null});Ah.displayName="@mantine/core/ScrollAreaScrollbarVisible";const C0=I.forwardRef((e,t)=>{const n=Ur(),{forceMount:r,...s}=e,[o,a]=I.useState(!1),c=e.orientation==="horizontal",f=Th(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,p=n.viewport.offsetHeight<n.viewport.scrollHeight;a(c?d:p)}},10);return mc(n.viewport,f),mc(n.content,f),r||o?u.jsx(Ah,{"data-state":o?"visible":"hidden",...s,ref:t}):null});C0.displayName="@mantine/core/ScrollAreaScrollbarAuto";const ck=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Ur(),[o,a]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:c}=s;let f=0;if(c){const d=()=>{window.clearTimeout(f),a(!0)},p=()=>{f=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",p),()=>{window.clearTimeout(f),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",p)}}},[s.scrollArea,s.scrollHideDelay]),n||o?u.jsx(C0,{"data-state":o?"visible":"hidden",...r,ref:t}):null});ck.displayName="@mantine/core/ScrollAreaScrollbarHover";const I3=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Ur(),o=e.orientation==="horizontal",[a,c]=I.useState("hidden"),f=Th(()=>c("idle"),100);return I.useEffect(()=>{if(a==="idle"){const d=window.setTimeout(()=>c("hidden"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[a,s.scrollHideDelay]),I.useEffect(()=>{const{viewport:d}=s,p=o?"scrollLeft":"scrollTop";if(d){let h=d[p];const g=()=>{const S=d[p];h!==S&&(c("scrolling"),f()),h=S};return d.addEventListener("scroll",g),()=>d.removeEventListener("scroll",g)}},[s.viewport,o,f]),n||a!=="hidden"?u.jsx(Ah,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Xi(e.onPointerEnter,()=>c("interacting")),onPointerLeave:Xi(e.onPointerLeave,()=>c("idle"))}):null}),uw=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Ur(),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,c=e.orientation==="horizontal";return I.useEffect(()=>(c?o(!0):a(!0),()=>{c?o(!1):a(!1)}),[c,o,a]),s.type==="hover"?u.jsx(ck,{...r,ref:t,forceMount:n}):s.type==="scroll"?u.jsx(I3,{...r,ref:t,forceMount:n}):s.type==="auto"?u.jsx(C0,{...r,ref:t,forceMount:n}):s.type==="always"?u.jsx(Ah,{...r,ref:t}):null});uw.displayName="@mantine/core/ScrollAreaScrollbar";function D3(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const o={left:e.scrollLeft,top:e.scrollTop},a=n.left!==o.left,c=n.top!==o.top;(a||c)&&t(),n=o,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)}const lk=I.forwardRef((e,t)=>{const{style:n,...r}=e,s=Ur(),o=sk(),{onThumbPositionChange:a}=o,c=dn(t,p=>o.onThumbChange(p)),f=I.useRef(void 0),d=Th(()=>{f.current&&(f.current(),f.current=void 0)},100);return I.useEffect(()=>{const{viewport:p}=s;if(p){const h=()=>{if(d(),!f.current){const g=D3(p,a);f.current=g,a()}};return a(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[s.viewport,d,a]),u.jsx("div",{"data-state":o.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Xi(e.onPointerDownCapture,p=>{const g=p.target.getBoundingClientRect(),S=p.clientX-g.left,y=p.clientY-g.top;o.onThumbPointerDown({x:S,y})}),onPointerUp:Xi(e.onPointerUp,o.onThumbPointerUp)})});lk.displayName="@mantine/core/ScrollAreaThumb";const fw=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=sk();return n||s.hasThumb?u.jsx(lk,{ref:t,...r}):null});fw.displayName="@mantine/core/ScrollAreaThumb";const dk=I.forwardRef(({children:e,style:t,...n},r)=>{const s=Ur(),o=dn(r,s.onViewportChange);return u.jsx(ie,{...n,ref:o,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t},children:u.jsx("div",{style:{minWidth:"100%",display:"table"},ref:s.onContentChange,children:e})})});dk.displayName="@mantine/core/ScrollAreaViewport";var _0={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const uk={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},j3=(e,{scrollbarSize:t,overscrollBehavior:n})=>({root:{"--scrollarea-scrollbar-size":he(t),"--scrollarea-over-scroll-behavior":n}}),Pt=we((e,t)=>{const n=le("ScrollArea",uk,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,scrollbarSize:f,vars:d,type:p,scrollHideDelay:h,viewportProps:g,viewportRef:S,onScrollPositionChange:y,children:b,offsetScrollbars:C,scrollbars:T,onBottomReached:R,onTopReached:m,overscrollBehavior:v,...x}=n,[_,k]=I.useState(!1),[D,M]=I.useState(!1),[P,L]=I.useState(!1),O=Oe({name:"ScrollArea",props:n,classes:_0,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:d,varsResolver:j3}),V=I.useRef(null),H=e3([S,V]);return I.useEffect(()=>{if(!V.current||C!=="present")return;const q=V.current,N=new ResizeObserver(()=>{const{scrollHeight:B,clientHeight:$,scrollWidth:F,clientWidth:z}=q;M(B>$),L(F>z)});return N.observe(q),()=>N.disconnect()},[V,C]),u.jsxs(ek,{type:p==="never"?"always":p,scrollHideDelay:h,ref:t,scrollbars:T,...O("root"),...x,children:[u.jsx(dk,{...g,...O("viewport",{style:g==null?void 0:g.style}),ref:H,"data-offset-scrollbars":C===!0?"xy":C||void 0,"data-scrollbars":T||void 0,"data-horizontal-hidden":C==="present"&&!P?"true":void 0,"data-vertical-hidden":C==="present"&&!D?"true":void 0,onScroll:q=>{var F;(F=g==null?void 0:g.onScroll)==null||F.call(g,q),y==null||y({x:q.currentTarget.scrollLeft,y:q.currentTarget.scrollTop});const{scrollTop:N,scrollHeight:B,clientHeight:$}=q.currentTarget;N-(B-$)>=0&&(R==null||R()),N===0&&(m==null||m())},children:b}),(T==="xy"||T==="x")&&u.jsx(uw,{...O("scrollbar"),orientation:"horizontal","data-hidden":p==="never"||void 0,forceMount:!0,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:u.jsx(fw,{...O("thumb")})}),(T==="xy"||T==="y")&&u.jsx(uw,{...O("scrollbar"),orientation:"vertical","data-hidden":p==="never"||void 0,forceMount:!0,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:u.jsx(fw,{...O("thumb")})}),u.jsx(_3,{...O("corner"),"data-hovered":_||void 0,"data-hidden":p==="never"||void 0})]})});Pt.displayName="@mantine/core/ScrollArea";const R0=we((e,t)=>{const{children:n,classNames:r,styles:s,scrollbarSize:o,scrollHideDelay:a,type:c,dir:f,offsetScrollbars:d,viewportRef:p,onScrollPositionChange:h,unstyled:g,variant:S,viewportProps:y,scrollbars:b,style:C,vars:T,onBottomReached:R,onTopReached:m,...v}=le("ScrollAreaAutosize",uk,e);return u.jsx(ie,{...v,ref:t,style:[{display:"flex",overflow:"auto"},C],children:u.jsx(ie,{style:{display:"flex",flexDirection:"column",flex:1},children:u.jsx(Pt,{classNames:r,styles:s,scrollHideDelay:a,scrollbarSize:o,type:c,dir:f,offsetScrollbars:d,viewportRef:p,onScrollPositionChange:h,unstyled:g,variant:S,viewportProps:y,vars:T,scrollbars:b,onBottomReached:R,onTopReached:m,children:n})})})});Pt.classes=_0;R0.displayName="@mantine/core/ScrollAreaAutosize";R0.classes=_0;Pt.Autosize=R0;var fk={root:"m_87cf2631"};const P3={__staticSelector:"UnstyledButton"},on=_n((e,t)=>{const n=le("UnstyledButton",P3,e),{className:r,component:s="button",__staticSelector:o,unstyled:a,classNames:c,styles:f,style:d,...p}=n,h=Oe({name:o,props:n,classes:fk,className:r,style:d,classNames:c,styles:f,unstyled:a});return u.jsx(ie,{...h("root",{focusable:!0}),component:s,ref:t,type:s==="button"?"button":void 0,...p})});on.classes=fk;on.displayName="@mantine/core/UnstyledButton";var pk={root:"m_515a97f8"};const M3={},T0=we((e,t)=>{const n=le("VisuallyHidden",M3,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,...d}=n,p=Oe({name:"VisuallyHidden",classes:pk,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c});return u.jsx(ie,{component:"span",ref:t,...p("root"),...d})});T0.classes=pk;T0.displayName="@mantine/core/VisuallyHidden";var hk={root:"m_1b7284a3"};const N3={},L3=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:jt(t),"--paper-shadow":n0(n)}}),Gn=_n((e,t)=>{const n=le("Paper",N3,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,withBorder:f,vars:d,radius:p,shadow:h,variant:g,mod:S,...y}=n,b=Oe({name:"Paper",props:n,classes:hk,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:d,varsResolver:L3});return u.jsx(ie,{ref:t,mod:[{"data-with-border":f},S],...b("root"),variant:g,...y})});Gn.classes=hk;Gn.displayName="@mantine/core/Paper";function mk(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),s=n==="right"?"left":"right";return r===void 0?s:`${s}-${r}`}return t}function ZC(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function e_(e,t,n,r,s){return e==="center"||r==="center"?{left:t}:e==="end"?{[s==="ltr"?"right":"left"]:n}:e==="start"?{[s==="ltr"?"left":"right"]:n}:{}}const O3={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function A3({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:s,arrowX:o,arrowY:a,dir:c}){const[f,d="center"]=e.split("-"),p={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[O3[f]]:r},h=-t/2;return f==="left"?{...p,...ZC(d,a,n,s),right:h,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:f==="right"?{...p,...ZC(d,a,n,s),left:h,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:f==="top"?{...p,...e_(d,o,n,s,c),bottom:h,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:f==="bottom"?{...p,...e_(d,o,n,s,c),top:h,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const E0=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:s,visible:o,arrowX:a,arrowY:c,style:f,...d},p)=>{const{dir:h}=wo();return o?u.jsx("div",{...d,ref:p,style:{...f,...A3({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:s,dir:h,arrowX:a,arrowY:c})}}):null});E0.displayName="@mantine/core/FloatingArrow";var gk={root:"m_9814e45f"};const $3={zIndex:lr("modal")},F3=(e,{gradient:t,color:n,backgroundOpacity:r,blur:s,radius:o,zIndex:a})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&As(n||"#000",r??.6)||void 0,"--overlay-filter":s?`blur(${he(s)})`:void 0,"--overlay-radius":o===void 0?void 0:jt(o),"--overlay-z-index":a==null?void 0:a.toString()}}),$h=_n((e,t)=>{const n=le("Overlay",$3,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,fixed:d,center:p,children:h,radius:g,zIndex:S,gradient:y,blur:b,color:C,backgroundOpacity:T,mod:R,...m}=n,v=Oe({name:"Overlay",props:n,classes:gk,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:F3});return u.jsx(ie,{ref:t,...v("root"),mod:[{center:p,fixed:d},R],...m,children:h})});$h.classes=gk;$h.displayName="@mantine/core/Overlay";function hy(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}function z3({target:e,reuseTargetNode:t,...n}){if(e)return typeof e=="string"?document.querySelector(e)||hy(n):e;if(t){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const s=hy(n);return s.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(s),s}return hy(n)}const B3={},vk=we((e,t)=>{const{children:n,target:r,reuseTargetNode:s,...o}=le("Portal",B3,e),[a,c]=I.useState(!1),f=I.useRef(null);return bc(()=>(c(!0),f.current=z3({target:r,reuseTargetNode:s,...o}),th(t,f.current),!r&&!s&&f.current&&document.body.appendChild(f.current),()=>{!r&&!s&&f.current&&document.body.removeChild(f.current)}),[r]),!a||!f.current?null:jh.createPortal(u.jsx(u.Fragment,{children:n}),f.current)});vk.displayName="@mantine/core/Portal";const ua=we(({withinPortal:e=!0,children:t,...n},r)=>EE()==="test"||!e?u.jsx(u.Fragment,{children:t}):u.jsx(vk,{ref:r,...n,children:t}));ua.displayName="@mantine/core/OptionalPortal";const El=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),ff={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...El("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...El("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...El("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...El("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...El("top"),common:{transformOrigin:"top right"}}},t_={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function U3({transition:e,state:t,duration:n,timingFunction:r}){const s={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in ff?{transitionProperty:ff[e].transitionProperty,...s,...ff[e].common,...ff[e][t_[t]]}:{}:{transitionProperty:e.transitionProperty,...s,...e.common,...e[t_[t]]}}function V3({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:s,onExit:o,onEntered:a,onExited:c,enterDelay:f,exitDelay:d}){const p=jn(),h=Eh(),g=p.respectReducedMotion?h:!1,[S,y]=I.useState(g?0:e),[b,C]=I.useState(r?"entered":"exited"),T=I.useRef(-1),R=I.useRef(-1),m=I.useRef(-1),v=_=>{const k=_?s:o,D=_?a:c;window.clearTimeout(T.current);const M=g?0:_?e:t;y(M),M===0?(typeof k=="function"&&k(),typeof D=="function"&&D(),C(_?"entered":"exited")):m.current=requestAnimationFrame(()=>{Hl.flushSync(()=>{C(_?"pre-entering":"pre-exiting")}),m.current=requestAnimationFrame(()=>{typeof k=="function"&&k(),C(_?"entering":"exiting"),T.current=window.setTimeout(()=>{typeof D=="function"&&D(),C(_?"entered":"exited")},M)})})},x=_=>{if(window.clearTimeout(R.current),typeof(_?f:d)!="number"){v(_);return}R.current=window.setTimeout(()=>{v(_)},_?f:d)};return zn(()=>{x(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(T.current),cancelAnimationFrame(m.current)},[]),{transitionDuration:S,transitionStatus:b,transitionTimingFunction:n||"ease"}}function So({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:s,children:o,timingFunction:a="ease",onExit:c,onEntered:f,onEnter:d,onExited:p,enterDelay:h,exitDelay:g}){const S=EE(),{transitionDuration:y,transitionStatus:b,transitionTimingFunction:C}=V3({mounted:s,exitDuration:r,duration:n,timingFunction:a,onExit:c,onEntered:f,onEnter:d,onExited:p,enterDelay:h,exitDelay:g});return y===0||S==="test"?s?u.jsx(u.Fragment,{children:o({})}):e?o({display:"none"}):null:b==="exited"?e?o({display:"none"}):null:u.jsx(u.Fragment,{children:o(U3({transition:t,duration:y,state:b,timingFunction:C}))})}So.displayName="@mantine/core/Transition";const[H3,yk]=cr("Popover component was not found in the tree");function Fh({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const s=DL(t),o=dn(s,r);return di(e)?I.cloneElement(e,{[n]:o}):e}function wk(e){return u.jsx(T0,{tabIndex:-1,"data-autofocus":!0,...e})}Fh.displayName="@mantine/core/FocusTrap";wk.displayName="@mantine/core/FocusTrapInitialFocus";Fh.InitialFocus=wk;var Sk={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const W3={},k0=we((e,t)=>{var C,T,R,m;const n=le("PopoverDropdown",W3,e),{className:r,style:s,vars:o,children:a,onKeyDownCapture:c,variant:f,classNames:d,styles:p,...h}=n,g=yk(),S=wE({opened:g.opened,shouldReturnFocus:g.returnFocus}),y=g.withRoles?{"aria-labelledby":g.getTargetId(),id:g.getDropdownId(),role:"dialog",tabIndex:-1}:{},b=dn(t,g.floating);return g.disabled?null:u.jsx(ua,{...g.portalProps,withinPortal:g.withinPortal,children:u.jsx(So,{mounted:g.opened,...g.transitionProps,transition:((C=g.transitionProps)==null?void 0:C.transition)||"fade",duration:((T=g.transitionProps)==null?void 0:T.duration)??150,keepMounted:g.keepMounted,exitDuration:typeof((R=g.transitionProps)==null?void 0:R.exitDuration)=="number"?g.transitionProps.exitDuration:(m=g.transitionProps)==null?void 0:m.duration,children:v=>u.jsx(Fh,{active:g.trapFocus&&g.opened,innerRef:b,children:u.jsxs(ie,{...y,...h,variant:f,onKeyDownCapture:hL(()=>{var x,_;(x=g.onClose)==null||x.call(g),(_=g.onDismiss)==null||_.call(g)},{active:g.closeOnEscape,onTrigger:S,onKeyDown:c}),"data-position":g.placement,"data-fixed":g.floatingStrategy==="fixed"||void 0,...g.getStyles("dropdown",{className:r,props:n,classNames:d,styles:p,style:[{...v,zIndex:g.zIndex,top:g.y??0,left:g.x??0,width:g.width==="target"?void 0:he(g.width)},g.resolvedStyles.dropdown,p==null?void 0:p.dropdown,s]}),children:[a,u.jsx(E0,{ref:g.arrowRef,arrowX:g.arrowX,arrowY:g.arrowY,visible:g.withArrow,position:g.placement,arrowSize:g.arrowSize,arrowRadius:g.arrowRadius,arrowOffset:g.arrowOffset,arrowPosition:g.arrowPosition,...g.getStyles("arrow",{props:n,classNames:d,styles:p})})]})})})})});k0.classes=Sk;k0.displayName="@mantine/core/PopoverDropdown";const q3={refProp:"ref",popupType:"dialog"},bk=we((e,t)=>{const{children:n,refProp:r,popupType:s,...o}=le("PopoverTarget",q3,e);if(!di(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const a=o,c=yk(),f=dn(c.reference,kh(n),t),d=c.withRoles?{"aria-haspopup":s,"aria-expanded":c.opened,"aria-controls":c.getDropdownId(),id:c.getTargetId()}:{};return I.cloneElement(n,{...a,...d,...c.targetProps,className:ln(c.targetProps.className,a.className,n.props.className),[r]:f,...c.controlled?null:{onClick:c.onToggle}})});bk.displayName="@mantine/core/PopoverTarget";function xk({opened:e,floating:t,position:n,positionDependencies:r}){const[s,o]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return VA(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,s,n]),zn(()=>{t.update()},r),zn(()=>{o(a=>a+1)},[e])}function G3(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function K3(e,t){const n=G3(e.middlewares),r=[YE(e.offset)];return n.shift&&r.push(y0(typeof n.shift=="boolean"?{limiter:WC(),padding:5}:{limiter:WC(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?ih():ih(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?ed():ed(n.inline)),r.push(XE({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(ZA({...typeof n.size=="boolean"?{}:n.size,apply({rects:s,availableWidth:o,availableHeight:a,...c}){var p;const d=((p=t().refs.floating.current)==null?void 0:p.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:s,availableWidth:o,availableHeight:a,...c}):Object.assign(d,{maxWidth:`${o}px`,maxHeight:`${a}px`})),e.width==="target"&&Object.assign(d,{width:`${s.reference.width}px`})}})),r}function Y3(e){const[t,n]=gn({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=I.useRef(t),s=()=>{t&&n(!1)},o=()=>n(!t),a=x0({strategy:e.strategy,placement:e.position,middleware:K3(e,()=>a)});return xk({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:a}),zn(()=>{var c;(c=e.onPositionChange)==null||c.call(e,a.placement)},[a.placement]),zn(()=>{var c,f;t!==r.current&&(t?(f=e.onOpen)==null||f.call(e):(c=e.onClose)==null||c.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:a,controlled:typeof e.opened=="boolean",opened:t,onClose:s,onToggle:o}}const X3={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:lr("popover"),__staticSelector:"Popover",width:"max-content"},Q3=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:jt(t),"--popover-shadow":n0(n)}});function an(e){var Ve,He,Ye,Le,ct,vt;const t=le("Popover",X3,e),{children:n,position:r,offset:s,onPositionChange:o,positionDependencies:a,opened:c,transitionProps:f,onExitTransitionEnd:d,onEnterTransitionEnd:p,width:h,middlewares:g,withArrow:S,arrowSize:y,arrowOffset:b,arrowRadius:C,arrowPosition:T,unstyled:R,classNames:m,styles:v,closeOnClickOutside:x,withinPortal:_,portalProps:k,closeOnEscape:D,clickOutsideEvents:M,trapFocus:P,onClose:L,onDismiss:O,onOpen:V,onChange:H,zIndex:q,radius:N,shadow:B,id:$,defaultOpened:F,__staticSelector:z,withRoles:U,disabled:G,returnFocus:te,variant:ne,keepMounted:Q,vars:se,floatingStrategy:X,withOverlay:oe,overlayProps:K,...Z}=t,fe=Oe({name:z,props:t,classes:Sk,classNames:m,styles:v,unstyled:R,rootSelector:"dropdown",vars:se,varsResolver:Q3}),{resolvedStyles:xe}=Br({classNames:m,styles:v,props:t}),ye=I.useRef(null),[Ee,Be]=I.useState(null),[et,pe]=I.useState(null),{dir:_e}=wo(),je=Cs($),Ue=Y3({middlewares:g,width:h,position:mk(_e,r),offset:typeof s=="number"?s+(S?y/2:0):s,arrowRef:ye,arrowOffset:b,onPositionChange:o,positionDependencies:a,opened:c,defaultOpened:F,onChange:H,onOpen:V,onClose:L,onDismiss:O,strategy:X});SL(()=>{x&&(Ue.onClose(),O==null||O())},M,[Ee,et]);const Je=I.useCallback(ut=>{Be(ut),Ue.floating.refs.setReference(ut)},[Ue.floating.refs.setReference]),Ze=I.useCallback(ut=>{pe(ut),Ue.floating.refs.setFloating(ut)},[Ue.floating.refs.setFloating]),Fe=I.useCallback(()=>{var ut;(ut=f==null?void 0:f.onExited)==null||ut.call(f),d==null||d()},[f==null?void 0:f.onExited,d]),be=I.useCallback(()=>{var ut;(ut=f==null?void 0:f.onEntered)==null||ut.call(f),p==null||p()},[f==null?void 0:f.onEntered,p]);return u.jsxs(H3,{value:{returnFocus:te,disabled:G,controlled:Ue.controlled,reference:Je,floating:Ze,x:Ue.floating.x,y:Ue.floating.y,arrowX:(Ye=(He=(Ve=Ue.floating)==null?void 0:Ve.middlewareData)==null?void 0:He.arrow)==null?void 0:Ye.x,arrowY:(vt=(ct=(Le=Ue.floating)==null?void 0:Le.middlewareData)==null?void 0:ct.arrow)==null?void 0:vt.y,opened:Ue.opened,arrowRef:ye,transitionProps:{...f,onExited:Fe,onEntered:be},width:h,withArrow:S,arrowSize:y,arrowOffset:b,arrowRadius:C,arrowPosition:T,placement:Ue.floating.placement,trapFocus:P,withinPortal:_,portalProps:k,zIndex:q,radius:N,shadow:B,closeOnEscape:D,onDismiss:O,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${je}-target`,getDropdownId:()=>`${je}-dropdown`,withRoles:U,targetProps:Z,__staticSelector:z,classNames:m,styles:v,unstyled:R,variant:ne,keepMounted:Q,getStyles:fe,resolvedStyles:xe,floatingStrategy:X},children:[n,oe&&u.jsx(So,{transition:"fade",mounted:Ue.opened,duration:(f==null?void 0:f.duration)||250,exitDuration:(f==null?void 0:f.exitDuration)||250,children:ut=>u.jsx(ua,{withinPortal:_,children:u.jsx($h,{...K,...fe("overlay",{className:K==null?void 0:K.className,style:[ut,K==null?void 0:K.style]})})})})]})}an.Target=bk;an.Dropdown=k0;an.displayName="@mantine/core/Popover";an.extend=e=>e;var vs={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Ck=I.forwardRef(({className:e,...t},n)=>u.jsxs(ie,{component:"span",className:ln(vs.barsLoader,e),...t,ref:n,children:[u.jsx("span",{className:vs.bar}),u.jsx("span",{className:vs.bar}),u.jsx("span",{className:vs.bar})]}));Ck.displayName="@mantine/core/Bars";const _k=I.forwardRef(({className:e,...t},n)=>u.jsxs(ie,{component:"span",className:ln(vs.dotsLoader,e),...t,ref:n,children:[u.jsx("span",{className:vs.dot}),u.jsx("span",{className:vs.dot}),u.jsx("span",{className:vs.dot})]}));_k.displayName="@mantine/core/Dots";const Rk=I.forwardRef(({className:e,...t},n)=>u.jsx(ie,{component:"span",className:ln(vs.ovalLoader,e),...t,ref:n}));Rk.displayName="@mantine/core/Oval";const Tk={bars:Ck,oval:Rk,dots:_k},J3={loaders:Tk,type:"oval"},Z3=(e,{size:t,color:n})=>({root:{"--loader-size":nt(t,"loader-size"),"--loader-color":n?Wt(n,e):void 0}}),Rr=we((e,t)=>{const n=le("Loader",J3,e),{size:r,color:s,type:o,vars:a,className:c,style:f,classNames:d,styles:p,unstyled:h,loaders:g,variant:S,children:y,...b}=n,C=Oe({name:"Loader",props:n,classes:vs,className:c,style:f,classNames:d,styles:p,unstyled:h,vars:a,varsResolver:Z3});return y?u.jsx(ie,{...C("root"),ref:t,...b,children:y}):u.jsx(ie,{...C("root"),ref:t,component:g[o],variant:S,size:r,...b})});Rr.defaultLoaders=Tk;Rr.classes=vs;Rr.displayName="@mantine/core/Loader";var Ec={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const n_={orientation:"horizontal"},e4=(e,{borderWidth:t})=>({group:{"--ai-border-width":he(t)}}),I0=we((e,t)=>{const n=le("ActionIconGroup",n_,e),{className:r,style:s,classNames:o,styles:a,unstyled:c,orientation:f,vars:d,borderWidth:p,variant:h,mod:g,...S}=le("ActionIconGroup",n_,e),y=Oe({name:"ActionIconGroup",props:n,classes:Ec,className:r,style:s,classNames:o,styles:a,unstyled:c,vars:d,varsResolver:e4,rootSelector:"group"});return u.jsx(ie,{...y("group"),ref:t,variant:h,mod:[{"data-orientation":f},g],role:"group",...S})});I0.classes=Ec;I0.displayName="@mantine/core/ActionIconGroup";const r_={},t4=(e,{radius:t,color:n,gradient:r,variant:s,autoContrast:o,size:a})=>{const c=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:s||"filled",autoContrast:o});return{groupSection:{"--section-height":nt(a,"section-height"),"--section-padding-x":nt(a,"section-padding-x"),"--section-fz":en(a),"--section-radius":t===void 0?void 0:jt(t),"--section-bg":n||s?c.background:void 0,"--section-color":c.color,"--section-bd":n||s?c.border:void 0}}},D0=we((e,t)=>{const n=le("ActionIconGroupSection",r_,e),{className:r,style:s,classNames:o,styles:a,unstyled:c,vars:f,variant:d,gradient:p,radius:h,autoContrast:g,...S}=le("ActionIconGroupSection",r_,e),y=Oe({name:"ActionIconGroupSection",props:n,classes:Ec,className:r,style:s,classNames:o,styles:a,unstyled:c,vars:f,varsResolver:t4,rootSelector:"groupSection"});return u.jsx(ie,{...y("groupSection"),ref:t,variant:d,...S})});D0.classes=Ec;D0.displayName="@mantine/core/ActionIconGroupSection";const n4={},r4=(e,{size:t,radius:n,variant:r,gradient:s,color:o,autoContrast:a})=>{const c=e.variantColorResolver({color:o||e.primaryColor,theme:e,gradient:s,variant:r||"filled",autoContrast:a});return{root:{"--ai-size":nt(t,"ai-size"),"--ai-radius":n===void 0?void 0:jt(n),"--ai-bg":o||r?c.background:void 0,"--ai-hover":o||r?c.hover:void 0,"--ai-hover-color":o||r?c.hoverColor:void 0,"--ai-color":c.color,"--ai-bd":o||r?c.border:void 0}}},tt=_n((e,t)=>{const n=le("ActionIcon",n4,e),{className:r,unstyled:s,variant:o,classNames:a,styles:c,style:f,loading:d,loaderProps:p,size:h,color:g,radius:S,__staticSelector:y,gradient:b,vars:C,children:T,disabled:R,"data-disabled":m,autoContrast:v,mod:x,..._}=n,k=Oe({name:["ActionIcon",y],props:n,className:r,style:f,classes:Ec,classNames:a,styles:c,unstyled:s,vars:C,varsResolver:r4});return u.jsxs(on,{...k("root",{active:!R&&!d&&!m}),..._,unstyled:s,variant:o,size:h,disabled:R||d,ref:t,mod:[{loading:d,disabled:R||m},x],children:[u.jsx(So,{mounted:!!d,transition:"slide-down",duration:150,children:D=>u.jsx(ie,{component:"span",...k("loader",{style:D}),"aria-hidden":!0,children:u.jsx(Rr,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...p})})}),u.jsx(ie,{component:"span",mod:{loading:d},...k("icon"),children:T})]})});tt.classes=Ec;tt.displayName="@mantine/core/ActionIcon";tt.Group=I0;tt.GroupSection=D0;const Ek=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>u.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:u.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Ek.displayName="@mantine/core/CloseIcon";var kk={root:"m_86a44da5","root--subtle":"m_220c80f2"};const s4={variant:"subtle"},o4=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":nt(t,"cb-size"),"--cb-radius":n===void 0?void 0:jt(n),"--cb-icon-size":he(r)}}),fa=_n((e,t)=>{const n=le("CloseButton",s4,e),{iconSize:r,children:s,vars:o,radius:a,className:c,classNames:f,style:d,styles:p,unstyled:h,"data-disabled":g,disabled:S,variant:y,icon:b,mod:C,__staticSelector:T,...R}=n,m=Oe({name:T||"CloseButton",props:n,className:c,style:d,classes:kk,classNames:f,styles:p,unstyled:h,vars:o,varsResolver:o4});return u.jsxs(on,{ref:t,...R,unstyled:h,variant:y,disabled:S,mod:[{disabled:S||g},C],...m("root",{variant:y,active:!S&&!g}),children:[b||u.jsx(Ek,{}),s]})});fa.classes=kk;fa.displayName="@mantine/core/CloseButton";function i4(e){return I.Children.toArray(e).filter(Boolean)}var Ik={root:"m_4081bf90"};const a4={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},c4=(e,{grow:t,preventGrowOverflow:n,gap:r,align:s,justify:o,wrap:a},{childWidth:c})=>({root:{"--group-child-width":t&&n?c:void 0,"--group-gap":Nt(r),"--group-align":s,"--group-justify":o,"--group-wrap":a}}),ve=we((e,t)=>{const n=le("Group",a4,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,children:f,gap:d,align:p,justify:h,wrap:g,grow:S,preventGrowOverflow:y,vars:b,variant:C,__size:T,mod:R,...m}=n,v=i4(f),x=v.length,_=Nt(d??"md"),D={childWidth:`calc(${100/x}% - (${_} - ${_} / ${x}))`},M=Oe({name:"Group",props:n,stylesCtx:D,className:s,style:o,classes:Ik,classNames:r,styles:a,unstyled:c,vars:b,varsResolver:c4});return u.jsx(ie,{...M("root"),ref:t,variant:C,mod:[{grow:S},R],size:T,...m,children:v})});ve.classes=Ik;ve.displayName="@mantine/core/Group";const[l4,bo]=cr("ModalBase component was not found in tree");function d4({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),s=I.useRef(-1),a=Eh()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(s.current)):a===0?r(!1):s.current=window.setTimeout(()=>r(!1),a),()=>window.clearTimeout(s.current)),[e,a]),n}function u4({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:s,onClose:o,returnFocus:a}){const c=Cs(e),[f,d]=I.useState(!1),[p,h]=I.useState(!1),g=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,S=d4({opened:n,transitionDuration:g});return LL("keydown",y=>{var b;y.key==="Escape"&&s&&n&&((b=y.target)==null?void 0:b.getAttribute("data-mantine-stop-propagation"))!=="true"&&o()},{capture:!0}),wE({opened:n,shouldReturnFocus:r&&a}),{_id:c,titleMounted:f,bodyMounted:p,shouldLockScroll:S,setTitleMounted:d,setBodyMounted:h}}const j0=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:s,onExitTransitionEnd:o,onEnterTransitionEnd:a,trapFocus:c,closeOnEscape:f,returnFocus:d,closeOnClickOutside:p,withinPortal:h,portalProps:g,lockScroll:S,children:y,zIndex:b,shadow:C,padding:T,__vars:R,unstyled:m,removeScrollProps:v,...x},_)=>{const{_id:k,titleMounted:D,bodyMounted:M,shouldLockScroll:P,setTitleMounted:L,setBodyMounted:O}=u4({id:r,transitionProps:s,opened:t,trapFocus:c,closeOnEscape:f,onClose:n,returnFocus:d}),{key:V,...H}=v||{};return u.jsx(ua,{...g,withinPortal:h,children:u.jsx(l4,{value:{opened:t,onClose:n,closeOnClickOutside:p,onExitTransitionEnd:o,onEnterTransitionEnd:a,transitionProps:{...s,keepMounted:e},getTitleId:()=>`${k}-title`,getBodyId:()=>`${k}-body`,titleMounted:D,bodyMounted:M,setTitleMounted:L,setBodyMounted:O,trapFocus:c,closeOnEscape:f,zIndex:b,unstyled:m},children:u.jsx(Zp,{enabled:P&&S,...H,children:u.jsx(ie,{ref:_,...x,__vars:{...R,"--mb-z-index":(b||lr("modal")).toString(),"--mb-shadow":n0(C),"--mb-padding":Nt(T)},children:y})},V)})})});j0.displayName="@mantine/core/ModalBase";function f4(){const e=bo();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var gc={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const P0=I.forwardRef(({className:e,...t},n)=>{const r=f4(),s=bo();return u.jsx(ie,{ref:n,...t,id:r,className:ln({[gc.body]:!s.unstyled},e)})});P0.displayName="@mantine/core/ModalBaseBody";const M0=I.forwardRef(({className:e,onClick:t,...n},r)=>{const s=bo();return u.jsx(fa,{ref:r,...n,onClick:o=>{s.onClose(),t==null||t(o)},className:ln({[gc.close]:!s.unstyled},e),unstyled:s.unstyled})});M0.displayName="@mantine/core/ModalBaseCloseButton";const N0=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:s,...o},a)=>{const c=bo();return u.jsx(So,{mounted:c.opened,transition:"pop",...c.transitionProps,onExited:()=>{var f,d,p;(f=c.onExitTransitionEnd)==null||f.call(c),(p=(d=c.transitionProps)==null?void 0:d.onExited)==null||p.call(d)},onEntered:()=>{var f,d,p;(f=c.onEnterTransitionEnd)==null||f.call(c),(p=(d=c.transitionProps)==null?void 0:d.onEntered)==null||p.call(d)},...e,children:f=>u.jsx("div",{...n,className:ln({[gc.inner]:!c.unstyled},n.className),children:u.jsx(Fh,{active:c.opened&&c.trapFocus,innerRef:a,children:u.jsx(Gn,{...o,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":c.bodyMounted?c.getBodyId():void 0,"aria-labelledby":c.titleMounted?c.getTitleId():void 0,style:[s,f],className:ln({[gc.content]:!c.unstyled},t),unstyled:c.unstyled,children:o.children})})})})});N0.displayName="@mantine/core/ModalBaseContent";const L0=I.forwardRef(({className:e,...t},n)=>{const r=bo();return u.jsx(ie,{component:"header",ref:n,className:ln({[gc.header]:!r.unstyled},e),...t})});L0.displayName="@mantine/core/ModalBaseHeader";const p4={duration:200,timingFunction:"ease",transition:"fade"};function h4(e){const t=bo();return{...p4,...t.transitionProps,...e}}const O0=I.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...s},o)=>{const a=bo(),c=h4(t);return u.jsx(So,{mounted:r!==void 0?r:a.opened,...c,transition:"fade",children:f=>u.jsx($h,{ref:o,fixed:!0,style:[n,f],zIndex:a.zIndex,unstyled:a.unstyled,onClick:d=>{e==null||e(d),a.closeOnClickOutside&&a.onClose()},...s})})});O0.displayName="@mantine/core/ModalBaseOverlay";function m4(){const e=bo();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const A0=I.forwardRef(({className:e,...t},n)=>{const r=m4(),s=bo();return u.jsx(ie,{component:"h2",ref:n,className:ln({[gc.title]:!s.unstyled},e),...t,id:r})});A0.displayName="@mantine/core/ModalBaseTitle";function Dk({children:e}){return u.jsx(u.Fragment,{children:e})}const[g4,v4]=ui({size:"sm"}),y4={},jk=we((e,t)=>{const n=le("InputClearButton",y4,e),{size:r,variant:s,vars:o,classNames:a,styles:c,...f}=n,d=v4(),{resolvedClassNames:p,resolvedStyles:h}=Br({classNames:a,styles:c,props:n});return u.jsx(fa,{variant:s||"transparent",ref:t,size:r||(d==null?void 0:d.size)||"sm",classNames:p,styles:h,__staticSelector:"InputClearButton",...f})});jk.displayName="@mantine/core/InputClearButton";const[w4,kd]=ui({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Vr={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const s_={},S4=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${en(t)} - ${he(2)})`}}),zh=we((e,t)=>{const n=le("InputDescription",s_,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,size:d,__staticSelector:p,__inheritStyles:h=!0,variant:g,...S}=le("InputDescription",s_,n),y=kd(),b=Oe({name:["InputWrapper",p],props:n,classes:Vr,className:s,style:o,classNames:r,styles:a,unstyled:c,rootSelector:"description",vars:f,varsResolver:S4}),C=h&&(y==null?void 0:y.getStyles)||b;return u.jsx(ie,{component:"p",ref:t,variant:g,size:d,...C("description",y!=null&&y.getStyles?{className:s,style:o}:void 0),...S})});zh.classes=Vr;zh.displayName="@mantine/core/InputDescription";const b4={},x4=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${en(t)} - ${he(2)})`}}),Bh=we((e,t)=>{const n=le("InputError",b4,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,size:d,__staticSelector:p,__inheritStyles:h=!0,variant:g,...S}=n,y=Oe({name:["InputWrapper",p],props:n,classes:Vr,className:s,style:o,classNames:r,styles:a,unstyled:c,rootSelector:"error",vars:f,varsResolver:x4}),b=kd(),C=h&&(b==null?void 0:b.getStyles)||y;return u.jsx(ie,{component:"p",ref:t,variant:g,size:d,...C("error",b!=null&&b.getStyles?{className:s,style:o}:void 0),...S})});Bh.classes=Vr;Bh.displayName="@mantine/core/InputError";const o_={labelElement:"label"},C4=(e,{size:t})=>({label:{"--input-label-size":en(t),"--input-asterisk-color":void 0}}),Uh=we((e,t)=>{const n=le("InputLabel",o_,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,labelElement:d,size:p,required:h,htmlFor:g,onMouseDown:S,children:y,__staticSelector:b,variant:C,mod:T,...R}=le("InputLabel",o_,n),m=Oe({name:["InputWrapper",b],props:n,classes:Vr,className:s,style:o,classNames:r,styles:a,unstyled:c,rootSelector:"label",vars:f,varsResolver:C4}),v=kd(),x=(v==null?void 0:v.getStyles)||m;return u.jsxs(ie,{...x("label",v!=null&&v.getStyles?{className:s,style:o}:void 0),component:d,variant:C,size:p,ref:t,htmlFor:d==="label"?g:void 0,mod:[{required:h},T],onMouseDown:_=>{S==null||S(_),!_.defaultPrevented&&_.detail>1&&_.preventDefault()},...R,children:[y,h&&u.jsx("span",{...x("required"),"aria-hidden":!0,children:" *"})]})});Uh.classes=Vr;Uh.displayName="@mantine/core/InputLabel";const i_={},$0=we((e,t)=>{const n=le("InputPlaceholder",i_,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,__staticSelector:d,variant:p,error:h,mod:g,...S}=le("InputPlaceholder",i_,n),y=Oe({name:["InputPlaceholder",d],props:n,classes:Vr,className:s,style:o,classNames:r,styles:a,unstyled:c,rootSelector:"placeholder"});return u.jsx(ie,{...y("placeholder"),mod:[{error:!!h},g],component:"span",variant:p,ref:t,...S})});$0.classes=Vr;$0.displayName="@mantine/core/InputPlaceholder";function _4(e,{hasDescription:t,hasError:n}){const r=e.findIndex(f=>f==="input"),s=e.slice(0,r),o=e.slice(r+1),a=t&&s.includes("description")||n&&s.includes("error");return{offsetBottom:t&&o.includes("description")||n&&o.includes("error"),offsetTop:a}}const R4={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},T4=(e,{size:t})=>({label:{"--input-label-size":en(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${en(t)} - ${he(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${en(t)} - ${he(2)})`}}),F0=we((e,t)=>{const n=le("InputWrapper",R4,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,size:d,variant:p,__staticSelector:h,inputContainer:g,inputWrapperOrder:S,label:y,error:b,description:C,labelProps:T,descriptionProps:R,errorProps:m,labelElement:v,children:x,withAsterisk:_,id:k,required:D,__stylesApiProps:M,mod:P,...L}=n,O=Oe({name:["InputWrapper",h],props:M||n,classes:Vr,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:T4}),V={size:d,variant:p,__staticSelector:h},H=Cs(k),q=typeof _=="boolean"?_:D,N=(m==null?void 0:m.id)||`${H}-error`,B=(R==null?void 0:R.id)||`${H}-description`,$=H,F=!!b&&typeof b!="boolean",z=!!C,U=`${F?N:""} ${z?B:""}`,G=U.trim().length>0?U.trim():void 0,te=(T==null?void 0:T.id)||`${H}-label`,ne=y&&u.jsx(Uh,{labelElement:v,id:te,htmlFor:$,required:q,...V,...T,children:y},"label"),Q=z&&u.jsx(zh,{...R,...V,size:(R==null?void 0:R.size)||V.size,id:(R==null?void 0:R.id)||B,children:C},"description"),se=u.jsx(I.Fragment,{children:g(x)},"input"),X=F&&I.createElement(Bh,{...m,...V,size:(m==null?void 0:m.size)||V.size,key:"error",id:(m==null?void 0:m.id)||N},b),oe=S.map(K=>{switch(K){case"label":return ne;case"input":return se;case"description":return Q;case"error":return X;default:return null}});return u.jsx(w4,{value:{getStyles:O,describedBy:G,inputId:$,labelId:te,..._4(S,{hasDescription:z,hasError:F})},children:u.jsx(ie,{ref:t,variant:p,size:d,mod:[{error:!!b},P],...O("root"),...L,children:oe})})});F0.classes=Vr;F0.displayName="@mantine/core/InputWrapper";const E4={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},k4=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":nt(t.size,"input-height"),"--input-fz":en(t.size),"--input-radius":t.radius===void 0?void 0:jt(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?he(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?he(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?nt(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Dt=_n((e,t)=>{const n=le("Input",E4,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,required:f,__staticSelector:d,__stylesApiProps:p,size:h,wrapperProps:g,error:S,disabled:y,leftSection:b,leftSectionProps:C,leftSectionWidth:T,rightSection:R,rightSectionProps:m,rightSectionWidth:v,rightSectionPointerEvents:x,leftSectionPointerEvents:_,variant:k,vars:D,pointer:M,multiline:P,radius:L,id:O,withAria:V,withErrorStyles:H,mod:q,inputSize:N,__clearSection:B,__clearable:$,__defaultRightSection:F,...z}=n,{styleProps:U,rest:G}=_c(z),te=kd(),ne={offsetBottom:te==null?void 0:te.offsetBottom,offsetTop:te==null?void 0:te.offsetTop},Q=Oe({name:["Input",d],props:p||n,classes:Vr,className:s,style:o,classNames:r,styles:a,unstyled:c,stylesCtx:ne,rootSelector:"wrapper",vars:D,varsResolver:k4}),se=V?{required:f,disabled:y,"aria-invalid":!!S,"aria-describedby":te==null?void 0:te.describedBy,id:(te==null?void 0:te.inputId)||O}:{},X=R||$&&B||F;return u.jsx(g4,{value:{size:h||"sm"},children:u.jsxs(ie,{...Q("wrapper"),...U,...g,mod:[{error:!!S&&H,pointer:M,disabled:y,multiline:P,"data-with-right-section":!!X,"data-with-left-section":!!b},q],variant:k,size:h,children:[b&&u.jsx("div",{...C,"data-position":"left",...Q("section",{className:C==null?void 0:C.className,style:C==null?void 0:C.style}),children:b}),u.jsx(ie,{component:"input",...G,...se,ref:t,required:f,mod:{disabled:y,error:!!S&&H},variant:k,__size:N,...Q("input")}),X&&u.jsx("div",{...m,"data-position":"right",...Q("section",{className:m==null?void 0:m.className,style:m==null?void 0:m.style}),children:X})]})})});Dt.classes=Vr;Dt.Wrapper=F0;Dt.Label=Uh;Dt.Error=Bh;Dt.Description=zh;Dt.Placeholder=$0;Dt.ClearButton=jk;Dt.displayName="@mantine/core/Input";function z0(e,t,n){const r=le(e,t,n),{label:s,description:o,error:a,required:c,classNames:f,styles:d,className:p,unstyled:h,__staticSelector:g,__stylesApiProps:S,errorProps:y,labelProps:b,descriptionProps:C,wrapperProps:T,id:R,size:m,style:v,inputContainer:x,inputWrapperOrder:_,withAsterisk:k,variant:D,vars:M,mod:P,...L}=r,{styleProps:O,rest:V}=_c(L),H={label:s,description:o,error:a,required:c,classNames:f,className:p,__staticSelector:g,__stylesApiProps:S||r,errorProps:y,labelProps:b,descriptionProps:C,unstyled:h,styles:d,size:m,style:v,inputContainer:x,inputWrapperOrder:_,withAsterisk:k,variant:D,id:R,mod:P,...T};return{...V,classNames:f,styles:d,unstyled:h,wrapperProps:{...H,...O},inputProps:{required:c,classNames:f,styles:d,unstyled:h,size:m,__staticSelector:g,__stylesApiProps:S||r,error:a,variant:D,id:R}}}const I4={__staticSelector:"InputBase",withAria:!0},dr=_n((e,t)=>{const{inputProps:n,wrapperProps:r,...s}=z0("InputBase",I4,e);return u.jsx(Dt.Wrapper,{...r,children:u.jsx(Dt,{...n,...s,ref:t})})});dr.classes={...Dt.classes,...Dt.Wrapper.classes};dr.displayName="@mantine/core/InputBase";const D4={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Pk={root:"m_8bffd616"};const j4={},Cn=_n((e,t)=>{const n=le("Flex",j4,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,gap:d,rowGap:p,columnGap:h,align:g,justify:S,wrap:y,direction:b,...C}=n,T=Oe({name:"Flex",classes:Pk,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f}),R=jn(),m=Dh(),v=PE({styleProps:{gap:d,rowGap:p,columnGap:h,align:g,justify:S,wrap:y,direction:b},theme:R,data:D4});return u.jsxs(u.Fragment,{children:[v.hasResponsiveStyles&&u.jsx(Cc,{selector:`.${m}`,styles:v.styles,media:v.media}),u.jsx(ie,{ref:t,...T("root",{className:m,style:li(v.inlineStyles)}),...C})]})});Cn.classes=Pk;Cn.displayName="@mantine/core/Flex";function vc({style:e,size:t=16,...n}){return u.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:he(t),height:he(t),display:"block"},...n,children:u.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}vc.displayName="@mantine/core/AccordionChevron";var Mk={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const P4={},M4=(e,{radius:t,color:n,variant:r,autoContrast:s})=>{const o=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:s});return{root:{"--alert-radius":t===void 0?void 0:jt(t),"--alert-bg":n||r?o.background:void 0,"--alert-color":o.color,"--alert-bd":n||r?o.border:void 0}}},ch=we((e,t)=>{const n=le("Alert",P4,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,radius:d,color:p,title:h,children:g,id:S,icon:y,withCloseButton:b,onClose:C,closeButtonLabel:T,variant:R,autoContrast:m,...v}=n,x=Oe({name:"Alert",classes:Mk,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:M4}),_=Cs(S),k=h&&`${_}-title`||void 0,D=`${_}-body`;return u.jsx(ie,{id:_,...x("root",{variant:R}),variant:R,ref:t,...v,role:"alert","aria-describedby":D,"aria-labelledby":k,children:u.jsxs("div",{...x("wrapper"),children:[y&&u.jsx("div",{...x("icon"),children:y}),u.jsxs("div",{...x("body"),children:[h&&u.jsx("div",{...x("title"),"data-with-close-button":b||void 0,children:u.jsx("span",{id:k,...x("label"),children:h})}),g&&u.jsx("div",{id:D,...x("message"),"data-variant":R,children:g})]}),b&&u.jsx(fa,{...x("closeButton"),onClick:C,variant:"transparent",size:16,iconSize:16,"aria-label":T,unstyled:c})]})})});ch.classes=Mk;ch.displayName="@mantine/core/Alert";var Nk={root:"m_b6d8b162"};function N4(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const L4={inherit:!1},O4=(e,{variant:t,lineClamp:n,gradient:r,size:s,color:o})=>({root:{"--text-fz":en(s),"--text-lh":mL(s),"--text-gradient":t==="gradient"?nw(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":o?Wt(o,e):void 0}}),me=_n((e,t)=>{const n=le("Text",L4,e),{lineClamp:r,truncate:s,inline:o,inherit:a,gradient:c,span:f,__staticSelector:d,vars:p,className:h,style:g,classNames:S,styles:y,unstyled:b,variant:C,mod:T,size:R,...m}=n,v=Oe({name:["Text",d],props:n,classes:Nk,className:h,style:g,classNames:S,styles:y,unstyled:b,vars:p,varsResolver:O4});return u.jsx(ie,{...v("root",{focusable:!0}),ref:t,component:f?"span":"p",variant:C,mod:[{"data-truncate":N4(s),"data-line-clamp":typeof r=="number","data-inline":o,"data-inherit":a},T],size:R,...m})});me.classes=Nk;me.displayName="@mantine/core/Text";function Lk(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Lk(t))}:e}function A4(e){return e?e.map(t=>Lk(t)):[]}function Ok(e){return e.reduce((t,n)=>"group"in n?{...t,...Ok(n.items)}:(t[n.value]=n,t),{})}var ar={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const $4={error:null},F4=(e,{size:t,color:n})=>({chevron:{"--combobox-chevron-size":nt(t,"combobox-chevron-size"),"--combobox-chevron-color":n?Wt(n,e):void 0}}),B0=we((e,t)=>{const n=le("ComboboxChevron",$4,e),{size:r,error:s,style:o,className:a,classNames:c,styles:f,unstyled:d,vars:p,mod:h,...g}=n,S=Oe({name:"ComboboxChevron",classes:ar,props:n,style:o,className:a,classNames:c,styles:f,unstyled:d,vars:p,varsResolver:F4,rootSelector:"chevron"});return u.jsx(ie,{component:"svg",...g,...S("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:s},h],ref:t,children:u.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});B0.classes=ar;B0.displayName="@mantine/core/ComboboxChevron";const[z4,Hr]=cr("Combobox component was not found in tree"),Ak=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...s},o)=>u.jsx(Dt.ClearButton,{ref:o,tabIndex:-1,"aria-hidden":!0,...s,onMouseDown:a=>{a.preventDefault(),t==null||t(a)},onClick:a=>{r(),n==null||n(a)}}));Ak.displayName="@mantine/core/ComboboxClearButton";const B4={},U0=we((e,t)=>{const{classNames:n,styles:r,className:s,style:o,hidden:a,...c}=le("ComboboxDropdown",B4,e),f=Hr();return u.jsx(an.Dropdown,{...c,ref:t,role:"presentation","data-hidden":a||void 0,...f.getStyles("dropdown",{className:s,style:o,classNames:n,styles:r})})});U0.classes=ar;U0.displayName="@mantine/core/ComboboxDropdown";const U4={refProp:"ref"},$k=we((e,t)=>{const{children:n,refProp:r}=le("ComboboxDropdownTarget",U4,e);if(Hr(),!di(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return u.jsx(an.Target,{ref:t,refProp:r,children:n})});$k.displayName="@mantine/core/ComboboxDropdownTarget";const V4={},V0=we((e,t)=>{const{classNames:n,className:r,style:s,styles:o,vars:a,...c}=le("ComboboxEmpty",V4,e),f=Hr();return u.jsx(ie,{ref:t,...f.getStyles("empty",{className:r,classNames:n,styles:o,style:s}),...c})});V0.classes=ar;V0.displayName="@mantine/core/ComboboxEmpty";function H0({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:s,autoComplete:o}){const a=Hr(),[c,f]=I.useState(null),d=h=>{if(e==null||e(h),!a.readOnly&&t){if(h.nativeEvent.isComposing)return;if(h.nativeEvent.code==="ArrowDown"&&(h.preventDefault(),a.store.dropdownOpened?f(a.store.selectNextOption()):(a.store.openDropdown("keyboard"),f(a.store.selectActiveOption()),a.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),h.nativeEvent.code==="ArrowUp"&&(h.preventDefault(),a.store.dropdownOpened?f(a.store.selectPreviousOption()):(a.store.openDropdown("keyboard"),f(a.store.selectActiveOption()),a.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),h.nativeEvent.code==="Enter"||h.nativeEvent.code==="NumpadEnter"){if(h.nativeEvent.keyCode===229)return;const g=a.store.getSelectedOptionIndex();a.store.dropdownOpened&&g!==-1?(h.preventDefault(),a.store.clickSelectedOption()):s==="button"&&(h.preventDefault(),a.store.openDropdown("keyboard"))}h.key==="Escape"&&a.store.closeDropdown("keyboard"),h.nativeEvent.code==="Space"&&s==="button"&&(h.preventDefault(),a.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(a.store.listId&&a.store.dropdownOpened)||void 0,"aria-controls":a.store.dropdownOpened?a.store.listId:void 0,"aria-activedescendant":a.store.dropdownOpened&&c||void 0,autoComplete:o,"data-expanded":a.store.dropdownOpened||void 0,"data-mantine-stop-propagation":a.store.dropdownOpened||void 0}:{},onKeyDown:d}}const H4={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Fk=we((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:s,withAriaAttributes:o,withExpandedAttribute:a,targetType:c,autoComplete:f,...d}=le("ComboboxEventsTarget",H4,e);if(!di(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const p=Hr(),h=H0({targetType:c,withAriaAttributes:o,withKeyboardNavigation:s,withExpandedAttribute:a,onKeyDown:n.props.onKeyDown,autoComplete:f});return I.cloneElement(n,{...h,...d,[r]:dn(t,p.store.targetRef,kh(n))})});Fk.displayName="@mantine/core/ComboboxEventsTarget";const W4={},W0=we((e,t)=>{const{classNames:n,className:r,style:s,styles:o,vars:a,...c}=le("ComboboxFooter",W4,e),f=Hr();return u.jsx(ie,{ref:t,...f.getStyles("footer",{className:r,classNames:n,style:s,styles:o}),...c,onMouseDown:d=>{d.preventDefault()}})});W0.classes=ar;W0.displayName="@mantine/core/ComboboxFooter";const q4={},q0=we((e,t)=>{const{classNames:n,className:r,style:s,styles:o,vars:a,children:c,label:f,...d}=le("ComboboxGroup",q4,e),p=Hr();return u.jsxs(ie,{ref:t,...p.getStyles("group",{className:r,classNames:n,style:s,styles:o}),...d,children:[f&&u.jsx("div",{...p.getStyles("groupLabel",{classNames:n,styles:o}),children:f}),c]})});q0.classes=ar;q0.displayName="@mantine/core/ComboboxGroup";const G4={},G0=we((e,t)=>{const{classNames:n,className:r,style:s,styles:o,vars:a,...c}=le("ComboboxHeader",G4,e),f=Hr();return u.jsx(ie,{ref:t,...f.getStyles("header",{className:r,classNames:n,style:s,styles:o}),...c,onMouseDown:d=>{d.preventDefault()}})});G0.classes=ar;G0.displayName="@mantine/core/ComboboxHeader";function zk({value:e,valuesDivider:t=",",...n}){return u.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}zk.displayName="@mantine/core/ComboboxHiddenInput";const K4={},K0=we((e,t)=>{const n=le("ComboboxOption",K4,e),{classNames:r,className:s,style:o,styles:a,vars:c,onClick:f,id:d,active:p,onMouseDown:h,onMouseOver:g,disabled:S,selected:y,mod:b,...C}=n,T=Hr(),R=I.useId(),m=d||R;return u.jsx(ie,{...T.getStyles("option",{className:s,classNames:r,styles:a,style:o}),...C,ref:t,id:m,mod:["combobox-option",{"combobox-active":p,"combobox-disabled":S,"combobox-selected":y},b],role:"option",onClick:v=>{var x;S?v.preventDefault():((x=T.onOptionSubmit)==null||x.call(T,n.value,n),f==null||f(v))},onMouseDown:v=>{v.preventDefault(),h==null||h(v)},onMouseOver:v=>{T.resetSelectionOnOptionHover&&T.store.resetSelectedOption(),g==null||g(v)}})});K0.classes=ar;K0.displayName="@mantine/core/ComboboxOption";const Y4={},Y0=we((e,t)=>{const n=le("ComboboxOptions",Y4,e),{classNames:r,className:s,style:o,styles:a,id:c,onMouseDown:f,labelledBy:d,...p}=n,h=Hr(),g=Cs(c);return I.useEffect(()=>{h.store.setListId(g)},[g]),u.jsx(ie,{ref:t,...h.getStyles("options",{className:s,style:o,classNames:r,styles:a}),...p,id:g,role:"listbox","aria-labelledby":d,onMouseDown:S=>{S.preventDefault(),f==null||f(S)}})});Y0.classes=ar;Y0.displayName="@mantine/core/ComboboxOptions";const X4={withAriaAttributes:!0,withKeyboardNavigation:!0},X0=we((e,t)=>{const n=le("ComboboxSearch",X4,e),{classNames:r,styles:s,unstyled:o,vars:a,withAriaAttributes:c,onKeyDown:f,withKeyboardNavigation:d,size:p,...h}=n,g=Hr(),S=g.getStyles("search"),y=H0({targetType:"input",withAriaAttributes:c,withKeyboardNavigation:d,withExpandedAttribute:!1,onKeyDown:f,autoComplete:"off"});return u.jsx(Dt,{ref:dn(t,g.store.searchRef),classNames:[{input:S.className},r],styles:[{input:S.style},s],size:p||g.size,...y,...h,__staticSelector:"Combobox"})});X0.classes=ar;X0.displayName="@mantine/core/ComboboxSearch";const Q4={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Bk=we((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:s,withAriaAttributes:o,withExpandedAttribute:a,targetType:c,autoComplete:f,...d}=le("ComboboxTarget",Q4,e);if(!di(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const p=Hr(),h=H0({targetType:c,withAriaAttributes:o,withKeyboardNavigation:s,withExpandedAttribute:a,onKeyDown:n.props.onKeyDown,autoComplete:f}),g=I.cloneElement(n,{...h,...d});return u.jsx(an.Target,{ref:dn(t,p.store.targetRef),children:g})});Bk.displayName="@mantine/core/ComboboxTarget";function J4(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Z4(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function e5(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function Uk({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:s,loop:o=!0,scrollBehavior:a="instant"}={}){const[c,f]=gn({value:t,defaultValue:e,finalValue:!1,onChange:n}),d=I.useRef(null),p=I.useRef(-1),h=I.useRef(null),g=I.useRef(null),S=I.useRef(-1),y=I.useRef(-1),b=I.useRef(-1),C=I.useCallback((N="unknown")=>{c||(f(!0),s==null||s(N))},[f,s,c]),T=I.useCallback((N="unknown")=>{c&&(f(!1),r==null||r(N))},[f,r,c]),R=I.useCallback((N="unknown")=>{c?T(N):C(N)},[T,C,c]),m=I.useCallback(()=>{const N=document.querySelector(`#${d.current} [data-combobox-selected]`);N==null||N.removeAttribute("data-combobox-selected"),N==null||N.removeAttribute("aria-selected")},[]),v=I.useCallback(N=>{const B=document.getElementById(d.current),$=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!$)return null;const F=N>=$.length?0:N<0?$.length-1:N;return p.current=F,$!=null&&$[F]&&!$[F].hasAttribute("data-combobox-disabled")?(m(),$[F].setAttribute("data-combobox-selected","true"),$[F].setAttribute("aria-selected","true"),$[F].scrollIntoView({block:"nearest",behavior:a}),$[F].id):null},[a,m]),x=I.useCallback(()=>{const N=document.querySelector(`#${d.current} [data-combobox-active]`);if(N){const B=document.querySelectorAll(`#${d.current} [data-combobox-option]`),$=Array.from(B).findIndex(F=>F===N);return v($)}return v(0)},[v]),_=I.useCallback(()=>v(Z4(p.current,document.querySelectorAll(`#${d.current} [data-combobox-option]`),o)),[v,o]),k=I.useCallback(()=>v(J4(p.current,document.querySelectorAll(`#${d.current} [data-combobox-option]`),o)),[v,o]),D=I.useCallback(()=>v(e5(document.querySelectorAll(`#${d.current} [data-combobox-option]`))),[v]),M=I.useCallback((N="selected",B)=>{b.current=window.setTimeout(()=>{var z;const $=document.querySelectorAll(`#${d.current} [data-combobox-option]`),F=Array.from($).findIndex(U=>U.hasAttribute(`data-combobox-${N}`));p.current=F,B!=null&&B.scrollIntoView&&((z=$[F])==null||z.scrollIntoView({block:"nearest",behavior:a}))},0)},[]),P=I.useCallback(()=>{p.current=-1,m()},[m]),L=I.useCallback(()=>{const N=document.querySelectorAll(`#${d.current} [data-combobox-option]`),B=N==null?void 0:N[p.current];B==null||B.click()},[]),O=I.useCallback(N=>{d.current=N},[]),V=I.useCallback(()=>{S.current=window.setTimeout(()=>h.current.focus(),0)},[]),H=I.useCallback(()=>{y.current=window.setTimeout(()=>g.current.focus(),0)},[]),q=I.useCallback(()=>p.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(S.current),window.clearTimeout(y.current),window.clearTimeout(b.current)},[]),{dropdownOpened:c,openDropdown:C,closeDropdown:T,toggleDropdown:R,selectedOptionIndex:p.current,getSelectedOptionIndex:q,selectOption:v,selectFirstOption:D,selectActiveOption:x,selectNextOption:_,selectPreviousOption:k,resetSelectedOption:P,updateSelectedOptionIndex:M,listId:d.current,setListId:O,clickSelectedOption:L,searchRef:h,focusSearchInput:V,targetRef:g,focusTarget:H}}const t5={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},n5=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":en(t),"--combobox-option-padding":nt(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:he(n),"--combobox-option-fz":en(t),"--combobox-option-padding":nt(t,"combobox-option-padding")}});function It(e){const t=le("Combobox",t5,e),{classNames:n,styles:r,unstyled:s,children:o,store:a,vars:c,onOptionSubmit:f,onClose:d,size:p,dropdownPadding:h,resetSelectionOnOptionHover:g,__staticSelector:S,readOnly:y,...b}=t,C=Uk(),T=a||C,R=Oe({name:S||"Combobox",classes:ar,props:t,classNames:n,styles:r,unstyled:s,vars:c,varsResolver:n5}),m=()=>{d==null||d(),T.closeDropdown()};return u.jsx(z4,{value:{getStyles:R,store:T,onOptionSubmit:f,size:p,resetSelectionOnOptionHover:g,readOnly:y},children:u.jsx(an,{opened:T.dropdownOpened,...b,onChange:v=>!v&&m(),withRoles:!1,unstyled:s,children:o})})}const r5=e=>e;It.extend=r5;It.classes=ar;It.displayName="@mantine/core/Combobox";It.Target=Bk;It.Dropdown=U0;It.Options=Y0;It.Option=K0;It.Search=X0;It.Empty=V0;It.Chevron=B0;It.Footer=W0;It.Header=G0;It.EventsTarget=Fk;It.DropdownTarget=$k;It.Group=q0;It.ClearButton=Ak;It.HiddenInput=zk;var Vk={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Hk=Vk,Q0=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:s,unstyled:o,children:a,label:c,description:f,id:d,disabled:p,error:h,size:g,labelPosition:S="left",bodyElement:y="div",labelElement:b="label",variant:C,style:T,vars:R,mod:m,...v},x)=>{const _=Oe({name:e,props:t,className:n,style:T,classes:Vk,classNames:r,styles:s,unstyled:o});return u.jsx(ie,{..._("root"),ref:x,__vars:{"--label-fz":en(g),"--label-lh":nt(g,"label-lh")},mod:[{"label-position":S},m],variant:C,size:g,...v,children:u.jsxs(ie,{component:y,htmlFor:y==="label"?d:void 0,..._("body"),children:[a,u.jsxs("div",{..._("labelWrapper"),"data-disabled":p||void 0,children:[c&&u.jsx(ie,{component:b,htmlFor:b==="label"?d:void 0,..._("label"),"data-disabled":p||void 0,children:c}),f&&u.jsx(Dt.Description,{size:g,__inheritStyles:!1,..._("description"),children:f}),h&&typeof h!="boolean"&&u.jsx(Dt.Error,{size:g,__inheritStyles:!1,..._("error"),children:h})]})]})})});Q0.displayName="@mantine/core/InlineInput";const Wk=I.createContext(null),s5=Wk.Provider,qk=()=>I.useContext(Wk),[o5,i5]=ui();var Gk={card:"m_26775b0a"};const a5={withBorder:!0},c5=(e,{radius:t})=>({card:{"--card-radius":jt(t)}}),J0=we((e,t)=>{const n=le("CheckboxCard",a5,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,checked:d,mod:p,withBorder:h,value:g,onClick:S,defaultChecked:y,onChange:b,...C}=n,T=Oe({name:"CheckboxCard",classes:Gk,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:c5,rootSelector:"card"}),R=qk(),m=typeof d=="boolean"?d:R?R.value.includes(g||""):void 0,[v,x]=gn({value:m,defaultValue:y,finalValue:!1,onChange:b});return u.jsx(o5,{value:{checked:v},children:u.jsx(on,{ref:t,mod:[{"with-border":h,checked:v},p],...T("card"),...C,role:"checkbox","aria-checked":v,onClick:_=>{S==null||S(_),R==null||R.onChange(g||""),x(!v)}})})});J0.displayName="@mantine/core/CheckboxCard";J0.classes=Gk;function Kk({children:e,role:t}){const n=kd();return n?u.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):u.jsx(u.Fragment,{children:e})}const l5={},Z0=we((e,t)=>{const{value:n,defaultValue:r,onChange:s,size:o,wrapperProps:a,children:c,readOnly:f,...d}=le("CheckboxGroup",l5,e),[p,h]=gn({value:n,defaultValue:r,finalValue:[],onChange:s}),g=S=>{const y=typeof S=="string"?S:S.currentTarget.value;!f&&h(p.includes(y)?p.filter(b=>b!==y):[...p,y])};return u.jsx(s5,{value:{value:p,onChange:g,size:o},children:u.jsx(Dt.Wrapper,{size:o,ref:t,...a,...d,labelElement:"div",__staticSelector:"CheckboxGroup",children:u.jsx(Kk,{role:"group",children:c})})})});Z0.classes=Dt.Wrapper.classes;Z0.displayName="@mantine/core/CheckboxGroup";function eS({size:e,style:t,...n}){const r=e!==void 0?{width:he(e),height:he(e),...t}:t;return u.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:u.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Yk({indeterminate:e,...t}){return e?u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:u.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):u.jsx(eS,{...t})}var Xk={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const d5={icon:Yk},u5=(e,{radius:t,color:n,size:r,iconColor:s,variant:o,autoContrast:a})=>{const c=pi({color:n||e.primaryColor,theme:e}),f=c.isThemeColor&&c.shade===void 0?`var(--mantine-color-${c.color}-outline)`:c.color;return{indicator:{"--checkbox-size":nt(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:jt(t),"--checkbox-color":o==="outline"?f:Wt(n,e),"--checkbox-icon-color":s?Wt(s,e):Rd(a,e)?xc({color:n,theme:e,autoContrast:a}):void 0}}},tS=we((e,t)=>{const n=le("CheckboxIndicator",d5,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,icon:d,indeterminate:p,radius:h,color:g,iconColor:S,autoContrast:y,checked:b,mod:C,variant:T,disabled:R,...m}=n,v=d,x=Oe({name:"CheckboxIndicator",classes:Xk,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:u5,rootSelector:"indicator"}),_=i5(),k=typeof b=="boolean"||typeof p=="boolean"?b||p:(_==null?void 0:_.checked)||!1;return u.jsx(ie,{ref:t,...x("indicator",{variant:T}),variant:T,mod:[{checked:k,disabled:R},C],...m,children:u.jsx(v,{indeterminate:p,...x("icon")})})});tS.displayName="@mantine/core/CheckboxIndicator";tS.classes=Xk;var Qk={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const f5={labelPosition:"right",icon:Yk},p5=(e,{radius:t,color:n,size:r,iconColor:s,variant:o,autoContrast:a})=>{const c=pi({color:n||e.primaryColor,theme:e}),f=c.isThemeColor&&c.shade===void 0?`var(--mantine-color-${c.color}-outline)`:c.color;return{root:{"--checkbox-size":nt(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:jt(t),"--checkbox-color":o==="outline"?f:Wt(n,e),"--checkbox-icon-color":s?Wt(s,e):Rd(a,e)?xc({color:n,theme:e,autoContrast:a}):void 0}}},pa=we((e,t)=>{const n=le("Checkbox",f5,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,color:d,label:p,id:h,size:g,radius:S,wrapperProps:y,checked:b,labelPosition:C,description:T,error:R,disabled:m,variant:v,indeterminate:x,icon:_,rootRef:k,iconColor:D,onChange:M,autoContrast:P,mod:L,...O}=n,V=qk(),H=g||(V==null?void 0:V.size),q=_,N=Oe({name:"Checkbox",props:n,classes:Qk,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:p5}),{styleProps:B,rest:$}=_c(O),F=Cs(h),z=V?{checked:V.value.includes($.value),onChange:U=>{V.onChange(U),M==null||M(U)}}:{};return u.jsx(Q0,{...N("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:F,size:H,labelPosition:C,label:p,description:T,error:R,disabled:m,classNames:r,styles:a,unstyled:c,"data-checked":z.checked||b||void 0,variant:v,ref:k,mod:L,...B,...y,children:u.jsxs(ie,{...N("inner"),mod:{"data-label-position":C},children:[u.jsx(ie,{component:"input",id:F,ref:t,checked:b,disabled:m,mod:{error:!!R,indeterminate:x},...N("input",{focusable:!0,variant:v}),onChange:M,...$,...z,type:"checkbox"}),u.jsx(q,{indeterminate:x,...N("icon")})]})})});pa.classes={...Qk,...Hk};pa.displayName="@mantine/core/Checkbox";pa.Group=Z0;pa.Indicator=tS;pa.Card=J0;function gd(e){return"group"in e}function Jk({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),s=[];for(let o=0;o<e.length;o+=1){const a=e[o];if(s.length===n)return s;gd(a)&&s.push({group:a.group,items:Jk({options:a.items,search:t,limit:n-s.length})}),gd(a)||a.label.toLowerCase().includes(r)&&s.push(a)}return s}function h5(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Zk(e,t=new Set){if(Array.isArray(e))for(const n of e)if(gd(n))Zk(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function m5(e,t){return Array.isArray(e)?e.includes(t):e===t}function eI({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:s,renderOption:o}){if(!gd(e)){const c=m5(n,e.value),f=t&&c&&u.jsx(eS,{className:ar.optionsDropdownCheckIcon}),d=u.jsxs(u.Fragment,{children:[r==="left"&&f,u.jsx("span",{children:e.label}),r==="right"&&f]});return u.jsx(It.Option,{value:e.value,disabled:e.disabled,className:ln({[ar.optionsDropdownOption]:!s}),"data-reverse":r==="right"||void 0,"data-checked":c||void 0,"aria-selected":c,active:c,children:typeof o=="function"?o({option:e,checked:c}):d})}const a=e.items.map(c=>u.jsx(eI,{data:c,value:n,unstyled:s,withCheckIcon:t,checkIconPosition:r,renderOption:o},c.value));return u.jsx(It.Group,{label:e.group,children:a})}function g5({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:s,limit:o,maxDropdownHeight:a,withScrollArea:c=!0,filterOptions:f=!0,withCheckIcon:d=!1,value:p,checkIconPosition:h,nothingFoundMessage:g,unstyled:S,labelId:y,renderOption:b,scrollAreaProps:C,"aria-label":T}){Zk(e);const m=typeof s=="string"?(r||Jk)({options:e,search:f?s:"",limit:o??1/0}):e,v=h5(m),x=m.map(_=>u.jsx(eI,{data:_,withCheckIcon:d,value:p,checkIconPosition:h,unstyled:S,renderOption:b},gd(_)?_.group:_.value));return u.jsx(It.Dropdown,{hidden:t||n&&v,"data-composed":!0,children:u.jsxs(It.Options,{labelledBy:y,"aria-label":T,children:[c?u.jsx(Pt.Autosize,{mah:a??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...C,children:x}):x,v&&g&&u.jsx(It.Empty,{children:g})]})})}const tI=I.createContext(null),v5=tI.Provider;function y5(){return{withinGroup:!!I.useContext(tI)}}var Vh={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const w5={},S5=(e,{spacing:t})=>({group:{"--ag-spacing":Nt(t)}}),nS=we((e,t)=>{const n=le("AvatarGroup",w5,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,spacing:d,...p}=n,h=Oe({name:"AvatarGroup",classes:Vh,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:S5,rootSelector:"group"});return u.jsx(v5,{value:!0,children:u.jsx(ie,{ref:t,...h("group"),...p})})});nS.classes=Vh;nS.displayName="@mantine/core/AvatarGroup";function b5(e){return u.jsx("svg",{...e,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function x5(e){let t=0;for(let n=0;n<e.length;n+=1){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return t}const C5=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function _5(e,t=C5){const n=x5(e),r=Math.abs(n)%t.length;return t[r]}function R5(e,t=2){const n=e.split(" ");return n.length===1?e.slice(0,t).toUpperCase():n.map(r=>r[0]).slice(0,t).join("").toUpperCase()}const T5={},E5=(e,{size:t,radius:n,variant:r,gradient:s,color:o,autoContrast:a,name:c,allowedInitialsColors:f})=>{const d=o==="initials"&&typeof c=="string"?_5(c,f):o,p=e.variantColorResolver({color:d||"gray",theme:e,gradient:s,variant:r||"light",autoContrast:a});return{root:{"--avatar-size":nt(t,"avatar-size"),"--avatar-radius":n===void 0?void 0:jt(n),"--avatar-bg":d||r?p.background:void 0,"--avatar-color":d||r?p.color:void 0,"--avatar-bd":d||r?p.border:void 0}}},$t=_n((e,t)=>{const n=le("Avatar",T5,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,src:d,alt:p,radius:h,color:g,gradient:S,imageProps:y,children:b,autoContrast:C,mod:T,name:R,allowedInitialsColors:m,...v}=n,x=y5(),[_,k]=I.useState(!d),D=Oe({name:"Avatar",props:n,classes:Vh,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:E5});return I.useEffect(()=>k(!d),[d]),u.jsx(ie,{...D("root"),mod:[{"within-group":x.withinGroup},T],ref:t,...v,children:_?u.jsx("span",{...D("placeholder"),title:p,children:b||typeof R=="string"&&R5(R)||u.jsx(b5,{})}):u.jsx("img",{...y,...D("image"),src:d,alt:p,onError:M=>{var P;k(!0),(P=y==null?void 0:y.onError)==null||P.call(y,M)}})})});$t.classes=Vh;$t.displayName="@mantine/core/Avatar";$t.Group=nS;var nI={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const k5={},I5=(e,{radius:t,color:n,gradient:r,variant:s,size:o,autoContrast:a})=>{const c=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:s||"filled",autoContrast:a});return{root:{"--badge-height":nt(o,"badge-height"),"--badge-padding-x":nt(o,"badge-padding-x"),"--badge-fz":nt(o,"badge-fz"),"--badge-radius":t===void 0?void 0:jt(t),"--badge-bg":n||s?c.background:void 0,"--badge-color":n||s?c.color:void 0,"--badge-bd":n||s?c.border:void 0,"--badge-dot-color":s==="dot"?Wt(n,e):void 0}}},Et=_n((e,t)=>{const n=le("Badge",k5,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,radius:d,color:p,gradient:h,leftSection:g,rightSection:S,children:y,variant:b,fullWidth:C,autoContrast:T,circle:R,mod:m,...v}=n,x=Oe({name:"Badge",props:n,classes:nI,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:I5});return u.jsxs(ie,{variant:b,mod:[{block:C,circle:R,"with-right-section":!!S,"with-left-section":!!g},m],...x("root",{variant:b}),ref:t,...v,children:[g&&u.jsx("span",{...x("section"),"data-position":"left",children:g}),u.jsx("span",{...x("label"),children:y}),S&&u.jsx("span",{...x("section"),"data-position":"right",children:S})]})});Et.classes=nI;Et.displayName="@mantine/core/Badge";var kc={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const a_={orientation:"horizontal"},D5=(e,{borderWidth:t})=>({group:{"--button-border-width":he(t)}}),rS=we((e,t)=>{const n=le("ButtonGroup",a_,e),{className:r,style:s,classNames:o,styles:a,unstyled:c,orientation:f,vars:d,borderWidth:p,variant:h,mod:g,...S}=le("ButtonGroup",a_,e),y=Oe({name:"ButtonGroup",props:n,classes:kc,className:r,style:s,classNames:o,styles:a,unstyled:c,vars:d,varsResolver:D5,rootSelector:"group"});return u.jsx(ie,{...y("group"),ref:t,variant:h,mod:[{"data-orientation":f},g],role:"group",...S})});rS.classes=kc;rS.displayName="@mantine/core/ButtonGroup";const c_={},j5=(e,{radius:t,color:n,gradient:r,variant:s,autoContrast:o,size:a})=>{const c=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:s||"filled",autoContrast:o});return{groupSection:{"--section-height":nt(a,"section-height"),"--section-padding-x":nt(a,"section-padding-x"),"--section-fz":a!=null&&a.includes("compact")?en(a.replace("compact-","")):en(a),"--section-radius":t===void 0?void 0:jt(t),"--section-bg":n||s?c.background:void 0,"--section-color":c.color,"--section-bd":n||s?c.border:void 0}}},sS=we((e,t)=>{const n=le("ButtonGroupSection",c_,e),{className:r,style:s,classNames:o,styles:a,unstyled:c,vars:f,variant:d,gradient:p,radius:h,autoContrast:g,...S}=le("ButtonGroupSection",c_,e),y=Oe({name:"ButtonGroupSection",props:n,classes:kc,className:r,style:s,classNames:o,styles:a,unstyled:c,vars:f,varsResolver:j5,rootSelector:"groupSection"});return u.jsx(ie,{...y("groupSection"),ref:t,variant:d,...S})});sS.classes=kc;sS.displayName="@mantine/core/ButtonGroupSection";const P5={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${he(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},M5={},N5=(e,{radius:t,color:n,gradient:r,variant:s,size:o,justify:a,autoContrast:c})=>{const f=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:s||"filled",autoContrast:c});return{root:{"--button-justify":a,"--button-height":nt(o,"button-height"),"--button-padding-x":nt(o,"button-padding-x"),"--button-fz":o!=null&&o.includes("compact")?en(o.replace("compact-","")):en(o),"--button-radius":t===void 0?void 0:jt(t),"--button-bg":n||s?f.background:void 0,"--button-hover":n||s?f.hover:void 0,"--button-color":f.color,"--button-bd":n||s?f.border:void 0,"--button-hover-color":n||s?f.hoverColor:void 0}}},Ne=_n((e,t)=>{const n=le("Button",M5,e),{style:r,vars:s,className:o,color:a,disabled:c,children:f,leftSection:d,rightSection:p,fullWidth:h,variant:g,radius:S,loading:y,loaderProps:b,gradient:C,classNames:T,styles:R,unstyled:m,"data-disabled":v,autoContrast:x,mod:_,...k}=n,D=Oe({name:"Button",props:n,classes:kc,className:o,style:r,classNames:T,styles:R,unstyled:m,vars:s,varsResolver:N5}),M=!!d,P=!!p;return u.jsxs(on,{ref:t,...D("root",{active:!c&&!y&&!v}),unstyled:m,variant:g,disabled:c||y,mod:[{disabled:c||v,loading:y,block:h,"with-left-section":M,"with-right-section":P},_],...k,children:[u.jsx(So,{mounted:!!y,transition:P5,duration:150,children:L=>u.jsx(ie,{component:"span",...D("loader",{style:L}),"aria-hidden":!0,children:u.jsx(Rr,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...b})})}),u.jsxs("span",{...D("inner"),children:[d&&u.jsx(ie,{component:"span",...D("section"),mod:{position:"left"},children:d}),u.jsx(ie,{component:"span",mod:{loading:y},...D("label"),children:f}),p&&u.jsx(ie,{component:"span",...D("section"),mod:{position:"right"},children:p})]})]})});Ne.classes=kc;Ne.displayName="@mantine/core/Button";Ne.Group=rS;Ne.GroupSection=sS;const[L5,O5]=cr("Card component was not found in tree");var oS={root:"m_e615b15f",section:"m_599a2148"};const A5={},Hh=_n((e,t)=>{const n=le("CardSection",A5,e),{classNames:r,className:s,style:o,styles:a,vars:c,withBorder:f,inheritPadding:d,mod:p,...h}=n,g=O5();return u.jsx(ie,{ref:t,mod:[{"with-border":f,"inherit-padding":d},p],...g.getStyles("section",{className:s,style:o,styles:a,classNames:r}),...h})});Hh.classes=oS;Hh.displayName="@mantine/core/CardSection";const $5={},F5=(e,{padding:t})=>({root:{"--card-padding":Nt(t)}}),Bn=_n((e,t)=>{const n=le("Card",$5,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,children:d,padding:p,...h}=n,g=Oe({name:"Card",props:n,classes:oS,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:F5}),S=I.Children.toArray(d),y=S.map((b,C)=>typeof b=="object"&&b&&"type"in b&&b.type===Hh?I.cloneElement(b,{"data-first-section":C===0||void 0,"data-last-section":C===S.length-1||void 0}):b);return u.jsx(L5,{value:{getStyles:g},children:u.jsx(Gn,{ref:t,unstyled:c,...g("root"),...h,children:y})})});Bn.classes=oS;Bn.displayName="@mantine/core/Card";Bn.Section=Hh;var rI={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const l_={withShadow:!0},z5=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:jt(t),"--cs-size":he(n)}}),Ic=_n((e,t)=>{const n=le("ColorSwatch",l_,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,color:d,size:p,radius:h,withShadow:g,children:S,variant:y,...b}=le("ColorSwatch",l_,n),C=Oe({name:"ColorSwatch",props:n,classes:rI,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:z5});return u.jsxs(ie,{ref:t,variant:y,size:p,...C("root",{focusable:!0}),...b,children:[u.jsx("span",{...C("alphaOverlay")}),g&&u.jsx("span",{...C("shadowOverlay")}),u.jsx("span",{...C("colorOverlay",{style:{backgroundColor:d}})}),u.jsx("span",{...C("childrenOverlay"),children:S})]})});Ic.classes=rI;Ic.displayName="@mantine/core/ColorSwatch";const[B5,iS]=ui(null),aS=I.forwardRef(({position:e,...t},n)=>u.jsx(ie,{ref:n,__vars:{"--thumb-y-offset":`${e.y*100}%`,"--thumb-x-offset":`${e.x*100}%`},...t}));aS.displayName="@mantine/core/ColorPickerThumb";var cS={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const U5={},lS=we((e,t)=>{var $;const n=le("ColorSlider",U5,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,onChange:d,onChangeEnd:p,maxValue:h,round:g,size:S="md",focusable:y=!0,value:b,overlays:C,thumbColor:T="transparent",onScrubStart:R,onScrubEnd:m,__staticSelector:v="ColorPicker",...x}=n,_=Oe({name:v,classes:cS,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c}),D=(($=iS())==null?void 0:$.getStyles)||_,M=jn(),[P,L]=I.useState({y:0,x:b/h}),O=I.useRef(P),V=F=>g?Math.round(F*h):F*h,{ref:H}=r0(({x:F,y:z})=>{O.current={x:F,y:z},d==null||d(V(F))},{onScrubEnd:()=>{const{x:F}=O.current;p==null||p(V(F)),m==null||m()},onScrubStart:R});zn(()=>{L({y:0,x:b/h})},[b]);const q=(F,z)=>{F.preventDefault();const U=_E(z);d==null||d(V(U.x)),p==null||p(V(U.x))},N=F=>{switch(F.key){case"ArrowRight":{q(F,{x:P.x+.05,y:P.y});break}case"ArrowLeft":{q(F,{x:P.x-.05,y:P.y});break}}},B=C.map((F,z)=>I.createElement("div",{...D("sliderOverlay"),style:F,key:z}));return u.jsxs(ie,{...x,ref:dn(H,t),...D("slider"),role:"slider","aria-valuenow":b,"aria-valuemax":h,"aria-valuemin":0,tabIndex:y?0:-1,onKeyDown:N,"data-focus-ring":M.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${S})`},children:[B,u.jsx(aS,{position:P,...D("thumb",{style:{top:he(1),background:T}})})]})});lS.displayName="@mantine/core/ColorSlider";function Fr(e,t=0,n=10**t){return Math.round(n*e)/n}function V5({h:e,s:t,l:n,a:r}){const s=t*((n<50?n:100-n)/100);return{h:e,s:s>0?2*s/(n+s)*100:0,v:n+s,a:r}}const H5={grad:360/400,turn:360,rad:360/(Math.PI*2)};function W5(e,t="deg"){return Number(e)*(H5[t]||1)}const q5=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function d_(e){const t=q5.exec(e);return t?V5({h:W5(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function pw({r:e,g:t,b:n,a:r}){const s=Math.max(e,t,n),o=s-Math.min(e,t,n),a=o?s===e?(t-n)/o:s===t?2+(n-e)/o:4+(e-t)/o:0;return{h:Fr(60*(a<0?a+6:a),3),s:Fr(s?o/s*100:0,3),v:Fr(s/255*100,3),a:r}}function hw(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?pw({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):pw({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function G5(e){const t=e[0]==="#"?e.slice(1):e,n=a=>Fr(parseInt(a,16)/255,3);if(t.length===4){const a=t.slice(0,3),c=n(t[3]+t[3]);return{...hw(a),a:c}}const r=t.slice(0,6),s=n(t.slice(6,8));return{...hw(r),a:s}}const K5=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function u_(e){const t=K5.exec(e);return t?pw({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const sI={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},Y5={hex:hw,hexa:G5,rgb:u_,rgba:u_,hsl:d_,hsla:d_};function Wl(e){for(const[,t]of Object.entries(sI))if(t.test(e))return!0;return!1}function qi(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(sI))if(r.test(t))return Y5[n](t);return{h:0,s:0,v:0,a:1}}const X5={},oI=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:s,color:o,...a}=le("AlphaSlider",X5,e);return u.jsx(lS,{...a,ref:t,value:n,onChange:c=>r==null?void 0:r(Fr(c,2)),onChangeEnd:c=>s==null?void 0:s(Fr(c,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${he(8)} ${he(8)}`,backgroundPosition:`0 0, 0 ${he(4)}, ${he(4)} ${he(-4)}, ${he(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${o})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${he(1)} inset, rgb(0, 0, 0, .15) 0 0 ${he(4)} inset`}]})});oI.displayName="@mantine/core/AlphaSlider";function iI({h:e,s:t,v:n,a:r}){const s=e/360*6,o=t/100,a=n/100,c=Math.floor(s),f=a*(1-o),d=a*(1-(s-c)*o),p=a*(1-(1-s+c)*o),h=c%6;return{r:Fr([a,d,f,f,p,a][h]*255),g:Fr([p,a,a,d,f,f][h]*255),b:Fr([f,f,p,a,a,d][h]*255),a:Fr(r,2)}}function f_(e,t){const{r:n,g:r,b:s,a:o}=iI(e);return t?`rgba(${n}, ${r}, ${s}, ${Fr(o,2)})`:`rgb(${n}, ${r}, ${s})`}function p_({h:e,s:t,v:n,a:r},s){const o=(200-t)*n/100,a={h:Math.round(e),s:Math.round(o>0&&o<200?t*n/100/(o<=100?o:200-o)*100:0),l:Math.round(o/2)};return s?`hsla(${a.h}, ${a.s}%, ${a.l}%, ${Fr(r,2)})`:`hsl(${a.h}, ${a.s}%, ${a.l}%)`}function Nf(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function aI(e){const{r:t,g:n,b:r}=iI(e);return`#${Nf(t)}${Nf(n)}${Nf(r)}`}function Q5(e){const t=Math.round(e.a*255);return`${aI(e)}${Nf(t)}`}const my={hex:aI,hexa:e=>Q5(e),rgb:e=>f_(e,!1),rgba:e=>f_(e,!0),hsl:e=>p_(e,!1),hsla:e=>p_(e,!0)};function hs(e,t){return t?e in my?my[e](t):my.hex(t):"#000000"}const cI=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:s,color:o,...a}=le("HueSlider",{},e);return u.jsx(lS,{...a,ref:t,value:n,onChange:r,onChangeEnd:s,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${he(1)} inset, rgb(0, 0, 0, .15) 0 0 ${he(4)} inset`}]})});cI.displayName="@mantine/core/HueSlider";function lI({className:e,onChange:t,onChangeEnd:n,value:r,saturationLabel:s,focusable:o=!0,size:a,color:c,onScrubStart:f,onScrubEnd:d,...p}){const{getStyles:h}=iS(),[g,S]=I.useState({x:r.s/100,y:1-r.v/100}),y=I.useRef(g),{ref:b}=r0(({x:R,y:m})=>{y.current={x:R,y:m},t({s:Math.round(R*100),v:Math.round((1-m)*100)})},{onScrubEnd:()=>{const{x:R,y:m}=y.current;n({s:Math.round(R*100),v:Math.round((1-m)*100)}),d==null||d()},onScrubStart:f});I.useEffect(()=>{S({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const C=(R,m)=>{R.preventDefault();const v=_E(m);t({s:Math.round(v.x*100),v:Math.round((1-v.y)*100)}),n({s:Math.round(v.x*100),v:Math.round((1-v.y)*100)})},T=R=>{switch(R.key){case"ArrowUp":{C(R,{y:g.y-.05,x:g.x});break}case"ArrowDown":{C(R,{y:g.y+.05,x:g.x});break}case"ArrowRight":{C(R,{x:g.x+.05,y:g.y});break}case"ArrowLeft":{C(R,{x:g.x-.05,y:g.y});break}}};return u.jsxs(ie,{...h("saturation"),ref:b,...p,role:"slider","aria-label":s,"aria-valuenow":g.x,"aria-valuetext":hs("rgba",r),tabIndex:o?0:-1,onKeyDown:T,children:[u.jsx("div",{...h("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}})}),u.jsx("div",{...h("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),u.jsx("div",{...h("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),u.jsx(aS,{position:g,...h("thumb",{style:{backgroundColor:c}})})]})}lI.displayName="@mantine/core/Saturation";const dI=I.forwardRef(({className:e,datatype:t,setValue:n,onChangeEnd:r,size:s,focusable:o,data:a,swatchesPerRow:c,...f},d)=>{const p=iS(),h=a.map((g,S)=>I.createElement(Ic,{...p.getStyles("swatch"),unstyled:p.unstyled,component:"button",type:"button",color:g,key:S,radius:"sm",onClick:()=>{n(g),r==null||r(g)},"aria-label":g,tabIndex:o?0:-1,"data-swatch":!0}));return u.jsx(ie,{...p.getStyles("swatches"),ref:d,...f,children:h})});dI.displayName="@mantine/core/Swatches";const J5={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},Z5=(e,{size:t,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":nt(t,"cp-preview-size"),"--cp-width":nt(t,"cp-width"),"--cp-body-spacing":Nt(t),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":nt(t,"cp-thumb-size"),"--cp-saturation-height":nt(t,"cp-saturation-height")}}),dS=we((e,t)=>{const n=le("ColorPicker",J5,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,format:d,value:p,defaultValue:h,onChange:g,onChangeEnd:S,withPicker:y,size:b,saturationLabel:C,hueLabel:T,alphaLabel:R,focusable:m,swatches:v,swatchesPerRow:x,fullWidth:_,onColorSwatchClick:k,__staticSelector:D,mod:M,...P}=n,L=Oe({name:D,props:n,classes:cS,className:s,style:o,classNames:r,styles:a,unstyled:c,rootSelector:"wrapper",vars:f,varsResolver:Z5}),O=I.useRef(d),V=I.useRef(""),H=I.useRef(-1),q=I.useRef(!1),N=d==="hexa"||d==="rgba"||d==="hsla",[B,$,F]=gn({value:p,defaultValue:h,finalValue:"#FFFFFF",onChange:g}),[z,U]=I.useState(qi(B)),G=()=>{window.clearTimeout(H.current),q.current=!0},te=()=>{window.clearTimeout(H.current),H.current=window.setTimeout(()=>{q.current=!1},200)},ne=Q=>{U(se=>{const X={...se,...Q};return V.current=hs(O.current,X),X}),$(V.current)};return zn(()=>{Wl(p)&&!q.current&&U(qi(p))},[p]),zn(()=>{O.current=d,$(hs(d,z))},[d]),u.jsx(B5,{value:{getStyles:L,unstyled:c},children:u.jsxs(ie,{ref:t,...L("wrapper"),size:b,mod:[{"full-width":_},M],...P,children:[y&&u.jsxs(u.Fragment,{children:[u.jsx(lI,{value:z,onChange:ne,onChangeEnd:({s:Q,v:se})=>S==null?void 0:S(hs(O.current,{...z,s:Q,v:se})),color:B,size:b,focusable:m,saturationLabel:C,onScrubStart:G,onScrubEnd:te}),u.jsxs("div",{...L("body"),children:[u.jsxs("div",{...L("sliders"),children:[u.jsx(cI,{value:z.h,onChange:Q=>ne({h:Q}),onChangeEnd:Q=>S==null?void 0:S(hs(O.current,{...z,h:Q})),size:b,focusable:m,"aria-label":T,onScrubStart:G,onScrubEnd:te}),N&&u.jsx(oI,{value:z.a,onChange:Q=>ne({a:Q}),onChangeEnd:Q=>{S==null||S(hs(O.current,{...z,a:Q}))},size:b,color:hs("hex",z),focusable:m,"aria-label":R,onScrubStart:G,onScrubEnd:te})]}),N&&u.jsx(Ic,{color:B,radius:"sm",size:"var(--cp-preview-size)",...L("preview")})]})]}),Array.isArray(v)&&u.jsx(dI,{data:v,swatchesPerRow:x,focusable:m,setValue:$,onChangeEnd:Q=>{const se=hs(d,qi(Q));k==null||k(se),S==null||S(se),F||U(qi(Q))}})]})})});dS.classes=cS;dS.displayName="@mantine/core/ColorPicker";function e$({style:e,...t}){return u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--ci-eye-dropper-icon-size)",height:"var(--ci-eye-dropper-icon-size)",...e},viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[u.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),u.jsx("path",{d:"M11 7l6 6"}),u.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]})}var h_={eyeDropperIcon:"m_b077c2bc",colorPreview:"m_c5ccdcab",dropdown:"m_5ece2cd7"};const m_={format:"hex",fixOnBlur:!0,withPreview:!0,swatchesPerRow:7,withPicker:!0,popoverProps:{transitionProps:{transition:"fade",duration:0}},withEyeDropper:!0},t$=(e,{size:t})=>({eyeDropperIcon:{"--ci-eye-dropper-icon-size":nt(t,"ci-eye-dropper-icon-size")},colorPreview:{"--ci-preview-size":nt(t,"ci-preview-size")}}),Wh=we((e,t)=>{const n=le("ColorInput",m_,e),{classNames:r,styles:s,unstyled:o,disallowInput:a,fixOnBlur:c,popoverProps:f,withPreview:d,withEyeDropper:p,eyeDropperIcon:h,closeOnColorSwatchClick:g,eyeDropperButtonProps:S,value:y,defaultValue:b,onChange:C,onChangeEnd:T,onClick:R,onFocus:m,onBlur:v,inputProps:x,format:_,wrapperProps:k,readOnly:D,withPicker:M,swatches:P,disabled:L,leftSection:O,rightSection:V,swatchesPerRow:H,...q}=z0("ColorInput",m_,e),N=Oe({name:"ColorInput",props:n,classes:h_,classNames:r,styles:s,unstyled:o,rootSelector:"wrapper",vars:n.vars,varsResolver:t$}),{resolvedClassNames:B,resolvedStyles:$}=Br({classNames:r,styles:s,props:n}),[F,z]=I.useState(!1),[U,G]=I.useState(""),[te,ne]=gn({value:y,defaultValue:b,finalValue:"",onChange:C}),{supported:Q,open:se}=FL(),X=u.jsx(tt,{...S,...N("eyeDropperButton",{className:S==null?void 0:S.className,style:S==null?void 0:S.style}),variant:"subtle",color:"gray",size:x.size,unstyled:o,onClick:()=>se().then(fe=>{if(fe!=null&&fe.sRGBHex){const xe=hs(_,qi(fe.sRGBHex));ne(xe),T==null||T(xe)}}).catch(()=>{}),children:h||u.jsx(e$,{...N("eyeDropperIcon")})}),oe=fe=>{m==null||m(fe),z(!0)},K=fe=>{c&&ne(U),v==null||v(fe),z(!1)},Z=fe=>{R==null||R(fe),z(!0)};return I.useEffect(()=>{(Wl(te)||te.trim()==="")&&G(te)},[te]),zn(()=>{Wl(te)&&ne(hs(_,qi(te)))},[_]),u.jsx(Dt.Wrapper,{...k,classNames:B,styles:$,__staticSelector:"ColorInput",children:u.jsxs(an,{__staticSelector:"ColorInput",position:"bottom-start",offset:5,opened:F,...f,classNames:B,styles:$,unstyled:o,withRoles:!1,disabled:D||M===!1&&(!Array.isArray(P)||P.length===0),children:[u.jsx(an.Target,{children:u.jsx(Dt,{autoComplete:"off",...q,...x,classNames:B,styles:$,disabled:L,ref:t,__staticSelector:"ColorInput",onFocus:oe,onBlur:K,onClick:Z,spellCheck:!1,value:te,onChange:fe=>{const xe=fe.currentTarget.value;ne(xe),Wl(xe)&&(T==null||T(hs(_,qi(xe))))},leftSection:O||(d?u.jsx(Ic,{color:Wl(te)?te:"#fff",size:"var(--ci-preview-size)",...N("colorPreview")}):null),readOnly:a||D,pointer:a,unstyled:o,rightSection:V||(p&&!L&&!D&&Q?X:null)})}),u.jsx(an.Dropdown,{onMouseDown:fe=>fe.preventDefault(),className:h_.dropdown,children:u.jsx(dS,{__staticSelector:"ColorInput",value:te,onChange:ne,onChangeEnd:T,format:_,swatches:P,swatchesPerRow:H,withPicker:M,size:x.size,focusable:!1,unstyled:o,styles:$,classNames:B,onColorSwatchClick:()=>g&&z(!1)})})]})})});Wh.classes=dr.classes;Wh.displayName="@mantine/core/ColorInput";const n$={timeout:1e3};function uS(e){const{children:t,timeout:n,value:r,...s}=le("CopyButton",n$,e),o=bL({timeout:n}),a=()=>o.copy(r);return u.jsx(u.Fragment,{children:t({copy:a,copied:o.copied,...s})})}uS.displayName="@mantine/core/CopyButton";var uI={root:"m_3eebeb36",label:"m_9e365f20"};const r$={orientation:"horizontal"},s$=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Wt(t,e):void 0,"--divider-border-style":n,"--divider-size":nt(r,"divider-size")}}),vn=we((e,t)=>{const n=le("Divider",r$,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,color:d,orientation:p,label:h,labelPosition:g,mod:S,...y}=n,b=Oe({name:"Divider",classes:uI,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:s$});return u.jsx(ie,{ref:t,mod:[{orientation:p,"with-label":!!h},S],...b("root"),...y,role:"separator",children:h&&u.jsx(ie,{component:"span",mod:{position:g},...b("label"),children:h})})});vn.classes=uI;vn.displayName="@mantine/core/Divider";const[o$,Dc]=cr("Drawer component was not found in tree");var xo={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const i$={},qh=we((e,t)=>{const n=le("DrawerBody",i$,e),{classNames:r,className:s,style:o,styles:a,vars:c,...f}=n,d=Dc();return u.jsx(P0,{ref:t,...d.getStyles("body",{classNames:r,style:o,styles:a,className:s}),...f})});qh.classes=xo;qh.displayName="@mantine/core/DrawerBody";const a$={},Gh=we((e,t)=>{const n=le("DrawerCloseButton",a$,e),{classNames:r,className:s,style:o,styles:a,vars:c,...f}=n,d=Dc();return u.jsx(M0,{ref:t,...d.getStyles("close",{classNames:r,style:o,styles:a,className:s}),...f})});Gh.classes=xo;Gh.displayName="@mantine/core/DrawerCloseButton";const c$={},Kh=we((e,t)=>{const n=le("DrawerContent",c$,e),{classNames:r,className:s,style:o,styles:a,vars:c,children:f,radius:d,__hidden:p,...h}=n,g=Dc(),S=g.scrollAreaComponent||Dk;return u.jsx(N0,{...g.getStyles("content",{className:s,style:o,styles:a,classNames:r}),innerProps:g.getStyles("inner",{className:s,style:o,styles:a,classNames:r}),ref:t,...h,radius:d||g.radius||0,"data-hidden":p||void 0,children:u.jsx(S,{style:{height:"calc(100vh - var(--drawer-offset) * 2)"},children:f})})});Kh.classes=xo;Kh.displayName="@mantine/core/DrawerContent";const l$={},Yh=we((e,t)=>{const n=le("DrawerHeader",l$,e),{classNames:r,className:s,style:o,styles:a,vars:c,...f}=n,d=Dc();return u.jsx(L0,{ref:t,...d.getStyles("header",{classNames:r,style:o,styles:a,className:s}),...f})});Yh.classes=xo;Yh.displayName="@mantine/core/DrawerHeader";const d$={},Xh=we((e,t)=>{const n=le("DrawerOverlay",d$,e),{classNames:r,className:s,style:o,styles:a,vars:c,...f}=n,d=Dc();return u.jsx(O0,{ref:t,...d.getStyles("overlay",{classNames:r,style:o,styles:a,className:s}),...f})});Xh.classes=xo;Xh.displayName="@mantine/core/DrawerOverlay";function u$(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function f$(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const p$={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},h$={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},m$={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:lr("modal"),position:"left"},g$=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":nt(n,"drawer-size"),"--drawer-flex":f$(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":u$(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":he(r)}}),Qh=we((e,t)=>{const n=le("DrawerRoot",m$,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,scrollAreaComponent:d,position:p,transitionProps:h,radius:g,...S}=n,{dir:y}=wo(),b=Oe({name:"Drawer",classes:xo,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:g$}),C=(y==="rtl"?h$:p$)[p];return u.jsx(o$,{value:{scrollAreaComponent:d,getStyles:b,radius:g},children:u.jsx(j0,{ref:t,...b("root"),transitionProps:{transition:C,...h},unstyled:c,...S})})});Qh.classes=xo;Qh.displayName="@mantine/core/DrawerRoot";const[v$,y$]=ui();function fI({children:e}){const[t,n]=I.useState([]),[r,s]=I.useState(lr("modal"));return u.jsx(v$,{value:{stack:t,addModal:(o,a)=>{n(c=>[...new Set([...c,o])]),s(c=>typeof a=="number"&&typeof c=="number"?Math.max(c,a):c)},removeModal:o=>n(a=>a.filter(c=>c!==o)),getZIndex:o=>`calc(${r} + ${t.indexOf(o)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}fI.displayName="@mantine/core/DrawerStack";const w$={},Jh=we((e,t)=>{const n=le("DrawerTitle",w$,e),{classNames:r,className:s,style:o,styles:a,vars:c,...f}=n,d=Dc();return u.jsx(A0,{ref:t,...d.getStyles("title",{classNames:r,style:o,styles:a,className:s}),...f})});Jh.classes=xo;Jh.displayName="@mantine/core/DrawerTitle";const S$={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:lr("modal"),withOverlay:!0,withCloseButton:!0},Wr=we((e,t)=>{const{title:n,withOverlay:r,overlayProps:s,withCloseButton:o,closeButtonProps:a,children:c,opened:f,stackId:d,zIndex:p,...h}=le("Drawer",S$,e),g=y$(),S=!!n||o,y=g&&d?{closeOnEscape:g.currentId===d,trapFocus:g.currentId===d,zIndex:g.getZIndex(d)}:{},b=r===!1?!1:d&&g?g.currentId===d:f;return I.useEffect(()=>{g&&d&&(f?g.addModal(d,p||lr("modal")):g.removeModal(d))},[f,d,p]),u.jsxs(Qh,{ref:t,opened:f,zIndex:g&&d?g.getZIndex(d):p,...h,...y,children:[r&&u.jsx(Xh,{visible:b,transitionProps:g&&d?{duration:0}:void 0,...s}),u.jsxs(Kh,{__hidden:g&&d&&f?d!==g.currentId:!1,children:[S&&u.jsxs(Yh,{children:[n&&u.jsx(Jh,{children:n}),o&&u.jsx(Gh,{...a})]}),u.jsx(qh,{children:c})]})]})});Wr.classes=xo;Wr.displayName="@mantine/core/Drawer";Wr.Root=Qh;Wr.Overlay=Xh;Wr.Content=Kh;Wr.Body=qh;Wr.Header=Yh;Wr.Title=Jh;Wr.CloseButton=Gh;Wr.Stack=fI;function b$({open:e,close:t,openDelay:n,closeDelay:r}){const s=I.useRef(-1),o=I.useRef(-1),a=()=>{window.clearTimeout(s.current),window.clearTimeout(o.current)},c=()=>{a(),n===0||n===void 0?e():s.current=window.setTimeout(e,n)},f=()=>{a(),r===0||r===void 0?t():o.current=window.setTimeout(t,r)};return I.useEffect(()=>a,[]),{openDropdown:c,closeDropdown:f}}var pI={root:"m_9e117634"};const x$={},C$=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:jt(t),"--image-object-fit":n}}),td=_n((e,t)=>{const n=le("Image",x$,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,onError:d,src:p,radius:h,fit:g,fallbackSrc:S,mod:y,...b}=n,[C,T]=I.useState(!p);I.useEffect(()=>T(!p),[p]);const R=Oe({name:"Image",classes:pI,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:C$});return C&&S?u.jsx(ie,{component:"img",ref:t,src:S,...R("root"),onError:d,mod:["fallback",y],...b}):u.jsx(ie,{component:"img",ref:t,...R("root"),src:p,onError:m=>{d==null||d(m),T(!0)},mod:y,...b})});td.classes=pI;td.displayName="@mantine/core/Image";function _$(e="top-end",t=0){const n={"--indicator-top":void 0,"--indicator-bottom":void 0,"--indicator-left":void 0,"--indicator-right":void 0,"--indicator-translate-x":void 0,"--indicator-translate-y":void 0},r=he(t),[s,o]=e.split("-");return s==="top"&&(n["--indicator-top"]=r,n["--indicator-translate-y"]="-50%"),s==="middle"&&(n["--indicator-top"]="50%",n["--indicator-translate-y"]="-50%"),s==="bottom"&&(n["--indicator-bottom"]=r,n["--indicator-translate-y"]="50%"),o==="start"&&(n["--indicator-left"]=r,n["--indicator-translate-x"]="-50%"),o==="center"&&(n["--indicator-left"]="50%",n["--indicator-translate-x"]="-50%"),o==="end"&&(n["--indicator-right"]=r,n["--indicator-translate-x"]="50%"),n}var hI={root:"m_e5262200",indicator:"m_760d1fb1",processing:"m_885901b1"};const R$={position:"top-end",offset:0,inline:!1,withBorder:!1,disabled:!1,processing:!1},T$=(e,{color:t,position:n,offset:r,size:s,radius:o,zIndex:a,autoContrast:c})=>({root:{"--indicator-color":t?Wt(t,e):void 0,"--indicator-text-color":Rd(c,e)?xc({color:t,theme:e,autoContrast:c}):void 0,"--indicator-size":he(s),"--indicator-radius":o===void 0?void 0:jt(o),"--indicator-z-index":a==null?void 0:a.toString(),..._$(n,r)}}),fS=we((e,t)=>{const n=le("Indicator",R$,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,children:d,position:p,offset:h,inline:g,label:S,radius:y,color:b,withBorder:C,disabled:T,processing:R,zIndex:m,autoContrast:v,mod:x,..._}=n,k=Oe({name:"Indicator",classes:hI,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:T$});return u.jsxs(ie,{ref:t,...k("root"),mod:[{inline:g},x],..._,children:[!T&&u.jsx(ie,{mod:{"with-label":!!S,"with-border":C,processing:R},...k("indicator"),children:S}),d]})});fS.classes=hI;fS.displayName="@mantine/core/Indicator";function lh(){return lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lh.apply(null,arguments)}function pS(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var E$=I.useLayoutEffect,k$=function(t){var n=wt.useRef(t);return E$(function(){n.current=t}),n},g_=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},I$=function(t,n){var r=wt.useRef();return wt.useCallback(function(s){t.current=s,r.current&&g_(r.current,null),r.current=n,n&&g_(n,s)},[n])},v_={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},D$=function(t){Object.keys(v_).forEach(function(n){t.style.setProperty(n,v_[n],"important")})},y_=D$,Wn=null,w_=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function j$(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Wn||(Wn=document.createElement("textarea"),Wn.setAttribute("tabindex","-1"),Wn.setAttribute("aria-hidden","true"),y_(Wn)),Wn.parentNode===null&&document.body.appendChild(Wn);var s=e.paddingSize,o=e.borderSize,a=e.sizingStyle,c=a.boxSizing;Object.keys(a).forEach(function(g){var S=g;Wn.style[S]=a[S]}),y_(Wn),Wn.value=t;var f=w_(Wn,e);Wn.value=t,f=w_(Wn,e),Wn.value="x";var d=Wn.scrollHeight-s,p=d*n;c==="border-box"&&(p=p+s+o),f=Math.max(p,f);var h=d*r;return c==="border-box"&&(h=h+s+o),f=Math.min(h,f),[f,d]}var S_=function(){},P$=function(t,n){return t.reduce(function(r,s){return r[s]=n[s],r},{})},M$=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],N$=!!document.documentElement.currentStyle,L$=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=P$(M$,n),s=r.boxSizing;if(s==="")return null;N$&&s==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var o=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),a=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:o,borderSize:a}},O$=L$;function mI(e,t,n){var r=k$(n);I.useLayoutEffect(function(){var s=function(a){return r.current(a)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var A$=function(t){mI(window,"resize",t)},$$=function(t){mI(document.fonts,"loadingdone",t)},F$=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],z$=function(t,n){var r=t.cacheMeasurements,s=t.maxRows,o=t.minRows,a=t.onChange,c=a===void 0?S_:a,f=t.onHeightChange,d=f===void 0?S_:f,p=pS(t,F$),h=p.value!==void 0,g=I.useRef(null),S=I$(g,n),y=I.useRef(0),b=I.useRef(),C=function(){var m=g.current,v=r&&b.current?b.current:O$(m);if(v){b.current=v;var x=j$(v,m.value||m.placeholder||"x",o,s),_=x[0],k=x[1];y.current!==_&&(y.current=_,m.style.setProperty("height",_+"px","important"),d(_,{rowHeight:k}))}},T=function(m){h||C(),c(m)};return I.useLayoutEffect(C),A$(C),$$(C),I.createElement("textarea",lh({},p,{onChange:T,ref:S}))},B$=I.forwardRef(z$);const U$={},ha=we((e,t)=>{const{autosize:n,maxRows:r,minRows:s,__staticSelector:o,resize:a,...c}=le("Textarea",U$,e),f=n&&BL()!=="test",d=f?{maxRows:r,minRows:s}:{};return u.jsx(dr,{component:f?B$:"textarea",ref:t,...c,__staticSelector:o||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":a},...d})});ha.classes=dr.classes;ha.displayName="@mantine/core/Textarea";const[V$,Id]=cr("Menu component was not found in the tree");var jc={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const H$={},hS=we((e,t)=>{const{classNames:n,className:r,style:s,styles:o,vars:a,...c}=le("MenuDivider",H$,e),f=Id();return u.jsx(ie,{ref:t,...f.getStyles("divider",{className:r,style:s,styles:o,classNames:n}),...c})});hS.classes=jc;hS.displayName="@mantine/core/MenuDivider";const W$={},mS=we((e,t)=>{const{classNames:n,className:r,style:s,styles:o,vars:a,onMouseEnter:c,onMouseLeave:f,onKeyDown:d,children:p,...h}=le("MenuDropdown",W$,e),g=I.useRef(null),S=Id(),y=tr(d,T=>{var R,m;(T.key==="ArrowUp"||T.key==="ArrowDown")&&(T.preventDefault(),(m=(R=g.current)==null?void 0:R.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||m.focus())}),b=tr(c,()=>(S.trigger==="hover"||S.trigger==="click-hover")&&S.openDropdown()),C=tr(f,()=>(S.trigger==="hover"||S.trigger==="click-hover")&&S.closeDropdown());return u.jsxs(an.Dropdown,{...h,onMouseEnter:b,onMouseLeave:C,role:"menu","aria-orientation":"vertical",ref:dn(t,g),...S.getStyles("dropdown",{className:r,style:s,styles:o,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:y,children:[S.withInitialFocusPlaceholder&&u.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),p]})});mS.classes=jc;mS.displayName="@mantine/core/MenuDropdown";const q$={},gS=_n((e,t)=>{const{classNames:n,className:r,style:s,styles:o,vars:a,color:c,closeMenuOnClick:f,leftSection:d,rightSection:p,children:h,disabled:g,"data-disabled":S,...y}=le("MenuItem",q$,e),b=Id(),C=jn(),{dir:T}=wo(),R=I.useRef(null),m=b.getItemIndex(R.current),v=y,x=tr(v.onMouseLeave,()=>b.setHovered(-1)),_=tr(v.onMouseEnter,()=>b.setHovered(b.getItemIndex(R.current))),k=tr(v.onClick,()=>{S||(typeof f=="boolean"?f&&b.closeDropdownImmediately():b.closeOnItemClick&&b.closeDropdownImmediately())}),D=tr(v.onFocus,()=>b.setHovered(b.getItemIndex(R.current))),M=c?C.variantColorResolver({color:c,theme:C,variant:"light"}):void 0,P=c?pi({color:c,theme:C}):null;return u.jsxs(on,{...y,unstyled:b.unstyled,tabIndex:b.menuItemTabIndex,onFocus:D,...b.getStyles("item",{className:r,style:s,styles:o,classNames:n}),ref:dn(R,t),role:"menuitem",disabled:g,"data-menu-item":!0,"data-disabled":g||S||void 0,"data-hovered":b.hovered===m?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:_,onMouseLeave:x,onClick:k,onKeyDown:gE({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:b.loop,dir:T,orientation:"vertical",onKeyDown:v.onKeyDown}),__vars:{"--menu-item-color":P!=null&&P.isThemeColor&&(P==null?void 0:P.shade)===void 0?`var(--mantine-color-${P.color}-6)`:M==null?void 0:M.color,"--menu-item-hover":M==null?void 0:M.hover},children:[d&&u.jsx("div",{...b.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"left",children:d}),h&&u.jsx("div",{...b.getStyles("itemLabel",{styles:o,classNames:n}),children:h}),p&&u.jsx("div",{...b.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"right",children:p})]})});gS.classes=jc;gS.displayName="@mantine/core/MenuItem";const G$={},vS=we((e,t)=>{const{classNames:n,className:r,style:s,styles:o,vars:a,...c}=le("MenuLabel",G$,e),f=Id();return u.jsx(ie,{ref:t,...f.getStyles("label",{className:r,style:s,styles:o,classNames:n}),...c})});vS.classes=jc;vS.displayName="@mantine/core/MenuLabel";const K$={refProp:"ref"},gI=I.forwardRef((e,t)=>{const{children:n,refProp:r,...s}=le("MenuTarget",K$,e);if(!di(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=Id(),a=n.props,c=tr(a.onClick,()=>{o.trigger==="click"?o.toggleDropdown():o.trigger==="click-hover"&&(o.setOpenedViaClick(!0),o.opened||o.openDropdown())}),f=tr(a.onMouseEnter,()=>(o.trigger==="hover"||o.trigger==="click-hover")&&o.openDropdown()),d=tr(a.onMouseLeave,()=>{(o.trigger==="hover"||o.trigger==="click-hover"&&!o.openedViaClick)&&o.closeDropdown()});return u.jsx(an.Target,{refProp:r,popupType:"menu",ref:t,...s,children:I.cloneElement(n,{onClick:c,onMouseEnter:f,onMouseLeave:d,"data-expanded":o.opened?!0:void 0})})});gI.displayName="@mantine/core/MenuTarget";const Y$={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function lt(e){const t=le("Menu",Y$,e),{children:n,onOpen:r,onClose:s,opened:o,defaultOpened:a,trapFocus:c,onChange:f,closeOnItemClick:d,loop:p,closeOnEscape:h,trigger:g,openDelay:S,closeDelay:y,classNames:b,styles:C,unstyled:T,variant:R,vars:m,menuItemTabIndex:v,keepMounted:x,withInitialFocusPlaceholder:_,...k}=t,D=Oe({name:"Menu",classes:jc,props:t,classNames:b,styles:C,unstyled:T}),[M,{setHovered:P,resetHovered:L}]=yL(),[O,V]=gn({value:o,defaultValue:a,finalValue:!1,onChange:f}),[H,q]=I.useState(!1),N=()=>{V(!1),q(!1),O&&(s==null||s())},B=()=>{V(!0),!O&&(r==null||r())},$=()=>{O?N():B()},{openDropdown:F,closeDropdown:z}=b$({open:B,close:N,closeDelay:y,openDelay:S}),U=ne=>vL("[data-menu-item]","[data-menu-dropdown]",ne),{resolvedClassNames:G,resolvedStyles:te}=Br({classNames:b,styles:C,props:t});return zn(()=>{L()},[O]),u.jsx(V$,{value:{getStyles:D,opened:O,toggleDropdown:$,getItemIndex:U,hovered:M,setHovered:P,openedViaClick:H,setOpenedViaClick:q,closeOnItemClick:d,closeDropdown:g==="click"?N:z,openDropdown:g==="click"?B:F,closeDropdownImmediately:N,loop:p,trigger:g,unstyled:T,menuItemTabIndex:v,withInitialFocusPlaceholder:_},children:u.jsx(an,{...k,opened:O,onChange:$,defaultOpened:a,trapFocus:x?!1:c,closeOnEscape:h,__staticSelector:"Menu",classNames:G,styles:te,unstyled:T,variant:R,keepMounted:x,children:n})})}lt.extend=e=>e;lt.withProps=XO(lt);lt.classes=jc;lt.displayName="@mantine/core/Menu";lt.Item=gS;lt.Label=vS;lt.Dropdown=mS;lt.Target=gI;lt.Divider=hS;const[X$,Pc]=cr("Modal component was not found in tree");var Co={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const Q$={},Zh=we((e,t)=>{const n=le("ModalBody",Q$,e),{classNames:r,className:s,style:o,styles:a,vars:c,...f}=n,d=Pc();return u.jsx(P0,{ref:t,...d.getStyles("body",{classNames:r,style:o,styles:a,className:s}),...f})});Zh.classes=Co;Zh.displayName="@mantine/core/ModalBody";const J$={},em=we((e,t)=>{const n=le("ModalCloseButton",J$,e),{classNames:r,className:s,style:o,styles:a,vars:c,...f}=n,d=Pc();return u.jsx(M0,{ref:t,...d.getStyles("close",{classNames:r,style:o,styles:a,className:s}),...f})});em.classes=Co;em.displayName="@mantine/core/ModalCloseButton";const Z$={},tm=we((e,t)=>{const n=le("ModalContent",Z$,e),{classNames:r,className:s,style:o,styles:a,vars:c,children:f,__hidden:d,...p}=n,h=Pc(),g=h.scrollAreaComponent||Dk;return u.jsx(N0,{...h.getStyles("content",{className:s,style:o,styles:a,classNames:r}),innerProps:h.getStyles("inner",{className:s,style:o,styles:a,classNames:r}),"data-full-screen":h.fullScreen||void 0,"data-modal-content":!0,"data-hidden":d||void 0,ref:t,...p,children:u.jsx(g,{style:{maxHeight:h.fullScreen?"100dvh":`calc(100dvh - (${he(h.yOffset)} * 2))`},children:f})})});tm.classes=Co;tm.displayName="@mantine/core/ModalContent";const e6={},nm=we((e,t)=>{const n=le("ModalHeader",e6,e),{classNames:r,className:s,style:o,styles:a,vars:c,...f}=n,d=Pc();return u.jsx(L0,{ref:t,...d.getStyles("header",{classNames:r,style:o,styles:a,className:s}),...f})});nm.classes=Co;nm.displayName="@mantine/core/ModalHeader";const t6={},rm=we((e,t)=>{const n=le("ModalOverlay",t6,e),{classNames:r,className:s,style:o,styles:a,vars:c,...f}=n,d=Pc();return u.jsx(O0,{ref:t,...d.getStyles("overlay",{classNames:r,style:o,styles:a,className:s}),...f})});rm.classes=Co;rm.displayName="@mantine/core/ModalOverlay";const n6={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:lr("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},r6=(e,{radius:t,size:n,yOffset:r,xOffset:s})=>({root:{"--modal-radius":t===void 0?void 0:jt(t),"--modal-size":nt(n,"modal-size"),"--modal-y-offset":he(r),"--modal-x-offset":he(s)}}),sm=we((e,t)=>{const n=le("ModalRoot",n6,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,yOffset:d,scrollAreaComponent:p,radius:h,fullScreen:g,centered:S,xOffset:y,__staticSelector:b,...C}=n,T=Oe({name:b,classes:Co,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:r6});return u.jsx(X$,{value:{yOffset:d,scrollAreaComponent:p,getStyles:T,fullScreen:g},children:u.jsx(j0,{ref:t,...T("root"),"data-full-screen":g||void 0,"data-centered":S||void 0,unstyled:c,...C})})});sm.classes=Co;sm.displayName="@mantine/core/ModalRoot";const[s6,o6]=ui();function vI({children:e}){const[t,n]=I.useState([]),[r,s]=I.useState(lr("modal"));return u.jsx(s6,{value:{stack:t,addModal:(o,a)=>{n(c=>[...new Set([...c,o])]),s(c=>typeof a=="number"&&typeof c=="number"?Math.max(c,a):c)},removeModal:o=>n(a=>a.filter(c=>c!==o)),getZIndex:o=>`calc(${r} + ${t.indexOf(o)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}vI.displayName="@mantine/core/ModalStack";const i6={},om=we((e,t)=>{const n=le("ModalTitle",i6,e),{classNames:r,className:s,style:o,styles:a,vars:c,...f}=n,d=Pc();return u.jsx(A0,{ref:t,...d.getStyles("title",{classNames:r,style:o,styles:a,className:s}),...f})});om.classes=Co;om.displayName="@mantine/core/ModalTitle";const a6={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:lr("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},dt=we((e,t)=>{const{title:n,withOverlay:r,overlayProps:s,withCloseButton:o,closeButtonProps:a,children:c,radius:f,opened:d,stackId:p,zIndex:h,...g}=le("Modal",a6,e),S=o6(),y=!!n||o,b=S&&p?{closeOnEscape:S.currentId===p,trapFocus:S.currentId===p,zIndex:S.getZIndex(p)}:{},C=r===!1?!1:p&&S?S.currentId===p:d;return I.useEffect(()=>{S&&p&&(d?S.addModal(p,h||lr("modal")):S.removeModal(p))},[d,p,h]),u.jsxs(sm,{ref:t,radius:f,opened:d,zIndex:S&&p?S.getZIndex(p):h,...g,...b,children:[r&&u.jsx(rm,{visible:C,transitionProps:S&&p?{duration:0}:void 0,...s}),u.jsxs(tm,{radius:f,__hidden:S&&p&&d?p!==S.currentId:!1,children:[y&&u.jsxs(nm,{children:[n&&u.jsx(om,{children:n}),o&&u.jsx(em,{...a})]}),u.jsx(Zh,{children:c})]})]})});dt.classes=Co;dt.displayName="@mantine/core/Modal";dt.Root=sm;dt.Overlay=rm;dt.Content=tm;dt.Body=Zh;dt.Header=nm;dt.Title=om;dt.CloseButton=em;dt.Stack=vI;const[bZ,yI]=ui(),[c6,l6]=ui();var im={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const d6={},u6=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?nt(t):nt(n,"pg-gap")}}),yS=we((e,t)=>{const n=le("PillGroup",d6,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,size:d,disabled:p,...h}=n,g=yI(),S=(g==null?void 0:g.size)||d||void 0,y=Oe({name:"PillGroup",classes:im,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:u6,stylesCtx:{size:S},rootSelector:"group"});return u.jsx(c6,{value:{size:S,disabled:p},children:u.jsx(ie,{ref:t,size:S,...y("group"),...h})})});yS.classes=im;yS.displayName="@mantine/core/PillGroup";const f6={variant:"default"},p6=(e,{radius:t},{size:n})=>({root:{"--pill-fz":nt(n,"pill-fz"),"--pill-height":nt(n,"pill-height"),"--pill-radius":t===void 0?void 0:jt(t)}}),aa=we((e,t)=>{const n=le("Pill",f6,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,variant:d,children:p,withRemoveButton:h,onRemove:g,removeButtonProps:S,radius:y,size:b,disabled:C,mod:T,...R}=n,m=l6(),v=yI(),x=b||(m==null?void 0:m.size)||void 0,_=(v==null?void 0:v.variant)==="filled"?"contrast":d||"default",k=Oe({name:"Pill",classes:im,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:p6,stylesCtx:{size:x}});return u.jsxs(ie,{component:"span",ref:t,variant:_,size:x,...k("root",{variant:_}),mod:[{"with-remove":h&&!C,disabled:C||(m==null?void 0:m.disabled)},T],...R,children:[u.jsx("span",{...k("label"),children:p}),h&&u.jsx(fa,{variant:"transparent",radius:y,tabIndex:-1,"aria-hidden":!0,unstyled:c,...S,...k("remove",{className:S==null?void 0:S.className,style:S==null?void 0:S.style}),onMouseDown:D=>{var M;D.preventDefault(),D.stopPropagation(),(M=S==null?void 0:S.onMouseDown)==null||M.call(S,D)},onClick:D=>{var M;D.stopPropagation(),g==null||g(),(M=S==null?void 0:S.onClick)==null||M.call(S,D)}})]})});aa.classes=im;aa.displayName="@mantine/core/Pill";aa.Group=yS;var wI={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const h6={},m6=(e,{variant:t,color:n,childrenOffset:r,autoContrast:s})=>{const o=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:s});return{root:{"--nl-bg":n||t?o.background:void 0,"--nl-hover":n||t?o.hover:void 0,"--nl-color":n||t?o.color:void 0},children:{"--nl-offset":Nt(r)}}},Ht=_n((e,t)=>{const n=le("NavLink",h6,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,opened:d,defaultOpened:p,onChange:h,children:g,onClick:S,active:y,disabled:b,leftSection:C,rightSection:T,label:R,description:m,disableRightSectionRotation:v,noWrap:x,childrenOffset:_,onKeyDown:k,autoContrast:D,mod:M,...P}=n,L=Oe({name:"NavLink",props:n,classes:wI,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:m6}),[O,V]=gn({value:d,defaultValue:p,finalValue:!1,onChange:h}),H=!!g,q=N=>{S==null||S(N),H&&(N.preventDefault(),V(!O))};return u.jsxs(u.Fragment,{children:[u.jsxs(on,{...L("root"),component:"a",ref:t,onClick:q,onKeyDown:N=>{k==null||k(N),N.nativeEvent.code==="Space"&&H&&(N.preventDefault(),V(!O))},unstyled:c,mod:[{disabled:b,active:y,expanded:O},M],...P,children:[C&&u.jsx(ie,{component:"span",...L("section"),mod:{position:"left"},children:C}),u.jsxs(ie,{...L("body"),mod:{"no-wrap":x},children:[u.jsx(ie,{component:"span",...L("label"),children:R}),u.jsx(ie,{component:"span",mod:{active:y},...L("description"),children:m})]}),(H||T)&&u.jsx(ie,{...L("section"),component:"span",mod:{rotate:O&&!v,position:"right"},children:H?T||u.jsx(vc,{...L("chevron")}):T})]}),H&&u.jsx(Td,{in:O,...L("collapse"),children:u.jsx("div",{...L("children"),children:g})})]})});Ht.classes=wI;Ht.displayName="@mantine/core/NavLink";var SI={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const g6={withCloseButton:!0},v6=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:jt(t),"--notification-color":n?Wt(n,e):void 0}}),ma=we((e,t)=>{const n=le("Notification",g6,e),{className:r,color:s,radius:o,loading:a,withCloseButton:c,withBorder:f,title:d,icon:p,children:h,onClose:g,closeButtonProps:S,classNames:y,style:b,styles:C,unstyled:T,variant:R,vars:m,mod:v,loaderProps:x,..._}=n,k=Oe({name:"Notification",classes:SI,props:n,className:r,style:b,classNames:y,styles:C,unstyled:T,vars:m,varsResolver:v6});return u.jsxs(ie,{...k("root"),mod:[{"data-with-icon":!!p||a,"data-with-border":f},v],ref:t,variant:R,..._,role:"alert",children:[p&&!a&&u.jsx("div",{...k("icon"),children:p}),a&&u.jsx(Rr,{size:28,color:s,...x,...k("loader")}),u.jsxs("div",{...k("body"),children:[d&&u.jsx("div",{...k("title"),children:d}),u.jsx(ie,{...k("description"),mod:{"data-with-title":!!d},children:h})]}),c&&u.jsx(fa,{iconSize:16,color:"gray",...S,unstyled:T,onClick:g,...k("closeButton")})]})});ma.classes=SI;ma.displayName="@mantine/core/Notification";function bI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}var vd;(function(e){e.event="event",e.props="prop"})(vd||(vd={}));function Jo(){}function y6(e){var t,n=void 0;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return t&&r.length===t.length&&r.every(function(o,a){return o===t[a]})||(t=r,n=e.apply(void 0,r)),n}}function yd(e){return!!(e||"").match(/\d/)}function lc(e){return e==null}function w6(e){return typeof e=="number"&&isNaN(e)}function xI(e){return lc(e)||w6(e)||typeof e=="number"&&!isFinite(e)}function CI(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function S6(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function b6(e,t,n){var r=S6(n),s=e.search(/[1-9]/);return s=s===-1?e.length:s,e.substring(0,s)+e.substring(s,e.length).replace(r,"$1"+t)}function x6(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return t.current.apply(t,r)});return n.current}function wS(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var s=e.split("."),o=s[0],a=s[1]||"";return{beforeDecimal:o,afterDecimal:a,hasNegation:n,addNegation:r}}function C6(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",s=n[1]||"";return(t?"-":"")+r+(s?"."+s:"")}function _I(e,t,n){for(var r="",s=n?"0":"",o=0;o<=t-1;o++)r+=e[o]||s;return r}function b_(e,t){return Array(t+1).join(e)}function RI(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),s=r[0],o=r[1];if(o=Number(o),!o)return n+s;s=s.replace(".","");var a=1+o,c=s.length;return a<0?s="0."+b_("0",Math.abs(a))+s:a>=c?s=s+b_("0",a-c):s=(s.substring(0,a)||"0")+"."+s.substring(a),n+s}function x_(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,s=wS(e),o=s.beforeDecimal,a=s.afterDecimal,c=s.hasNegation,f=parseFloat("0."+(a||"0")),d=a.length<=t?"0."+a:f.toFixed(t),p=d.split("."),h=o;o&&Number(p[0])&&(h=o.split("").reverse().reduce(function(b,C,T){return b.length>T?(Number(b[0])+Number(C)).toString()+b.substring(1,b.length):C+b},p[0]));var g=_I(p[1]||"",t,n),S=c?"-":"",y=r?".":"";return""+S+h+y+g}function Hi(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var TI=y6(function(e,t){for(var n=0,r=0,s=e.length,o=t.length;e[n]===t[n]&&n<s;)n++;for(;e[s-1-r]===t[o-1-r]&&o-r>n&&s-r>n;)r++;return{from:{start:n,end:s-r},to:{start:n,end:o-r}}}),_6=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function R6(e,t,n){return Math.min(Math.max(e,t),n)}function gy(e){return Math.max(e.selectionStart,e.selectionEnd)}function T6(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function E6(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function k6(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,s=e.formattedValueIndex;return t[r]===n[s]}function I6(e,t,n,r,s,o,a){a===void 0&&(a=k6);var c=s.findIndex(function(v){return v}),f=e.slice(0,c);!t&&!n.startsWith(f)&&(t=f,n=f+n,r=r+f.length);for(var d=n.length,p=e.length,h={},g=new Array(d),S=0;S<d;S++){g[S]=-1;for(var y=0,b=p;y<b;y++){var C=a({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:S,formattedValueIndex:y});if(C&&h[y]!==!0){g[S]=y,h[y]=!0;break}}}for(var T=r;T<d&&(g[T]===-1||!o(n[T]));)T++;var R=T===d||g[T]===-1?p:g[T];for(T=r-1;T>0&&g[T]===-1;)T--;var m=T===-1||g[T]===-1?0:g[T]+1;return m>R?R:r-m<R-r?m:R}function C_(e,t,n,r){var s=e.length;if(t=R6(t,0,s),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=s&&!n[t];)t++;t>s&&(t=n.lastIndexOf(!0))}return t===-1&&(t=s),t}function D6(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(yd(e[n])||yd(e[n-1]));return t}function EI(e,t,n,r,s,o){o===void 0&&(o=Jo);var a=x6(function(y,b){var C,T;return xI(y)?(T="",C=""):typeof y=="number"||b?(T=typeof y=="number"?RI(y):y,C=r(T)):(T=s(y,void 0),C=r(T)),{formattedValue:C,numAsString:T}}),c=I.useState(function(){return a(lc(e)?t:e,n)}),f=c[0],d=c[1],p=function(y,b){y.formattedValue!==f.formattedValue&&d({formattedValue:y.formattedValue,numAsString:y.value}),o(y,b)},h=e,g=n;lc(e)&&(h=f.numAsString,g=!0);var S=a(h,g);return I.useMemo(function(){d(S)},[S.formattedValue]),[f,p]}function j6(e){return e.replace(/[^0-9]/g,"")}function P6(e){return e}function M6(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,s=e.renderText,o=e.getInputRef,a=e.format;a===void 0&&(a=P6);var c=e.removeFormatting;c===void 0&&(c=j6);var f=e.defaultValue,d=e.valueIsNumericString,p=e.onValueChange,h=e.isAllowed,g=e.onChange;g===void 0&&(g=Jo);var S=e.onKeyDown;S===void 0&&(S=Jo);var y=e.onMouseUp;y===void 0&&(y=Jo);var b=e.onFocus;b===void 0&&(b=Jo);var C=e.onBlur;C===void 0&&(C=Jo);var T=e.value,R=e.getCaretBoundary;R===void 0&&(R=D6);var m=e.isValidInputCharacter;m===void 0&&(m=yd);var v=e.isCharacterSame,x=bI(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),_=EI(T,f,!!d,a,c,p),k=_[0],D=k.formattedValue,M=k.numAsString,P=_[1],L=I.useRef(),O=I.useRef({formattedValue:D,numAsString:M}),V=function(pe,_e){O.current={formattedValue:pe.formattedValue,numAsString:pe.value},P(pe,_e)},H=I.useState(!1),q=H[0],N=H[1],B=I.useRef(null),$=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return N(!0),function(){clearTimeout($.current.setCaretTimeout),clearTimeout($.current.focusTimeout)}},[]);var F=a,z=function(pe,_e){var je=parseFloat(_e);return{formattedValue:pe,value:_e,floatValue:isNaN(je)?void 0:je}},U=function(pe,_e,je){pe.selectionStart===0&&pe.selectionEnd===pe.value.length||(Hi(pe,_e),$.current.setCaretTimeout=setTimeout(function(){pe.value===je&&pe.selectionStart!==_e&&Hi(pe,_e)},0))},G=function(pe,_e,je){return C_(pe,_e,R(pe),je)},te=function(pe,_e,je){var Ue=R(_e),Je=I6(_e,D,pe,je,Ue,m,v);return Je=C_(_e,Je,Ue),Je},ne=function(pe){var _e=pe.formattedValue;_e===void 0&&(_e="");var je=pe.input,Ue=pe.source,Je=pe.event,Ze=pe.numAsString,Fe;if(je){var be=pe.inputValue||je.value,Ve=gy(je);je.value=_e,Fe=te(be,_e,Ve),Fe!==void 0&&U(je,Fe,_e)}_e!==D&&V(z(_e,Ze),{event:Je,source:Ue})};I.useEffect(function(){var pe=O.current,_e=pe.formattedValue,je=pe.numAsString;(D!==_e||M!==je)&&V(z(D,M),{event:void 0,source:vd.props})},[D,M]);var Q=B.current?gy(B.current):void 0,se=typeof window<"u"?I.useLayoutEffect:I.useEffect;se(function(){var pe=B.current;if(D!==O.current.formattedValue&&pe){var _e=te(O.current.formattedValue,D,Q);pe.value=D,U(pe,_e,D)}},[D]);var X=function(pe,_e,je){var Ue=_e.target,Je=L.current?_6(L.current,Ue.selectionEnd):TI(D,pe),Ze=Object.assign(Object.assign({},Je),{lastValue:D}),Fe=c(pe,Ze),be=F(Fe);if(Fe=c(be,void 0),h&&!h(z(be,Fe))){var Ve=_e.target,He=gy(Ve),Ye=te(pe,D,He);return Ve.value=D,U(Ve,Ye,D),!1}return ne({formattedValue:be,numAsString:Fe,inputValue:pe,event:_e,source:je,input:_e.target}),!0},oe=function(pe,_e){_e===void 0&&(_e=0);var je=pe.selectionStart,Ue=pe.selectionEnd;L.current={selectionStart:je,selectionEnd:Ue+_e}},K=function(pe){var _e=pe.target,je=_e.value,Ue=X(je,pe,vd.event);Ue&&g(pe),L.current=void 0},Z=function(pe){var _e=pe.target,je=pe.key,Ue=_e.selectionStart,Je=_e.selectionEnd,Ze=_e.value;Ze===void 0&&(Ze="");var Fe;je==="ArrowLeft"||je==="Backspace"?Fe=Math.max(Ue-1,0):je==="ArrowRight"?Fe=Math.min(Ue+1,Ze.length):je==="Delete"&&(Fe=Ue);var be=0;je==="Delete"&&Ue===Je&&(be=1);var Ve=je==="ArrowLeft"||je==="ArrowRight";if(Fe===void 0||Ue!==Je&&!Ve){S(pe),oe(_e,be);return}var He=Fe;if(Ve){var Ye=je==="ArrowLeft"?"left":"right";He=G(Ze,Fe,Ye),He!==Fe&&pe.preventDefault()}else je==="Delete"&&!m(Ze[Fe])?He=G(Ze,Fe,"right"):je==="Backspace"&&!m(Ze[Fe])&&(He=G(Ze,Fe,"left"));He!==Fe&&U(_e,He,Ze),S(pe),oe(_e,be)},fe=function(pe){var _e=pe.target,je=function(){var Ue=_e.selectionStart,Je=_e.selectionEnd,Ze=_e.value;if(Ze===void 0&&(Ze=""),Ue===Je){var Fe=G(Ze,Ue);Fe!==Ue&&U(_e,Fe,Ze)}};je(),requestAnimationFrame(function(){je()}),y(pe),oe(_e)},xe=function(pe){pe.persist&&pe.persist();var _e=pe.target,je=pe.currentTarget;B.current=_e,$.current.focusTimeout=setTimeout(function(){var Ue=_e.selectionStart,Je=_e.selectionEnd,Ze=_e.value;Ze===void 0&&(Ze="");var Fe=G(Ze,Ue);Fe!==Ue&&!(Ue===0&&Je===Ze.length)&&U(_e,Fe,Ze),b(Object.assign(Object.assign({},pe),{currentTarget:je}))},0)},ye=function(pe){B.current=null,clearTimeout($.current.focusTimeout),clearTimeout($.current.setCaretTimeout),C(pe)},Ee=q&&T6()?"numeric":void 0,Be=Object.assign({inputMode:Ee},x,{type:t,value:D,onChange:K,onKeyDown:Z,onMouseUp:fe,onFocus:xe,onBlur:ye});if(n==="text")return s?wt.createElement(wt.Fragment,null,s(D,x)||null):wt.createElement("span",Object.assign({},x,{ref:o}),D);if(r){var et=r;return wt.createElement(et,Object.assign({},Be,{ref:o}))}return wt.createElement("input",Object.assign({},Be,{ref:o}))}function __(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,s=t.prefix;s===void 0&&(s="");var o=t.suffix;o===void 0&&(o="");var a=t.allowNegative,c=t.thousandsGroupStyle;if(c===void 0&&(c="thousand"),e===""||e==="-")return e;var f=am(t),d=f.thousandSeparator,p=f.decimalSeparator,h=n!==0&&e.indexOf(".")!==-1||n&&r,g=wS(e,a),S=g.beforeDecimal,y=g.afterDecimal,b=g.addNegation;return n!==void 0&&(y=_I(y,n,!!r)),d&&(S=b6(S,d,c)),s&&(S=s+S),o&&(y=y+o),b&&(S="-"+S),e=S+(h&&p||"")+y,e}function am(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function N6(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),s=n.test(e),o=r.test(e);return e=e.replace(/-/g,""),s&&!o&&t&&(e="-"+e),e}function L6(e,t){return new RegExp("(^-)|[0-9]|"+CI(e),"g")}function O6(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function A6(e,t,n){var r;t===void 0&&(t=E6(e));var s=n.allowNegative,o=n.prefix;o===void 0&&(o="");var a=n.suffix;a===void 0&&(a="");var c=n.decimalScale,f=t.from,d=t.to,p=d.start,h=d.end,g=am(n),S=g.allowedDecimalSeparators,y=g.decimalSeparator,b=e[h]===y;if(yd(e)&&(e===o||e===a)&&t.lastValue==="")return e;if(h-p===1&&S.indexOf(e[p])!==-1){var C=c===0?"":y;e=e.substring(0,p)+C+e.substring(p+1,e.length)}var T=function(B,$,F){var z=!1,U=!1;o.startsWith("-")?z=!1:B.startsWith("--")?(z=!1,U=!0):a.startsWith("-")&&B.length===a.length?z=!1:B[0]==="-"&&(z=!0);var G=z?1:0;return U&&(G=2),G&&(B=B.substring(G),$-=G,F-=G),{value:B,start:$,end:F,hasNegation:z}},R=T(e,p,h),m=R.hasNegation;r=R,e=r.value,p=r.start,h=r.end;var v=T(t.lastValue,f.start,f.end),x=v.start,_=v.end,k=v.value,D=e.substring(p,h);e.length&&k.length&&(x>k.length-a.length||_<o.length)&&!(D&&a.startsWith(D))&&(e=k);var M=0;e.startsWith(o)?M+=o.length:p<o.length&&(M=p),e=e.substring(M),h-=M;var P=e.length,L=e.length-a.length;e.endsWith(a)?P=L:(h>L||h>e.length-a.length)&&(P=h),e=e.substring(0,P),e=N6(m?"-"+e:e,s),e=(e.match(L6(y))||[]).join("");var O=e.indexOf(y);e=e.replace(new RegExp(CI(y),"g"),function(B,$){return $===O?".":""});var V=wS(e,s),H=V.beforeDecimal,q=V.afterDecimal,N=V.addNegation;return d.end-d.start<f.end-f.start&&H===""&&b&&!parseFloat(q)&&(e=N?"-":""),e}function $6(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var s=Array.from({length:e.length+1}).map(function(){return!0}),o=e[0]==="-";s.fill(!1,0,n.length+(o?1:0));var a=e.length;return s.fill(!1,a-r.length+1,a+1),s}function F6(e){var t=am(e),n=t.thousandSeparator,r=t.decimalSeparator,s=e.prefix;s===void 0&&(s="");var o=e.allowNegative;if(o===void 0&&(o=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return s.startsWith("-")&&o&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+s+`
      allowNegative: `+o+`
    `),o=!1),Object.assign(Object.assign({},e),{allowNegative:o})}function z6(e){e=F6(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,s=e.onKeyDown;s===void 0&&(s=Jo);var o=e.onBlur;o===void 0&&(o=Jo);var a=e.thousandSeparator,c=e.decimalScale,f=e.fixedDecimalScale,d=e.prefix;d===void 0&&(d="");var p=e.defaultValue,h=e.value,g=e.valueIsNumericString,S=e.onValueChange,y=bI(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),b=am(e),C=b.decimalSeparator,T=b.allowedDecimalSeparators,R=function(N){return __(N,e)},m=function(N,B){return A6(N,B,e)},v=lc(h)?p:h,x=g??O6(v,d,t);lc(h)?lc(p)||(x=x||typeof p=="number"):x=x||typeof h=="number";var _=function(N){return xI(N)?N:(typeof N=="number"&&(N=RI(N)),x&&typeof c=="number"?x_(N,c,!!f):N)},k=EI(_(h),_(p),!!x,R,m,S),D=k[0],M=D.numAsString,P=D.formattedValue,L=k[1],O=function(N){var B=N.target,$=N.key,F=B.selectionStart,z=B.selectionEnd,U=B.value;if(U===void 0&&(U=""),($==="Backspace"||$==="Delete")&&z<d.length){N.preventDefault();return}if(F!==z){s(N);return}$==="Backspace"&&U[0]==="-"&&F===d.length+1&&n&&Hi(B,1),c&&f&&($==="Backspace"&&U[F-1]===C?(Hi(B,F-1),N.preventDefault()):$==="Delete"&&U[F]===C&&N.preventDefault()),T!=null&&T.includes($)&&U[F]===C&&Hi(B,F+1);var G=a===!0?",":a;$==="Backspace"&&U[F-1]===G&&Hi(B,F-1),$==="Delete"&&U[F]===G&&Hi(B,F+1),s(N)},V=function(N){var B=M;if(B.match(/\d/g)||(B=""),r||(B=C6(B)),f&&c&&(B=x_(B,c,f)),B!==M){var $=__(B,e);L({formattedValue:$,value:B,floatValue:parseFloat(B)},{event:N,source:vd.event})}o(N)},H=function(N){return N===C?!0:yd(N)},q=function(N){var B=N.currentValue,$=N.lastValue,F=N.formattedValue,z=N.currentValueIndex,U=N.formattedValueIndex,G=B[z],te=F[U],ne=TI($,B),Q=ne.to,se=function(X){return m(X).indexOf(".")+d.length};return h===0&&f&&c&&B[Q.start]===C&&se(B)<z&&se(F)>U?!1:z>=Q.start&&z<Q.end&&T&&T.includes(G)&&te===C?!0:G===te};return Object.assign(Object.assign({},y),{value:P,valueIsNumericString:!1,isValidInputCharacter:H,isCharacterSame:q,onValueChange:L,format:R,removeFormatting:m,getCaretBoundary:function(N){return $6(N,e)},onKeyDown:O,onBlur:V})}function B6(e){var t=z6(e);return wt.createElement(M6,Object.assign({},t))}function R_({direction:e,style:t,...n}){return u.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:u.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var mw={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const U6=/^(0\.0*|-0(\.0*)?)$/,V6=/^-?0\d+(\.\d+)?\.?$/;function gw(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function vy(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||gw(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function H6(e){return e.toString().replace(".","").length}function W6(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&H6(t)<14&&t!==""}function T_(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,s=n===void 0||e<=n;return r&&s}const q6={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},G6=(e,{size:t})=>({controls:{"--ni-chevron-size":nt(t,"ni-chevron-size")}}),Dd=we((e,t)=>{const n=le("NumberInput",q6,e),{className:r,classNames:s,styles:o,unstyled:a,vars:c,onChange:f,onValueChange:d,value:p,defaultValue:h,max:g,min:S,step:y,hideControls:b,rightSection:C,isAllowed:T,clampBehavior:R,onBlur:m,allowDecimal:v,decimalScale:x,onKeyDown:_,onKeyDownCapture:k,handlersRef:D,startValue:M,disabled:P,rightSectionPointerEvents:L,allowNegative:O,readOnly:V,size:H,rightSectionWidth:q,stepHoldInterval:N,stepHoldDelay:B,allowLeadingZeros:$,withKeyboardEvents:F,trimLeadingZeroesOnBlur:z,...U}=n,G=Oe({name:"NumberInput",classes:mw,props:n,classNames:s,styles:o,unstyled:a,vars:c,varsResolver:G6}),{resolvedClassNames:te,resolvedStyles:ne}=Br({classNames:s,styles:o,props:n}),[Q,se]=gn({value:p,defaultValue:h,finalValue:"",onChange:f}),X=B!==void 0&&N!==void 0,oe=I.useRef(null),K=I.useRef(null),Z=I.useRef(0),fe=(be,Ve)=>{Ve.source==="event"&&se(W6(be.floatValue,be.value)&&!U6.test(be.value)&&!($&&V6.test(be.value))?be.floatValue:be.value),d==null||d(be,Ve)},xe=be=>{const Ve=String(be).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Ve?Math.max(0,(Ve[1]?Ve[1].length:0)-(Ve[2]?+Ve[2]:0)):0},ye=be=>{oe.current&&typeof be<"u"&&oe.current.setSelectionRange(be,be)},Ee=I.useRef(ew);Ee.current=()=>{if(!vy(Q))return;let be;const Ve=xe(Q),He=xe(y),Ye=Math.max(Ve,He),Le=10**Ye;if(!gw(Q)&&(typeof Q!="number"||Number.isNaN(Q)))be=br(M,S,g);else if(g!==void 0){const vt=(Math.round(Number(Q)*Le)+Math.round(y*Le))/Le;be=vt<=g?vt:g}else be=(Math.round(Number(Q)*Le)+Math.round(y*Le))/Le;const ct=be.toFixed(Ye);se(parseFloat(ct)),d==null||d({floatValue:parseFloat(ct),formattedValue:ct,value:ct},{source:"increment"}),setTimeout(()=>{var vt;return ye((vt=oe.current)==null?void 0:vt.value.length)},0)};const Be=I.useRef(ew);Be.current=()=>{if(!vy(Q))return;let be;const Ve=S!==void 0?S:O?Number.MIN_SAFE_INTEGER:0,He=xe(Q),Ye=xe(y),Le=Math.max(He,Ye),ct=10**Le;if(!gw(Q)&&typeof Q!="number"||Number.isNaN(Q))be=br(M,Ve,g);else{const ut=(Math.round(Number(Q)*ct)-Math.round(y*ct))/ct;be=Ve!==void 0&&ut<Ve?Ve:ut}const vt=be.toFixed(Le);se(parseFloat(vt)),d==null||d({floatValue:parseFloat(vt),formattedValue:vt,value:vt},{source:"decrement"}),setTimeout(()=>{var ut;return ye((ut=oe.current)==null?void 0:ut.value.length)},0)};const et=be=>{_==null||_(be),!(V||!F)&&(be.key==="ArrowUp"&&(be.preventDefault(),Ee.current()),be.key==="ArrowDown"&&(be.preventDefault(),Be.current()))},pe=be=>{if(k==null||k(be),be.key==="Backspace"){const Ve=oe.current;Ve.selectionStart===0&&Ve.selectionStart===Ve.selectionEnd&&(be.preventDefault(),window.setTimeout(()=>ye(0),0))}},_e=be=>{let Ve=Q;if(R==="blur"&&typeof Ve=="number"&&(Ve=br(Ve,S,g)),z&&typeof Ve=="string"&&xe(Ve)<15){const He=Ve.toString().replace(/^0+/,""),Ye=parseFloat(He);Ve=Number.isNaN(Ye)||Ye>Number.MAX_SAFE_INTEGER?He:br(Ye,S,g)}Q!==Ve&&se(Ve),m==null||m(be)};th(D,{increment:Ee.current,decrement:Be.current});const je=be=>{be?Ee.current():Be.current(),Z.current+=1},Ue=be=>{if(je(be),X){const Ve=typeof N=="number"?N:N(Z.current);K.current=window.setTimeout(()=>Ue(be),Ve)}},Je=(be,Ve)=>{var He;be.preventDefault(),(He=oe.current)==null||He.focus(),je(Ve),X&&(K.current=window.setTimeout(()=>Ue(Ve),B))},Ze=()=>{K.current&&window.clearTimeout(K.current),K.current=null,Z.current=0},Fe=u.jsxs("div",{...G("controls"),children:[u.jsx(on,{...G("control"),tabIndex:-1,"aria-hidden":!0,disabled:P||typeof Q=="number"&&g!==void 0&&Q>=g,mod:{direction:"up"},onMouseDown:be=>be.preventDefault(),onPointerDown:be=>{Je(be,!0)},onPointerUp:Ze,onPointerLeave:Ze,children:u.jsx(R_,{direction:"up"})}),u.jsx(on,{...G("control"),tabIndex:-1,"aria-hidden":!0,disabled:P||typeof Q=="number"&&S!==void 0&&Q<=S,mod:{direction:"down"},onMouseDown:be=>be.preventDefault(),onPointerDown:be=>{Je(be,!1)},onPointerUp:Ze,onPointerLeave:Ze,children:u.jsx(R_,{direction:"down"})})]});return u.jsx(dr,{component:B6,allowNegative:O,className:ln(mw.root,r),size:H,...U,readOnly:V,disabled:P,value:Q,getInputRef:dn(t,oe),onValueChange:fe,rightSection:b||V||!vy(Q)?C:C||Fe,classNames:te,styles:ne,unstyled:a,__staticSelector:"NumberInput",decimalScale:v?x:0,onKeyDown:et,onKeyDownCapture:pe,rightSectionPointerEvents:L??(P?"none":void 0),rightSectionWidth:q??`var(--ni-right-section-width-${H||"sm"})`,allowLeadingZeros:$,onBlur:_e,isAllowed:be=>R==="strict"?T?T(be)&&T_(be.floatValue,S,g):T_(be.floatValue,S,g):T?T(be):!0})});Dd.classes={...dr.classes,...mw};Dd.displayName="@mantine/core/NumberInput";const[K6,cm]=cr("Pagination.Root component was not found in tree");var jd={root:"m_4addd315",control:"m_326d024a",dots:"m_4ad7767d"};const Y6={withPadding:!0},Pd=we((e,t)=>{const n=le("PaginationControl",Y6,e),{classNames:r,className:s,style:o,styles:a,vars:c,active:f,disabled:d,withPadding:p,mod:h,...g}=n,S=cm(),y=d||S.disabled;return u.jsx(on,{ref:t,disabled:y,mod:[{active:f,disabled:y,"with-padding":p},h],...S.getStyles("control",{className:s,style:o,classNames:r,styles:a,active:!y}),...g})});Pd.classes=jd;Pd.displayName="@mantine/core/PaginationControl";function Md({style:e,children:t,path:n,...r}){return u.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)",...e},...r,children:u.jsx("path",{d:n,fill:"currentColor"})})}const X6=e=>u.jsx(Md,{...e,path:"M8.781 8l-3.3-3.3.943-.943L10.667 8l-4.243 4.243-.943-.943 3.3-3.3z"}),Q6=e=>u.jsx(Md,{...e,path:"M7.219 8l3.3 3.3-.943.943L5.333 8l4.243-4.243.943.943-3.3 3.3z"}),J6=e=>u.jsx(Md,{...e,path:"M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z"}),Z6=e=>u.jsx(Md,{...e,path:"M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z"}),eF=e=>u.jsx(Md,{...e,path:"M2 8c0-.733.6-1.333 1.333-1.333.734 0 1.334.6 1.334 1.333s-.6 1.333-1.334 1.333C2.6 9.333 2 8.733 2 8zm9.333 0c0-.733.6-1.333 1.334-1.333C13.4 6.667 14 7.267 14 8s-.6 1.333-1.333 1.333c-.734 0-1.334-.6-1.334-1.333zM6.667 8c0-.733.6-1.333 1.333-1.333s1.333.6 1.333 1.333S8.733 9.333 8 9.333 6.667 8.733 6.667 8z"}),tF={icon:eF},lm=we((e,t)=>{const n=le("PaginationDots",tF,e),{classNames:r,className:s,style:o,styles:a,vars:c,icon:f,...d}=n,p=cm(),h=f;return u.jsx(ie,{ref:t,...p.getStyles("dots",{className:s,style:o,styles:a,classNames:r}),...d,children:u.jsx(h,{style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});lm.classes=jd;lm.displayName="@mantine/core/PaginationDots";function dm({icon:e,name:t,action:n,type:r}){const s={icon:e},o=I.forwardRef((a,c)=>{const{icon:f,...d}=le(t,s,a),p=f,h=cm(),g=r==="next"?h.active===h.total:h.active===1;return u.jsx(Pd,{disabled:h.disabled||g,ref:c,onClick:h[n],withPadding:!1,...d,children:u.jsx(p,{className:"mantine-rotate-rtl",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});return o.displayName=`@mantine/core/${t}`,o}const kI=dm({icon:X6,name:"PaginationNext",action:"onNext",type:"next"}),II=dm({icon:Q6,name:"PaginationPrevious",action:"onPrevious",type:"previous"}),DI=dm({icon:J6,name:"PaginationFirst",action:"onFirst",type:"previous"}),jI=dm({icon:Z6,name:"PaginationLast",action:"onLast",type:"next"});function SS({dotsIcon:e}){const t=cm(),n=t.range.map((r,s)=>{var o,a,c;return r==="dots"?u.jsx(lm,{icon:e},s):u.jsx(Pd,{active:r===t.active,"aria-current":r===t.active?"page":void 0,onClick:()=>t.onChange(r),disabled:t.disabled,...(o=t.getItemProps)==null?void 0:o.call(t,r),children:((c=(a=t.getItemProps)==null?void 0:a.call(t,r))==null?void 0:c.children)??r},s)});return u.jsx(u.Fragment,{children:n})}SS.displayName="@mantine/core/PaginationItems";const nF={siblings:1,boundaries:1},rF=(e,{size:t,radius:n,color:r,autoContrast:s})=>({root:{"--pagination-control-radius":n===void 0?void 0:jt(n),"--pagination-control-size":nt(t,"pagination-control-size"),"--pagination-control-fz":en(t),"--pagination-active-bg":r?Wt(r,e):void 0,"--pagination-active-color":Rd(s,e)?xc({color:r,theme:e,autoContrast:s}):void 0}}),um=we((e,t)=>{const n=le("PaginationRoot",nF,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,total:d,value:p,defaultValue:h,onChange:g,disabled:S,siblings:y,boundaries:b,color:C,radius:T,onNextPage:R,onPreviousPage:m,onFirstPage:v,onLastPage:x,getItemProps:_,autoContrast:k,...D}=n,M=Oe({name:"Pagination",classes:jd,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:rF}),{range:P,setPage:L,next:O,previous:V,active:H,first:q,last:N}=OL({page:p,initialPage:h,onChange:g,total:d,siblings:y,boundaries:b}),B=tr(R,O),$=tr(m,V),F=tr(v,q),z=tr(x,N);return u.jsx(K6,{value:{total:d,range:P,active:H,disabled:S,getItemProps:_,onChange:L,onNext:B,onPrevious:$,onFirst:F,onLast:z,getStyles:M},children:u.jsx(ie,{ref:t,...M("root"),...D})})});um.classes=jd;um.displayName="@mantine/core/PaginationRoot";const sF={withControls:!0,withPages:!0,siblings:1,boundaries:1,gap:8},kr=we((e,t)=>{const n=le("Pagination",sF,e),{withEdges:r,withControls:s,getControlProps:o,nextIcon:a,previousIcon:c,lastIcon:f,firstIcon:d,dotsIcon:p,total:h,gap:g,hideWithOnePage:S,withPages:y,...b}=n;return h<=0||S&&h===1?null:u.jsx(um,{ref:t,total:h,...b,children:u.jsxs(ve,{gap:g,children:[r&&u.jsx(DI,{icon:d,...o==null?void 0:o("first")}),s&&u.jsx(II,{icon:c,...o==null?void 0:o("previous")}),y&&u.jsx(SS,{dotsIcon:p}),s&&u.jsx(kI,{icon:a,...o==null?void 0:o("next")}),r&&u.jsx(jI,{icon:f,...o==null?void 0:o("last")})]})})});kr.classes=jd;kr.displayName="@mantine/core/Pagination";kr.Root=um;kr.Control=Pd;kr.Dots=lm;kr.First=DI;kr.Last=jI;kr.Next=kI;kr.Previous=II;kr.Items=SS;const oF=({reveal:e})=>u.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--psi-icon-size)",height:"var(--psi-icon-size)"},children:u.jsx("path",{d:e?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});var vw={root:"m_f61ca620",input:"m_ccf8da4c",innerInput:"m_f2d85dd2",visibilityToggle:"m_b1072d44"};const iF={visibilityToggleIcon:oF},aF=(e,{size:t})=>({root:{"--psi-icon-size":nt(t,"psi-icon-size"),"--psi-button-size":nt(t,"psi-button-size")}}),fm=we((e,t)=>{const n=le("PasswordInput",iF,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,required:d,error:p,leftSection:h,disabled:g,id:S,variant:y,inputContainer:b,description:C,label:T,size:R,errorProps:m,descriptionProps:v,labelProps:x,withAsterisk:_,inputWrapperOrder:k,wrapperProps:D,radius:M,rightSection:P,rightSectionWidth:L,rightSectionPointerEvents:O,leftSectionWidth:V,visible:H,defaultVisible:q,onVisibilityChange:N,visibilityToggleIcon:B,visibilityToggleButtonProps:$,rightSectionProps:F,leftSectionProps:z,leftSectionPointerEvents:U,withErrorStyles:G,mod:te,...ne}=n,Q=Cs(S),[se,X]=gn({value:H,defaultValue:q,finalValue:!1,onChange:N}),oe=()=>X(!se),K=Oe({name:"PasswordInput",classes:vw,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:aF}),{resolvedClassNames:Z,resolvedStyles:fe}=Br({classNames:r,styles:a,props:n}),{styleProps:xe,rest:ye}=_c(ne),Ee=B,Be=u.jsx(tt,{...K("visibilityToggle"),disabled:g,radius:M,"aria-hidden":!$,tabIndex:-1,...$,variant:($==null?void 0:$.variant)??"subtle",color:"gray",unstyled:c,onTouchEnd:et=>{var pe;et.preventDefault(),(pe=$==null?void 0:$.onTouchEnd)==null||pe.call($,et),oe()},onMouseDown:et=>{var pe;et.preventDefault(),(pe=$==null?void 0:$.onMouseDown)==null||pe.call($,et),oe()},onKeyDown:et=>{var pe;(pe=$==null?void 0:$.onKeyDown)==null||pe.call($,et),et.key===" "&&(et.preventDefault(),oe())},children:u.jsx(Ee,{reveal:se})});return u.jsx(Dt.Wrapper,{required:d,id:Q,label:T,error:p,description:C,size:R,classNames:Z,styles:fe,__staticSelector:"PasswordInput",errorProps:m,descriptionProps:v,unstyled:c,withAsterisk:_,inputWrapperOrder:k,inputContainer:b,variant:y,labelProps:{...x,htmlFor:Q},mod:te,...K("root"),...xe,...D,children:u.jsx(Dt,{component:"div",error:p,leftSection:h,size:R,classNames:{...Z,input:ln(vw.input,Z.input)},styles:fe,radius:M,disabled:g,__staticSelector:"PasswordInput",rightSectionWidth:L,rightSection:P??Be,variant:y,unstyled:c,leftSectionWidth:V,rightSectionPointerEvents:O||"all",rightSectionProps:F,leftSectionProps:z,leftSectionPointerEvents:U,withAria:!1,withErrorStyles:G,children:u.jsx("input",{required:d,"data-invalid":!!p||void 0,"data-with-left-section":!!h||void 0,...K("innerInput"),disabled:g,id:Q,ref:t,...ye,autoComplete:ye.autoComplete||"off",type:se?"text":"password"})})})});fm.classes={...dr.classes,...vw};fm.displayName="@mantine/core/PasswordInput";const cF={duration:100,transition:"fade"};function lF(e,t){return{...cF,...t,...e}}function dF({offset:e,position:t,defaultOpened:n}){const[r,s]=I.useState(n),o=I.useRef(null),{x:a,y:c,elements:f,refs:d,update:p,placement:h}=x0({placement:t,middleware:[y0({crossAxis:!0,padding:5,rootBoundary:"document"})]}),g=h.includes("right")?e:t.includes("left")?e*-1:0,S=h.includes("bottom")?e:t.includes("top")?e*-1:0,y=I.useCallback(({clientX:b,clientY:C})=>{d.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:b,y:C,left:b+g,top:C+S,right:b,bottom:C}}})},[f.reference]);return I.useEffect(()=>{if(d.floating.current){const b=o.current;b.addEventListener("mousemove",y);const C=co(d.floating.current);return C.forEach(T=>{T.addEventListener("scroll",p)}),()=>{b.removeEventListener("mousemove",y),C.forEach(T=>{T.removeEventListener("scroll",p)})}}},[f.reference,d.floating.current,p,y,r]),{handleMouseMove:y,x:a,y:c,opened:r,setOpened:s,boundaryRef:o,floating:d.setFloating}}var pm={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const uF={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:lr("popover")},fF=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:jt(t),"--tooltip-bg":n?Wt(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),bS=we((e,t)=>{const n=le("TooltipFloating",uF,e),{children:r,refProp:s,withinPortal:o,style:a,className:c,classNames:f,styles:d,unstyled:p,radius:h,color:g,label:S,offset:y,position:b,multiline:C,zIndex:T,disabled:R,defaultOpened:m,variant:v,vars:x,portalProps:_,...k}=n,D=jn(),M=Oe({name:"TooltipFloating",props:n,classes:pm,className:c,style:a,classNames:f,styles:d,unstyled:p,rootSelector:"tooltip",vars:x,varsResolver:fF}),{handleMouseMove:P,x:L,y:O,opened:V,boundaryRef:H,floating:q,setOpened:N}=dF({offset:y,position:b,defaultOpened:m});if(!di(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const B=dn(H,kh(r),t),$=r.props,F=U=>{var G;(G=$.onMouseEnter)==null||G.call($,U),P(U),N(!0)},z=U=>{var G;(G=$.onMouseLeave)==null||G.call($,U),N(!1)};return u.jsxs(u.Fragment,{children:[u.jsx(ua,{..._,withinPortal:o,children:u.jsx(ie,{...k,...M("tooltip",{style:{...l0(a,D),zIndex:T,display:!R&&V?"block":"none",top:(O&&Math.round(O))??"",left:(L&&Math.round(L))??""}}),variant:v,ref:q,mod:{multiline:C},children:S})}),I.cloneElement(r,{...$,[s]:B,onMouseEnter:F,onMouseLeave:z})]})});bS.classes=pm;bS.displayName="@mantine/core/TooltipFloating";const PI=I.createContext(!1),pF=PI.Provider,hF=()=>I.useContext(PI),mF={openDelay:0,closeDelay:0};function xS(e){const{openDelay:t,closeDelay:n,children:r}=le("TooltipGroup",mF,e);return u.jsx(pF,{value:!0,children:u.jsx(u3,{delay:{open:t,close:n},children:r})})}xS.displayName="@mantine/core/TooltipGroup";xS.extend=e=>e;function gF(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function vF(e){const t=gF(e.middlewares),n=[YE(e.offset)];return t.shift&&n.push(y0(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?ih():ih(t.flip)),n.push(XE({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?ed():ed(t.inline)):e.inline&&n.push(ed()),n}function yF(e){var _,k,D;const[t,n]=I.useState(e.defaultOpened),s=typeof e.opened=="boolean"?e.opened:t,o=hF(),a=Cs(),c=I.useCallback(M=>{n(M),M&&R(a)},[a]),{x:f,y:d,context:p,refs:h,update:g,placement:S,middlewareData:{arrow:{x:y,y:b}={}}}=x0({strategy:e.strategy,placement:e.position,open:s,onOpenChange:c,middleware:vF(e)}),{delay:C,currentId:T,setCurrentId:R}=f3(p,{id:a}),{getReferenceProps:m,getFloatingProps:v}=w3([l3(p,{enabled:(_=e.events)==null?void 0:_.hover,delay:o?C:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((k=e.events)!=null&&k.touch)}),y3(p,{enabled:(D=e.events)==null?void 0:D.focus,visibleOnly:!0}),b3(p,{role:"tooltip"}),g3(p,{enabled:typeof e.opened>"u"})]);xk({opened:s,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:h,update:g}}),zn(()=>{var M;(M=e.onPositionChange)==null||M.call(e,S)},[S]);const x=s&&T&&T!==a;return{x:f,y:d,arrowX:y,arrowY:b,reference:h.setReference,floating:h.setFloating,getFloatingProps:v,getReferenceProps:m,isGroupPhase:x,opened:s,placement:S}}const E_={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:lr("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},wF=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:jt(t),"--tooltip-bg":n?Wt(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),kt=we((e,t)=>{const n=le("Tooltip",E_,e),{children:r,position:s,refProp:o,label:a,openDelay:c,closeDelay:f,onPositionChange:d,opened:p,defaultOpened:h,withinPortal:g,radius:S,color:y,classNames:b,styles:C,unstyled:T,style:R,className:m,withArrow:v,arrowSize:x,arrowOffset:_,arrowRadius:k,arrowPosition:D,offset:M,transitionProps:P,multiline:L,events:O,zIndex:V,disabled:H,positionDependencies:q,onClick:N,onMouseEnter:B,onMouseLeave:$,inline:F,variant:z,keepMounted:U,vars:G,portalProps:te,mod:ne,floatingStrategy:Q,middlewares:se,...X}=le("Tooltip",E_,n),{dir:oe}=wo(),K=I.useRef(null),Z=yF({position:mk(oe,s),closeDelay:f,openDelay:c,onPositionChange:d,opened:p,defaultOpened:h,events:O,arrowRef:K,arrowOffset:_,offset:typeof M=="number"?M+(v?x/2:0):M,positionDependencies:[...q,r],inline:F,strategy:Q,middlewares:se}),fe=Oe({name:"Tooltip",props:n,classes:pm,className:m,style:R,classNames:b,styles:C,unstyled:T,rootSelector:"tooltip",vars:G,varsResolver:wF});if(!di(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const xe=dn(Z.reference,kh(r),t),ye=lF(P,{duration:100,transition:"fade"}),Ee=r.props;return u.jsxs(u.Fragment,{children:[u.jsx(ua,{...te,withinPortal:g,children:u.jsx(So,{...ye,keepMounted:U,mounted:!H&&!!Z.opened,duration:Z.isGroupPhase?10:ye.duration,children:Be=>u.jsxs(ie,{...X,"data-fixed":Q==="fixed"||void 0,variant:z,mod:[{multiline:L},ne],...Z.getFloatingProps({ref:Z.floating,className:fe("tooltip").className,style:{...fe("tooltip").style,...Be,zIndex:V,top:Z.y??0,left:Z.x??0}}),children:[a,u.jsx(E0,{ref:K,arrowX:Z.arrowX,arrowY:Z.arrowY,visible:v,position:Z.placement,arrowSize:x,arrowOffset:_,arrowRadius:k,arrowPosition:D,...fe("arrow")})]})})}),I.cloneElement(r,Z.getReferenceProps({onClick:N,onMouseEnter:B,onMouseLeave:$,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:ln(m,Ee.className),...Ee,[o]:xe}))]})});kt.classes=pm;kt.displayName="@mantine/core/Tooltip";kt.Floating=bS;kt.Group=xS;const SF={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},rr=we((e,t)=>{const n=le("Select",SF,e),{classNames:r,styles:s,unstyled:o,vars:a,dropdownOpened:c,defaultDropdownOpened:f,onDropdownClose:d,onDropdownOpen:p,onFocus:h,onBlur:g,onClick:S,onChange:y,data:b,value:C,defaultValue:T,selectFirstOptionOnChange:R,onOptionSubmit:m,comboboxProps:v,readOnly:x,disabled:_,filter:k,limit:D,withScrollArea:M,maxDropdownHeight:P,size:L,searchable:O,rightSection:V,checkIconPosition:H,withCheckIcon:q,nothingFoundMessage:N,name:B,form:$,searchValue:F,defaultSearchValue:z,onSearchChange:U,allowDeselect:G,error:te,rightSectionPointerEvents:ne,id:Q,clearable:se,clearButtonProps:X,hiddenInputProps:oe,renderOption:K,onClear:Z,autoComplete:fe,scrollAreaProps:xe,__defaultRightSection:ye,__clearSection:Ee,__clearable:Be,chevronColor:et,...pe}=n,_e=I.useMemo(()=>A4(b),[b]),je=I.useMemo(()=>Ok(_e),[_e]),Ue=Cs(Q),[Je,Ze,Fe]=gn({value:C,defaultValue:T,finalValue:null,onChange:y}),be=typeof Je=="string"?je[Je]:void 0,Ve=AL(be),[He,Ye]=gn({value:F,defaultValue:z,finalValue:be?be.label:"",onChange:U}),Le=Uk({opened:c,defaultOpened:f,onDropdownOpen:()=>{p==null||p(),Le.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{d==null||d(),Le.resetSelectedOption()}}),{resolvedClassNames:ct,resolvedStyles:vt}=Br({props:n,styles:s,classNames:r});I.useEffect(()=>{R&&Le.selectFirstOption()},[R,Je]),I.useEffect(()=>{C===null&&Ye(""),typeof C=="string"&&be&&((Ve==null?void 0:Ve.value)!==be.value||(Ve==null?void 0:Ve.label)!==be.label)&&Ye(be.label)},[C,be]);const ut=u.jsx(It.ClearButton,{...X,onClear:()=>{Ze(null,null),Ye(""),Z==null||Z()}}),pt=se&&!!Je&&!_&&!x;return u.jsxs(u.Fragment,{children:[u.jsxs(It,{store:Le,__staticSelector:"Select",classNames:ct,styles:vt,unstyled:o,readOnly:x,onOptionSubmit:Ge=>{m==null||m(Ge);const bt=G&&je[Ge].value===Je?null:je[Ge],pr=bt?bt.value:null;pr!==Je&&Ze(pr,bt),!Fe&&Ye(typeof pr=="string"&&(bt==null?void 0:bt.label)||""),Le.closeDropdown()},size:L,...v,children:[u.jsx(It.Target,{targetType:O?"input":"button",autoComplete:fe,children:u.jsx(dr,{id:Ue,ref:t,__defaultRightSection:u.jsx(It.Chevron,{size:L,error:te,unstyled:o,color:et}),__clearSection:ut,__clearable:pt,rightSection:V,rightSectionPointerEvents:ne||(pt?"all":"none"),...pe,size:L,__staticSelector:"Select",disabled:_,readOnly:x||!O,value:He,onChange:Ge=>{Ye(Ge.currentTarget.value),Le.openDropdown(),R&&Le.selectFirstOption()},onFocus:Ge=>{O&&Le.openDropdown(),h==null||h(Ge)},onBlur:Ge=>{var bt;O&&Le.closeDropdown(),Ye(Je!=null&&((bt=je[Je])==null?void 0:bt.label)||""),g==null||g(Ge)},onClick:Ge=>{O?Le.openDropdown():Le.toggleDropdown(),S==null||S(Ge)},classNames:ct,styles:vt,unstyled:o,pointer:!O,error:te})}),u.jsx(g5,{data:_e,hidden:x||_,filter:k,search:He,limit:D,hiddenWhenEmpty:!N,withScrollArea:M,maxDropdownHeight:P,filterOptions:O&&(be==null?void 0:be.label)!==He,value:Je,checkIconPosition:H,withCheckIcon:q,nothingFoundMessage:N,unstyled:o,labelId:pe.label?`${Ue}-label`:void 0,"aria-label":pe.label?void 0:pe["aria-label"],renderOption:K,scrollAreaProps:xe})]}),u.jsx(It.HiddenInput,{value:Je,name:B,form:$,disabled:_,...oe})]})});rr.classes={...dr.classes,...It.classes};rr.displayName="@mantine/core/Select";function bF({spacing:e,verticalSpacing:t,cols:n,selector:r}){var p;const s=jn(),o=t===void 0?e:t,a=li({"--sg-spacing-x":Nt(Fs(e)),"--sg-spacing-y":Nt(Fs(o)),"--sg-cols":(p=Fs(n))==null?void 0:p.toString()}),c=xn(s.breakpoints).reduce((h,g)=>(h[g]||(h[g]={}),typeof e=="object"&&e[g]!==void 0&&(h[g]["--sg-spacing-x"]=Nt(e[g])),typeof o=="object"&&o[g]!==void 0&&(h[g]["--sg-spacing-y"]=Nt(o[g])),typeof n=="object"&&n[g]!==void 0&&(h[g]["--sg-cols"]=n[g]),h),{}),d=vE(xn(c),s.breakpoints).filter(h=>xn(c[h.value]).length>0).map(h=>({query:`(min-width: ${s.breakpoints[h.value]})`,styles:c[h.value]}));return u.jsx(Cc,{styles:a,media:d,selector:r})}function yy(e){return typeof e=="object"&&e!==null?xn(e):[]}function xF(e){return e.sort((t,n)=>oa(t)-oa(n))}function CF({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...yy(e),...yy(t),...yy(n)]));return xF(r)}function _F({spacing:e,verticalSpacing:t,cols:n,selector:r}){var d;const s=t===void 0?e:t,o=li({"--sg-spacing-x":Nt(Fs(e)),"--sg-spacing-y":Nt(Fs(s)),"--sg-cols":(d=Fs(n))==null?void 0:d.toString()}),a=CF({spacing:e,verticalSpacing:t,cols:n}),c=a.reduce((p,h)=>(p[h]||(p[h]={}),typeof e=="object"&&e[h]!==void 0&&(p[h]["--sg-spacing-x"]=Nt(e[h])),typeof s=="object"&&s[h]!==void 0&&(p[h]["--sg-spacing-y"]=Nt(s[h])),typeof n=="object"&&n[h]!==void 0&&(p[h]["--sg-cols"]=n[h]),p),{}),f=a.map(p=>({query:`simple-grid (min-width: ${p})`,styles:c[p]}));return u.jsx(Cc,{styles:o,container:f,selector:r})}var MI={container:"m_925c2d2c",root:"m_2415a157"};const RF={cols:1,spacing:"md",type:"media"},hm=we((e,t)=>{const n=le("SimpleGrid",RF,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,cols:d,verticalSpacing:p,spacing:h,type:g,...S}=n,y=Oe({name:"SimpleGrid",classes:MI,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f}),b=Dh();return g==="container"?u.jsxs(u.Fragment,{children:[u.jsx(_F,{...n,selector:`.${b}`}),u.jsx("div",{...y("container"),children:u.jsx(ie,{ref:t,...y("root",{className:b}),...S})})]}):u.jsxs(u.Fragment,{children:[u.jsx(bF,{...n,selector:`.${b}`}),u.jsx(ie,{ref:t,...y("root",{className:b}),...S})]})});hm.classes=MI;hm.displayName="@mantine/core/SimpleGrid";var NI={root:"m_18320242","skeleton-fade":"m_299c329c"};const TF={visible:!0,animate:!0},EF=(e,{width:t,height:n,radius:r,circle:s})=>({root:{"--skeleton-height":he(n),"--skeleton-width":he(s?n:t),"--skeleton-radius":s?"1000px":r===void 0?void 0:jt(r)}}),mm=we((e,t)=>{const n=le("Skeleton",TF,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,width:d,height:p,circle:h,visible:g,radius:S,animate:y,mod:b,...C}=n,T=Oe({name:"Skeleton",classes:NI,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:EF});return u.jsx(ie,{ref:t,...T("root"),mod:[{visible:g,animate:y},b],...C})});mm.classes=NI;mm.displayName="@mantine/core/Skeleton";const[kF,gm]=cr("SliderProvider was not found in tree"),LI=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:s,radius:o,...a},c)=>{const{getStyles:f}=gm();return u.jsx(ie,{tabIndex:-1,variant:n,size:e,ref:c,...f("root"),...a})});LI.displayName="@mantine/core/SliderRoot";const OI=I.forwardRef(({max:e,min:t,value:n,position:r,label:s,dragging:o,onMouseDown:a,onKeyDownCapture:c,labelTransitionProps:f,labelAlwaysOn:d,thumbLabel:p,onFocus:h,onBlur:g,showLabelOnHover:S,isHovered:y,children:b=null,disabled:C},T)=>{const{getStyles:R}=gm(),[m,v]=I.useState(!1),x=d||o||m||S&&y;return u.jsxs(ie,{tabIndex:0,role:"slider","aria-label":p,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:T,__vars:{"--slider-thumb-offset":`${r}%`},...R("thumb",{focusable:!0}),mod:{dragging:o,disabled:C},onFocus:_=>{v(!0),typeof h=="function"&&h(_)},onBlur:_=>{v(!1),typeof g=="function"&&g(_)},onTouchStart:a,onMouseDown:a,onKeyDownCapture:c,onClick:_=>_.stopPropagation(),children:[b,u.jsx(So,{mounted:s!=null&&!!x,transition:"fade",duration:0,...f,children:_=>u.jsx("div",{...R("label",{style:_}),children:s})})]})});OI.displayName="@mantine/core/SliderThumb";function AI({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function IF({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function $I({marks:e,min:t,max:n,disabled:r,value:s,offset:o,inverted:a}){const{getStyles:c}=gm();if(!e)return null;const f=e.map((d,p)=>I.createElement(ie,{...c("markWrapper"),__vars:{"--mark-offset":`${AI({value:d.value,min:t,max:n})}%`},key:p},u.jsx(ie,{...c("mark"),mod:{filled:IF({mark:d,value:s,offset:o,inverted:a}),disabled:r}}),d.label&&u.jsx("div",{...c("markLabel"),children:d.label})));return u.jsx("div",{children:f})}$I.displayName="@mantine/core/SliderMarks";function FI({filled:e,children:t,offset:n,disabled:r,marksOffset:s,inverted:o,containerProps:a,...c}){const{getStyles:f}=gm();return u.jsx(ie,{...f("trackContainer"),mod:{disabled:r},...a,children:u.jsxs(ie,{...f("track"),mod:{inverted:o,disabled:r},children:[u.jsx(ie,{mod:{inverted:o,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...f("bar")}),t,u.jsx($I,{...c,offset:s,disabled:r,inverted:o})]})})}FI.displayName="@mantine/core/SliderTrack";function DF({value:e,containerWidth:t,min:n,max:r,step:s,precision:o}){const c=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),f=(c!==0?Math.round(c/s)*s:0)+n,d=Math.max(f,n);return o!==void 0?Number(d.toFixed(o)):d}function pf(e,t){return parseFloat(e.toFixed(t))}function jF(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function wy(e,t){const r=[...t].sort((s,o)=>s.value-o.value).find(s=>s.value>e);return r?r.value:e}function Sy(e,t){const r=[...t].sort((s,o)=>o.value-s.value).find(s=>s.value<e);return r?r.value:e}function k_(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function I_(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var zI={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const PF={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},MF=(e,{size:t,color:n,thumbSize:r,radius:s})=>({root:{"--slider-size":nt(t,"slider-size"),"--slider-color":n?Wt(n,e):void 0,"--slider-radius":s===void 0?void 0:jt(s),"--slider-thumb-size":r!==void 0?he(r):"calc(var(--slider-size) * 2)"}}),lo=we((e,t)=>{const n=le("Slider",PF,e),{classNames:r,styles:s,value:o,onChange:a,onChangeEnd:c,size:f,min:d,max:p,step:h,precision:g,defaultValue:S,name:y,marks:b,label:C,labelTransitionProps:T,labelAlwaysOn:R,thumbLabel:m,showLabelOnHover:v,thumbChildren:x,disabled:_,unstyled:k,scale:D,inverted:M,className:P,style:L,vars:O,hiddenInputProps:V,restrictToMarks:H,thumbProps:q,...N}=n,B=Oe({name:"Slider",props:n,classes:zI,classNames:r,className:P,styles:s,style:L,vars:O,varsResolver:MF,unstyled:k}),{dir:$}=wo(),[F,z]=I.useState(!1),[U,G]=gn({value:typeof o=="number"?br(o,d,p):o,defaultValue:typeof S=="number"?br(S,d,p):S,finalValue:br(0,d,p),onChange:a}),te=I.useRef(U),ne=I.useRef(null),Q=I.useRef(null),se=AI({value:U,min:d,max:p}),X=D(U),oe=typeof C=="function"?C(X):C,K=g??jF(h),Z=I.useCallback(({x:Ee})=>{if(!_){const Be=DF({value:Ee,min:d,max:p,step:h,precision:K});G(H&&(b!=null&&b.length)?IC(Be,b.map(et=>et.value)):Be),te.current=Be}},[_,d,p,h,K,G,b,H]),{ref:fe,active:xe}=r0(Z,{onScrubEnd:()=>!_&&(c==null?void 0:c(H&&(b!=null&&b.length)?IC(te.current,b.map(Ee=>Ee.value)):te.current))},$),ye=Ee=>{var Be,et,pe,_e,je,Ue;if(!_)switch(Ee.key){case"ArrowUp":{if(Ee.preventDefault(),(Be=Q.current)==null||Be.focus(),H&&b){const Ze=wy(U,b);G(Ze),c==null||c(Ze);break}const Je=pf(Math.min(Math.max(U+h,d),p),K);G(Je),c==null||c(Je);break}case"ArrowRight":{if(Ee.preventDefault(),(et=Q.current)==null||et.focus(),H&&b){const Ze=$==="rtl"?Sy(U,b):wy(U,b);G(Ze),c==null||c(Ze);break}const Je=pf(Math.min(Math.max($==="rtl"?U-h:U+h,d),p),K);G(Je),c==null||c(Je);break}case"ArrowDown":{if(Ee.preventDefault(),(pe=Q.current)==null||pe.focus(),H&&b){const Ze=Sy(U,b);G(Ze),c==null||c(Ze);break}const Je=pf(Math.min(Math.max(U-h,d),p),K);G(Je),c==null||c(Je);break}case"ArrowLeft":{if(Ee.preventDefault(),(_e=Q.current)==null||_e.focus(),H&&b){const Ze=$==="rtl"?wy(U,b):Sy(U,b);G(Ze),c==null||c(Ze);break}const Je=pf(Math.min(Math.max($==="rtl"?U+h:U-h,d),p),K);G(Je),c==null||c(Je);break}case"Home":{if(Ee.preventDefault(),(je=Q.current)==null||je.focus(),H&&b){G(k_(b)),c==null||c(k_(b));break}G(d),c==null||c(d);break}case"End":{if(Ee.preventDefault(),(Ue=Q.current)==null||Ue.focus(),H&&b){G(I_(b)),c==null||c(I_(b));break}G(p),c==null||c(p);break}}};return u.jsx(kF,{value:{getStyles:B},children:u.jsxs(LI,{...N,ref:dn(t,ne),onKeyDownCapture:ye,onMouseDownCapture:()=>{var Ee;return(Ee=ne.current)==null?void 0:Ee.focus()},size:f,disabled:_,children:[u.jsx(FI,{inverted:M,offset:0,filled:se,marks:b,min:d,max:p,value:X,disabled:_,containerProps:{ref:fe,onMouseEnter:v?()=>z(!0):void 0,onMouseLeave:v?()=>z(!1):void 0},children:u.jsx(OI,{max:p,min:d,value:X,position:se,dragging:xe,label:oe,ref:Q,labelTransitionProps:T,labelAlwaysOn:R,thumbLabel:m,showLabelOnHover:v,isHovered:F,disabled:_,...q,children:x})}),u.jsx("input",{type:"hidden",name:y,value:X,...V})]})})});lo.classes=zI;lo.displayName="@mantine/core/Slider";var BI={root:"m_6d731127"};const NF={gap:"md",align:"stretch",justify:"flex-start"},LF=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Nt(t),"--stack-align":n,"--stack-justify":r}}),ge=we((e,t)=>{const n=le("Stack",NF,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,align:d,justify:p,gap:h,variant:g,...S}=n,y=Oe({name:"Stack",props:n,classes:BI,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:LF});return u.jsx(ie,{ref:t,...y("root"),variant:g,...S})});ge.classes=BI;ge.displayName="@mantine/core/Stack";const UI=I.createContext(null),OF=UI.Provider,AF=()=>I.useContext(UI),$F={},CS=we((e,t)=>{const{value:n,defaultValue:r,onChange:s,size:o,wrapperProps:a,children:c,readOnly:f,...d}=le("SwitchGroup",$F,e),[p,h]=gn({value:n,defaultValue:r,finalValue:[],onChange:s}),g=S=>{const y=S.currentTarget.value;!f&&h(p.includes(y)?p.filter(b=>b!==y):[...p,y])};return u.jsx(OF,{value:{value:p,onChange:g,size:o},children:u.jsx(Dt.Wrapper,{size:o,ref:t,...a,...d,labelElement:"div",__staticSelector:"SwitchGroup",children:u.jsx(Kk,{role:"group",children:c})})})});CS.classes=Dt.Wrapper.classes;CS.displayName="@mantine/core/SwitchGroup";var VI={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const FF={labelPosition:"right"},zF=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:jt(t),"--switch-height":nt(r,"switch-height"),"--switch-width":nt(r,"switch-width"),"--switch-thumb-size":nt(r,"switch-thumb-size"),"--switch-label-font-size":nt(r,"switch-label-font-size"),"--switch-track-label-padding":nt(r,"switch-track-label-padding"),"--switch-color":n?Wt(n,e):void 0}}),rn=we((e,t)=>{const n=le("Switch",FF,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,color:d,label:p,offLabel:h,onLabel:g,id:S,size:y,radius:b,wrapperProps:C,thumbIcon:T,checked:R,defaultChecked:m,onChange:v,labelPosition:x,description:_,error:k,disabled:D,variant:M,rootRef:P,mod:L,...O}=n,V=AF(),H=y||(V==null?void 0:V.size),q=Oe({name:"Switch",props:n,classes:VI,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:zF}),{styleProps:N,rest:B}=_c(O),$=Cs(S),F=V?{checked:V.value.includes(B.value),onChange:V.onChange}:{},[z,U]=gn({value:F.checked??R,defaultValue:m,finalValue:!1});return u.jsxs(Q0,{...q("root"),__staticSelector:"Switch",__stylesApiProps:n,id:$,size:H,labelPosition:x,label:p,description:_,error:k,disabled:D,bodyElement:"label",labelElement:"span",classNames:r,styles:a,unstyled:c,"data-checked":F.checked||R||void 0,variant:M,ref:P,mod:L,...N,...C,children:[u.jsx("input",{...B,disabled:D,checked:z,"data-checked":F.checked||R||void 0,onChange:G=>{var te;V?(te=F.onChange)==null||te.call(F,G):v==null||v(G),U(G.currentTarget.checked)},id:$,ref:t,type:"checkbox",role:"switch",...q("input")}),u.jsxs(ie,{"aria-hidden":"true",mod:{error:k,"label-position":x,"without-labels":!g&&!h},...q("track"),children:[u.jsx(ie,{component:"span",mod:"reduce-motion",...q("thumb"),children:T}),u.jsx("span",{...q("trackLabel"),children:z?g:h})]})]})});rn.classes={...VI,...Hk};rn.displayName="@mantine/core/Switch";rn.Group=CS;const[BF,UF]=cr("Table component was not found in the tree");var Nd={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function VF(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function ga(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=we((s,o)=>{const a=le(n,{},s),{classNames:c,className:f,style:d,styles:p,...h}=a,g=UF();return u.jsx(ie,{component:e,ref:o,...VF(g,t),...g.getStyles(e,{className:f,classNames:c,style:d,styles:p,props:a}),...h})});return r.displayName=`@mantine/core/${n}`,r.classes=Nd,r}const yw=ga("th",{columnBorder:!0}),HI=ga("td",{columnBorder:!0}),Lf=ga("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),WI=ga("thead",{stickyHeader:!0}),qI=ga("tbody"),GI=ga("tfoot"),KI=ga("caption",{captionSide:!0});function _S({data:e}){return u.jsxs(u.Fragment,{children:[e.caption&&u.jsx(KI,{children:e.caption}),e.head&&u.jsx(WI,{children:u.jsx(Lf,{children:e.head.map((t,n)=>u.jsx(yw,{children:t},n))})}),e.body&&u.jsx(qI,{children:e.body.map((t,n)=>u.jsx(Lf,{children:t.map((r,s)=>u.jsx(HI,{children:r},s))},n))}),e.foot&&u.jsx(GI,{children:u.jsx(Lf,{children:e.foot.map((t,n)=>u.jsx(yw,{children:t},n))})})]})}_S.displayName="@mantine/core/TableDataRenderer";const HF={type:"scrollarea"},WF=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":he(t),"--table-overflow":n==="native"?"auto":void 0}}),RS=we((e,t)=>{const n=le("TableScrollContainer",HF,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,children:d,minWidth:p,type:h,...g}=n,S=Oe({name:"TableScrollContainer",classes:Nd,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:WF,rootSelector:"scrollContainer"});return u.jsx(ie,{component:h==="scrollarea"?Pt:"div",...h==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...S("scrollContainer"),...g,children:u.jsx("div",{...S("scrollContainerInner"),children:d})})});RS.classes=Nd;RS.displayName="@mantine/core/TableScrollContainer";const qF={withRowBorders:!0,verticalSpacing:7},GF=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:s,borderColor:o,stripedColor:a,highlightOnHoverColor:c,striped:f,highlightOnHover:d,stickyHeaderOffset:p,stickyHeader:h})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Nt(r),"--table-vertical-spacing":Nt(s),"--table-border-color":o?Wt(o,e):void 0,"--table-striped-color":f&&a?Wt(a,e):void 0,"--table-highlight-on-hover-color":d&&c?Wt(c,e):void 0,"--table-sticky-header-offset":h?he(p):void 0}}),mt=we((e,t)=>{const n=le("Table",qF,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,horizontalSpacing:d,verticalSpacing:p,captionSide:h,stripedColor:g,highlightOnHoverColor:S,striped:y,highlightOnHover:b,withColumnBorders:C,withRowBorders:T,withTableBorder:R,borderColor:m,layout:v,variant:x,data:_,children:k,stickyHeader:D,stickyHeaderOffset:M,mod:P,tabularNums:L,...O}=n,V=Oe({name:"Table",props:n,className:s,style:o,classes:Nd,classNames:r,styles:a,unstyled:c,rootSelector:"table",vars:f,varsResolver:GF});return u.jsx(BF,{value:{getStyles:V,stickyHeader:D,striped:y===!0?"odd":y||void 0,highlightOnHover:b,withColumnBorders:C,withRowBorders:T,captionSide:h||"bottom"},children:u.jsx(ie,{component:"table",variant:x,ref:t,mod:[{"data-with-table-border":R,"data-tabular-nums":L},P],...V("table"),...O,children:k||!!_&&u.jsx(_S,{data:_})})})});mt.classes=Nd;mt.displayName="@mantine/core/Table";mt.Td=HI;mt.Th=yw;mt.Tr=Lf;mt.Thead=WI;mt.Tbody=qI;mt.Tfoot=GI;mt.Caption=KI;mt.ScrollContainer=RS;mt.DataRenderer=_S;const[KF,TS]=cr("Tabs component was not found in the tree");var Ld={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const YF={},ES=we((e,t)=>{const n=le("TabsList",YF,e),{children:r,className:s,grow:o,justify:a,classNames:c,styles:f,style:d,mod:p,...h}=n,g=TS();return u.jsx(ie,{...h,...g.getStyles("list",{className:s,style:d,classNames:c,styles:f,props:n,variant:g.variant}),ref:t,role:"tablist",variant:g.variant,mod:[{grow:o,orientation:g.orientation,placement:g.orientation==="vertical"&&g.placement,inverted:g.inverted},p],"aria-orientation":g.orientation,__vars:{"--tabs-justify":a},children:r})});ES.classes=Ld;ES.displayName="@mantine/core/TabsList";const XF={},kS=we((e,t)=>{const n=le("TabsPanel",XF,e),{children:r,className:s,value:o,classNames:a,styles:c,style:f,mod:d,keepMounted:p,...h}=n,g=TS(),S=g.value===o,y=g.keepMounted||p||S?r:null;return u.jsx(ie,{...h,...g.getStyles("panel",{className:s,classNames:a,styles:c,style:[f,S?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:g.orientation},d],role:"tabpanel",id:g.getPanelId(o),"aria-labelledby":g.getTabId(o),children:y})});kS.classes=Ld;kS.displayName="@mantine/core/TabsPanel";const QF={},IS=we((e,t)=>{const n=le("TabsTab",QF,e),{className:r,children:s,rightSection:o,leftSection:a,value:c,onClick:f,onKeyDown:d,disabled:p,color:h,style:g,classNames:S,styles:y,vars:b,mod:C,tabIndex:T,...R}=n,m=jn(),{dir:v}=wo(),x=TS(),_=c===x.value,k=M=>{x.onChange(x.allowTabDeactivation&&c===x.value?null:c),f==null||f(M)},D={classNames:S,styles:y,props:n};return u.jsxs(on,{...R,...x.getStyles("tab",{className:r,style:g,variant:x.variant,...D}),disabled:p,unstyled:x.unstyled,variant:x.variant,mod:[{active:_,disabled:p,orientation:x.orientation,inverted:x.inverted,placement:x.orientation==="vertical"&&x.placement},C],ref:t,role:"tab",id:x.getTabId(c),"aria-selected":_,tabIndex:T!==void 0?T:_||x.value===null?0:-1,"aria-controls":x.getPanelId(c),onClick:k,__vars:{"--tabs-color":h?Wt(h,m):void 0},onKeyDown:gE({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:x.activateTabWithKeyboard,loop:x.loop,orientation:x.orientation||"horizontal",dir:v,onKeyDown:d}),children:[a&&u.jsx("span",{...x.getStyles("tabSection",D),"data-position":"left",children:a}),s&&u.jsx("span",{...x.getStyles("tabLabel",D),children:s}),o&&u.jsx("span",{...x.getStyles("tabSection",D),"data-position":"right",children:o})]})});IS.classes=Ld;IS.displayName="@mantine/core/TabsTab";const D_="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",JF={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},ZF=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":jt(t),"--tabs-color":Wt(n,e),"--tabs-text-color":Rd(r,e)?xc({color:n,theme:e,autoContrast:r}):void 0}}),In=we((e,t)=>{const n=le("Tabs",JF,e),{defaultValue:r,value:s,onChange:o,orientation:a,children:c,loop:f,id:d,activateTabWithKeyboard:p,allowTabDeactivation:h,variant:g,color:S,radius:y,inverted:b,placement:C,keepMounted:T,classNames:R,styles:m,unstyled:v,className:x,style:_,vars:k,autoContrast:D,mod:M,...P}=n,L=Cs(d),[O,V]=gn({value:s,defaultValue:r,finalValue:null,onChange:o}),H=Oe({name:"Tabs",props:n,classes:Ld,className:x,style:_,classNames:R,styles:m,unstyled:v,vars:k,varsResolver:ZF});return u.jsx(KF,{value:{placement:C,value:O,orientation:a,id:L,loop:f,activateTabWithKeyboard:p,getTabId:EC(`${L}-tab`,D_),getPanelId:EC(`${L}-panel`,D_),onChange:V,allowTabDeactivation:h,variant:g,color:S,radius:y,inverted:b,keepMounted:T,unstyled:v,getStyles:H},children:u.jsx(ie,{ref:t,id:L,variant:g,mod:[{orientation:a,inverted:a==="horizontal"&&b,placement:a==="vertical"&&C},M],...H("root"),...P,children:c})})});In.classes=Ld;In.displayName="@mantine/core/Tabs";In.Tab=IS;In.Panel=kS;In.List=ES;const e8={},qt=we((e,t)=>{const n=le("TextInput",e8,e);return u.jsx(dr,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});qt.classes=dr.classes;qt.displayName="@mantine/core/TextInput";const t8=["h1","h2","h3","h4","h5","h6"],n8=["xs","sm","md","lg","xl"];function r8(e,t){const n=t!==void 0?t:`h${e}`;return t8.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:n8.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:he(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var YI={root:"m_8a5d1357"};const s8={order:1},o8=(e,{order:t,size:n,lineClamp:r,textWrap:s})=>{const o=r8(t,n);return{root:{"--title-fw":o.fontWeight,"--title-lh":o.lineHeight,"--title-fz":o.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":s}}},Xt=we((e,t)=>{const n=le("Title",s8,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,order:f,vars:d,size:p,variant:h,lineClamp:g,textWrap:S,mod:y,...b}=n,C=Oe({name:"Title",props:n,classes:YI,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:d,varsResolver:o8});return[1,2,3,4,5,6].includes(f)?u.jsx(ie,{...C("root"),component:`h${f}`,variant:h,ref:t,mod:[{order:f,"data-line-clamp":typeof g=="number"},y],size:p,...b}):null});Xt.classes=YI;Xt.displayName="@mantine/core/Title";function i8(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(s){t=typeof s=="function"?s(t):s},setState(s){this.updateState(s),r.forEach(o=>o(t))},initialize(s){n||(t=s,n=!0)},subscribe(s){return r.add(s),()=>r.delete(s)}}}function a8(e){return I.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function c8(e,t,n){const r=[],s=[],o={};for(const a of e){const c=a.position||t;o[c]=o[c]||0,o[c]+=1,o[c]<=n?s.push(a):r.push(a)}return{notifications:s,queue:r}}const l8=()=>i8({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),va=l8(),d8=(e=va)=>a8(e);function Mc(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),s=c8(r,n.defaultPosition,n.limit);e.setState({notifications:s.notifications,queue:s.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function u8(e,t=va){const n=e.id||yE();return Mc(t,r=>e.id&&r.some(s=>s.id===e.id)?r:[...r,{...e,id:n}]),n}function XI(e,t=va){return Mc(t,n=>n.filter(r=>{var s;return r.id===e?((s=r.onClose)==null||s.call(r,r),!1):!0})),e}function f8(e,t=va){return Mc(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function p8(e=va){Mc(e,()=>[])}function h8(e=va){Mc(e,t=>t.slice(0,e.getState().limit))}const sr={show:u8,hide:XI,update:f8,clean:p8,cleanQueue:h8,updateState:Mc};function ww(e,t){return ww=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ww(e,t)}function QI(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ww(e,t)}const j_={disabled:!1},dh=wt.createContext(null);var m8=function(t){return t.scrollTop},ql="unmounted",zi="exited",Bi="entering",sc="entered",Sw="exiting",_o=function(e){QI(t,e);function t(r,s){var o;o=e.call(this,r,s)||this;var a=s,c=a&&!a.isMounting?r.enter:r.appear,f;return o.appearStatus=null,r.in?c?(f=zi,o.appearStatus=Bi):f=sc:r.unmountOnExit||r.mountOnEnter?f=ql:f=zi,o.state={status:f},o.nextCallback=null,o}t.getDerivedStateFromProps=function(s,o){var a=s.in;return a&&o.status===ql?{status:zi}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var o=null;if(s!==this.props){var a=this.state.status;this.props.in?a!==Bi&&a!==sc&&(o=Bi):(a===Bi||a===sc)&&(o=Sw)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,o,a,c;return o=a=c=s,s!=null&&typeof s!="number"&&(o=s.exit,a=s.enter,c=s.appear!==void 0?s.appear:a),{exit:o,enter:a,appear:c}},n.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===Bi){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:Hl.findDOMNode(this);a&&m8(a)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===zi&&this.setState({status:ql})},n.performEnter=function(s){var o=this,a=this.props.enter,c=this.context?this.context.isMounting:s,f=this.props.nodeRef?[c]:[Hl.findDOMNode(this),c],d=f[0],p=f[1],h=this.getTimeouts(),g=c?h.appear:h.enter;if(!s&&!a||j_.disabled){this.safeSetState({status:sc},function(){o.props.onEntered(d)});return}this.props.onEnter(d,p),this.safeSetState({status:Bi},function(){o.props.onEntering(d,p),o.onTransitionEnd(g,function(){o.safeSetState({status:sc},function(){o.props.onEntered(d,p)})})})},n.performExit=function(){var s=this,o=this.props.exit,a=this.getTimeouts(),c=this.props.nodeRef?void 0:Hl.findDOMNode(this);if(!o||j_.disabled){this.safeSetState({status:zi},function(){s.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:Sw},function(){s.props.onExiting(c),s.onTransitionEnd(a.exit,function(){s.safeSetState({status:zi},function(){s.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},n.setNextCallback=function(s){var o=this,a=!0;return this.nextCallback=function(c){a&&(a=!1,o.nextCallback=null,s(c))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(s,o){this.setNextCallback(o);var a=this.props.nodeRef?this.props.nodeRef.current:Hl.findDOMNode(this),c=s==null&&!this.props.addEndListener;if(!a||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],d=f[0],p=f[1];this.props.addEndListener(d,p)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===ql)return null;var o=this.props,a=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var c=pS(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return wt.createElement(dh.Provider,{value:null},typeof a=="function"?a(s,c):wt.cloneElement(wt.Children.only(a),c))},t}(wt.Component);_o.contextType=dh;_o.propTypes={};function Qa(){}_o.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Qa,onEntering:Qa,onEntered:Qa,onExit:Qa,onExiting:Qa,onExited:Qa};_o.UNMOUNTED=ql;_o.EXITED=zi;_o.ENTERING=Bi;_o.ENTERED=sc;_o.EXITING=Sw;function g8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DS(e,t){var n=function(o){return t&&I.isValidElement(o)?t(o):o},r=Object.create(null);return e&&I.Children.map(e,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function v8(e,t){e=e||{},t=t||{};function n(p){return p in t?t[p]:e[p]}var r=Object.create(null),s=[];for(var o in e)o in t?s.length&&(r[o]=s,s=[]):s.push(o);var a,c={};for(var f in t){if(r[f])for(a=0;a<r[f].length;a++){var d=r[f][a];c[r[f][a]]=n(d)}c[f]=n(f)}for(a=0;a<s.length;a++)c[s[a]]=n(s[a]);return c}function Gi(e,t,n){return n[t]!=null?n[t]:e.props[t]}function y8(e,t){return DS(e.children,function(n){return I.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Gi(n,"appear",e),enter:Gi(n,"enter",e),exit:Gi(n,"exit",e)})})}function w8(e,t,n){var r=DS(e.children),s=v8(t,r);return Object.keys(s).forEach(function(o){var a=s[o];if(I.isValidElement(a)){var c=o in t,f=o in r,d=t[o],p=I.isValidElement(d)&&!d.props.in;f&&(!c||p)?s[o]=I.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:Gi(a,"exit",e),enter:Gi(a,"enter",e)}):!f&&c&&!p?s[o]=I.cloneElement(a,{in:!1}):f&&c&&I.isValidElement(d)&&(s[o]=I.cloneElement(a,{onExited:n.bind(null,a),in:d.props.in,exit:Gi(a,"exit",e),enter:Gi(a,"enter",e)}))}}),s}var S8=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},b8={component:"div",childFactory:function(t){return t}},Qo=function(e){QI(t,e);function t(r,s){var o;o=e.call(this,r,s)||this;var a=o.handleExited.bind(g8(o));return o.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},o}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(s,o){var a=o.children,c=o.handleExited,f=o.firstRender;return{children:f?y8(s,c):w8(s,a,c),firstRender:!1}},n.handleExited=function(s,o){var a=DS(this.props.children);s.key in a||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(c){var f=lh({},c.children);return delete f[s.key],{children:f}}))},n.render=function(){var s=this.props,o=s.component,a=s.childFactory,c=pS(s,["component","childFactory"]),f=this.state.contextValue,d=S8(this.state.children).map(a);return delete c.appear,delete c.enter,delete c.exit,o===null?wt.createElement(dh.Provider,{value:f},d):wt.createElement(dh.Provider,{value:f},wt.createElement(o,c,d))},t}(wt.Component);Qo.propTypes={};Qo.defaultProps=b8;const JI=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function x8(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),JI.reduce((n,r)=>(n[r]=[],n),{}))}const P_={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},C8={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function _8({state:e,maxHeight:t,position:n,transitionDuration:r}){const[s,o]=n.split("-"),a=o==="center"?`${s}-center`:o,c={opacity:0,maxHeight:t,transform:P_[a],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},f={opacity:1,transform:C8[a]},d={opacity:0,maxHeight:0,transform:P_[a]};return{...c,...{entering:f,entered:f,exiting:d,exited:d}[e]}}function R8(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const ZI=I.forwardRef(({data:e,onHide:t,autoClose:n,...r},s)=>{const{autoClose:o,message:a,...c}=e,f=R8(n,e.autoClose),d=I.useRef(-1),p=()=>window.clearTimeout(d.current),h=()=>{t(e.id),p()},g=()=>{typeof f=="number"&&(d.current=window.setTimeout(h,f))};return I.useEffect(()=>{var S;(S=e.onOpen)==null||S.call(e,e)},[]),I.useEffect(()=>(g(),p),[f]),u.jsx(ma,{...r,...c,onClose:h,ref:s,onMouseEnter:p,onMouseLeave:g,children:a})});ZI.displayName="@mantine/notifications/NotificationContainer";var eD={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const T8=_o,E8={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:lr("overlay"),store:va,withinPortal:!0},k8=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":he(n)}}),Ro=we((e,t)=>{const n=le("Notifications",E8,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,position:d,autoClose:p,transitionDuration:h,containerWidth:g,notificationMaxHeight:S,limit:y,zIndex:b,store:C,portalProps:T,withinPortal:R,...m}=n,v=jn(),x=d8(C),_=PL(),k=Eh(),D=I.useRef({}),M=I.useRef(0),L=(v.respectReducedMotion?k:!1)?1:h,O=Oe({name:"Notifications",classes:eD,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:k8});I.useEffect(()=>{C==null||C.updateState(q=>({...q,limit:y||5,defaultPosition:d}))},[y,d]),zn(()=>{x.notifications.length>M.current&&setTimeout(()=>_(),0),M.current=x.notifications.length},[x.notifications]);const V=x8(x.notifications,d),H=JI.reduce((q,N)=>(q[N]=V[N].map(({style:B,...$})=>u.jsx(T8,{timeout:L,onEnter:()=>D.current[$.id].offsetHeight,nodeRef:{current:D.current[$.id]},children:F=>u.jsx(ZI,{ref:z=>{D.current[$.id]=z},data:$,onHide:z=>XI(z,C),autoClose:p,...O("notification",{style:{..._8({state:F,position:N,transitionDuration:L,maxHeight:S}),...B}})})},$.id)),q),{});return u.jsxs(ua,{withinPortal:R,...T,children:[u.jsx(ie,{...O("root"),"data-position":"top-center",ref:t,...m,children:u.jsx(Qo,{children:H["top-center"]})}),u.jsx(ie,{...O("root"),"data-position":"top-left",...m,children:u.jsx(Qo,{children:H["top-left"]})}),u.jsx(ie,{...O("root",{className:Zp.classNames.fullWidth}),"data-position":"top-right",...m,children:u.jsx(Qo,{children:H["top-right"]})}),u.jsx(ie,{...O("root",{className:Zp.classNames.fullWidth}),"data-position":"bottom-right",...m,children:u.jsx(Qo,{children:H["bottom-right"]})}),u.jsx(ie,{...O("root"),"data-position":"bottom-left",...m,children:u.jsx(Qo,{children:H["bottom-left"]})}),u.jsx(ie,{...O("root"),"data-position":"bottom-center",...m,children:u.jsx(Qo,{children:H["bottom-center"]})})]})});Ro.classes=eD;Ro.displayName="@mantine/notifications/Notifications";Ro.show=sr.show;Ro.hide=sr.hide;Ro.update=sr.update;Ro.clean=sr.clean;Ro.cleanQueue=sr.cleanQueue;Ro.updateState=sr.updateState;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wd(){return wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wd.apply(this,arguments)}var Zo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Zo||(Zo={}));const M_="popstate";function I8(e){e===void 0&&(e={});function t(s,o){let{pathname:a="/",search:c="",hash:f=""}=ya(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),bw("",{pathname:a,search:c,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let a=s.document.querySelector("base"),c="";if(a&&a.getAttribute("href")){let f=s.location.href,d=f.indexOf("#");c=d===-1?f:f.slice(0,d)}return c+"#"+(typeof o=="string"?o:uh(o))}function r(s,o){vm(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return j8(t,n,r,e)}function cn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function D8(){return Math.random().toString(36).substr(2,8)}function N_(e,t){return{usr:e.state,key:e.key,idx:t}}function bw(e,t,n,r){return n===void 0&&(n=null),wd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ya(t):t,{state:n,key:t&&t.key||r||D8()})}function uh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ya(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function j8(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,c=Zo.Pop,f=null,d=p();d==null&&(d=0,a.replaceState(wd({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function h(){c=Zo.Pop;let C=p(),T=C==null?null:C-d;d=C,f&&f({action:c,location:b.location,delta:T})}function g(C,T){c=Zo.Push;let R=bw(b.location,C,T);n&&n(R,C),d=p()+1;let m=N_(R,d),v=b.createHref(R);try{a.pushState(m,"",v)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(v)}o&&f&&f({action:c,location:b.location,delta:1})}function S(C,T){c=Zo.Replace;let R=bw(b.location,C,T);n&&n(R,C),d=p();let m=N_(R,d),v=b.createHref(R);a.replaceState(m,"",v),o&&f&&f({action:c,location:b.location,delta:0})}function y(C){let T=s.location.origin!=="null"?s.location.origin:s.location.href,R=typeof C=="string"?C:uh(C);return R=R.replace(/ $/,"%20"),cn(T,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,T)}let b={get action(){return c},get location(){return e(s,a)},listen(C){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(M_,h),f=C,()=>{s.removeEventListener(M_,h),f=null}},createHref(C){return t(s,C)},createURL:y,encodeLocation(C){let T=y(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:g,replace:S,go(C){return a.go(C)}};return b}var L_;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(L_||(L_={}));function P8(e,t,n){return n===void 0&&(n="/"),M8(e,t,n)}function M8(e,t,n,r){let s=typeof t=="string"?ya(t):t,o=jS(s.pathname||"/",n);if(o==null)return null;let a=tD(e);N8(a);let c=null;for(let f=0;c==null&&f<a.length;++f){let d=q8(o);c=V8(a[f],d)}return c}function tD(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,c)=>{let f={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};f.relativePath.startsWith("/")&&(cn(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let d=ei([r,f.relativePath]),p=n.concat(f);o.children&&o.children.length>0&&(cn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),tD(o.children,t,p,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:B8(d,o.index),routesMeta:p})};return e.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,a);else for(let f of nD(o.path))s(o,a,f)}),t}function nD(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=nD(r.join("/")),c=[];return c.push(...a.map(f=>f===""?o:[o,f].join("/"))),s&&c.push(...a),c.map(f=>e.startsWith("/")&&f===""?"/":f)}function N8(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:U8(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const L8=/^:[\w-]+$/,O8=3,A8=2,$8=1,F8=10,z8=-2,O_=e=>e==="*";function B8(e,t){let n=e.split("/"),r=n.length;return n.some(O_)&&(r+=z8),t&&(r+=A8),n.filter(s=>!O_(s)).reduce((s,o)=>s+(L8.test(o)?O8:o===""?$8:F8),r)}function U8(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function V8(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let c=0;c<r.length;++c){let f=r[c],d=c===r.length-1,p=o==="/"?t:t.slice(o.length)||"/",h=H8({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},p),g=f.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:ei([o,h.pathname]),pathnameBase:Q8(ei([o,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(o=ei([o,h.pathnameBase]))}return a}function H8(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=W8(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,p,h)=>{let{paramName:g,isOptional:S}=p;if(g==="*"){let b=c[h]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const y=c[h];return S&&!y?d[g]=void 0:d[g]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:e}}function W8(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),vm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,f)=>(r.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function q8(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function jS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const G8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K8=e=>G8.test(e);function Y8(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ya(e):e,o;if(n)if(K8(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),vm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=A_(n.substring(1),"/"):o=A_(n,t)}else o=t;return{pathname:o,search:J8(r),hash:Z8(s)}}function A_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function by(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function X8(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function rD(e,t){let n=X8(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sD(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ya(e):(s=wd({},e),cn(!s.pathname||!s.pathname.includes("?"),by("?","pathname","search",s)),cn(!s.pathname||!s.pathname.includes("#"),by("#","pathname","hash",s)),cn(!s.search||!s.search.includes("#"),by("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,c;if(a==null)c=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),h-=1;s.pathname=g.join("/")}c=h>=0?t[h]:"/"}let f=Y8(s,c),d=a&&a!=="/"&&a.endsWith("/"),p=(o||a===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(d||p)&&(f.pathname+="/"),f}const ei=e=>e.join("/").replace(/\/\/+/g,"/"),Q8=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),J8=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Z8=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ez(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oD=["post","put","patch","delete"];new Set(oD);const tz=["get",...oD];new Set(tz);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sd.apply(this,arguments)}const PS=I.createContext(null),nz=I.createContext(null),wa=I.createContext(null),ym=I.createContext(null),hi=I.createContext({outlet:null,matches:[],isDataRoute:!1}),iD=I.createContext(null);function rz(e,t){let{relative:n}=t===void 0?{}:t;Od()||cn(!1);let{basename:r,navigator:s}=I.useContext(wa),{hash:o,pathname:a,search:c}=cD(e,{relative:n}),f=a;return r!=="/"&&(f=a==="/"?r:ei([r,a])),s.createHref({pathname:f,search:c,hash:o})}function Od(){return I.useContext(ym)!=null}function wm(){return Od()||cn(!1),I.useContext(ym).location}function aD(e){I.useContext(wa).static||I.useLayoutEffect(e)}function Ws(){let{isDataRoute:e}=I.useContext(hi);return e?vz():sz()}function sz(){Od()||cn(!1);let e=I.useContext(PS),{basename:t,future:n,navigator:r}=I.useContext(wa),{matches:s}=I.useContext(hi),{pathname:o}=wm(),a=JSON.stringify(rD(s,n.v7_relativeSplatPath)),c=I.useRef(!1);return aD(()=>{c.current=!0}),I.useCallback(function(d,p){if(p===void 0&&(p={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let h=sD(d,JSON.parse(a),o,p.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:ei([t,h.pathname])),(p.replace?r.replace:r.push)(h,p.state,p)},[t,r,a,o,e])}function oz(){let{matches:e}=I.useContext(hi),t=e[e.length-1];return t?t.params:{}}function cD(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(wa),{matches:s}=I.useContext(hi),{pathname:o}=wm(),a=JSON.stringify(rD(s,r.v7_relativeSplatPath));return I.useMemo(()=>sD(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function iz(e,t){return az(e,t)}function az(e,t,n,r){Od()||cn(!1);let{navigator:s}=I.useContext(wa),{matches:o}=I.useContext(hi),a=o[o.length-1],c=a?a.params:{};a&&a.pathname;let f=a?a.pathnameBase:"/";a&&a.route;let d=wm(),p;if(t){var h;let C=typeof t=="string"?ya(t):t;f==="/"||(h=C.pathname)!=null&&h.startsWith(f)||cn(!1),p=C}else p=d;let g=p.pathname||"/",S=g;if(f!=="/"){let C=f.replace(/^\//,"").split("/");S="/"+g.replace(/^\//,"").split("/").slice(C.length).join("/")}let y=P8(e,{pathname:S}),b=fz(y&&y.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:ei([f,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:ei([f,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,r);return t&&b?I.createElement(ym.Provider,{value:{location:Sd({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Zo.Pop}},b):b}function cz(){let e=gz(),t=ez(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:s},n):null,null)}const lz=I.createElement(cz,null);class dz extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(hi.Provider,{value:this.props.routeContext},I.createElement(iD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uz(e){let{routeContext:t,match:n,children:r}=e,s=I.useContext(PS);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(hi.Provider,{value:t},r)}function fz(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,c=(s=n)==null?void 0:s.errors;if(c!=null){let p=a.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);p>=0||cn(!1),a=a.slice(0,Math.min(a.length,p+1))}let f=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let h=a[p];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=p),h.route.id){let{loaderData:g,errors:S}=n,y=h.route.loader&&g[h.route.id]===void 0&&(!S||S[h.route.id]===void 0);if(h.route.lazy||y){f=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,h,g)=>{let S,y=!1,b=null,C=null;n&&(S=c&&h.route.id?c[h.route.id]:void 0,b=h.route.errorElement||lz,f&&(d<0&&g===0?(yz("route-fallback"),y=!0,C=null):d===g&&(y=!0,C=h.route.hydrateFallbackElement||null)));let T=t.concat(a.slice(0,g+1)),R=()=>{let m;return S?m=b:y?m=C:h.route.Component?m=I.createElement(h.route.Component,null):h.route.element?m=h.route.element:m=p,I.createElement(uz,{match:h,routeContext:{outlet:p,matches:T,isDataRoute:n!=null},children:m})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?I.createElement(dz,{location:n.location,revalidation:n.revalidation,component:b,error:S,children:R(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):R()},null)}var lD=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(lD||{}),dD=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(dD||{});function pz(e){let t=I.useContext(PS);return t||cn(!1),t}function hz(e){let t=I.useContext(nz);return t||cn(!1),t}function mz(e){let t=I.useContext(hi);return t||cn(!1),t}function uD(e){let t=mz(),n=t.matches[t.matches.length-1];return n.route.id||cn(!1),n.route.id}function gz(){var e;let t=I.useContext(iD),n=hz(),r=uD();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function vz(){let{router:e}=pz(lD.UseNavigateStable),t=uD(dD.UseNavigateStable),n=I.useRef(!1);return aD(()=>{n.current=!0}),I.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Sd({fromRouteId:t},o)))},[e,t])}const $_={};function yz(e,t,n){$_[e]||($_[e]=!0)}function wz(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function oc(e){cn(!1)}function Sz(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Zo.Pop,navigator:o,static:a=!1,future:c}=e;Od()&&cn(!1);let f=t.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:f,navigator:o,static:a,future:Sd({v7_relativeSplatPath:!1},c)}),[f,c,o,a]);typeof r=="string"&&(r=ya(r));let{pathname:p="/",search:h="",hash:g="",state:S=null,key:y="default"}=r,b=I.useMemo(()=>{let C=jS(p,f);return C==null?null:{location:{pathname:C,search:h,hash:g,state:S,key:y},navigationType:s}},[f,p,h,g,S,y,s]);return b==null?null:I.createElement(wa.Provider,{value:d},I.createElement(ym.Provider,{children:n,value:b}))}function bz(e){let{children:t,location:n}=e;return iz(xw(t),n)}new Promise(()=>{});function xw(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,s)=>{if(!I.isValidElement(r))return;let o=[...t,s];if(r.type===I.Fragment){n.push.apply(n,xw(r.props.children,o));return}r.type!==oc&&cn(!1),!r.props.index||!r.props.children||cn(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=xw(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cw.apply(this,arguments)}function xz(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Cz(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function _z(e,t){return e.button===0&&(!t||t==="_self")&&!Cz(e)}const Rz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Tz="6";try{window.__reactRouterVersion=Tz}catch{}const Ez="startTransition",F_=sE[Ez];function kz(e){let{basename:t,children:n,future:r,window:s}=e,o=I.useRef();o.current==null&&(o.current=I8({window:s,v5Compat:!0}));let a=o.current,[c,f]=I.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},p=I.useCallback(h=>{d&&F_?F_(()=>f(h)):f(h)},[f,d]);return I.useLayoutEffect(()=>a.listen(p),[a,p]),I.useEffect(()=>wz(r),[r]),I.createElement(Sz,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const Iz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Dz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z_=I.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:c,target:f,to:d,preventScrollReset:p,viewTransition:h}=t,g=xz(t,Rz),{basename:S}=I.useContext(wa),y,b=!1;if(typeof d=="string"&&Dz.test(d)&&(y=d,Iz))try{let m=new URL(window.location.href),v=d.startsWith("//")?new URL(m.protocol+d):new URL(d),x=jS(v.pathname,S);v.origin===m.origin&&x!=null?d=x+v.search+v.hash:b=!0}catch{}let C=rz(d,{relative:s}),T=jz(d,{replace:a,state:c,target:f,preventScrollReset:p,relative:s,viewTransition:h});function R(m){r&&r(m),m.defaultPrevented||T(m)}return I.createElement("a",Cw({},g,{href:y||C,onClick:b||o?r:R,ref:n,target:f}))});var B_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(B_||(B_={}));var U_;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(U_||(U_={}));function jz(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:c}=t===void 0?{}:t,f=Ws(),d=wm(),p=cD(e,{relative:a});return I.useCallback(h=>{if(_z(h,n)){h.preventDefault();let g=r!==void 0?r:uh(d)===uh(p);f(e,{replace:g,state:s,preventScrollReset:o,relative:a,viewTransition:c})}},[d,f,p,r,s,n,e,o,a,c])}const fD=I.createContext(void 0),pD=I.createContext(null),Un=()=>{const e=I.useContext(pD);if(!e)throw new Error("useMediaContext  must be used within a MediaProvider");return e},Vs=Object.create(null);Vs.open="0";Vs.close="1";Vs.ping="2";Vs.pong="3";Vs.message="4";Vs.upgrade="5";Vs.noop="6";const Of=Object.create(null);Object.keys(Vs).forEach(e=>{Of[Vs[e]]=e});const _w={type:"error",data:"parser error"},hD=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",mD=typeof ArrayBuffer=="function",gD=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,MS=({type:e,data:t},n,r)=>hD&&t instanceof Blob?n?r(t):V_(t,r):mD&&(t instanceof ArrayBuffer||gD(t))?n?r(t):V_(new Blob([t]),r):r(Vs[e]+(t||"")),V_=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function H_(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let xy;function Pz(e,t){if(hD&&e.data instanceof Blob)return e.data.arrayBuffer().then(H_).then(t);if(mD&&(e.data instanceof ArrayBuffer||gD(e.data)))return t(H_(e.data));MS(e,!1,n=>{xy||(xy=new TextEncoder),t(xy.encode(n))})}const W_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<W_.length;e++)Gl[W_.charCodeAt(e)]=e;const Mz=e=>{let t=e.length*.75,n=e.length,r,s=0,o,a,c,f;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),p=new Uint8Array(d);for(r=0;r<n;r+=4)o=Gl[e.charCodeAt(r)],a=Gl[e.charCodeAt(r+1)],c=Gl[e.charCodeAt(r+2)],f=Gl[e.charCodeAt(r+3)],p[s++]=o<<2|a>>4,p[s++]=(a&15)<<4|c>>2,p[s++]=(c&3)<<6|f&63;return d},Nz=typeof ArrayBuffer=="function",NS=(e,t)=>{if(typeof e!="string")return{type:"message",data:vD(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:Lz(e.substring(1),t)}:Of[n]?e.length>1?{type:Of[n],data:e.substring(1)}:{type:Of[n]}:_w},Lz=(e,t)=>{if(Nz){const n=Mz(e);return vD(n,t)}else return{base64:!0,data:e}},vD=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},yD="",Oz=(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((o,a)=>{MS(o,!1,c=>{r[a]=c,++s===n&&t(r.join(yD))})})},Az=(e,t)=>{const n=e.split(yD),r=[];for(let s=0;s<n.length;s++){const o=NS(n[s],t);if(r.push(o),o.type==="error")break}return r};function $z(){return new TransformStream({transform(e,t){Pz(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let Cy;function hf(e){return e.reduce((t,n)=>t+n.length,0)}function mf(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Fz(e,t){Cy||(Cy=new TextDecoder);const n=[];let r=0,s=-1,o=!1;return new TransformStream({transform(a,c){for(n.push(a);;){if(r===0){if(hf(n)<1)break;const f=mf(n,1);o=(f[0]&128)===128,s=f[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(hf(n)<2)break;const f=mf(n,2);s=new DataView(f.buffer,f.byteOffset,f.length).getUint16(0),r=3}else if(r===2){if(hf(n)<8)break;const f=mf(n,8),d=new DataView(f.buffer,f.byteOffset,f.length),p=d.getUint32(0);if(p>Math.pow(2,21)-1){c.enqueue(_w);break}s=p*Math.pow(2,32)+d.getUint32(4),r=3}else{if(hf(n)<s)break;const f=mf(n,s);c.enqueue(NS(o?f:Cy.decode(f),t)),r=0}if(s===0||s>e){c.enqueue(_w);break}}}})}const wD=4;function sn(e){if(e)return zz(e)}function zz(e){for(var t in sn.prototype)e[t]=sn.prototype[t];return e}sn.prototype.on=sn.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};sn.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};sn.prototype.off=sn.prototype.removeListener=sn.prototype.removeAllListeners=sn.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};sn.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,t)}return this};sn.prototype.emitReserved=sn.prototype.emit;sn.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};sn.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Sm=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),$r=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Bz="arraybuffer";function SD(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const Uz=$r.setTimeout,Vz=$r.clearTimeout;function bm(e,t){t.useNativeTimers?(e.setTimeoutFn=Uz.bind($r),e.clearTimeoutFn=Vz.bind($r)):(e.setTimeoutFn=$r.setTimeout.bind($r),e.clearTimeoutFn=$r.clearTimeout.bind($r))}const Hz=1.33;function Wz(e){return typeof e=="string"?qz(e):Math.ceil((e.byteLength||e.size)*Hz)}function qz(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function bD(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Gz(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Kz(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class Yz extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}let LS=class extends sn{constructor(t){super(),this.writable=!1,bm(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new Yz(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=NS(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=Gz(t);return n.length?"?"+n:""}};class Xz extends LS{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Az(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Oz(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=bD()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let xD=!1;try{xD=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Qz=xD;function Jz(){}class Zz extends Xz{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Us extends sn{constructor(t,n,r){super(),this.createRequest=t,bm(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=SD(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Us.requestsCount++,Us.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Jz,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Us.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Us.requestsCount=0;Us.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",q_);else if(typeof addEventListener=="function"){const e="onpagehide"in $r?"pagehide":"unload";addEventListener(e,q_,!1)}}function q_(){for(let e in Us.requests)Us.requests.hasOwnProperty(e)&&Us.requests[e].abort()}const e9=function(){const e=CD({xdomain:!1});return e&&e.responseType!==null}();class t9 extends Zz{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=e9&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Us(CD,this.uri(),t)}}function CD(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Qz))return new XMLHttpRequest}catch{}if(!t)try{return new $r[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const _D=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class n9 extends LS{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=_D?{}:SD(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;MS(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}s&&Sm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=bD()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const _y=$r.WebSocket||$r.MozWebSocket;class r9 extends n9{createSocket(t,n,r){return _D?new _y(t,n,r):n?new _y(t,n):new _y(t)}doWrite(t,n){this.ws.send(n)}}class s9 extends LS{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=Fz(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),s=$z();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const o=()=>{r.read().then(({done:c,value:f})=>{c||(this.onPacket(f),o())}).catch(c=>{})};o();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;this._writer.write(r).then(()=>{s&&Sm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const o9={websocket:r9,webtransport:s9,polling:t9},i9=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a9=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Rw(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=i9.exec(e||""),o={},a=14;for(;a--;)o[a9[a]]=s[a]||"";return n!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=c9(o,o.path),o.queryKey=l9(o,o.query),o}function c9(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function l9(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,o){s&&(n[s]=o)}),n}const Tw=typeof addEventListener=="function"&&typeof removeEventListener=="function",Af=[];Tw&&addEventListener("offline",()=>{Af.forEach(e=>e())},!1);class ti extends sn{constructor(t,n){if(super(),this.binaryType=Bz,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=Rw(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Rw(n.host).host);bm(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Kz(this.opts.query)),Tw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Af.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=wD,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ti.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ti.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=Wz(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Sm(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:t,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(ti.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Tw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Af.indexOf(this._offlineEventListener);r!==-1&&Af.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}ti.protocol=wD;class d9 extends ti{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;ti.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ti.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(p(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=n.name,this.emitReserved("upgradeError",g)}}))};function o(){r||(r=!0,p(),n.close(),n=null)}const a=h=>{const g=new Error("probe error: "+h);g.transport=n.name,o(),this.emitReserved("upgradeError",g)};function c(){a("transport closed")}function f(){a("socket closed")}function d(h){n&&h.name!==n.name&&o()}const p=()=>{n.removeListener("open",s),n.removeListener("error",a),n.removeListener("close",c),this.off("close",f),this.off("upgrading",d)};n.once("open",s),n.once("error",a),n.once("close",c),this.once("close",f),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let u9=class extends d9{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>o9[s]).filter(s=>!!s)),super(t,r)}};function f9(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=Rw(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const p9=typeof ArrayBuffer=="function",h9=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,RD=Object.prototype.toString,m9=typeof Blob=="function"||typeof Blob<"u"&&RD.call(Blob)==="[object BlobConstructor]",g9=typeof File=="function"||typeof File<"u"&&RD.call(File)==="[object FileConstructor]";function OS(e){return p9&&(e instanceof ArrayBuffer||h9(e))||m9&&e instanceof Blob||g9&&e instanceof File}function $f(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if($f(e[n]))return!0;return!1}if(OS(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return $f(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&$f(e[n]))return!0;return!1}function v9(e){const t=[],n=e.data,r=e;return r.data=Ew(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Ew(e,t){if(!e)return e;if(OS(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Ew(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Ew(e[r],t));return n}return e}function y9(e,t){return e.data=kw(e.data,t),delete e.attachments,e}function kw(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=kw(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=kw(e[n],t));return e}const w9=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],S9=5;var gt;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(gt||(gt={}));class b9{constructor(t){this.replacer=t}encode(t){return(t.type===gt.EVENT||t.type===gt.ACK)&&$f(t)?this.encodeAsBinary({type:t.type===gt.EVENT?gt.BINARY_EVENT:gt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===gt.BINARY_EVENT||t.type===gt.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=v9(t),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function G_(e){return Object.prototype.toString.call(e)==="[object Object]"}class AS extends sn{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===gt.BINARY_EVENT;r||n.type===gt.BINARY_ACK?(n.type=r?gt.EVENT:gt.ACK,this.reconstructor=new x9(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(OS(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(gt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===gt.BINARY_EVENT||r.type===gt.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const a=t.substring(o,n);if(a!=Number(a)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(o,n)}else r.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const o=n+1;for(;++n;){const a=t.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(AS.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case gt.CONNECT:return G_(n);case gt.DISCONNECT:return n===void 0;case gt.CONNECT_ERROR:return typeof n=="string"||G_(n);case gt.EVENT:case gt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&w9.indexOf(n[0])===-1);case gt.ACK:case gt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class x9{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=y9(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const C9=Object.freeze(Object.defineProperty({__proto__:null,Decoder:AS,Encoder:b9,get PacketType(){return gt},protocol:S9},Symbol.toStringTag,{value:"Module"}));function ms(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const _9=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class TD extends sn{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ms(t,"open",this.onopen.bind(this)),ms(t,"packet",this.onpacket.bind(this)),ms(t,"error",this.onerror.bind(this)),ms(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,s,o;if(_9.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:gt.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const p=this.ids++,h=n.pop();this._registerAckCallback(p,h),a.id=p}const c=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,f=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!c||(f?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},s),a=(...c)=>{this.io.clearTimeoutFn(o),n.apply(this,c)};a.withError=!0,this.acks[t]=a}emitWithAck(t,...n){return new Promise((r,s)=>{const o=(a,c)=>a?s(a):r(c);o.withError=!0,n.push(o),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...o)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:gt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case gt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case gt.EVENT:case gt.BINARY_EVENT:this.onevent(t);break;case gt.ACK:case gt.BINARY_ACK:this.onack(t);break;case gt.DISCONNECT:this.ondisconnect();break;case gt.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:gt.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:gt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Nc(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Nc.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};Nc.prototype.reset=function(){this.attempts=0};Nc.prototype.setMin=function(e){this.ms=e};Nc.prototype.setMax=function(e){this.max=e};Nc.prototype.setJitter=function(e){this.jitter=e};class Iw extends sn{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,bm(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Nc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||C9;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new u9(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=ms(n,"open",function(){r.onopen(),t&&t()}),o=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},a=ms(n,"error",o);if(this._timeout!==!1){const c=this._timeout,f=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),n.close()},c);this.opts.autoUnref&&f.unref(),this.subs.push(()=>{this.clearTimeoutFn(f)})}return this.subs.push(s),this.subs.push(a),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ms(t,"ping",this.onping.bind(this)),ms(t,"data",this.ondata.bind(this)),ms(t,"error",this.onerror.bind(this)),ms(t,"close",this.onclose.bind(this)),ms(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Sm(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new TD(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const kl={};function Ff(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=f9(e,t.path||"/socket.io"),r=n.source,s=n.id,o=n.path,a=kl[s]&&o in kl[s].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let f;return c?f=new Iw(r,t):(kl[s]||(kl[s]=new Iw(r,t)),f=kl[s]),n.query&&!t.query&&(t.query=n.queryKey),f.socket(n.path,t)}Object.assign(Ff,{Manager:Iw,Socket:TD,io:Ff,connect:Ff});const ot=Ff("https://185.231.244.108:3000/mediasoup");var Zr={},gf={exports:{}},Ry,K_;function R9(){if(K_)return Ry;K_=1;var e=1e3,t=e*60,n=t*60,r=n*24,s=r*7,o=r*365.25;Ry=function(p,h){h=h||{};var g=typeof p;if(g==="string"&&p.length>0)return a(p);if(g==="number"&&isFinite(p))return h.long?f(p):c(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function a(p){if(p=String(p),!(p.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(h){var g=parseFloat(h[1]),S=(h[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return g*o;case"weeks":case"week":case"w":return g*s;case"days":case"day":case"d":return g*r;case"hours":case"hour":case"hrs":case"hr":case"h":return g*n;case"minutes":case"minute":case"mins":case"min":case"m":return g*t;case"seconds":case"second":case"secs":case"sec":case"s":return g*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function c(p){var h=Math.abs(p);return h>=r?Math.round(p/r)+"d":h>=n?Math.round(p/n)+"h":h>=t?Math.round(p/t)+"m":h>=e?Math.round(p/e)+"s":p+"ms"}function f(p){var h=Math.abs(p);return h>=r?d(p,h,r,"day"):h>=n?d(p,h,n,"hour"):h>=t?d(p,h,t,"minute"):h>=e?d(p,h,e,"second"):p+" ms"}function d(p,h,g,S){var y=h>=g*1.5;return Math.round(p/g)+" "+S+(y?"s":"")}return Ry}var Ty,Y_;function T9(){if(Y_)return Ty;Y_=1;function e(t){r.debug=r,r.default=r,r.coerce=d,r.disable=a,r.enable=o,r.enabled=c,r.humanize=R9(),r.destroy=p,Object.keys(t).forEach(h=>{r[h]=t[h]}),r.names=[],r.skips=[],r.formatters={};function n(h){let g=0;for(let S=0;S<h.length;S++)g=(g<<5)-g+h.charCodeAt(S),g|=0;return r.colors[Math.abs(g)%r.colors.length]}r.selectColor=n;function r(h){let g,S=null,y,b;function C(...T){if(!C.enabled)return;const R=C,m=Number(new Date),v=m-(g||m);R.diff=v,R.prev=g,R.curr=m,g=m,T[0]=r.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let x=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(k,D)=>{if(k==="%%")return"%";x++;const M=r.formatters[D];if(typeof M=="function"){const P=T[x];k=M.call(R,P),T.splice(x,1),x--}return k}),r.formatArgs.call(R,T),(R.log||r.log).apply(R,T)}return C.namespace=h,C.useColors=r.useColors(),C.color=r.selectColor(h),C.extend=s,C.destroy=r.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(y!==r.namespaces&&(y=r.namespaces,b=r.enabled(h)),b),set:T=>{S=T}}),typeof r.init=="function"&&r.init(C),C}function s(h,g){const S=r(this.namespace+(typeof g>"u"?":":g)+h);return S.log=this.log,S}function o(h){r.save(h),r.namespaces=h,r.names=[],r.skips=[];let g;const S=(typeof h=="string"?h:"").split(/[\s,]+/),y=S.length;for(g=0;g<y;g++)S[g]&&(h=S[g].replace(/\*/g,".*?"),h[0]==="-"?r.skips.push(new RegExp("^"+h.slice(1)+"$")):r.names.push(new RegExp("^"+h+"$")))}function a(){const h=[...r.names.map(f),...r.skips.map(f).map(g=>"-"+g)].join(",");return r.enable(""),h}function c(h){if(h[h.length-1]==="*")return!0;let g,S;for(g=0,S=r.skips.length;g<S;g++)if(r.skips[g].test(h))return!1;for(g=0,S=r.names.length;g<S;g++)if(r.names[g].test(h))return!0;return!1}function f(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function d(h){return h instanceof Error?h.stack||h.message:h}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return Ty=e,Ty}var X_;function xm(){return X_||(X_=1,function(e,t){var n={};t.formatArgs=s,t.save=o,t.load=a,t.useColors=r,t.storage=c(),t.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;d.splice(1,0,p,"color: inherit");let h=0,g=0;d[0].replace(/%[a-zA-Z%]/g,S=>{S!=="%%"&&(h++,S==="%c"&&(g=h))}),d.splice(g,0,p)}t.log=console.debug||console.log||(()=>{});function o(d){try{d?t.storage.setItem("debug",d):t.storage.removeItem("debug")}catch{}}function a(){let d;try{d=t.storage.getItem("debug")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=n.DEBUG),d}function c(){try{return localStorage}catch{}}e.exports=T9()(t);const{formatters:f}=e.exports;f.j=function(d){try{return JSON.stringify(d)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}(gf,gf.exports)),gf.exports}var Ar={},Kl={exports:{}},E9=Kl.exports,Q_;function k9(){return Q_||(Q_=1,function(e,t){(function(n,r){var s="1.0.39",o="",a="?",c="function",f="undefined",d="object",p="string",h="major",g="model",S="name",y="type",b="vendor",C="version",T="architecture",R="console",m="mobile",v="tablet",x="smarttv",_="wearable",k="embedded",D=500,M="Amazon",P="Apple",L="ASUS",O="BlackBerry",V="Browser",H="Chrome",q="Edge",N="Firefox",B="Google",$="Huawei",F="LG",z="Microsoft",U="Motorola",G="Opera",te="Samsung",ne="Sharp",Q="Sony",se="Xiaomi",X="Zebra",oe="Facebook",K="Chromium OS",Z="Mac OS",fe=" Browser",xe=function(He,Ye){var Le={};for(var ct in He)Ye[ct]&&Ye[ct].length%2===0?Le[ct]=Ye[ct].concat(He[ct]):Le[ct]=He[ct];return Le},ye=function(He){for(var Ye={},Le=0;Le<He.length;Le++)Ye[He[Le].toUpperCase()]=He[Le];return Ye},Ee=function(He,Ye){return typeof He===p?Be(Ye).indexOf(Be(He))!==-1:!1},Be=function(He){return He.toLowerCase()},et=function(He){return typeof He===p?He.replace(/[^\d\.]/g,o).split(".")[0]:r},pe=function(He,Ye){if(typeof He===p)return He=He.replace(/^\s\s*/,o),typeof Ye===f?He:He.substring(0,D)},_e=function(He,Ye){for(var Le=0,ct,vt,ut,pt,Ge,bt;Le<Ye.length&&!Ge;){var pr=Ye[Le],ko=Ye[Le+1];for(ct=vt=0;ct<pr.length&&!Ge&&pr[ct];)if(Ge=pr[ct++].exec(He),Ge)for(ut=0;ut<ko.length;ut++)bt=Ge[++vt],pt=ko[ut],typeof pt===d&&pt.length>0?pt.length===2?typeof pt[1]==c?this[pt[0]]=pt[1].call(this,bt):this[pt[0]]=pt[1]:pt.length===3?typeof pt[1]===c&&!(pt[1].exec&&pt[1].test)?this[pt[0]]=bt?pt[1].call(this,bt,pt[2]):r:this[pt[0]]=bt?bt.replace(pt[1],pt[2]):r:pt.length===4&&(this[pt[0]]=bt?pt[3].call(this,bt.replace(pt[1],pt[2])):r):this[pt]=bt||r;Le+=2}},je=function(He,Ye){for(var Le in Ye)if(typeof Ye[Le]===d&&Ye[Le].length>0){for(var ct=0;ct<Ye[Le].length;ct++)if(Ee(Ye[Le][ct],He))return Le===a?r:Le}else if(Ee(Ye[Le],He))return Le===a?r:Le;return Ye.hasOwnProperty("*")?Ye["*"]:He},Ue={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Je={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ze={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[C,[S,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[C,[S,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[S,C],[/opios[\/ ]+([\w\.]+)/i],[C,[S,G+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[C,[S,G+" GX"]],[/\bopr\/([\w\.]+)/i],[C,[S,G]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[C,[S,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[S,C],[/quark(?:pc)?\/([-\w\.]+)/i],[C,[S,"Quark"]],[/\bddg\/([\w\.]+)/i],[C,[S,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[C,[S,"UC"+V]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[C,[S,"WeChat"]],[/konqueror\/([\w\.]+)/i],[C,[S,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[C,[S,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[C,[S,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[C,[S,"Smart Lenovo "+V]],[/(avast|avg)\/([\w\.]+)/i],[[S,/(.+)/,"$1 Secure "+V],C],[/\bfocus\/([\w\.]+)/i],[C,[S,N+" Focus"]],[/\bopt\/([\w\.]+)/i],[C,[S,G+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[C,[S,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[C,[S,"Dolphin"]],[/coast\/([\w\.]+)/i],[C,[S,G+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[C,[S,"MIUI "+V]],[/fxios\/([-\w\.]+)/i],[C,[S,N]],[/\bqihu|(qi?ho?o?|360)browser/i],[[S,"360"+fe]],[/\b(qq)\/([\w\.]+)/i],[[S,/(.+)/,"$1Browser"],C],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[S,/(.+)/,"$1"+fe],C],[/samsungbrowser\/([\w\.]+)/i],[C,[S,te+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[S,/_/g," "],C],[/metasr[\/ ]?([\d\.]+)/i],[C,[S,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[S,"Sogou Mobile"],C],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[S,C],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[S],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[S,oe],C],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[S,C],[/\bgsa\/([\w\.]+) .*safari\//i],[C,[S,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[C,[S,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[C,[S,H+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[S,H+" WebView"],C],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[C,[S,"Android "+V]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[S,C],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[C,[S,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[C,S],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[S,[C,je,Ue]],[/(webkit|khtml)\/([\w\.]+)/i],[S,C],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[S,"Netscape"],C],[/(wolvic)\/([\w\.]+)/i],[S,C],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[C,[S,N+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[S,[C,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[S,[C,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[T,"amd64"]],[/(ia32(?=;))/i],[[T,Be]],[/((?:i[346]|x)86)[;\)]/i],[[T,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[T,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[T,"armhf"]],[/windows (ce|mobile); ppc;/i],[[T,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[T,/ower/,o,Be]],[/(sun4\w)[;\)]/i],[[T,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[T,Be]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[g,[b,te],[y,v]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[g,[b,te],[y,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[g,[b,P],[y,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[g,[b,P],[y,v]],[/(macintosh);/i],[g,[b,P]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[g,[b,ne],[y,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[g,[b,$],[y,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[g,[b,$],[y,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[g,/_/g," "],[b,se],[y,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[g,/_/g," "],[b,se],[y,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[g,[b,"OPPO"],[y,m]],[/\b(opd2\d{3}a?) bui/i],[g,[b,"OPPO"],[y,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[g,[b,"Vivo"],[y,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[g,[b,"Realme"],[y,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[g,[b,U],[y,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[g,[b,U],[y,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[g,[b,F],[y,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[g,[b,F],[y,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[g,[b,"Lenovo"],[y,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[g,/_/g," "],[b,"Nokia"],[y,m]],[/(pixel c)\b/i],[g,[b,B],[y,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[g,[b,B],[y,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[g,[b,Q],[y,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[g,"Xperia Tablet"],[b,Q],[y,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[g,[b,"OnePlus"],[y,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[g,[b,M],[y,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[g,/(.+)/g,"Fire Phone $1"],[b,M],[y,m]],[/(playbook);[-\w\),; ]+(rim)/i],[g,b,[y,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[g,[b,O],[y,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[g,[b,L],[y,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[g,[b,L],[y,m]],[/(nexus 9)/i],[g,[b,"HTC"],[y,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[b,[g,/_/g," "],[y,m]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[g,[b,"TCL"],[y,v]],[/(itel) ((\w+))/i],[[b,Be],g,[y,je,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[g,[b,"Acer"],[y,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[g,[b,"Meizu"],[y,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[g,[b,"Ulefone"],[y,m]],[/droid.+; (a(?:015|06[35]|142p?))/i],[g,[b,"Nothing"],[y,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[b,g,[y,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[b,g,[y,v]],[/(surface duo)/i],[g,[b,z],[y,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[g,[b,"Fairphone"],[y,m]],[/(u304aa)/i],[g,[b,"AT&T"],[y,m]],[/\bsie-(\w*)/i],[g,[b,"Siemens"],[y,m]],[/\b(rct\w+) b/i],[g,[b,"RCA"],[y,v]],[/\b(venue[\d ]{2,7}) b/i],[g,[b,"Dell"],[y,v]],[/\b(q(?:mv|ta)\w+) b/i],[g,[b,"Verizon"],[y,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[g,[b,"Barnes & Noble"],[y,v]],[/\b(tm\d{3}\w+) b/i],[g,[b,"NuVision"],[y,v]],[/\b(k88) b/i],[g,[b,"ZTE"],[y,v]],[/\b(nx\d{3}j) b/i],[g,[b,"ZTE"],[y,m]],[/\b(gen\d{3}) b.+49h/i],[g,[b,"Swiss"],[y,m]],[/\b(zur\d{3}) b/i],[g,[b,"Swiss"],[y,v]],[/\b((zeki)?tb.*\b) b/i],[g,[b,"Zeki"],[y,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[b,"Dragon Touch"],g,[y,v]],[/\b(ns-?\w{0,9}) b/i],[g,[b,"Insignia"],[y,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[g,[b,"NextBook"],[y,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[b,"Voice"],g,[y,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[b,"LvTel"],g,[y,m]],[/\b(ph-1) /i],[g,[b,"Essential"],[y,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[g,[b,"Envizen"],[y,v]],[/\b(trio[-\w\. ]+) b/i],[g,[b,"MachSpeed"],[y,v]],[/\btu_(1491) b/i],[g,[b,"Rotor"],[y,v]],[/(shield[\w ]+) b/i],[g,[b,"Nvidia"],[y,v]],[/(sprint) (\w+)/i],[b,g,[y,m]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[b,z],[y,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[g,[b,X],[y,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[g,[b,X],[y,m]],[/smart-tv.+(samsung)/i],[b,[y,x]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[b,te],[y,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[b,F],[y,x]],[/(apple) ?tv/i],[b,[g,P+" TV"],[y,x]],[/crkey/i],[[g,H+"cast"],[b,B],[y,x]],[/droid.+aft(\w+)( bui|\))/i],[g,[b,M],[y,x]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[g,[b,ne],[y,x]],[/(bravia[\w ]+)( bui|\))/i],[g,[b,Q],[y,x]],[/(mitv-\w{5}) bui/i],[g,[b,se],[y,x]],[/Hbbtv.*(technisat) (.*);/i],[b,g,[y,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[b,pe],[g,pe],[y,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[y,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[b,g,[y,R]],[/droid.+; (shield) bui/i],[g,[b,"Nvidia"],[y,R]],[/(playstation [345portablevi]+)/i],[g,[b,Q],[y,R]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[g,[b,z],[y,R]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[g,[b,te],[y,_]],[/((pebble))app/i],[b,g,[y,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[g,[b,P],[y,_]],[/droid.+; (glass) \d/i],[g,[b,B],[y,_]],[/droid.+; (wt63?0{2,3})\)/i],[g,[b,X],[y,_]],[/(quest( \d| pro)?)/i],[g,[b,oe],[y,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[b,[y,k]],[/(aeobc)\b/i],[g,[b,M],[y,k]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[g,[y,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[g,[y,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[y,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[y,m]],[/(android[-\w\. ]{0,9});.+buil/i],[g,[b,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[C,[S,q+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[C,[S,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[S,C],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[C,S]],os:[[/microsoft (windows) (vista|xp)/i],[S,C],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[S,[C,je,Je]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[C,je,Je],[S,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[C,/_/g,"."],[S,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[S,Z],[C,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[C,S],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[S,C],[/\(bb(10);/i],[C,[S,O]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[C,[S,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[C,[S,N+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[C,[S,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[C,[S,"watchOS"]],[/crkey\/([\d\.]+)/i],[C,[S,H+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[S,K],C],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[S,C],[/(sunos) ?([\w\.\d]*)/i],[[S,"Solaris"],C],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[S,C]]},Fe=function(He,Ye){if(typeof He===d&&(Ye=He,He=r),!(this instanceof Fe))return new Fe(He,Ye).getResult();var Le=typeof n!==f&&n.navigator?n.navigator:r,ct=He||(Le&&Le.userAgent?Le.userAgent:o),vt=Le&&Le.userAgentData?Le.userAgentData:r,ut=Ye?xe(Ze,Ye):Ze,pt=Le&&Le.userAgent==ct;return this.getBrowser=function(){var Ge={};return Ge[S]=r,Ge[C]=r,_e.call(Ge,ct,ut.browser),Ge[h]=et(Ge[C]),pt&&Le&&Le.brave&&typeof Le.brave.isBrave==c&&(Ge[S]="Brave"),Ge},this.getCPU=function(){var Ge={};return Ge[T]=r,_e.call(Ge,ct,ut.cpu),Ge},this.getDevice=function(){var Ge={};return Ge[b]=r,Ge[g]=r,Ge[y]=r,_e.call(Ge,ct,ut.device),pt&&!Ge[y]&&vt&&vt.mobile&&(Ge[y]=m),pt&&Ge[g]=="Macintosh"&&Le&&typeof Le.standalone!==f&&Le.maxTouchPoints&&Le.maxTouchPoints>2&&(Ge[g]="iPad",Ge[y]=v),Ge},this.getEngine=function(){var Ge={};return Ge[S]=r,Ge[C]=r,_e.call(Ge,ct,ut.engine),Ge},this.getOS=function(){var Ge={};return Ge[S]=r,Ge[C]=r,_e.call(Ge,ct,ut.os),pt&&!Ge[S]&&vt&&vt.platform&&vt.platform!="Unknown"&&(Ge[S]=vt.platform.replace(/chrome os/i,K).replace(/macos/i,Z)),Ge},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ct},this.setUA=function(Ge){return ct=typeof Ge===p&&Ge.length>D?pe(Ge,D):Ge,this},this.setUA(ct),this};Fe.VERSION=s,Fe.BROWSER=ye([S,C,h]),Fe.CPU=ye([T]),Fe.DEVICE=ye([g,b,y,R,m,x,v,_,k]),Fe.ENGINE=Fe.OS=ye([S,C]),e.exports&&(t=e.exports=Fe),t.UAParser=Fe;var be=typeof n!==f&&(n.jQuery||n.Zepto);if(be&&!be.ua){var Ve=new Fe;be.ua=Ve.getResult(),be.ua.get=function(){return Ve.getUA()},be.ua.set=function(He){Ve.setUA(He);var Ye=Ve.getResult();for(var Le in Ye)be.ua[Le]=Ye[Le]}}})(typeof window=="object"?window:E9)}(Kl,Kl.exports)),Kl.exports}var Ni={},J_;function un(){if(J_)return Ni;J_=1;var e=Ni&&Ni.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.Logger=void 0;const t=e(xm()),n="mediasoup-client";class r{constructor(o){o?(this._debug=(0,t.default)(`${n}:${o}`),this._warn=(0,t.default)(`${n}:WARN:${o}`),this._error=(0,t.default)(`${n}:ERROR:${o}`)):(this._debug=(0,t.default)(n),this._warn=(0,t.default)(`${n}:WARN`),this._error=(0,t.default)(`${n}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}return Ni.Logger=r,Ni}var Il={},vf={exports:{}},Z_;function I9(){if(Z_)return vf.exports;Z_=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(x,_,k){return Function.prototype.apply.call(x,_,k)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:n=function(x){return Object.getOwnPropertyNames(x)};function r(v){console&&console.warn&&console.warn(v)}var s=Number.isNaN||function(x){return x!==x};function o(){o.init.call(this)}vf.exports=o,vf.exports.once=T,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function c(v){if(typeof v!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof v)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(v){if(typeof v!="number"||v<0||s(v))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+v+".");a=v}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||s(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this};function f(v){return v._maxListeners===void 0?o.defaultMaxListeners:v._maxListeners}o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(x){for(var _=[],k=1;k<arguments.length;k++)_.push(arguments[k]);var D=x==="error",M=this._events;if(M!==void 0)D=D&&M.error===void 0;else if(!D)return!1;if(D){var P;if(_.length>0&&(P=_[0]),P instanceof Error)throw P;var L=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw L.context=P,L}var O=M[x];if(O===void 0)return!1;if(typeof O=="function")t(O,this,_);else for(var V=O.length,H=y(O,V),k=0;k<V;++k)t(H[k],this,_);return!0};function d(v,x,_,k){var D,M,P;if(c(_),M=v._events,M===void 0?(M=v._events=Object.create(null),v._eventsCount=0):(M.newListener!==void 0&&(v.emit("newListener",x,_.listener?_.listener:_),M=v._events),P=M[x]),P===void 0)P=M[x]=_,++v._eventsCount;else if(typeof P=="function"?P=M[x]=k?[_,P]:[P,_]:k?P.unshift(_):P.push(_),D=f(v),D>0&&P.length>D&&!P.warned){P.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(x)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=v,L.type=x,L.count=P.length,r(L)}return v}o.prototype.addListener=function(x,_){return d(this,x,_,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(x,_){return d(this,x,_,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(v,x,_){var k={fired:!1,wrapFn:void 0,target:v,type:x,listener:_},D=p.bind(k);return D.listener=_,k.wrapFn=D,D}o.prototype.once=function(x,_){return c(_),this.on(x,h(this,x,_)),this},o.prototype.prependOnceListener=function(x,_){return c(_),this.prependListener(x,h(this,x,_)),this},o.prototype.removeListener=function(x,_){var k,D,M,P,L;if(c(_),D=this._events,D===void 0)return this;if(k=D[x],k===void 0)return this;if(k===_||k.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete D[x],D.removeListener&&this.emit("removeListener",x,k.listener||_));else if(typeof k!="function"){for(M=-1,P=k.length-1;P>=0;P--)if(k[P]===_||k[P].listener===_){L=k[P].listener,M=P;break}if(M<0)return this;M===0?k.shift():b(k,M),k.length===1&&(D[x]=k[0]),D.removeListener!==void 0&&this.emit("removeListener",x,L||_)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(x){var _,k,D;if(k=this._events,k===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete k[x]),this;if(arguments.length===0){var M=Object.keys(k),P;for(D=0;D<M.length;++D)P=M[D],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=k[x],typeof _=="function")this.removeListener(x,_);else if(_!==void 0)for(D=_.length-1;D>=0;D--)this.removeListener(x,_[D]);return this};function g(v,x,_){var k=v._events;if(k===void 0)return[];var D=k[x];return D===void 0?[]:typeof D=="function"?_?[D.listener||D]:[D]:_?C(D):y(D,D.length)}o.prototype.listeners=function(x){return g(this,x,!0)},o.prototype.rawListeners=function(x){return g(this,x,!1)},o.listenerCount=function(v,x){return typeof v.listenerCount=="function"?v.listenerCount(x):S.call(v,x)},o.prototype.listenerCount=S;function S(v){var x=this._events;if(x!==void 0){var _=x[v];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function y(v,x){for(var _=new Array(x),k=0;k<x;++k)_[k]=v[k];return _}function b(v,x){for(;x+1<v.length;x++)v[x]=v[x+1];v.pop()}function C(v){for(var x=new Array(v.length),_=0;_<x.length;++_)x[_]=v[_].listener||v[_];return x}function T(v,x){return new Promise(function(_,k){function D(P){v.removeListener(x,M),k(P)}function M(){typeof v.removeListener=="function"&&v.removeListener("error",D),_([].slice.call(arguments))}m(v,x,M,{once:!0}),x!=="error"&&R(v,D,{once:!0})})}function R(v,x,_){typeof v.on=="function"&&m(v,"error",x,_)}function m(v,x,_,k){if(typeof v.on=="function")k.once?v.once(x,_):v.on(x,_);else if(typeof v.addEventListener=="function")v.addEventListener(x,function D(M){k.once&&v.removeEventListener(x,D),_(M)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof v)}return vf.exports}var eR;function Sa(){if(eR)return Il;eR=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.EnhancedEventEmitter=void 0;const e=I9(),t=un(),n=new t.Logger("EnhancedEventEmitter");class r extends e.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(o,...a){return super.emit(o,...a)}safeEmit(o,...a){try{return super.emit(o,...a)}catch(c){n.error("safeEmit() | event listener threw an error [eventName:%s]:%o",o,c);try{super.emit("listenererror",o,c)}catch{}return!!super.listenerCount(o)}}on(o,a){return super.on(o,a),this}off(o,a){return super.off(o,a),this}addListener(o,a){return super.on(o,a),this}prependListener(o,a){return super.prependListener(o,a),this}once(o,a){return super.once(o,a),this}prependOnceListener(o,a){return super.prependOnceListener(o,a),this}removeListener(o,a){return super.off(o,a),this}removeAllListeners(o){return super.removeAllListeners(o),this}listenerCount(o){return super.listenerCount(o)}listeners(o){return super.listeners(o)}rawListeners(o){return super.rawListeners(o)}}return Il.EnhancedEventEmitter=r,Il}var Li={},tR;function Kn(){if(tR)return Li;tR=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.InvalidStateError=Li.UnsupportedError=void 0;class e extends Error{constructor(r){super(r),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,e):this.stack=new Error(r).stack}}Li.UnsupportedError=e;class t extends Error{constructor(r){super(r),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,t):this.stack=new Error(r).stack}}return Li.InvalidStateError=t,Li}var Ja={},nR;function Pn(){if(nR)return Ja;nR=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.clone=e,Ja.generateRandomNumber=t,Ja.deepFreeze=n;function e(r){if(r!==void 0)return Number.isNaN(r)?NaN:typeof structuredClone=="function"?structuredClone(r):JSON.parse(JSON.stringify(r))}function t(){return Math.round(Math.random()*1e7)}function n(r){const s=Reflect.ownKeys(r);for(const o of s){const a=r[o];(a&&typeof a=="object"||typeof a=="function")&&n(a)}return Object.freeze(r)}return Ja}var Zt={},Vt={},Oi={},rR;function D9(){if(rR)return Oi;rR=1;var e=Oi&&Oi.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Logger=void 0;const t=e(xm()),n="h264-profile-level-id";class r{constructor(o){o?(this._debug=(0,t.default)(`${n}:${o}`),this._warn=(0,t.default)(`${n}:WARN:${o}`),this._error=(0,t.default)(`${n}:ERROR:${o}`)):(this._debug=(0,t.default)(n),this._warn=(0,t.default)(`${n}:WARN`),this._error=(0,t.default)(`${n}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}return Oi.Logger=r,Oi}var sR;function j9(){if(sR)return Vt;sR=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.generateProfileLevelIdStringForAnswer=Vt.isSameProfile=Vt.parseSdpProfileLevelId=Vt.levelToString=Vt.profileToString=Vt.profileLevelIdToString=Vt.parseProfileLevelId=Vt.ProfileLevelId=Vt.Level=Vt.Profile=void 0;const e=D9(),t=new e.Logger;var n;(function(v){v[v.ConstrainedBaseline=1]="ConstrainedBaseline",v[v.Baseline=2]="Baseline",v[v.Main=3]="Main",v[v.ConstrainedHigh=4]="ConstrainedHigh",v[v.High=5]="High",v[v.PredictiveHigh444=6]="PredictiveHigh444"})(n||(Vt.Profile=n={}));var r;(function(v){v[v.L1_b=0]="L1_b",v[v.L1=10]="L1",v[v.L1_1=11]="L1_1",v[v.L1_2=12]="L1_2",v[v.L1_3=13]="L1_3",v[v.L2=20]="L2",v[v.L2_1=21]="L2_1",v[v.L2_2=22]="L2_2",v[v.L3=30]="L3",v[v.L3_1=31]="L3_1",v[v.L3_2=32]="L3_2",v[v.L4=40]="L4",v[v.L4_1=41]="L4_1",v[v.L4_2=42]="L4_2",v[v.L5=50]="L5",v[v.L5_1=51]="L5_1",v[v.L5_2=52]="L5_2"})(r||(Vt.Level=r={}));class s{constructor(x,_){this.profile=x,this.level=_}}Vt.ProfileLevelId=s;const o=new s(n.ConstrainedBaseline,r.L3_1);class a{constructor(x){this.mask=~C("x",x),this.masked_value=C("1",x)}isMatch(x){return this.masked_value===(x&this.mask)}}class c{constructor(x,_,k){this.profile_idc=x,this.profile_iop=_,this.profile=k}}const f=[new c(66,new a("x1xx0000"),n.ConstrainedBaseline),new c(77,new a("1xxx0000"),n.ConstrainedBaseline),new c(88,new a("11xx0000"),n.ConstrainedBaseline),new c(66,new a("x0xx0000"),n.Baseline),new c(88,new a("10xx0000"),n.Baseline),new c(77,new a("0x0x0000"),n.Main),new c(100,new a("00000000"),n.High),new c(100,new a("00001100"),n.ConstrainedHigh),new c(244,new a("00000000"),n.PredictiveHigh444)];function d(v){if(typeof v!="string"||v.length!==6)return;const _=parseInt(v,16);if(_===0)return;const k=_&255,D=_>>8&255,M=_>>16&255;let P;switch(k){case r.L1_1:{P=(D&16)!==0?r.L1_b:r.L1_1;break}case r.L1:case r.L1_2:case r.L1_3:case r.L2:case r.L2_1:case r.L2_2:case r.L3:case r.L3_1:case r.L3_2:case r.L4:case r.L4_1:case r.L4_2:case r.L5:case r.L5_1:case r.L5_2:{P=k;break}default:{t.warn(`parseProfileLevelId() | unrecognized level_idc [str:${v}, level_idc:${k}]`);return}}for(const L of f)if(M===L.profile_idc&&L.profile_iop.isMatch(D))return new s(L.profile,P);t.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${v}, profile_idc:${M}, profile_iop:${D}]`)}Vt.parseProfileLevelId=d;function p(v){if(v.level==r.L1_b)switch(v.profile){case n.ConstrainedBaseline:return"42f00b";case n.Baseline:return"42100b";case n.Main:return"4d100b";default:{t.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${v.profile}`);return}}let x;switch(v.profile){case n.ConstrainedBaseline:{x="42e0";break}case n.Baseline:{x="4200";break}case n.Main:{x="4d00";break}case n.ConstrainedHigh:{x="640c";break}case n.High:{x="6400";break}case n.PredictiveHigh444:{x="f400";break}default:{t.warn(`profileLevelIdToString() | unrecognized profile ${v.profile}`);return}}let _=v.level.toString(16);return _.length===1&&(_=`0${_}`),`${x}${_}`}Vt.profileLevelIdToString=p;function h(v){switch(v){case n.ConstrainedBaseline:return"ConstrainedBaseline";case n.Baseline:return"Baseline";case n.Main:return"Main";case n.ConstrainedHigh:return"ConstrainedHigh";case n.High:return"High";case n.PredictiveHigh444:return"PredictiveHigh444";default:{t.warn(`profileToString() | unrecognized profile ${v}`);return}}}Vt.profileToString=h;function g(v){switch(v){case r.L1_b:return"1b";case r.L1:return"1";case r.L1_1:return"1.1";case r.L1_2:return"1.2";case r.L1_3:return"1.3";case r.L2:return"2";case r.L2_1:return"2.1";case r.L2_2:return"2.2";case r.L3:return"3";case r.L3_1:return"3.1";case r.L3_2:return"3.2";case r.L4:return"4";case r.L4_1:return"4.1";case r.L4_2:return"4.2";case r.L5:return"5";case r.L5_1:return"5.1";case r.L5_2:return"5.2";default:{t.warn(`levelToString() | unrecognized level ${v}`);return}}}Vt.levelToString=g;function S(v={}){const x=v["profile-level-id"];return x?d(x):o}Vt.parseSdpProfileLevelId=S;function y(v={},x={}){const _=S(v),k=S(x);return!!(_&&k&&_.profile===k.profile)}Vt.isSameProfile=y;function b(v={},x={}){if(!v["profile-level-id"]&&!x["profile-level-id"]){t.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");return}const _=S(v),k=S(x);if(!_)throw new TypeError("invalid local_profile_level_id");if(!k)throw new TypeError("invalid remote_profile_level_id");if(_.profile!==k.profile)throw new TypeError("H264 Profile mismatch");const D=m(v)&&m(x),M=_.level,P=k.level,L=R(M,P),O=D?M:L;return t.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${_.profile}, level:${O}]`),p(new s(_.profile,O))}Vt.generateProfileLevelIdStringForAnswer=b;function C(v,x){return+(x[0]===v)<<7|+(x[1]===v)<<6|+(x[2]===v)<<5|+(x[3]===v)<<4|+(x[4]===v)<<3|+(x[5]===v)<<2|+(x[6]===v)<<1|+(x[7]===v)<<0}function T(v,x){return v===r.L1_b?x!==r.L1&&x!==r.L1_b:x===r.L1_b?v!==r.L1:v<x}function R(v,x){return T(v,x)?v:x}function m(v={}){const x=v["level-asymmetry-allowed"];return x===!0||x===1||x==="1"}return Vt}var oR;function ur(){if(oR)return Zt;oR=1;var e=Zt&&Zt.__createBinding||(Object.create?function(N,B,$,F){F===void 0&&(F=$);var z=Object.getOwnPropertyDescriptor(B,$);(!z||("get"in z?!B.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return B[$]}}),Object.defineProperty(N,F,z)}:function(N,B,$,F){F===void 0&&(F=$),N[F]=B[$]}),t=Zt&&Zt.__setModuleDefault||(Object.create?function(N,B){Object.defineProperty(N,"default",{enumerable:!0,value:B})}:function(N,B){N.default=B}),n=Zt&&Zt.__importStar||function(N){if(N&&N.__esModule)return N;var B={};if(N!=null)for(var $ in N)$!=="default"&&Object.prototype.hasOwnProperty.call(N,$)&&e(B,N,$);return t(B,N),B};Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.validateRtpCapabilities=f,Zt.validateRtpParameters=d,Zt.validateSctpStreamParameters=p,Zt.validateSctpCapabilities=h,Zt.getExtendedRtpCapabilities=g,Zt.getRecvRtpCapabilities=S,Zt.getSendingRtpParameters=y,Zt.getSendingRemoteRtpParameters=b,Zt.reduceCodecs=C,Zt.generateProbatorRtpParameters=T,Zt.canSend=R,Zt.canReceive=m;const r=n(j9()),s=n(Pn()),o="probator",a=1234,c=127;function f(N){if(typeof N!="object")throw new TypeError("caps is not an object");if(N.codecs&&!Array.isArray(N.codecs))throw new TypeError("caps.codecs is not an array");N.codecs||(N.codecs=[]);for(const B of N.codecs)v(B);if(N.headerExtensions&&!Array.isArray(N.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");N.headerExtensions||(N.headerExtensions=[]);for(const B of N.headerExtensions)_(B)}function d(N){if(typeof N!="object")throw new TypeError("params is not an object");if(N.mid&&typeof N.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(N.codecs))throw new TypeError("missing params.codecs");for(const B of N.codecs)k(B);if(N.headerExtensions&&!Array.isArray(N.headerExtensions))throw new TypeError("params.headerExtensions is not an array");N.headerExtensions||(N.headerExtensions=[]);for(const B of N.headerExtensions)D(B);if(N.encodings&&!Array.isArray(N.encodings))throw new TypeError("params.encodings is not an array");N.encodings||(N.encodings=[]);for(const B of N.encodings)M(B);if(N.rtcp&&typeof N.rtcp!="object")throw new TypeError("params.rtcp is not an object");N.rtcp||(N.rtcp={}),P(N.rtcp)}function p(N){if(typeof N!="object")throw new TypeError("params is not an object");if(typeof N.streamId!="number")throw new TypeError("missing params.streamId");let B=!1;if(typeof N.ordered=="boolean"?B=!0:N.ordered=!0,N.maxPacketLifeTime&&typeof N.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(N.maxRetransmits&&typeof N.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(N.maxPacketLifeTime&&N.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(B&&N.ordered&&(N.maxPacketLifeTime||N.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!B&&(N.maxPacketLifeTime||N.maxRetransmits)&&(N.ordered=!1),N.label&&typeof N.label!="string")throw new TypeError("invalid params.label");if(N.protocol&&typeof N.protocol!="string")throw new TypeError("invalid params.protocol")}function h(N){if(typeof N!="object")throw new TypeError("caps is not an object");if(!N.numStreams||typeof N.numStreams!="object")throw new TypeError("missing caps.numStreams");L(N.numStreams)}function g(N,B){const $={codecs:[],headerExtensions:[]};for(const F of B.codecs??[]){if(O(F))continue;const z=(N.codecs??[]).find(G=>V(G,F,{strict:!0,modify:!0}));if(!z)continue;const U={mimeType:z.mimeType,kind:z.kind,clockRate:z.clockRate,channels:z.channels,localPayloadType:z.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:F.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:z.parameters,remoteParameters:F.parameters,rtcpFeedback:q(z,F)};$.codecs.push(U)}for(const F of $.codecs){const z=N.codecs.find(G=>O(G)&&G.parameters.apt===F.localPayloadType),U=B.codecs.find(G=>O(G)&&G.parameters.apt===F.remotePayloadType);z&&U&&(F.localRtxPayloadType=z.preferredPayloadType,F.remoteRtxPayloadType=U.preferredPayloadType)}for(const F of B.headerExtensions){const z=N.headerExtensions.find(G=>H(G,F));if(!z)continue;const U={kind:F.kind,uri:F.uri,sendId:z.preferredId,recvId:F.preferredId,encrypt:z.preferredEncrypt,direction:"sendrecv"};switch(F.direction){case"sendrecv":{U.direction="sendrecv";break}case"recvonly":{U.direction="sendonly";break}case"sendonly":{U.direction="recvonly";break}case"inactive":{U.direction="inactive";break}}$.headerExtensions.push(U)}return $}function S(N){const B={codecs:[],headerExtensions:[]};for(const $ of N.codecs){const F={mimeType:$.mimeType,kind:$.kind,preferredPayloadType:$.remotePayloadType,clockRate:$.clockRate,channels:$.channels,parameters:$.localParameters,rtcpFeedback:$.rtcpFeedback};if(B.codecs.push(F),!$.remoteRtxPayloadType)continue;const z={mimeType:`${$.kind}/rtx`,kind:$.kind,preferredPayloadType:$.remoteRtxPayloadType,clockRate:$.clockRate,parameters:{apt:$.remotePayloadType},rtcpFeedback:[]};B.codecs.push(z)}for(const $ of N.headerExtensions){if($.direction!=="sendrecv"&&$.direction!=="recvonly")continue;const F={kind:$.kind,uri:$.uri,preferredId:$.recvId,preferredEncrypt:$.encrypt,direction:$.direction};B.headerExtensions.push(F)}return B}function y(N,B){const $={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const F of B.codecs){if(F.kind!==N)continue;const z={mimeType:F.mimeType,payloadType:F.localPayloadType,clockRate:F.clockRate,channels:F.channels,parameters:F.localParameters,rtcpFeedback:F.rtcpFeedback};if($.codecs.push(z),F.localRtxPayloadType){const U={mimeType:`${F.kind}/rtx`,payloadType:F.localRtxPayloadType,clockRate:F.clockRate,parameters:{apt:F.localPayloadType},rtcpFeedback:[]};$.codecs.push(U)}}for(const F of B.headerExtensions){if(F.kind&&F.kind!==N||F.direction!=="sendrecv"&&F.direction!=="sendonly")continue;const z={uri:F.uri,id:F.sendId,encrypt:F.encrypt,parameters:{}};$.headerExtensions.push(z)}return $}function b(N,B){const $={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const F of B.codecs){if(F.kind!==N)continue;const z={mimeType:F.mimeType,payloadType:F.localPayloadType,clockRate:F.clockRate,channels:F.channels,parameters:F.remoteParameters,rtcpFeedback:F.rtcpFeedback};if($.codecs.push(z),F.localRtxPayloadType){const U={mimeType:`${F.kind}/rtx`,payloadType:F.localRtxPayloadType,clockRate:F.clockRate,parameters:{apt:F.localPayloadType},rtcpFeedback:[]};$.codecs.push(U)}}for(const F of B.headerExtensions){if(F.kind&&F.kind!==N||F.direction!=="sendrecv"&&F.direction!=="sendonly")continue;const z={uri:F.uri,id:F.sendId,encrypt:F.encrypt,parameters:{}};$.headerExtensions.push(z)}if($.headerExtensions.some(F=>F.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const F of $.codecs)F.rtcpFeedback=(F.rtcpFeedback??[]).filter(z=>z.type!=="goog-remb");else if($.headerExtensions.some(F=>F.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const F of $.codecs)F.rtcpFeedback=(F.rtcpFeedback??[]).filter(z=>z.type!=="transport-cc");else for(const F of $.codecs)F.rtcpFeedback=(F.rtcpFeedback??[]).filter(z=>z.type!=="transport-cc"&&z.type!=="goog-remb");return $}function C(N,B){const $=[];if(!B)$.push(N[0]),O(N[1])&&$.push(N[1]);else{for(let F=0;F<N.length;++F)if(V(N[F],B,{strict:!0})){$.push(N[F]),O(N[F+1])&&$.push(N[F+1]);break}if($.length===0)throw new TypeError("no matching codec found")}return $}function T(N){N=s.clone(N),d(N);const B={mid:o,codecs:[],headerExtensions:[],encodings:[{ssrc:a}],rtcp:{cname:"probator"}};return B.codecs.push(N.codecs[0]),B.codecs[0].payloadType=c,B.headerExtensions=N.headerExtensions,B}function R(N,B){return B.codecs.some($=>$.kind===N)}function m(N,B){if(d(N),N.codecs.length===0)return!1;const $=N.codecs[0];return B.codecs.some(F=>F.remotePayloadType===$.payloadType)}function v(N){const B=new RegExp("^(audio|video)/(.+)","i");if(typeof N!="object")throw new TypeError("codec is not an object");if(!N.mimeType||typeof N.mimeType!="string")throw new TypeError("missing codec.mimeType");const $=B.exec(N.mimeType);if(!$)throw new TypeError("invalid codec.mimeType");if(N.kind=$[1].toLowerCase(),N.preferredPayloadType&&typeof N.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof N.clockRate!="number")throw new TypeError("missing codec.clockRate");N.kind==="audio"?typeof N.channels!="number"&&(N.channels=1):delete N.channels,(!N.parameters||typeof N.parameters!="object")&&(N.parameters={});for(const F of Object.keys(N.parameters)){let z=N.parameters[F];if(z===void 0&&(N.parameters[F]="",z=""),typeof z!="string"&&typeof z!="number")throw new TypeError(`invalid codec parameter [key:${F}s, value:${z}]`);if(F==="apt"&&typeof z!="number")throw new TypeError("invalid codec apt parameter")}(!N.rtcpFeedback||!Array.isArray(N.rtcpFeedback))&&(N.rtcpFeedback=[]);for(const F of N.rtcpFeedback)x(F)}function x(N){if(typeof N!="object")throw new TypeError("fb is not an object");if(!N.type||typeof N.type!="string")throw new TypeError("missing fb.type");(!N.parameter||typeof N.parameter!="string")&&(N.parameter="")}function _(N){if(typeof N!="object")throw new TypeError("ext is not an object");if(N.kind!=="audio"&&N.kind!=="video")throw new TypeError("invalid ext.kind");if(!N.uri||typeof N.uri!="string")throw new TypeError("missing ext.uri");if(typeof N.preferredId!="number")throw new TypeError("missing ext.preferredId");if(N.preferredEncrypt&&typeof N.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(N.preferredEncrypt||(N.preferredEncrypt=!1),N.direction&&typeof N.direction!="string")throw new TypeError("invalid ext.direction");N.direction||(N.direction="sendrecv")}function k(N){const B=new RegExp("^(audio|video)/(.+)","i");if(typeof N!="object")throw new TypeError("codec is not an object");if(!N.mimeType||typeof N.mimeType!="string")throw new TypeError("missing codec.mimeType");const $=B.exec(N.mimeType);if(!$)throw new TypeError("invalid codec.mimeType");if(typeof N.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof N.clockRate!="number")throw new TypeError("missing codec.clockRate");$[1].toLowerCase()==="audio"?typeof N.channels!="number"&&(N.channels=1):delete N.channels,(!N.parameters||typeof N.parameters!="object")&&(N.parameters={});for(const z of Object.keys(N.parameters)){let U=N.parameters[z];if(U===void 0&&(N.parameters[z]="",U=""),typeof U!="string"&&typeof U!="number")throw new TypeError(`invalid codec parameter [key:${z}s, value:${U}]`);if(z==="apt"&&typeof U!="number")throw new TypeError("invalid codec apt parameter")}(!N.rtcpFeedback||!Array.isArray(N.rtcpFeedback))&&(N.rtcpFeedback=[]);for(const z of N.rtcpFeedback)x(z)}function D(N){if(typeof N!="object")throw new TypeError("ext is not an object");if(!N.uri||typeof N.uri!="string")throw new TypeError("missing ext.uri");if(typeof N.id!="number")throw new TypeError("missing ext.id");if(N.encrypt&&typeof N.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");N.encrypt||(N.encrypt=!1),(!N.parameters||typeof N.parameters!="object")&&(N.parameters={});for(const B of Object.keys(N.parameters)){let $=N.parameters[B];if($===void 0&&(N.parameters[B]="",$=""),typeof $!="string"&&typeof $!="number")throw new TypeError("invalid header extension parameter")}}function M(N){if(typeof N!="object")throw new TypeError("encoding is not an object");if(N.ssrc&&typeof N.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(N.rid&&typeof N.rid!="string")throw new TypeError("invalid encoding.rid");if(N.rtx&&typeof N.rtx!="object")throw new TypeError("invalid encoding.rtx");if(N.rtx&&typeof N.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!N.dtx||typeof N.dtx!="boolean")&&(N.dtx=!1),N.scalabilityMode&&typeof N.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function P(N){if(typeof N!="object")throw new TypeError("rtcp is not an object");if(N.cname&&typeof N.cname!="string")throw new TypeError("invalid rtcp.cname");(!N.reducedSize||typeof N.reducedSize!="boolean")&&(N.reducedSize=!0)}function L(N){if(typeof N!="object")throw new TypeError("numStreams is not an object");if(typeof N.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof N.MIS!="number")throw new TypeError("missing numStreams.MIS")}function O(N){return N?/.+\/rtx$/i.test(N.mimeType):!1}function V(N,B,{strict:$=!1,modify:F=!1}={}){const z=N.mimeType.toLowerCase(),U=B.mimeType.toLowerCase();if(z!==U||N.clockRate!==B.clockRate||N.channels!==B.channels)return!1;switch(z){case"video/h264":{if($){const G=N.parameters["packetization-mode"]||0,te=B.parameters["packetization-mode"]||0;if(G!==te||!r.isSameProfile(N.parameters,B.parameters))return!1;let ne;try{ne=r.generateProfileLevelIdStringForAnswer(N.parameters,B.parameters)}catch{return!1}F&&(ne?(N.parameters["profile-level-id"]=ne,B.parameters["profile-level-id"]=ne):(delete N.parameters["profile-level-id"],delete B.parameters["profile-level-id"]))}break}case"video/vp9":{if($){const G=N.parameters["profile-id"]||0,te=B.parameters["profile-id"]||0;if(G!==te)return!1}break}}return!0}function H(N,B){return!(N.kind&&B.kind&&N.kind!==B.kind||N.uri!==B.uri)}function q(N,B){const $=[];for(const F of N.rtcpFeedback??[]){const z=(B.rtcpFeedback??[]).find(U=>U.type===F.type&&(U.parameter===F.parameter||!U.parameter&&!F.parameter));z&&$.push(z)}return $}return Zt}var wr={},so={},Dl={},iR;function P9(){if(iR)return Dl;iR=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.Logger=void 0;const e=xm(),t="awaitqueue";let n=class{constructor(s){s?(this._debug=(0,e.default)(`${t}:${s}`),this._warn=(0,e.default)(`${t}:WARN:${s}`),this._error=(0,e.default)(`${t}:ERROR:${s}`)):(this._debug=(0,e.default)(t),this._warn=(0,e.default)(`${t}:WARN`),this._error=(0,e.default)(`${t}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};return Dl.Logger=n,Dl}var aR;function M9(){if(aR)return so;aR=1,Object.defineProperty(so,"__esModule",{value:!0}),so.AwaitQueue=so.AwaitQueueRemovedTaskError=so.AwaitQueueStoppedError=void 0;const e=P9(),t=new e.Logger;class n extends Error{constructor(a){super(a??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,n)}}so.AwaitQueueStoppedError=n;class r extends Error{constructor(a){super(a??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,r)}}so.AwaitQueueRemovedTaskError=r;class s{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(a,c){if(c=c??a.name,t.debug(`push() [name:${c}]`),typeof a!="function")throw new TypeError("given task is not a function");if(c)try{Object.defineProperty(a,"name",{value:c})}catch{}return new Promise((f,d)=>{const p={id:this.nextTaskId++,task:a,name:c,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:h=>{if(p.completed)return;p.completed=!0,this.pendingTasks.delete(p.id),t.debug(`resolving task [name:${p.name}]`),f(h);const[g]=this.pendingTasks.values();g&&!g.executedAt&&this.execute(g)},reject:h=>{if(!p.completed&&(p.completed=!0,this.pendingTasks.delete(p.id),t.debug(`rejecting task [name:${p.name}]: %s`,String(h)),d(h),!this.stopping)){const[g]=this.pendingTasks.values();g&&!g.executedAt&&this.execute(g)}}};this.pendingTasks.set(p.id,p),this.pendingTasks.size===1&&this.execute(p)})}stop(){t.debug("stop()"),this.stopping=!0;for(const a of this.pendingTasks.values())t.debug(`stop() | stopping task [name:${a.name}]`),a.reject(new n);this.stopping=!1}remove(a){t.debug(`remove() [taskIdx:${a}]`);const c=Array.from(this.pendingTasks.values())[a];if(!c){t.debug(`stop() | no task with given idx [taskIdx:${a}]`);return}c.reject(new r)}dump(){const a=Date.now();let c=0;return Array.from(this.pendingTasks.values()).map(f=>({idx:c++,task:f.task,name:f.name,enqueuedTime:f.executedAt?f.executedAt-f.enqueuedAt:a-f.enqueuedAt,executionTime:f.executedAt?a-f.executedAt:0}))}async execute(a){if(t.debug(`execute() [name:${a.name}]`),a.executedAt)throw new Error("task already being executed");a.executedAt=Date.now();try{const c=await a.task();a.resolve(c)}catch(c){a.reject(c)}}}return so.AwaitQueue=s,so}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ey,cR;function N9(){if(cR)return Ey;cR=1;let e;return Ey=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Vl):t=>(e||(e=Promise.resolve())).then(t).catch(n=>setTimeout(()=>{throw n},0)),Ey}var jl={},lR;function ED(){if(lR)return jl;lR=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.Producer=void 0;const e=un(),t=Sa(),n=Kn(),r=new e.Logger("Producer");let s=class extends t.EnhancedEventEmitter{constructor({id:a,localId:c,rtpSender:f,track:d,rtpParameters:p,stopTracks:h,disableTrackOnPause:g,zeroRtpOnPause:S,appData:y}){super(),this._closed=!1,this._observer=new t.EnhancedEventEmitter,r.debug("constructor()"),this._id=a,this._localId=c,this._rtpSender=f,this._track=d,this._kind=d.kind,this._rtpParameters=p,this._paused=g?!d.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=h,this._disableTrackOnPause=g,this._zeroRtpOnPause=S,this._appData=y??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(a){this._appData=a}get observer(){return this._observer}close(){this._closed||(r.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(r.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new n.InvalidStateError("closed");return new Promise((a,c)=>{this.safeEmit("@getstats",a,c)})}pause(){if(r.debug("pause()"),this._closed){r.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((a,c)=>{this.safeEmit("@pause",a,c)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(r.debug("resume()"),this._closed){r.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((a,c)=>{this.safeEmit("@resume",a,c)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:a}){if(r.debug("replaceTrack() [track:%o]",a),this._closed){if(a&&this._stopTracks)try{a.stop()}catch{}throw new n.InvalidStateError("closed")}else if(a&&a.readyState==="ended")throw new n.InvalidStateError("track ended");if(a===this._track){r.debug("replaceTrack() | same track, ignored");return}await new Promise((c,f)=>{this.safeEmit("@replacetrack",a,c,f)}),this.destroyTrack(),this._track=a,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(a){if(this._closed)throw new n.InvalidStateError("closed");if(this._kind!=="video")throw new n.UnsupportedError("not a video Producer");if(typeof a!="number")throw new TypeError("invalid spatialLayer");a!==this._maxSpatialLayer&&(await new Promise((c,f)=>{this.safeEmit("@setmaxspatiallayer",a,c,f)}).catch(()=>{}),this._maxSpatialLayer=a)}async setRtpEncodingParameters(a){if(this._closed)throw new n.InvalidStateError("closed");if(typeof a!="object")throw new TypeError("invalid params");await new Promise((c,f)=>{this.safeEmit("@setrtpencodingparameters",a,c,f)})}onTrackEnded(){r.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}};return jl.Producer=s,jl}var Pl={},dR;function kD(){if(dR)return Pl;dR=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.Consumer=void 0;const e=un(),t=Sa(),n=Kn(),r=new e.Logger("Consumer");let s=class extends t.EnhancedEventEmitter{constructor({id:a,localId:c,producerId:f,rtpReceiver:d,track:p,rtpParameters:h,appData:g}){super(),this._closed=!1,this._observer=new t.EnhancedEventEmitter,r.debug("constructor()"),this._id=a,this._localId=c,this._producerId=f,this._rtpReceiver=d,this._track=p,this._rtpParameters=h,this._paused=!p.enabled,this._appData=g??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(a){this._appData=a}get observer(){return this._observer}close(){this._closed||(r.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(r.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new n.InvalidStateError("closed");return new Promise((a,c)=>{this.safeEmit("@getstats",a,c)})}pause(){if(r.debug("pause()"),this._closed){r.error("pause() | Consumer closed");return}if(this._paused){r.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(r.debug("resume()"),this._closed){r.error("resume() | Consumer closed");return}if(!this._paused){r.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){r.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}};return Pl.Consumer=s,Pl}var Ml={},uR;function ID(){if(uR)return Ml;uR=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.DataProducer=void 0;const e=un(),t=Sa(),n=Kn(),r=new e.Logger("DataProducer");let s=class extends t.EnhancedEventEmitter{constructor({id:a,dataChannel:c,sctpStreamParameters:f,appData:d}){super(),this._closed=!1,this._observer=new t.EnhancedEventEmitter,r.debug("constructor()"),this._id=a,this._dataChannel=c,this._sctpStreamParameters=f,this._appData=d??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(a){this._dataChannel.bufferedAmountLowThreshold=a}get appData(){return this._appData}set appData(a){this._appData=a}get observer(){return this._observer}close(){this._closed||(r.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(r.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(a){if(r.debug("send()"),this._closed)throw new n.InvalidStateError("closed");this._dataChannel.send(a)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(r.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",a=>{if(this._closed)return;let{error:c}=a;c||(c=new Error("unknown DataChannel error")),c.errorDetail==="sctp-failure"?r.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",c.sctpCauseCode,c.message):r.error('DataChannel "error" event: %o',c),this.safeEmit("error",c)}),this._dataChannel.addEventListener("close",()=>{this._closed||(r.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||r.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}};return Ml.DataProducer=s,Ml}var Nl={},fR;function DD(){if(fR)return Nl;fR=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.DataConsumer=void 0;const e=un(),t=Sa(),n=new e.Logger("DataConsumer");let r=class extends t.EnhancedEventEmitter{constructor({id:o,dataProducerId:a,dataChannel:c,sctpStreamParameters:f,appData:d}){super(),this._closed=!1,this._observer=new t.EnhancedEventEmitter,n.debug("constructor()"),this._id=o,this._dataProducerId=a,this._dataChannel=c,this._sctpStreamParameters=f,this._appData=d??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(o){this._dataChannel.binaryType=o}get appData(){return this._appData}set appData(o){this._appData=o}get observer(){return this._observer}close(){this._closed||(n.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(n.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(n.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",o=>{if(this._closed)return;let{error:a}=o;a||(a=new Error("unknown DataChannel error")),a.errorDetail==="sctp-failure"?n.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",a.sctpCauseCode,a.message):n.error('DataChannel "error" event: %o',a),this.safeEmit("error",a)}),this._dataChannel.addEventListener("close",()=>{this._closed||(n.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",o=>{this._closed||this.safeEmit("message",o.data)})}};return Nl.DataConsumer=r,Nl}var pR;function jD(){if(pR)return wr;pR=1;var e=wr&&wr.__createBinding||(Object.create?function(R,m,v,x){x===void 0&&(x=v);var _=Object.getOwnPropertyDescriptor(m,v);(!_||("get"in _?!m.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(R,x,_)}:function(R,m,v,x){x===void 0&&(x=v),R[x]=m[v]}),t=wr&&wr.__setModuleDefault||(Object.create?function(R,m){Object.defineProperty(R,"default",{enumerable:!0,value:m})}:function(R,m){R.default=m}),n=wr&&wr.__importStar||function(R){if(R&&R.__esModule)return R;var m={};if(R!=null)for(var v in R)v!=="default"&&Object.prototype.hasOwnProperty.call(R,v)&&e(m,R,v);return t(m,R),m},r=wr&&wr.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(wr,"__esModule",{value:!0}),wr.Transport=void 0;const s=M9(),o=r(N9()),a=un(),c=Sa(),f=Kn(),d=n(Pn()),p=n(ur()),h=ED(),g=kD(),S=ID(),y=DD(),b=new a.Logger("Transport");class C{constructor(m){this.consumerOptions=m,this.promise=new Promise((v,x)=>{this.resolve=v,this.reject=x})}}let T=class extends c.EnhancedEventEmitter{constructor({direction:m,id:v,iceParameters:x,iceCandidates:_,dtlsParameters:k,sctpParameters:D,iceServers:M,iceTransportPolicy:P,additionalSettings:L,proprietaryConstraints:O,appData:V,handlerFactory:H,extendedRtpCapabilities:q,canProduceByKind:N}){super(),this._closed=!1,this._iceGatheringState="new",this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new s.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new c.EnhancedEventEmitter,b.debug("constructor() [id:%s, direction:%s]",v,m),this._id=v,this._direction=m,this._extendedRtpCapabilities=q,this._canProduceByKind=N,this._maxSctpMessageSize=D?D.maxMessageSize:null;const B=d.clone(L)??{};delete B.iceServers,delete B.iceTransportPolicy,delete B.bundlePolicy,delete B.rtcpMuxPolicy,delete B.sdpSemantics,this._handler=H(),this._handler.run({direction:m,iceParameters:x,iceCandidates:_,dtlsParameters:k,sctpParameters:D,iceServers:M,iceTransportPolicy:P,additionalSettings:B,proprietaryConstraints:O,extendedRtpCapabilities:q}),this._appData=V??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(m){this._appData=m}get observer(){return this._observer}close(){if(!this._closed){b.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const m of this._producers.values())m.transportClosed();this._producers.clear();for(const m of this._consumers.values())m.transportClosed();this._consumers.clear();for(const m of this._dataProducers.values())m.transportClosed();this._dataProducers.clear();for(const m of this._dataConsumers.values())m.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new f.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:m}){if(b.debug("restartIce()"),this._closed)throw new f.InvalidStateError("closed");if(!m)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(m),"transport.restartIce()")}async updateIceServers({iceServers:m}={}){if(b.debug("updateIceServers()"),this._closed)throw new f.InvalidStateError("closed");if(!Array.isArray(m))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(m),"transport.updateIceServers()")}async produce({track:m,encodings:v,codecOptions:x,codec:_,stopTracks:k=!0,disableTrackOnPause:D=!0,zeroRtpOnPause:M=!1,onRtpSender:P,appData:L={}}={}){if(b.debug("produce() [track:%o]",m),this._closed)throw new f.InvalidStateError("closed");if(m){if(this._direction!=="send")throw new f.UnsupportedError("not a sending Transport");if(this._canProduceByKind[m.kind]){if(m.readyState==="ended")throw new f.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(L&&typeof L!="object")throw new TypeError("if given, appData must be an object")}else throw new f.UnsupportedError(`cannot produce ${m.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let O;if(v&&!Array.isArray(v))throw TypeError("encodings must be an array");v&&v.length===0?O=void 0:v&&(O=v.map(N=>{const B={active:!0};return N.active===!1&&(B.active=!1),typeof N.dtx=="boolean"&&(B.dtx=N.dtx),typeof N.scalabilityMode=="string"&&(B.scalabilityMode=N.scalabilityMode),typeof N.scaleResolutionDownBy=="number"&&(B.scaleResolutionDownBy=N.scaleResolutionDownBy),typeof N.maxBitrate=="number"&&(B.maxBitrate=N.maxBitrate),typeof N.maxFramerate=="number"&&(B.maxFramerate=N.maxFramerate),typeof N.adaptivePtime=="boolean"&&(B.adaptivePtime=N.adaptivePtime),typeof N.priority=="string"&&(B.priority=N.priority),typeof N.networkPriority=="string"&&(B.networkPriority=N.networkPriority),B}));const{localId:V,rtpParameters:H,rtpSender:q}=await this._handler.send({track:m,encodings:O,codecOptions:x,codec:_,onRtpSender:P});try{p.validateRtpParameters(H);const{id:N}=await new Promise(($,F)=>{this.safeEmit("produce",{kind:m.kind,rtpParameters:H,appData:L},$,F)}),B=new h.Producer({id:N,localId:V,rtpSender:q,track:m,rtpParameters:H,stopTracks:k,disableTrackOnPause:D,zeroRtpOnPause:M,appData:L});return this._producers.set(B.id,B),this.handleProducer(B),this._observer.safeEmit("newproducer",B),B}catch(N){throw this._handler.stopSending(V).catch(()=>{}),N}},"transport.produce()").catch(O=>{if(k)try{m.stop()}catch{}throw O})}async consume({id:m,producerId:v,kind:x,rtpParameters:_,streamId:k,onRtpReceiver:D,appData:M={}}){if(b.debug("consume()"),this._closed)throw new f.InvalidStateError("closed");if(this._direction!=="recv")throw new f.UnsupportedError("not a receiving Transport");if(typeof m!="string")throw new TypeError("missing id");if(typeof v!="string")throw new TypeError("missing producerId");if(x!=="audio"&&x!=="video")throw new TypeError(`invalid kind '${x}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(M&&typeof M!="object")throw new TypeError("if given, appData must be an object");const P=d.clone(_);if(!p.canReceive(P,this._extendedRtpCapabilities))throw new f.UnsupportedError("cannot consume this Producer");const O=new C({id:m,producerId:v,kind:x,rtpParameters:P,streamId:k,onRtpReceiver:D,appData:M});return this._pendingConsumerTasks.push(O),(0,o.default)(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),O.promise}async produceData({ordered:m=!0,maxPacketLifeTime:v,maxRetransmits:x,label:_="",protocol:k="",appData:D={}}={}){if(b.debug("produceData()"),this._closed)throw new f.InvalidStateError("closed");if(this._direction!=="send")throw new f.UnsupportedError("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(D&&typeof D!="object")throw new TypeError("if given, appData must be an object")}else throw new f.UnsupportedError("SCTP not enabled by remote Transport");return(v||x)&&(m=!1),this._awaitQueue.push(async()=>{const{dataChannel:M,sctpStreamParameters:P}=await this._handler.sendDataChannel({ordered:m,maxPacketLifeTime:v,maxRetransmits:x,label:_,protocol:k});p.validateSctpStreamParameters(P);const{id:L}=await new Promise((V,H)=>{this.safeEmit("producedata",{sctpStreamParameters:P,label:_,protocol:k,appData:D},V,H)}),O=new S.DataProducer({id:L,dataChannel:M,sctpStreamParameters:P,appData:D});return this._dataProducers.set(O.id,O),this.handleDataProducer(O),this._observer.safeEmit("newdataproducer",O),O},"transport.produceData()")}async consumeData({id:m,dataProducerId:v,sctpStreamParameters:x,label:_="",protocol:k="",appData:D={}}){if(b.debug("consumeData()"),this._closed)throw new f.InvalidStateError("closed");if(this._direction!=="recv")throw new f.UnsupportedError("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof m!="string")throw new TypeError("missing id");if(typeof v!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(D&&typeof D!="object")throw new TypeError("if given, appData must be an object")}else throw new f.UnsupportedError("SCTP not enabled by remote Transport");const M=d.clone(x);return p.validateSctpStreamParameters(M),this._awaitQueue.push(async()=>{const{dataChannel:P}=await this._handler.receiveDataChannel({sctpStreamParameters:M,label:_,protocol:k}),L=new y.DataConsumer({id:m,dataProducerId:v,dataChannel:P,sctpStreamParameters:M,appData:D});return this._dataConsumers.set(L.id,L),this.handleDataConsumer(L),this._observer.safeEmit("newdataconsumer",L),L},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){b.debug("createPendingConsumers() | there is no Consumer to be created");return}const m=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let v;const x=[];for(const _ of m){const{id:k,kind:D,rtpParameters:M,streamId:P,onRtpReceiver:L}=_.consumerOptions;x.push({trackId:k,kind:D,rtpParameters:M,streamId:P,onRtpReceiver:L})}try{const _=await this._handler.receive(x);for(let k=0;k<_.length;++k){const D=m[k],M=_[k],{id:P,producerId:L,kind:O,rtpParameters:V,appData:H}=D.consumerOptions,{localId:q,rtpReceiver:N,track:B}=M,$=new g.Consumer({id:P,localId:q,producerId:L,rtpReceiver:N,track:B,rtpParameters:V,appData:H});this._consumers.set($.id,$),this.handleConsumer($),!this._probatorConsumerCreated&&!v&&O==="video"&&(v=$),this._observer.safeEmit("newconsumer",$),D.resolve($)}}catch(_){for(const k of m)k.reject(_)}if(v)try{const _=p.generateProbatorRtpParameters(v.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:_}]),b.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(_){b.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",_)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){b.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const m=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const v=m.map(x=>x.localId);await this._handler.pauseReceiving(v)}catch(v){b.error("pausePendingConsumers() | failed to pause Consumers:",v)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){b.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const m=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const v=m.map(x=>x.localId);await this._handler.resumeReceiving(v)}catch(v){b.error("resumePendingConsumers() | failed to resume Consumers:",v)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){b.debug("closePendingConsumers() | there is no Consumer to be closed");return}const m=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(m.map(v=>v.localId))}catch(v){b.error("closePendingConsumers() | failed to close Consumers:",v)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const m=this._handler;m.on("@connect",({dtlsParameters:v},x,_)=>{if(this._closed){_(new f.InvalidStateError("closed"));return}this.safeEmit("connect",{dtlsParameters:v},x,_)}),m.on("@icegatheringstatechange",v=>{v!==this._iceGatheringState&&(b.debug("ICE gathering state changed to %s",v),this._iceGatheringState=v,this._closed||this.safeEmit("icegatheringstatechange",v))}),m.on("@connectionstatechange",v=>{v!==this._connectionState&&(b.debug("connection state changed to %s",v),this._connectionState=v,this._closed||this.safeEmit("connectionstatechange",v))})}handleProducer(m){m.on("@close",()=>{this._producers.delete(m.id),!this._closed&&this._awaitQueue.push(async()=>await this._handler.stopSending(m.localId),"producer @close event").catch(v=>b.warn("producer.close() failed:%o",v))}),m.on("@pause",(v,x)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(m.localId),"producer @pause event").then(v).catch(x)}),m.on("@resume",(v,x)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(m.localId),"producer @resume event").then(v).catch(x)}),m.on("@replacetrack",(v,x,_)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(m.localId,v),"producer @replacetrack event").then(x).catch(_)}),m.on("@setmaxspatiallayer",(v,x,_)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(m.localId,v),"producer @setmaxspatiallayer event").then(x).catch(_)}),m.on("@setrtpencodingparameters",(v,x,_)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(m.localId,v),"producer @setrtpencodingparameters event").then(x).catch(_)}),m.on("@getstats",(v,x)=>{if(this._closed)return x(new f.InvalidStateError("closed"));this._handler.getSenderStats(m.localId).then(v).catch(x)})}handleConsumer(m){m.on("@close",()=>{this._consumers.delete(m.id),this._pendingPauseConsumers.delete(m.id),this._pendingResumeConsumers.delete(m.id),!this._closed&&(this._pendingCloseConsumers.set(m.id,m),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),m.on("@pause",()=>{this._pendingResumeConsumers.has(m.id)&&this._pendingResumeConsumers.delete(m.id),this._pendingPauseConsumers.set(m.id,m),(0,o.default)(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),m.on("@resume",()=>{this._pendingPauseConsumers.has(m.id)&&this._pendingPauseConsumers.delete(m.id),this._pendingResumeConsumers.set(m.id,m),(0,o.default)(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),m.on("@getstats",(v,x)=>{if(this._closed)return x(new f.InvalidStateError("closed"));this._handler.getReceiverStats(m.localId).then(v).catch(x)})}handleDataProducer(m){m.on("@close",()=>{this._dataProducers.delete(m.id)})}handleDataConsumer(m){m.on("@close",()=>{this._dataConsumers.delete(m.id)})}};return wr.Transport=T,wr}var es={},Ls={},ky={},Iy={exports:{}},hR;function PD(){if(hR)return Iy.exports;hR=1;var e=Iy.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var n="candidate:%s %d %s %d %s %d typ %s";return n+=t.raddr!=null?" raddr %s rport %d":"%v%v",n+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(n+=" generation %d"),n+=t["network-id"]!=null?" network-id %d":"%v",n+=t["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var n="ssrc:%d";return t.attribute!=null&&(n+=" %s",t.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var n="mediaclk:";return n+=t.id!=null?"id=%s %s":"%v%s",n+=t.mediaClockValue!=null?"=%s":"",n+=t.rateNumerator!=null?" rate=%s":"",n+=t.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach(function(t){var n=e[t];n.forEach(function(r){r.reg||(r.reg=/(.*)/),r.format||(r.format="%s")})}),Iy.exports}var mR;function L9(){return mR||(mR=1,function(e){var t=function(c){return String(Number(c))===c?Number(c):c},n=function(c,f,d,p){if(p&&!d)f[p]=t(c[1]);else for(var h=0;h<d.length;h+=1)c[h+1]!=null&&(f[d[h]]=t(c[h+1]))},r=function(c,f,d){var p=c.name&&c.names;c.push&&!f[c.push]?f[c.push]=[]:p&&!f[c.name]&&(f[c.name]={});var h=c.push?{}:p?f[c.name]:f;n(d.match(c.reg),h,c.names,c.name),c.push&&f[c.push].push(h)},s=PD(),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(c){var f={},d=[],p=f;return c.split(/(\r\n|\r|\n)/).filter(o).forEach(function(h){var g=h[0],S=h.slice(2);g==="m"&&(d.push({rtp:[],fmtp:[]}),p=d[d.length-1]);for(var y=0;y<(s[g]||[]).length;y+=1){var b=s[g][y];if(b.reg.test(S))return r(b,p,S)}}),f.media=d,f};var a=function(c,f){var d=f.split(/=(.+)/,2);return d.length===2?c[d[0]]=t(d[1]):d.length===1&&f.length>1&&(c[d[0]]=void 0),c};e.parseParams=function(c){return c.split(/;\s?/).reduce(a,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(c){return c.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(c){for(var f=[],d=c.split(" ").map(t),p=0;p<d.length;p+=3)f.push({component:d[p],ip:d[p+1],port:d[p+2]});return f},e.parseImageAttributes=function(c){return c.split(" ").map(function(f){return f.substring(1,f.length-1).split(",").reduce(a,{})})},e.parseSimulcastStreamList=function(c){return c.split(";").map(function(f){return f.split(",").map(function(d){var p,h=!1;return d[0]!=="~"?p=t(d):(p=t(d.substring(1,d.length)),h=!0),{scid:p,paused:h}})})}}(ky)),ky}var Dy,gR;function O9(){if(gR)return Dy;gR=1;var e=PD(),t=/%[sdv%]/g,n=function(a){var c=1,f=arguments,d=f.length;return a.replace(t,function(p){if(c>=d)return p;var h=f[c];switch(c+=1,p){case"%%":return"%";case"%s":return String(h);case"%d":return Number(h);case"%v":return""}})},r=function(a,c,f){var d=c.format instanceof Function?c.format(c.push?f:f[c.name]):c.format,p=[a+"="+d];if(c.names)for(var h=0;h<c.names.length;h+=1){var g=c.names[h];c.name?p.push(f[c.name][g]):p.push(f[c.names[h]])}else p.push(f[c.name]);return n.apply(null,p)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return Dy=function(a,c){c=c||{},a.version==null&&(a.version=0),a.name==null&&(a.name=" "),a.media.forEach(function(h){h.payloads==null&&(h.payloads="")});var f=c.outerOrder||s,d=c.innerOrder||o,p=[];return f.forEach(function(h){e[h].forEach(function(g){g.name in a&&a[g.name]!=null?p.push(r(h,g,a)):g.push in a&&a[g.push]!=null&&a[g.push].forEach(function(S){p.push(r(h,g,S))})})}),a.media.forEach(function(h){p.push(r("m",e.m[0],h)),d.forEach(function(g){e[g].forEach(function(S){S.name in h&&h[S.name]!=null?p.push(r(g,S,h)):S.push in h&&h[S.push]!=null&&h[S.push].forEach(function(y){p.push(r(g,S,y))})})})}),p.join(`\r
`)+`\r
`},Dy}var vR;function fr(){if(vR)return Ls;vR=1;var e=L9(),t=O9();return Ls.write=t,Ls.parse=e.parse,Ls.parseParams=e.parseParams,Ls.parseFmtpConfig=e.parseFmtpConfig,Ls.parsePayloads=e.parsePayloads,Ls.parseRemoteCandidates=e.parseRemoteCandidates,Ls.parseImageAttributes=e.parseImageAttributes,Ls.parseSimulcastStreamList=e.parseSimulcastStreamList,Ls}var Sr={},yR;function _s(){if(yR)return Sr;yR=1;var e=Sr&&Sr.__createBinding||(Object.create?function(f,d,p,h){h===void 0&&(h=p);var g=Object.getOwnPropertyDescriptor(d,p);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[p]}}),Object.defineProperty(f,h,g)}:function(f,d,p,h){h===void 0&&(h=p),f[h]=d[p]}),t=Sr&&Sr.__setModuleDefault||(Object.create?function(f,d){Object.defineProperty(f,"default",{enumerable:!0,value:d})}:function(f,d){f.default=d}),n=Sr&&Sr.__importStar||function(f){if(f&&f.__esModule)return f;var d={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(d,f,p);return t(d,f),d};Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.extractRtpCapabilities=s,Sr.extractDtlsParameters=o,Sr.getCname=a,Sr.applyCodecParameters=c;const r=n(fr());function s({sdpObject:f}){const d=new Map,p=[];let h=!1,g=!1;for(const y of f.media){const b=y.type;switch(b){case"audio":{if(h)continue;h=!0;break}case"video":{if(g)continue;g=!0;break}default:continue}for(const C of y.rtp){const T={kind:b,mimeType:`${b}/${C.codec}`,preferredPayloadType:C.payload,clockRate:C.rate,channels:C.encoding,parameters:{},rtcpFeedback:[]};d.set(T.preferredPayloadType,T)}for(const C of y.fmtp||[]){const T=r.parseParams(C.config),R=d.get(C.payload);R&&(T!=null&&T.hasOwnProperty("profile-level-id")&&(T["profile-level-id"]=String(T["profile-level-id"])),R.parameters=T)}for(const C of y.rtcpFb||[]){const T={type:C.type,parameter:C.subtype};if(T.parameter||delete T.parameter,C.payload!=="*"){const R=d.get(C.payload);if(!R)continue;R.rtcpFeedback.push(T)}else for(const R of d.values())R.kind===b&&!/.+\/rtx$/i.test(R.mimeType)&&R.rtcpFeedback.push(T)}for(const C of y.ext||[]){if(C["encrypt-uri"])continue;const T={kind:b,uri:C.uri,preferredId:C.value};p.push(T)}}return{codecs:Array.from(d.values()),headerExtensions:p}}function o({sdpObject:f}){let d=f.setup,p=f.fingerprint;if(!d||!p){const S=(f.media||[]).find(y=>y.port!==0);S&&(d??(d=S.setup),p??(p=S.fingerprint))}if(d){if(!p)throw new Error("no a=fingerprint found at SDP session or media level")}else throw new Error("no a=setup found at SDP session or media level");let h;switch(d){case"active":{h="client";break}case"passive":{h="server";break}case"actpass":{h="auto";break}}return{role:h,fingerprints:[{algorithm:p.type,value:p.hash}]}}function a({offerMediaObject:f}){const d=(f.ssrcs||[]).find(p=>p.attribute==="cname");return d?d.value:""}function c({offerRtpParameters:f,answerMediaObject:d}){for(const p of f.codecs){const h=p.mimeType.toLowerCase();if(h!=="audio/opus"||!(d.rtp||[]).find(b=>b.payload===p.payloadType))continue;d.fmtp=d.fmtp||[];let S=d.fmtp.find(b=>b.payload===p.payloadType);S||(S={payload:p.payloadType,config:""},d.fmtp.push(S));const y=r.parseParams(S.config);switch(h){case"audio/opus":{const b=p.parameters["sprop-stereo"];b!==void 0&&(y.stereo=b?1:0);break}}S.config="";for(const b of Object.keys(y))S.config&&(S.config+=";"),S.config+=`${b}=${y[b]}`}}return Sr}var Ll={},wR;function ba(){if(wR)return Ll;wR=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.getRtpEncodings=e,Ll.addLegacySimulcast=t;function e({offerMediaObject:n}){const r=new Set;for(const a of n.ssrcs||[]){const c=a.id;r.add(c)}if(r.size===0)throw new Error("no a=ssrc lines found");const s=new Map;for(const a of n.ssrcGroups||[]){if(a.semantics!=="FID")continue;let[c,f]=a.ssrcs.split(/\s+/);c=Number(c),f=Number(f),r.has(c)&&(r.delete(c),r.delete(f),s.set(c,f))}for(const a of r)s.set(a,null);const o=[];for(const[a,c]of s){const f={ssrc:a};c&&(f.rtx={ssrc:c}),o.push(f)}return o}function t({offerMediaObject:n,numStreams:r}){if(r<=1)throw new TypeError("numStreams must be greater than 1");const s=(n.ssrcs||[]).find(S=>S.attribute==="msid");if(!s)throw new Error("a=ssrc line with msid information not found");const[o,a]=s.value.split(" "),c=Number(s.id);let f;(n.ssrcGroups||[]).some(S=>{if(S.semantics!=="FID")return!1;const y=S.ssrcs.split(/\s+/);return Number(y[0])===c?(f=Number(y[1]),!0):!1});const d=n.ssrcs.find(S=>S.attribute==="cname");if(!d)throw new Error("a=ssrc line with cname information not found");const p=d.value,h=[],g=[];for(let S=0;S<r;++S)h.push(c+S),f&&g.push(f+S);n.ssrcGroups=[],n.ssrcs=[],n.ssrcGroups.push({semantics:"SIM",ssrcs:h.join(" ")});for(const S of h)n.ssrcs.push({id:S,attribute:"cname",value:p}),n.ssrcs.push({id:S,attribute:"msid",value:`${o} ${a}`});for(let S=0;S<g.length;++S){const y=h[S],b=g[S];n.ssrcs.push({id:b,attribute:"cname",value:p}),n.ssrcs.push({id:b,attribute:"msid",value:`${o} ${a}`}),n.ssrcGroups.push({semantics:"FID",ssrcs:`${y} ${b}`})}}return Ll}var yf={},SR;function Cm(){if(SR)return yf;SR=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.addNackSuppportForOpus=e;function e(t){var n;for(const r of t.codecs??[])(r.mimeType.toLowerCase()==="audio/opus"||r.mimeType.toLowerCase()==="audio/multiopus")&&!((n=r.rtcpFeedback)!=null&&n.some(s=>s.type==="nack"&&!s.parameter))&&(r.rtcpFeedback||(r.rtcpFeedback=[]),r.rtcpFeedback.push({type:"nack"}))}return yf}var Ol={},bR;function Ir(){if(bR)return Ol;bR=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.HandlerInterface=void 0;const e=Sa();let t=class extends e.EnhancedEventEmitter{constructor(){super()}};return Ol.HandlerInterface=t,Ol}var ts={},qn={},xR;function A9(){if(xR)return qn;xR=1;var e=qn&&qn.__createBinding||(Object.create?function(d,p,h,g){g===void 0&&(g=h);var S=Object.getOwnPropertyDescriptor(p,h);(!S||("get"in S?!p.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return p[h]}}),Object.defineProperty(d,g,S)}:function(d,p,h,g){g===void 0&&(g=h),d[g]=p[h]}),t=qn&&qn.__setModuleDefault||(Object.create?function(d,p){Object.defineProperty(d,"default",{enumerable:!0,value:p})}:function(d,p){d.default=p}),n=qn&&qn.__importStar||function(d){if(d&&d.__esModule)return d;var p={};if(d!=null)for(var h in d)h!=="default"&&Object.prototype.hasOwnProperty.call(d,h)&&e(p,d,h);return t(p,d),p};Object.defineProperty(qn,"__esModule",{value:!0}),qn.OfferMediaSection=qn.AnswerMediaSection=qn.MediaSection=void 0;const r=n(fr()),s=n(Pn());let o=class{constructor({iceParameters:p,iceCandidates:h,dtlsParameters:g,planB:S=!1}){if(this._mediaObject={},this._planB=S,p&&this.setIceParameters(p),h){this._mediaObject.candidates=[];for(const y of h){const b={};b.component=1,b.foundation=y.foundation,b.ip=y.address??y.ip,b.port=y.port,b.priority=y.priority,b.transport=y.protocol,b.type=y.type,y.tcpType&&(b.tcptype=y.tcpType),this._mediaObject.candidates.push(b)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}g&&this.setDtlsRole(g.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(p){this._mediaObject.iceUfrag=p.usernameFragment,this._mediaObject.icePwd=p.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}};qn.MediaSection=o;class a extends o{constructor({iceParameters:p,iceCandidates:h,dtlsParameters:g,sctpParameters:S,plainRtpParameters:y,planB:b=!1,offerMediaObject:C,offerRtpParameters:T,answerRtpParameters:R,codecOptions:m,extmapAllowMixed:v=!1}){switch(super({iceParameters:p,iceCandidates:h,dtlsParameters:g,planB:b}),this._mediaObject.mid=String(C.mid),this._mediaObject.type=C.type,this._mediaObject.protocol=C.protocol,y?(this._mediaObject.connection={ip:y.ip,version:y.ipVersion},this._mediaObject.port=y.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),C.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const x of R.codecs){const _={payload:x.payloadType,codec:f(x),rate:x.clockRate};x.channels>1&&(_.encoding=x.channels),this._mediaObject.rtp.push(_);const k=s.clone(x.parameters)??{};let D=s.clone(x.rtcpFeedback)??[];if(m){const{opusStereo:P,opusFec:L,opusDtx:O,opusMaxPlaybackRate:V,opusMaxAverageBitrate:H,opusPtime:q,opusNack:N,videoGoogleStartBitrate:B,videoGoogleMaxBitrate:$,videoGoogleMinBitrate:F}=m,z=T.codecs.find(U=>U.payloadType===x.payloadType);switch(x.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":{P!==void 0&&(z.parameters["sprop-stereo"]=P?1:0,k.stereo=P?1:0),L!==void 0&&(z.parameters.useinbandfec=L?1:0,k.useinbandfec=L?1:0),O!==void 0&&(z.parameters.usedtx=O?1:0,k.usedtx=O?1:0),V!==void 0&&(k.maxplaybackrate=V),H!==void 0&&(k.maxaveragebitrate=H),q!==void 0&&(z.parameters.ptime=q,k.ptime=q),N||(z.rtcpFeedback=z.rtcpFeedback.filter(U=>U.type!=="nack"||U.parameter),D=D.filter(U=>U.type!=="nack"||U.parameter));break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{B!==void 0&&(k["x-google-start-bitrate"]=B),$!==void 0&&(k["x-google-max-bitrate"]=$),F!==void 0&&(k["x-google-min-bitrate"]=F);break}}}const M={payload:x.payloadType,config:""};for(const P of Object.keys(k))M.config&&(M.config+=";"),M.config+=`${P}=${k[P]}`;M.config&&this._mediaObject.fmtp.push(M);for(const P of D)this._mediaObject.rtcpFb.push({payload:x.payloadType,type:P.type,subtype:P.parameter})}this._mediaObject.payloads=R.codecs.map(x=>x.payloadType).join(" "),this._mediaObject.ext=[];for(const x of R.headerExtensions)(C.ext??[]).some(k=>k.uri===x.uri)&&this._mediaObject.ext.push({uri:x.uri,value:x.id});if(v&&C.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),C.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:C.simulcast.list1},this._mediaObject.rids=[];for(const x of C.rids??[])x.direction==="send"&&this._mediaObject.rids.push({id:x.id,direction:"recv"})}else if(C.simulcast_03){this._mediaObject.simulcast_03={value:C.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const x of C.rids??[])x.direction==="send"&&this._mediaObject.rids.push({id:x.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof C.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=S.port,this._mediaObject.maxMessageSize=S.maxMessageSize):C.sctpmap&&(this._mediaObject.payloads=S.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:S.port,maxMessageSize:S.maxMessageSize});break}}}setDtlsRole(p){switch(p){case"client":{this._mediaObject.setup="active";break}case"server":{this._mediaObject.setup="passive";break}case"auto":{this._mediaObject.setup="actpass";break}}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(p){var y,b;if(!((y=this._mediaObject.simulcast)!=null&&y.list1))return;const h={};for(const C of p)C.rid&&(h[C.rid]=C);const g=this._mediaObject.simulcast.list1,S=r.parseSimulcastStreamList(g);for(const C of S)for(const T of C)T.paused=!((b=h[T.scid])!=null&&b.active);this._mediaObject.simulcast.list1=S.map(C=>C.map(T=>`${T.paused?"~":""}${T.scid}`).join(",")).join(";")}}qn.AnswerMediaSection=a;class c extends o{constructor({iceParameters:p,iceCandidates:h,dtlsParameters:g,sctpParameters:S,plainRtpParameters:y,planB:b=!1,mid:C,kind:T,offerRtpParameters:R,streamId:m,trackId:v,oldDataChannelSpec:x=!1}){var _;switch(super({iceParameters:p,iceCandidates:h,dtlsParameters:g,planB:b}),this._mediaObject.mid=String(C),this._mediaObject.type=T,y?(this._mediaObject.connection={ip:y.ip,version:y.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=y.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},S?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),T){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${m??"-"} ${v}`);for(const P of R.codecs){const L={payload:P.payloadType,codec:f(P),rate:P.clockRate};P.channels>1&&(L.encoding=P.channels),this._mediaObject.rtp.push(L);const O={payload:P.payloadType,config:""};for(const V of Object.keys(P.parameters))O.config&&(O.config+=";"),O.config+=`${V}=${P.parameters[V]}`;O.config&&this._mediaObject.fmtp.push(O);for(const V of P.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:P.payloadType,type:V.type,subtype:V.parameter})}this._mediaObject.payloads=R.codecs.map(P=>P.payloadType).join(" "),this._mediaObject.ext=[];for(const P of R.headerExtensions)this._mediaObject.ext.push({uri:P.uri,value:P.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const k=R.encodings[0],D=k.ssrc,M=(_=k.rtx)==null?void 0:_.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],R.rtcp.cname&&this._mediaObject.ssrcs.push({id:D,attribute:"cname",value:R.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:D,attribute:"msid",value:`${m??"-"} ${v}`}),M&&(R.rtcp.cname&&this._mediaObject.ssrcs.push({id:M,attribute:"cname",value:R.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:M,attribute:"msid",value:`${m??"-"} ${v}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${D} ${M}`}));break}case"application":{x?(this._mediaObject.payloads=S.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:S.port,maxMessageSize:S.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=S.port,this._mediaObject.maxMessageSize=S.maxMessageSize);break}}}setDtlsRole(p){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:p,streamId:h,trackId:g}){var T;const S=p.encodings[0],y=S.ssrc,b=(T=S.rtx)==null?void 0:T.ssrc,C=this._mediaObject.payloads.split(" ");for(const R of p.codecs){if(C.includes(String(R.payloadType)))continue;const m={payload:R.payloadType,codec:f(R),rate:R.clockRate};R.channels>1&&(m.encoding=R.channels),this._mediaObject.rtp.push(m);const v={payload:R.payloadType,config:""};for(const x of Object.keys(R.parameters))v.config&&(v.config+=";"),v.config+=`${x}=${R.parameters[x]}`;v.config&&this._mediaObject.fmtp.push(v);for(const x of R.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:R.payloadType,type:x.type,subtype:x.parameter})}this._mediaObject.payloads+=` ${p.codecs.filter(R=>!this._mediaObject.payloads.includes(R.payloadType)).map(R=>R.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),p.rtcp.cname&&this._mediaObject.ssrcs.push({id:y,attribute:"cname",value:p.rtcp.cname}),this._mediaObject.ssrcs.push({id:y,attribute:"msid",value:`${h??"-"} ${g}`}),b&&(p.rtcp.cname&&this._mediaObject.ssrcs.push({id:b,attribute:"cname",value:p.rtcp.cname}),this._mediaObject.ssrcs.push({id:b,attribute:"msid",value:`${h??"-"} ${g}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${y} ${b}`}))}planBStopReceiving({offerRtpParameters:p}){var y;const h=p.encodings[0],g=h.ssrc,S=(y=h.rtx)==null?void 0:y.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(b=>b.id!==g&&b.id!==S),S&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(b=>b.ssrcs!==`${g} ${S}`))}}qn.OfferMediaSection=c;function f(d){const h=new RegExp("^(audio|video)/(.+)","i").exec(d.mimeType);if(!h)throw new TypeError("invalid codec.mimeType");return h[2]}return qn}var CR;function Rs(){if(CR)return ts;CR=1;var e=ts&&ts.__createBinding||(Object.create?function(f,d,p,h){h===void 0&&(h=p);var g=Object.getOwnPropertyDescriptor(d,p);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[p]}}),Object.defineProperty(f,h,g)}:function(f,d,p,h){h===void 0&&(h=p),f[h]=d[p]}),t=ts&&ts.__setModuleDefault||(Object.create?function(f,d){Object.defineProperty(f,"default",{enumerable:!0,value:d})}:function(f,d){f.default=d}),n=ts&&ts.__importStar||function(f){if(f&&f.__esModule)return f;var d={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(d,f,p);return t(d,f),d};Object.defineProperty(ts,"__esModule",{value:!0}),ts.RemoteSdp=void 0;const r=n(fr()),s=un(),o=A9(),a=new s.Logger("RemoteSdp");let c=class{constructor({iceParameters:d,iceCandidates:p,dtlsParameters:h,sctpParameters:g,plainRtpParameters:S,planB:y=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=d,this._iceCandidates=p,this._dtlsParameters=h,this._sctpParameters=g,this._plainRtpParameters=S,this._planB=y,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},d!=null&&d.iceLite&&(this._sdpObject.icelite="ice-lite"),h){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const b=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:h.fingerprints[b-1].algorithm,hash:h.fingerprints[b-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}S&&(this._sdpObject.origin.address=S.ip,this._sdpObject.origin.ipVer=S.ipVersion)}updateIceParameters(d){a.debug("updateIceParameters() [iceParameters:%o]",d),this._iceParameters=d,this._sdpObject.icelite=d.iceLite?"ice-lite":void 0;for(const p of this._mediaSections)p.setIceParameters(d)}updateDtlsRole(d){a.debug("updateDtlsRole() [role:%s]",d),this._dtlsParameters.role=d;for(const p of this._mediaSections)p.setDtlsRole(d)}getNextMediaSectionIdx(){for(let d=0;d<this._mediaSections.length;++d){const p=this._mediaSections[d];if(p.closed)return{idx:d,reuseMid:p.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:d,reuseMid:p,offerRtpParameters:h,answerRtpParameters:g,codecOptions:S,extmapAllowMixed:y=!1}){const b=new o.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:d,offerRtpParameters:h,answerRtpParameters:g,codecOptions:S,extmapAllowMixed:y});p?this._replaceMediaSection(b,p):this._midToIndex.has(b.mid)?this._replaceMediaSection(b):this._addMediaSection(b)}receive({mid:d,kind:p,offerRtpParameters:h,streamId:g,trackId:S}){const y=this._midToIndex.get(d);let b;if(y!==void 0&&(b=this._mediaSections[y]),b)b.planBReceive({offerRtpParameters:h,streamId:g,trackId:S}),this._replaceMediaSection(b);else{b=new o.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:d,kind:p,offerRtpParameters:h,streamId:g,trackId:S});const C=this._mediaSections.find(T=>T.closed);C?this._replaceMediaSection(b,C.mid):this._addMediaSection(b)}}pauseMediaSection(d){this._findMediaSection(d).pause()}resumeSendingMediaSection(d){this._findMediaSection(d).resume()}resumeReceivingMediaSection(d){this._findMediaSection(d).resume()}disableMediaSection(d){this._findMediaSection(d).disable()}closeMediaSection(d){const p=this._findMediaSection(d);return d===this._firstMid?(a.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",d),this.disableMediaSection(d),!1):(p.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(d,p){const h=this._findMediaSection(d);h.muxSimulcastStreams(p),this._replaceMediaSection(h)}planBStopReceiving({mid:d,offerRtpParameters:p}){const h=this._findMediaSection(d);h.planBStopReceiving({offerRtpParameters:p}),this._replaceMediaSection(h)}sendSctpAssociation({offerMediaObject:d}){const p=new o.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:d});this._addMediaSection(p)}receiveSctpAssociation({oldDataChannelSpec:d=!1}={}){const p=new o.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:d});this._addMediaSection(p)}getSdp(){return this._sdpObject.origin.sessionVersion++,r.write(this._sdpObject)}_addMediaSection(d){this._firstMid||(this._firstMid=d.mid),this._mediaSections.push(d),this._midToIndex.set(d.mid,this._mediaSections.length-1),this._sdpObject.media.push(d.getObject()),this._regenerateBundleMids()}_replaceMediaSection(d,p){if(typeof p=="string"){const h=this._midToIndex.get(p);if(h===void 0)throw new Error(`no media section found for reuseMid '${p}'`);const g=this._mediaSections[h];this._mediaSections[h]=d,this._midToIndex.delete(g.mid),this._midToIndex.set(d.mid,h),this._sdpObject.media[h]=d.getObject(),this._regenerateBundleMids()}else{const h=this._midToIndex.get(d.mid);if(h===void 0)throw new Error(`no media section found with mid '${d.mid}'`);this._mediaSections[h]=d,this._sdpObject.media[h]=d.getObject()}}_findMediaSection(d){const p=this._midToIndex.get(d);if(p===void 0)throw new Error(`no media section found with mid '${d}'`);return this._mediaSections[p]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(d=>!d.closed).map(d=>d.mid).join(" "))}};return ts.RemoteSdp=c,ts}var wf={},_R;function mi(){if(_R)return wf;_R=1,Object.defineProperty(wf,"__esModule",{value:!0}),wf.parse=t;const e=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function t(n){const r=e.exec(n??"");return r?{spatialLayers:Number(r[1]),temporalLayers:Number(r[2])}:{spatialLayers:1,temporalLayers:1}}return wf}var RR;function $9(){if(RR)return es;RR=1;var e=es&&es.__createBinding||(Object.create?function(R,m,v,x){x===void 0&&(x=v);var _=Object.getOwnPropertyDescriptor(m,v);(!_||("get"in _?!m.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(R,x,_)}:function(R,m,v,x){x===void 0&&(x=v),R[x]=m[v]}),t=es&&es.__setModuleDefault||(Object.create?function(R,m){Object.defineProperty(R,"default",{enumerable:!0,value:m})}:function(R,m){R.default=m}),n=es&&es.__importStar||function(R){if(R&&R.__esModule)return R;var m={};if(R!=null)for(var v in R)v!=="default"&&Object.prototype.hasOwnProperty.call(R,v)&&e(m,R,v);return t(m,R),m};Object.defineProperty(es,"__esModule",{value:!0}),es.Chrome111=void 0;const r=n(fr()),s=un(),o=n(Pn()),a=n(ur()),c=n(_s()),f=n(ba()),d=n(Cm()),p=Kn(),h=Ir(),g=Rs(),S=mi(),y=new s.Logger("Chrome111"),b="Chrome111",C={OS:1024,MIS:1024};let T=class MD extends h.HandlerInterface{static createFactory(){return()=>new MD}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return b}close(){if(y.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const m=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{m.addTransceiver("audio"),m.addTransceiver("video");const v=await m.createOffer();try{m.close()}catch{}const x=r.parse(v.sdp),_=c.extractRtpCapabilities({sdpObject:x});return d.addNackSuppportForOpus(_),_}catch(v){try{m.close()}catch{}throw v}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:C}}run({direction:m,iceParameters:v,iceCandidates:x,dtlsParameters:_,sctpParameters:k,iceServers:D,iceTransportPolicy:M,additionalSettings:P,proprietaryConstraints:L,extendedRtpCapabilities:O}){this.assertNotClosed(),y.debug("run()"),this._direction=m,this._remoteSdp=new g.RemoteSdp({iceParameters:v,iceCandidates:x,dtlsParameters:_,sctpParameters:k}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",O),video:a.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",O),video:a.getSendingRemoteRtpParameters("video",O)},_.role&&_.role!=="auto"&&(this._forcedLocalDtlsRole=_.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:D??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...P},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(m){this.assertNotClosed(),y.debug("updateIceServers()");const v=this._pc.getConfiguration();v.iceServers=m,this._pc.setConfiguration(v)}async restartIce(m){if(this.assertNotClosed(),y.debug("restartIce()"),this._remoteSdp.updateIceParameters(m),!!this._transportReady)if(this._direction==="send"){const v=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const x={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:m,encodings:v,codecOptions:x,codec:_,onRtpSender:k}){if(this.assertNotClosed(),this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",m.kind,m.id),v&&v.length>1){let B=1;for(const $ of v){const F=$.scalabilityMode?(0,S.parse)($.scalabilityMode).temporalLayers:3;F>B&&(B=F)}v.forEach(($,F)=>{$.rid=`r${F}`,$.scalabilityMode=`L1T${B}`})}const D=o.clone(this._sendingRtpParametersByKind[m.kind]);D.codecs=a.reduceCodecs(D.codecs,_);const M=o.clone(this._sendingRemoteRtpParametersByKind[m.kind]);M.codecs=a.reduceCodecs(M.codecs,_);const P=this._remoteSdp.getNextMediaSectionIdx(),L=this._pc.addTransceiver(m,{direction:"sendonly",streams:[this._sendStream],sendEncodings:v});k&&k(L.sender);const O=await this._pc.createOffer();let V=r.parse(O.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const H=L.mid;D.mid=H,V=r.parse(this._pc.localDescription.sdp);const q=V.media[P.idx];if(D.rtcp.cname=c.getCname({offerMediaObject:q}),!v)D.encodings=f.getRtpEncodings({offerMediaObject:q});else if(v.length===1){const B=f.getRtpEncodings({offerMediaObject:q});Object.assign(B[0],v[0]),D.encodings=B}else D.encodings=v;this._remoteSdp.send({offerMediaObject:q,reuseMid:P.reuseMid,offerRtpParameters:D,answerRtpParameters:M,codecOptions:x,extmapAllowMixed:!0});const N={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N),this._mapMidTransceiver.set(H,L),{localId:H,rtpParameters:D,rtpSender:L.sender}}async stopSending(m){if(this.assertSendDirection(),y.debug("stopSending() [localId:%s]",m),this._closed)return;const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");if(v.sender.replaceTrack(null),this._pc.removeTrack(v.sender),this._remoteSdp.closeMediaSection(v.mid))try{v.stop()}catch{}const _=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",_),await this._pc.setLocalDescription(_);const k={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._mapMidTransceiver.delete(m)}async pauseSending(m){this.assertNotClosed(),this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",m);const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");v.direction="inactive",this._remoteSdp.pauseMediaSection(m);const x=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const _={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}async resumeSending(m){this.assertNotClosed(),this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",m);const v=this._mapMidTransceiver.get(m);if(this._remoteSdp.resumeSendingMediaSection(m),!v)throw new Error("associated RTCRtpTransceiver not found");v.direction="sendonly";const x=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const _={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}async replaceTrack(m,v){this.assertNotClosed(),this.assertSendDirection(),v?y.debug("replaceTrack() [localId:%s, track.id:%s]",m,v.id):y.debug("replaceTrack() [localId:%s, no track]",m);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");await x.sender.replaceTrack(v)}async setMaxSpatialLayer(m,v){this.assertNotClosed(),this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",m,v);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");const _=x.sender.getParameters();_.encodings.forEach((M,P)=>{P<=v?M.active=!0:M.active=!1}),await x.sender.setParameters(_),this._remoteSdp.muxMediaSectionSimulcast(m,_.encodings);const k=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const D={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async setRtpEncodingParameters(m,v){this.assertNotClosed(),this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",m,v);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");const _=x.sender.getParameters();_.encodings.forEach((M,P)=>{_.encodings[P]={...M,...v}}),await x.sender.setParameters(_),this._remoteSdp.muxMediaSectionSimulcast(m,_.encodings);const k=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const D={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async getSenderStats(m){this.assertNotClosed(),this.assertSendDirection();const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.sender.getStats()}async sendDataChannel({ordered:m,maxPacketLifeTime:v,maxRetransmits:x,label:_,protocol:k}){this.assertNotClosed(),this.assertSendDirection();const D={negotiated:!0,id:this._nextSendSctpStreamId,ordered:m,maxPacketLifeTime:v,maxRetransmits:x,protocol:k};y.debug("sendDataChannel() [options:%o]",D);const M=this._pc.createDataChannel(_,D);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%C.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),O=r.parse(L.sdp),V=O.media.find(q=>q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const H={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H),this._hasDataChannelMediaSection=!0}const P={streamId:D.id,ordered:D.ordered,maxPacketLifeTime:D.maxPacketLifeTime,maxRetransmits:D.maxRetransmits};return{dataChannel:M,sctpStreamParameters:P}}async receive(m){this.assertNotClosed(),this.assertRecvDirection();const v=[],x=new Map;for(const M of m){const{trackId:P,kind:L,rtpParameters:O,streamId:V}=M;y.debug("receive() [trackId:%s, kind:%s]",P,L);const H=O.mid??String(this._mapMidTransceiver.size);x.set(P,H),this._remoteSdp.receive({mid:H,kind:L,offerRtpParameters:O,streamId:V??O.rtcp.cname,trackId:P})}const _={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);for(const M of m){const{trackId:P,onRtpReceiver:L}=M;if(L){const O=x.get(P),V=this._pc.getTransceivers().find(H=>H.mid===O);if(!V)throw new Error("transceiver not found");L(V.receiver)}}let k=await this._pc.createAnswer();const D=r.parse(k.sdp);for(const M of m){const{trackId:P,rtpParameters:L}=M,O=x.get(P),V=D.media.find(H=>String(H.mid)===O);c.applyCodecParameters({offerRtpParameters:L,answerMediaObject:V})}k={type:"answer",sdp:r.write(D)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k);for(const M of m){const{trackId:P}=M,L=x.get(P),O=this._pc.getTransceivers().find(V=>V.mid===L);if(O)this._mapMidTransceiver.set(L,O),v.push({localId:L,track:O.receiver.track,rtpReceiver:O.receiver});else throw new Error("new RTCRtpTransceiver not found")}return v}async stopReceiving(m){if(this.assertRecvDirection(),this._closed)return;for(const _ of m){y.debug("stopReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(k.mid)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const _ of m)this._mapMidTransceiver.delete(_)}async pauseReceiving(m){this.assertNotClosed(),this.assertRecvDirection();for(const _ of m){y.debug("pauseReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");k.direction="inactive",this._remoteSdp.pauseMediaSection(_)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async resumeReceiving(m){this.assertNotClosed(),this.assertRecvDirection();for(const _ of m){y.debug("resumeReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");k.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(_)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async getReceiverStats(m){this.assertNotClosed(),this.assertRecvDirection();const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:m,label:v,protocol:x}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:_,ordered:k,maxPacketLifeTime:D,maxRetransmits:M}=m,P={negotiated:!0,id:_,ordered:k,maxPacketLifeTime:D,maxRetransmits:M,protocol:x};y.debug("receiveDataChannel() [options:%o]",P);const L=this._pc.createDataChannel(v,P);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const V=await this._pc.createAnswer();if(!this._transportReady){const H=r.parse(V.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:m,localSdpObject:v}){v||(v=r.parse(this._pc.localDescription.sdp));const x=c.extractDtlsParameters({sdpObject:v});x.role=m,this._remoteSdp.updateDtlsRole(m==="client"?"server":"client"),await new Promise((_,k)=>{this.safeEmit("@connect",{dtlsParameters:x},_,k)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new p.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return es.Chrome111=T,es}var ns={},TR;function F9(){if(TR)return ns;TR=1;var e=ns&&ns.__createBinding||(Object.create?function(R,m,v,x){x===void 0&&(x=v);var _=Object.getOwnPropertyDescriptor(m,v);(!_||("get"in _?!m.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(R,x,_)}:function(R,m,v,x){x===void 0&&(x=v),R[x]=m[v]}),t=ns&&ns.__setModuleDefault||(Object.create?function(R,m){Object.defineProperty(R,"default",{enumerable:!0,value:m})}:function(R,m){R.default=m}),n=ns&&ns.__importStar||function(R){if(R&&R.__esModule)return R;var m={};if(R!=null)for(var v in R)v!=="default"&&Object.prototype.hasOwnProperty.call(R,v)&&e(m,R,v);return t(m,R),m};Object.defineProperty(ns,"__esModule",{value:!0}),ns.Chrome74=void 0;const r=n(fr()),s=un(),o=n(Pn()),a=n(ur()),c=n(_s()),f=n(ba()),d=n(Cm()),p=Kn(),h=Ir(),g=Rs(),S=mi(),y=new s.Logger("Chrome74"),b="Chrome74",C={OS:1024,MIS:1024};let T=class ND extends h.HandlerInterface{static createFactory(){return()=>new ND}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return b}close(){if(y.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const m=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{m.addTransceiver("audio"),m.addTransceiver("video");const v=await m.createOffer();try{m.close()}catch{}const x=r.parse(v.sdp),_=c.extractRtpCapabilities({sdpObject:x});return d.addNackSuppportForOpus(_),_}catch(v){try{m.close()}catch{}throw v}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:C}}run({direction:m,iceParameters:v,iceCandidates:x,dtlsParameters:_,sctpParameters:k,iceServers:D,iceTransportPolicy:M,additionalSettings:P,proprietaryConstraints:L,extendedRtpCapabilities:O}){y.debug("run()"),this._direction=m,this._remoteSdp=new g.RemoteSdp({iceParameters:v,iceCandidates:x,dtlsParameters:_,sctpParameters:k}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",O),video:a.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",O),video:a.getSendingRemoteRtpParameters("video",O)},_.role&&_.role!=="auto"&&(this._forcedLocalDtlsRole=_.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:D??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...P},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(m){this.assertNotClosed(),y.debug("updateIceServers()");const v=this._pc.getConfiguration();v.iceServers=m,this._pc.setConfiguration(v)}async restartIce(m){if(this.assertNotClosed(),y.debug("restartIce()"),this._remoteSdp.updateIceParameters(m),!!this._transportReady)if(this._direction==="send"){const v=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const x={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:m,encodings:v,codecOptions:x,codec:_}){this.assertNotClosed(),this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",m.kind,m.id),v&&v.length>1&&v.forEach(($,F)=>{$.rid=`r${F}`});const k=o.clone(this._sendingRtpParametersByKind[m.kind]);k.codecs=a.reduceCodecs(k.codecs,_);const D=o.clone(this._sendingRemoteRtpParametersByKind[m.kind]);D.codecs=a.reduceCodecs(D.codecs,_);const M=this._remoteSdp.getNextMediaSectionIdx(),P=this._pc.addTransceiver(m,{direction:"sendonly",streams:[this._sendStream],sendEncodings:v});let L=await this._pc.createOffer(),O=r.parse(L.sdp),V;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O});let H=!1;const q=(0,S.parse)((v??[{}])[0].scalabilityMode);v&&v.length===1&&q.spatialLayers>1&&k.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(y.debug("send() | enabling legacy simulcast for VP9 SVC"),H=!0,O=r.parse(L.sdp),V=O.media[M.idx],f.addLegacySimulcast({offerMediaObject:V,numStreams:q.spatialLayers}),L={type:"offer",sdp:r.write(O)}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L);const N=P.mid;if(k.mid=N,O=r.parse(this._pc.localDescription.sdp),V=O.media[M.idx],k.rtcp.cname=c.getCname({offerMediaObject:V}),!v)k.encodings=f.getRtpEncodings({offerMediaObject:V});else if(v.length===1){let $=f.getRtpEncodings({offerMediaObject:V});Object.assign($[0],v[0]),H&&($=[$[0]]),k.encodings=$}else k.encodings=v;if(k.encodings.length>1&&(k.codecs[0].mimeType.toLowerCase()==="video/vp8"||k.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const $ of k.encodings)$.scalabilityMode?$.scalabilityMode=`L1T${q.temporalLayers}`:$.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:V,reuseMid:M.reuseMid,offerRtpParameters:k,answerRtpParameters:D,codecOptions:x,extmapAllowMixed:!0});const B={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",B),await this._pc.setRemoteDescription(B),this._mapMidTransceiver.set(N,P),{localId:N,rtpParameters:k,rtpSender:P.sender}}async stopSending(m){if(this.assertSendDirection(),y.debug("stopSending() [localId:%s]",m),this._closed)return;const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");if(v.sender.replaceTrack(null),this._pc.removeTrack(v.sender),this._remoteSdp.closeMediaSection(v.mid))try{v.stop()}catch{}const _=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",_),await this._pc.setLocalDescription(_);const k={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._mapMidTransceiver.delete(m)}async pauseSending(m){this.assertNotClosed(),this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",m);const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");v.direction="inactive",this._remoteSdp.pauseMediaSection(m);const x=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const _={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}async resumeSending(m){this.assertNotClosed(),this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",m);const v=this._mapMidTransceiver.get(m);if(this._remoteSdp.resumeSendingMediaSection(m),!v)throw new Error("associated RTCRtpTransceiver not found");v.direction="sendonly";const x=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const _={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}async replaceTrack(m,v){this.assertNotClosed(),this.assertSendDirection(),v?y.debug("replaceTrack() [localId:%s, track.id:%s]",m,v.id):y.debug("replaceTrack() [localId:%s, no track]",m);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");await x.sender.replaceTrack(v)}async setMaxSpatialLayer(m,v){this.assertNotClosed(),this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",m,v);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");const _=x.sender.getParameters();_.encodings.forEach((M,P)=>{P<=v?M.active=!0:M.active=!1}),await x.sender.setParameters(_),this._remoteSdp.muxMediaSectionSimulcast(m,_.encodings);const k=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const D={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async setRtpEncodingParameters(m,v){this.assertNotClosed(),this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",m,v);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");const _=x.sender.getParameters();_.encodings.forEach((M,P)=>{_.encodings[P]={...M,...v}}),await x.sender.setParameters(_),this._remoteSdp.muxMediaSectionSimulcast(m,_.encodings);const k=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const D={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async getSenderStats(m){this.assertNotClosed(),this.assertSendDirection();const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.sender.getStats()}async sendDataChannel({ordered:m,maxPacketLifeTime:v,maxRetransmits:x,label:_,protocol:k}){this.assertNotClosed(),this.assertSendDirection();const D={negotiated:!0,id:this._nextSendSctpStreamId,ordered:m,maxPacketLifeTime:v,maxRetransmits:x,protocol:k};y.debug("sendDataChannel() [options:%o]",D);const M=this._pc.createDataChannel(_,D);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%C.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),O=r.parse(L.sdp),V=O.media.find(q=>q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const H={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H),this._hasDataChannelMediaSection=!0}const P={streamId:D.id,ordered:D.ordered,maxPacketLifeTime:D.maxPacketLifeTime,maxRetransmits:D.maxRetransmits};return{dataChannel:M,sctpStreamParameters:P}}async receive(m){this.assertNotClosed(),this.assertRecvDirection();const v=[],x=new Map;for(const M of m){const{trackId:P,kind:L,rtpParameters:O,streamId:V}=M;y.debug("receive() [trackId:%s, kind:%s]",P,L);const H=O.mid??String(this._mapMidTransceiver.size);x.set(P,H),this._remoteSdp.receive({mid:H,kind:L,offerRtpParameters:O,streamId:V??O.rtcp.cname,trackId:P})}const _={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);let k=await this._pc.createAnswer();const D=r.parse(k.sdp);for(const M of m){const{trackId:P,rtpParameters:L}=M,O=x.get(P),V=D.media.find(H=>String(H.mid)===O);c.applyCodecParameters({offerRtpParameters:L,answerMediaObject:V})}k={type:"answer",sdp:r.write(D)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k);for(const M of m){const{trackId:P}=M,L=x.get(P),O=this._pc.getTransceivers().find(V=>V.mid===L);if(O)this._mapMidTransceiver.set(L,O),v.push({localId:L,track:O.receiver.track,rtpReceiver:O.receiver});else throw new Error("new RTCRtpTransceiver not found")}return v}async stopReceiving(m){if(this.assertRecvDirection(),this._closed)return;for(const _ of m){y.debug("stopReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(k.mid)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const _ of m)this._mapMidTransceiver.delete(_)}async pauseReceiving(m){this.assertNotClosed(),this.assertRecvDirection();for(const _ of m){y.debug("pauseReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");k.direction="inactive",this._remoteSdp.pauseMediaSection(_)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async resumeReceiving(m){this.assertNotClosed(),this.assertRecvDirection();for(const _ of m){y.debug("resumeReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");k.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(_)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async getReceiverStats(m){this.assertNotClosed(),this.assertRecvDirection();const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:m,label:v,protocol:x}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:_,ordered:k,maxPacketLifeTime:D,maxRetransmits:M}=m,P={negotiated:!0,id:_,ordered:k,maxPacketLifeTime:D,maxRetransmits:M,protocol:x};y.debug("receiveDataChannel() [options:%o]",P);const L=this._pc.createDataChannel(v,P);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const V=await this._pc.createAnswer();if(!this._transportReady){const H=r.parse(V.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:m,localSdpObject:v}){v||(v=r.parse(this._pc.localDescription.sdp));const x=c.extractDtlsParameters({sdpObject:v});x.role=m,this._remoteSdp.updateDtlsRole(m==="client"?"server":"client"),await new Promise((_,k)=>{this.safeEmit("@connect",{dtlsParameters:x},_,k)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new p.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return ns.Chrome74=T,ns}var rs={},ER;function z9(){if(ER)return rs;ER=1;var e=rs&&rs.__createBinding||(Object.create?function(C,T,R,m){m===void 0&&(m=R);var v=Object.getOwnPropertyDescriptor(T,R);(!v||("get"in v?!T.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return T[R]}}),Object.defineProperty(C,m,v)}:function(C,T,R,m){m===void 0&&(m=R),C[m]=T[R]}),t=rs&&rs.__setModuleDefault||(Object.create?function(C,T){Object.defineProperty(C,"default",{enumerable:!0,value:T})}:function(C,T){C.default=T}),n=rs&&rs.__importStar||function(C){if(C&&C.__esModule)return C;var T={};if(C!=null)for(var R in C)R!=="default"&&Object.prototype.hasOwnProperty.call(C,R)&&e(T,C,R);return t(T,C),T};Object.defineProperty(rs,"__esModule",{value:!0}),rs.Chrome70=void 0;const r=n(fr()),s=un(),o=n(Pn()),a=n(ur()),c=n(_s()),f=n(ba()),d=Ir(),p=Rs(),h=mi(),g=new s.Logger("Chrome70"),S="Chrome70",y={OS:1024,MIS:1024};let b=class LD extends d.HandlerInterface{static createFactory(){return()=>new LD}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return S}close(){if(g.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){g.debug("getNativeRtpCapabilities()");const T=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{T.addTransceiver("audio"),T.addTransceiver("video");const R=await T.createOffer();try{T.close()}catch{}const m=r.parse(R.sdp);return c.extractRtpCapabilities({sdpObject:m})}catch(R){try{T.close()}catch{}throw R}}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),{numStreams:y}}run({direction:T,iceParameters:R,iceCandidates:m,dtlsParameters:v,sctpParameters:x,iceServers:_,iceTransportPolicy:k,additionalSettings:D,proprietaryConstraints:M,extendedRtpCapabilities:P}){g.debug("run()"),this._direction=T,this._remoteSdp=new p.RemoteSdp({iceParameters:R,iceCandidates:m,dtlsParameters:v,sctpParameters:x}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",P),video:a.getSendingRtpParameters("video",P)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",P),video:a.getSendingRemoteRtpParameters("video",P)},v.role&&v.role!=="auto"&&(this._forcedLocalDtlsRole=v.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:_??[],iceTransportPolicy:k??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...D},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(T){g.debug("updateIceServers()");const R=this._pc.getConfiguration();R.iceServers=T,this._pc.setConfiguration(R)}async restartIce(T){if(g.debug("restartIce()"),this._remoteSdp.updateIceParameters(T),!!this._transportReady)if(this._direction==="send"){const R=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const m={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}else{const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const m=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m)}}async getTransportStats(){return this._pc.getStats()}async send({track:T,encodings:R,codecOptions:m,codec:v}){this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",T.kind,T.id);const x=o.clone(this._sendingRtpParametersByKind[T.kind]);x.codecs=a.reduceCodecs(x.codecs,v);const _=o.clone(this._sendingRemoteRtpParametersByKind[T.kind]);_.codecs=a.reduceCodecs(_.codecs,v);const k=this._remoteSdp.getNextMediaSectionIdx(),D=this._pc.addTransceiver(T,{direction:"sendonly",streams:[this._sendStream]});let M=await this._pc.createOffer(),P=r.parse(M.sdp),L;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),R&&R.length>1&&(g.debug("send() | enabling legacy simulcast"),P=r.parse(M.sdp),L=P.media[k.idx],f.addLegacySimulcast({offerMediaObject:L,numStreams:R.length}),M={type:"offer",sdp:r.write(P)});let O=!1;const V=(0,h.parse)((R??[{}])[0].scalabilityMode);if(R&&R.length===1&&V.spatialLayers>1&&x.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(g.debug("send() | enabling legacy simulcast for VP9 SVC"),O=!0,P=r.parse(M.sdp),L=P.media[k.idx],f.addLegacySimulcast({offerMediaObject:L,numStreams:V.spatialLayers}),M={type:"offer",sdp:r.write(P)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),R){g.debug("send() | applying given encodings");const N=D.sender.getParameters();for(let B=0;B<(N.encodings??[]).length;++B){const $=N.encodings[B],F=R[B];if(!F)break;N.encodings[B]=Object.assign($,F)}await D.sender.setParameters(N)}const H=D.mid;if(x.mid=H,P=r.parse(this._pc.localDescription.sdp),L=P.media[k.idx],x.rtcp.cname=c.getCname({offerMediaObject:L}),x.encodings=f.getRtpEncodings({offerMediaObject:L}),R)for(let N=0;N<x.encodings.length;++N)R[N]&&Object.assign(x.encodings[N],R[N]);if(O&&(x.encodings=[x.encodings[0]]),x.encodings.length>1&&(x.codecs[0].mimeType.toLowerCase()==="video/vp8"||x.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const N of x.encodings)N.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:L,reuseMid:k.reuseMid,offerRtpParameters:x,answerRtpParameters:_,codecOptions:m});const q={type:"answer",sdp:this._remoteSdp.getSdp()};return g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setRemoteDescription(q),this._mapMidTransceiver.set(H,D),{localId:H,rtpParameters:x,rtpSender:D.sender}}async stopSending(T){this.assertSendDirection(),g.debug("stopSending() [localId:%s]",T);const R=this._mapMidTransceiver.get(T);if(!R)throw new Error("associated RTCRtpTransceiver not found");if(R.sender.replaceTrack(null),this._pc.removeTrack(R.sender),this._remoteSdp.closeMediaSection(R.mid))try{R.stop()}catch{}const v=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const x={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.delete(T)}async pauseSending(T){}async resumeSending(T){}async replaceTrack(T,R){this.assertSendDirection(),R?g.debug("replaceTrack() [localId:%s, track.id:%s]",T,R.id):g.debug("replaceTrack() [localId:%s, no track]",T);const m=this._mapMidTransceiver.get(T);if(!m)throw new Error("associated RTCRtpTransceiver not found");await m.sender.replaceTrack(R)}async setMaxSpatialLayer(T,R){this.assertSendDirection(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",T,R);const m=this._mapMidTransceiver.get(T);if(!m)throw new Error("associated RTCRtpTransceiver not found");const v=m.sender.getParameters();v.encodings.forEach((k,D)=>{D<=R?k.active=!0:k.active=!1}),await m.sender.setParameters(v),this._remoteSdp.muxMediaSectionSimulcast(T,v.encodings);const x=await this._pc.createOffer();g.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const _={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}async setRtpEncodingParameters(T,R){this.assertSendDirection(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",T,R);const m=this._mapMidTransceiver.get(T);if(!m)throw new Error("associated RTCRtpTransceiver not found");const v=m.sender.getParameters();v.encodings.forEach((k,D)=>{v.encodings[D]={...k,...R}}),await m.sender.setParameters(v),this._remoteSdp.muxMediaSectionSimulcast(T,v.encodings);const x=await this._pc.createOffer();g.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const _={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}async getSenderStats(T){this.assertSendDirection();const R=this._mapMidTransceiver.get(T);if(!R)throw new Error("associated RTCRtpTransceiver not found");return R.sender.getStats()}async sendDataChannel({ordered:T,maxPacketLifeTime:R,maxRetransmits:m,label:v,protocol:x}){this.assertSendDirection();const _={negotiated:!0,id:this._nextSendSctpStreamId,ordered:T,maxPacketLifeTime:R,maxRetransmitTime:R,maxRetransmits:m,protocol:x};g.debug("sendDataChannel() [options:%o]",_);const k=this._pc.createDataChannel(v,_);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%y.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),P=r.parse(M.sdp),L=P.media.find(V=>V.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const O={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._hasDataChannelMediaSection=!0}const D={streamId:_.id,ordered:_.ordered,maxPacketLifeTime:_.maxPacketLifeTime,maxRetransmits:_.maxRetransmits};return{dataChannel:k,sctpStreamParameters:D}}async receive(T){this.assertRecvDirection();const R=[],m=new Map;for(const k of T){const{trackId:D,kind:M,rtpParameters:P,streamId:L}=k;g.debug("receive() [trackId:%s, kind:%s]",D,M);const O=P.mid??String(this._mapMidTransceiver.size);m.set(D,O),this._remoteSdp.receive({mid:O,kind:M,offerRtpParameters:P,streamId:L??P.rtcp.cname,trackId:D})}const v={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);let x=await this._pc.createAnswer();const _=r.parse(x.sdp);for(const k of T){const{trackId:D,rtpParameters:M}=k,P=m.get(D),L=_.media.find(O=>String(O.mid)===P);c.applyCodecParameters({offerRtpParameters:M,answerMediaObject:L})}x={type:"answer",sdp:r.write(_)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:_}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const k of T){const{trackId:D}=k,M=m.get(D),P=this._pc.getTransceivers().find(L=>L.mid===M);if(!P)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,P),R.push({localId:M,track:P.receiver.track,rtpReceiver:P.receiver})}return R}async stopReceiving(T){this.assertRecvDirection();for(const v of T){g.debug("stopReceiving() [localId:%s]",v);const x=this._mapMidTransceiver.get(v);if(!x)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(x.mid)}const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const m=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const v of T)this._mapMidTransceiver.delete(v)}async pauseReceiving(T){}async resumeReceiving(T){}async getReceiverStats(T){this.assertRecvDirection();const R=this._mapMidTransceiver.get(T);if(!R)throw new Error("associated RTCRtpTransceiver not found");return R.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:T,label:R,protocol:m}){this.assertRecvDirection();const{streamId:v,ordered:x,maxPacketLifeTime:_,maxRetransmits:k}=T,D={negotiated:!0,id:v,ordered:x,maxPacketLifeTime:_,maxRetransmitTime:_,maxRetransmits:k,protocol:m};g.debug("receiveDataChannel() [options:%o]",D);const M=this._pc.createDataChannel(R,D);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const P={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);const L=await this._pc.createAnswer();if(!this._transportReady){const O=r.parse(L.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setLocalDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:T,localSdpObject:R}){R||(R=r.parse(this._pc.localDescription.sdp));const m=c.extractDtlsParameters({sdpObject:R});m.role=T,this._remoteSdp.updateDtlsRole(T==="client"?"server":"client"),await new Promise((v,x)=>{this.safeEmit("@connect",{dtlsParameters:m},v,x)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return rs.Chrome70=b,rs}var ss={},Al={},kR;function _m(){if(kR)return Al;kR=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.getRtpEncodings=e,Al.addLegacySimulcast=t;function e({offerMediaObject:n,track:r}){const s=new Set;for(const c of n.ssrcs||[]){if(c.attribute!=="msid")continue;if(c.value.split(" ")[1]===r.id){const d=c.id;s.add(d)}}if(s.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${r.id}]`);const o=new Map;for(const c of n.ssrcGroups||[]){if(c.semantics!=="FID")continue;let[f,d]=c.ssrcs.split(/\s+/);f=Number(f),d=Number(d),s.has(f)&&(s.delete(f),s.delete(d),o.set(f,d))}for(const c of s)o.set(c,null);const a=[];for(const[c,f]of o){const d={ssrc:c};f&&(d.rtx={ssrc:f}),a.push(d)}return a}function t({offerMediaObject:n,track:r,numStreams:s}){if(s<=1)throw new TypeError("numStreams must be greater than 1");let o,a,c;if(!(n.ssrcs||[]).find(S=>S.attribute!=="msid"?!1:S.value.split(" ")[1]===r.id?(o=S.id,c=S.value.split(" ")[0],!0):!1))throw new Error(`a=ssrc line with msid information not found [track.id:${r.id}]`);(n.ssrcGroups||[]).some(S=>{if(S.semantics!=="FID")return!1;const y=S.ssrcs.split(/\s+/);return Number(y[0])===o?(a=Number(y[1]),!0):!1});const d=n.ssrcs.find(S=>S.attribute==="cname"&&S.id===o);if(!d)throw new Error(`a=ssrc line with cname information not found [track.id:${r.id}]`);const p=d.value,h=[],g=[];for(let S=0;S<s;++S)h.push(o+S),a&&g.push(a+S);n.ssrcGroups=n.ssrcGroups||[],n.ssrcs=n.ssrcs||[],n.ssrcGroups.push({semantics:"SIM",ssrcs:h.join(" ")});for(const S of h)n.ssrcs.push({id:S,attribute:"cname",value:p}),n.ssrcs.push({id:S,attribute:"msid",value:`${c} ${r.id}`});for(let S=0;S<g.length;++S){const y=h[S],b=g[S];n.ssrcs.push({id:b,attribute:"cname",value:p}),n.ssrcs.push({id:b,attribute:"msid",value:`${c} ${r.id}`}),n.ssrcGroups.push({semantics:"FID",ssrcs:`${y} ${b}`})}}return Al}var IR;function B9(){if(IR)return ss;IR=1;var e=ss&&ss.__createBinding||(Object.create?function(b,C,T,R){R===void 0&&(R=T);var m=Object.getOwnPropertyDescriptor(C,T);(!m||("get"in m?!C.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return C[T]}}),Object.defineProperty(b,R,m)}:function(b,C,T,R){R===void 0&&(R=T),b[R]=C[T]}),t=ss&&ss.__setModuleDefault||(Object.create?function(b,C){Object.defineProperty(b,"default",{enumerable:!0,value:C})}:function(b,C){b.default=C}),n=ss&&ss.__importStar||function(b){if(b&&b.__esModule)return b;var C={};if(b!=null)for(var T in b)T!=="default"&&Object.prototype.hasOwnProperty.call(b,T)&&e(C,b,T);return t(C,b),C};Object.defineProperty(ss,"__esModule",{value:!0}),ss.Chrome67=void 0;const r=n(fr()),s=un(),o=n(Pn()),a=n(ur()),c=n(_s()),f=n(_m()),d=Ir(),p=Rs(),h=new s.Logger("Chrome67"),g="Chrome67",S={OS:1024,MIS:1024};let y=class OD extends d.HandlerInterface{static createFactory(){return()=>new OD}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return g}close(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){h.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const T=await C.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{C.close()}catch{}const R=r.parse(T.sdp);return c.extractRtpCapabilities({sdpObject:R})}catch(T){try{C.close()}catch{}throw T}}async getNativeSctpCapabilities(){return h.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:C,iceParameters:T,iceCandidates:R,dtlsParameters:m,sctpParameters:v,iceServers:x,iceTransportPolicy:_,additionalSettings:k,proprietaryConstraints:D,extendedRtpCapabilities:M}){h.debug("run()"),this._direction=C,this._remoteSdp=new p.RemoteSdp({iceParameters:T,iceCandidates:R,dtlsParameters:m,sctpParameters:v,planB:!0}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",M),video:a.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",M),video:a.getSendingRemoteRtpParameters("video",M)},m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:x??[],iceTransportPolicy:_??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...k},D),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(h.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(C){h.debug("updateIceServers()");const T=this._pc.getConfiguration();T.iceServers=C,this._pc.setConfiguration(T)}async restartIce(C){if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),!!this._transportReady)if(this._direction==="send"){const T=await this._pc.createOffer({iceRestart:!0});h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const R={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const T={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const R=await this._pc.createAnswer();h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:T,codecOptions:R,codec:m}){this.assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),m&&h.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addTrack(C,this._sendStream);let v=await this._pc.createOffer(),x=r.parse(v.sdp),_;const k=o.clone(this._sendingRtpParametersByKind[C.kind]);k.codecs=a.reduceCodecs(k.codecs);const D=o.clone(this._sendingRemoteRtpParametersByKind[C.kind]);if(D.codecs=a.reduceCodecs(D.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:x}),C.kind==="video"&&T&&T.length>1&&(h.debug("send() | enabling simulcast"),x=r.parse(v.sdp),_=x.media.find(O=>O.type==="video"),f.addLegacySimulcast({offerMediaObject:_,track:C,numStreams:T.length}),v={type:"offer",sdp:r.write(x)}),h.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v),x=r.parse(this._pc.localDescription.sdp),_=x.media.find(O=>O.type===C.kind),k.rtcp.cname=c.getCname({offerMediaObject:_}),k.encodings=f.getRtpEncodings({offerMediaObject:_,track:C}),T)for(let O=0;O<k.encodings.length;++O)T[O]&&Object.assign(k.encodings[O],T[O]);if(k.encodings.length>1&&k.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const O of k.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:_,offerRtpParameters:k,answerRtpParameters:D,codecOptions:R});const M={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M);const P=String(this._nextSendLocalId);this._nextSendLocalId++;const L=this._pc.getSenders().find(O=>O.track===C);return this._mapSendLocalIdRtpSender.set(P,L),{localId:P,rtpParameters:k,rtpSender:L}}async stopSending(C){this.assertSendDirection(),h.debug("stopSending() [localId:%s]",C);const T=this._mapSendLocalIdRtpSender.get(C);if(!T)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(T),T.track&&this._sendStream.removeTrack(T.track),this._mapSendLocalIdRtpSender.delete(C);const R=await this._pc.createOffer();h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R);try{await this._pc.setLocalDescription(R)}catch(v){if(this._sendStream.getTracks().length===0){h.warn("stopSending() | ignoring expected error due no sending tracks: %s",v.toString());return}throw v}if(this._pc.signalingState==="stable")return;const m={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,T){this.assertSendDirection(),T?h.debug("replaceTrack() [localId:%s, track.id:%s]",C,T.id):h.debug("replaceTrack() [localId:%s, no track]",C);const R=this._mapSendLocalIdRtpSender.get(C);if(!R)throw new Error("associated RTCRtpSender not found");const m=R.track;await R.replaceTrack(T),m&&this._sendStream.removeTrack(m),T&&this._sendStream.addTrack(T)}async setMaxSpatialLayer(C,T){this.assertSendDirection(),h.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",C,T);const R=this._mapSendLocalIdRtpSender.get(C);if(!R)throw new Error("associated RTCRtpSender not found");const m=R.getParameters();m.encodings.forEach((v,x)=>{x<=T?v.active=!0:v.active=!1}),await R.setParameters(m)}async setRtpEncodingParameters(C,T){this.assertSendDirection(),h.debug("setRtpEncodingParameters() [localId:%s, params:%o]",C,T);const R=this._mapSendLocalIdRtpSender.get(C);if(!R)throw new Error("associated RTCRtpSender not found");const m=R.getParameters();m.encodings.forEach((v,x)=>{m.encodings[x]={...v,...T}}),await R.setParameters(m)}async getSenderStats(C){this.assertSendDirection();const T=this._mapSendLocalIdRtpSender.get(C);if(!T)throw new Error("associated RTCRtpSender not found");return T.getStats()}async sendDataChannel({ordered:C,maxPacketLifeTime:T,maxRetransmits:R,label:m,protocol:v}){this.assertSendDirection();const x={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:T,maxRetransmitTime:T,maxRetransmits:R,protocol:v};h.debug("sendDataChannel() [options:%o]",x);const _=this._pc.createDataChannel(m,x);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const D=await this._pc.createOffer(),M=r.parse(D.sdp),P=M.media.find(O=>O.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),this._remoteSdp.sendSctpAssociation({offerMediaObject:P});const L={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L),this._hasDataChannelMediaSection=!0}const k={streamId:x.id,ordered:x.ordered,maxPacketLifeTime:x.maxPacketLifeTime,maxRetransmits:x.maxRetransmits};return{dataChannel:_,sctpStreamParameters:k}}async receive(C){this.assertRecvDirection();const T=[];for(const x of C){const{trackId:_,kind:k,rtpParameters:D,streamId:M}=x;h.debug("receive() [trackId:%s, kind:%s]",_,k);const P=k;this._remoteSdp.receive({mid:P,kind:k,offerRtpParameters:D,streamId:M??D.rtcp.cname,trackId:_})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);let m=await this._pc.createAnswer();const v=r.parse(m.sdp);for(const x of C){const{kind:_,rtpParameters:k}=x,D=_,M=v.media.find(P=>String(P.mid)===D);c.applyCodecParameters({offerRtpParameters:k,answerMediaObject:M})}m={type:"answer",sdp:r.write(v)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:v}),h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const x of C){const{kind:_,trackId:k,rtpParameters:D}=x,M=k,P=_,L=this._pc.getReceivers().find(O=>O.track&&O.track.id===M);if(!L)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(M,{mid:P,rtpParameters:D,rtpReceiver:L}),T.push({localId:M,track:L.track,rtpReceiver:L})}return T}async stopReceiving(C){this.assertRecvDirection();for(const m of C){h.debug("stopReceiving() [localId:%s]",m);const{mid:v,rtpParameters:x}=this._mapRecvLocalIdInfo.get(m)??{};this._mapRecvLocalIdInfo.delete(m),this._remoteSdp.planBStopReceiving({mid:v,offerRtpParameters:x})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const R=await this._pc.createAnswer();h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async pauseReceiving(C){}async resumeReceiving(C){}async getReceiverStats(C){this.assertRecvDirection();const{rtpReceiver:T}=this._mapRecvLocalIdInfo.get(C)??{};if(!T)throw new Error("associated RTCRtpReceiver not found");return T.getStats()}async receiveDataChannel({sctpStreamParameters:C,label:T,protocol:R}){this.assertRecvDirection();const{streamId:m,ordered:v,maxPacketLifeTime:x,maxRetransmits:_}=C,k={negotiated:!0,id:m,ordered:v,maxPacketLifeTime:x,maxRetransmitTime:x,maxRetransmits:_,protocol:R};h.debug("receiveDataChannel() [options:%o]",k);const D=this._pc.createDataChannel(T,k);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const M={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const P=await this._pc.createAnswer();if(!this._transportReady){const L=r.parse(P.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:L})}h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setLocalDescription(P),this._hasDataChannelMediaSection=!0}return{dataChannel:D}}async setupTransport({localDtlsRole:C,localSdpObject:T}){T||(T=r.parse(this._pc.localDescription.sdp));const R=c.extractDtlsParameters({sdpObject:T});R.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((m,v)=>{this.safeEmit("@connect",{dtlsParameters:R},m,v)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return ss.Chrome67=y,ss}var os={},DR;function U9(){if(DR)return os;DR=1;var e=os&&os.__createBinding||(Object.create?function(C,T,R,m){m===void 0&&(m=R);var v=Object.getOwnPropertyDescriptor(T,R);(!v||("get"in v?!T.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return T[R]}}),Object.defineProperty(C,m,v)}:function(C,T,R,m){m===void 0&&(m=R),C[m]=T[R]}),t=os&&os.__setModuleDefault||(Object.create?function(C,T){Object.defineProperty(C,"default",{enumerable:!0,value:T})}:function(C,T){C.default=T}),n=os&&os.__importStar||function(C){if(C&&C.__esModule)return C;var T={};if(C!=null)for(var R in C)R!=="default"&&Object.prototype.hasOwnProperty.call(C,R)&&e(T,C,R);return t(T,C),T};Object.defineProperty(os,"__esModule",{value:!0}),os.Chrome55=void 0;const r=n(fr()),s=un(),o=Kn(),a=n(Pn()),c=n(ur()),f=n(_s()),d=n(_m()),p=Ir(),h=Rs(),g=new s.Logger("Chrome55"),S="Chrome55",y={OS:1024,MIS:1024};let b=class AD extends p.HandlerInterface{static createFactory(){return()=>new AD}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return S}close(){if(g.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){g.debug("getNativeRtpCapabilities()");const T=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const R=await T.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{T.close()}catch{}const m=r.parse(R.sdp);return f.extractRtpCapabilities({sdpObject:m})}catch(R){try{T.close()}catch{}throw R}}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),{numStreams:y}}run({direction:T,iceParameters:R,iceCandidates:m,dtlsParameters:v,sctpParameters:x,iceServers:_,iceTransportPolicy:k,additionalSettings:D,proprietaryConstraints:M,extendedRtpCapabilities:P}){g.debug("run()"),this._direction=T,this._remoteSdp=new h.RemoteSdp({iceParameters:R,iceCandidates:m,dtlsParameters:v,sctpParameters:x,planB:!0}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",P),video:c.getSendingRtpParameters("video",P)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",P),video:c.getSendingRemoteRtpParameters("video",P)},v.role&&v.role!=="auto"&&(this._forcedLocalDtlsRole=v.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:_??[],iceTransportPolicy:k??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...D},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(T){g.debug("updateIceServers()");const R=this._pc.getConfiguration();R.iceServers=T,this._pc.setConfiguration(R)}async restartIce(T){if(g.debug("restartIce()"),this._remoteSdp.updateIceParameters(T),!!this._transportReady)if(this._direction==="send"){const R=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const m={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}else{const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const m=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m)}}async getTransportStats(){return this._pc.getStats()}async send({track:T,encodings:R,codecOptions:m,codec:v}){this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",T.kind,T.id),v&&g.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(T),this._pc.addStream(this._sendStream);let x=await this._pc.createOffer(),_=r.parse(x.sdp),k;const D=a.clone(this._sendingRtpParametersByKind[T.kind]);D.codecs=c.reduceCodecs(D.codecs);const M=a.clone(this._sendingRemoteRtpParametersByKind[T.kind]);if(M.codecs=c.reduceCodecs(M.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:_}),T.kind==="video"&&R&&R.length>1&&(g.debug("send() | enabling simulcast"),_=r.parse(x.sdp),k=_.media.find(O=>O.type==="video"),d.addLegacySimulcast({offerMediaObject:k,track:T,numStreams:R.length}),x={type:"offer",sdp:r.write(_)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x),_=r.parse(this._pc.localDescription.sdp),k=_.media.find(O=>O.type===T.kind),D.rtcp.cname=f.getCname({offerMediaObject:k}),D.encodings=d.getRtpEncodings({offerMediaObject:k,track:T}),R)for(let O=0;O<D.encodings.length;++O)R[O]&&Object.assign(D.encodings[O],R[O]);if(D.encodings.length>1&&D.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const O of D.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:k,offerRtpParameters:D,answerRtpParameters:M,codecOptions:m});const P={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P);const L=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(L,T),{localId:L,rtpParameters:D}}async stopSending(T){this.assertSendDirection(),g.debug("stopSending() [localId:%s]",T);const R=this._mapSendLocalIdTrack.get(T);if(!R)throw new Error("track not found");this._mapSendLocalIdTrack.delete(T),this._sendStream.removeTrack(R),this._pc.addStream(this._sendStream);const m=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",m);try{await this._pc.setLocalDescription(m)}catch(x){if(this._sendStream.getTracks().length===0){g.warn("stopSending() | ignoring expected error due no sending tracks: %s",x.toString());return}throw x}if(this._pc.signalingState==="stable")return;const v={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v)}async pauseSending(T){}async resumeSending(T){}async replaceTrack(T,R){throw new o.UnsupportedError("not implemented")}async setMaxSpatialLayer(T,R){throw new o.UnsupportedError(" not implemented")}async setRtpEncodingParameters(T,R){throw new o.UnsupportedError("not supported")}async getSenderStats(T){throw new o.UnsupportedError("not implemented")}async sendDataChannel({ordered:T,maxPacketLifeTime:R,maxRetransmits:m,label:v,protocol:x}){this.assertSendDirection();const _={negotiated:!0,id:this._nextSendSctpStreamId,ordered:T,maxPacketLifeTime:R,maxRetransmitTime:R,maxRetransmits:m,protocol:x};g.debug("sendDataChannel() [options:%o]",_);const k=this._pc.createDataChannel(v,_);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%y.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),P=r.parse(M.sdp),L=P.media.find(V=>V.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const O={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._hasDataChannelMediaSection=!0}const D={streamId:_.id,ordered:_.ordered,maxPacketLifeTime:_.maxPacketLifeTime,maxRetransmits:_.maxRetransmits};return{dataChannel:k,sctpStreamParameters:D}}async receive(T){this.assertRecvDirection();const R=[];for(const _ of T){const{trackId:k,kind:D,rtpParameters:M,streamId:P}=_;g.debug("receive() [trackId:%s, kind:%s]",k,D);const L=D;this._remoteSdp.receive({mid:L,kind:D,offerRtpParameters:M,streamId:P??M.rtcp.cname,trackId:k})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);let v=await this._pc.createAnswer();const x=r.parse(v.sdp);for(const _ of T){const{kind:k,rtpParameters:D}=_,M=k,P=x.media.find(L=>String(L.mid)===M);f.applyCodecParameters({offerRtpParameters:D,answerMediaObject:P})}v={type:"answer",sdp:r.write(x)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:x}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v);for(const _ of T){const{kind:k,trackId:D,rtpParameters:M}=_,P=k,L=D,O=_.streamId??M.rtcp.cname,H=this._pc.getRemoteStreams().find(q=>q.id===O).getTrackById(L);if(!H)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(L,{mid:P,rtpParameters:M}),R.push({localId:L,track:H})}return R}async stopReceiving(T){this.assertRecvDirection();for(const v of T){g.debug("stopReceiving() [localId:%s]",v);const{mid:x,rtpParameters:_}=this._mapRecvLocalIdInfo.get(v)??{};this._mapRecvLocalIdInfo.delete(v),this._remoteSdp.planBStopReceiving({mid:x,offerRtpParameters:_})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const m=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m)}async pauseReceiving(T){}async resumeReceiving(T){}async getReceiverStats(T){throw new o.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:T,label:R,protocol:m}){this.assertRecvDirection();const{streamId:v,ordered:x,maxPacketLifeTime:_,maxRetransmits:k}=T,D={negotiated:!0,id:v,ordered:x,maxPacketLifeTime:_,maxRetransmitTime:_,maxRetransmits:k,protocol:m};g.debug("receiveDataChannel() [options:%o]",D);const M=this._pc.createDataChannel(R,D);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const P={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);const L=await this._pc.createAnswer();if(!this._transportReady){const O=r.parse(L.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setLocalDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:T,localSdpObject:R}){R||(R=r.parse(this._pc.localDescription.sdp));const m=f.extractDtlsParameters({sdpObject:R});m.role=T,this._remoteSdp.updateDtlsRole(T==="client"?"server":"client"),await new Promise((v,x)=>{this.safeEmit("@connect",{dtlsParameters:m},v,x)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return os.Chrome55=b,os}var is={},jR;function V9(){if(jR)return is;jR=1;var e=is&&is.__createBinding||(Object.create?function(T,R,m,v){v===void 0&&(v=m);var x=Object.getOwnPropertyDescriptor(R,m);(!x||("get"in x?!R.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return R[m]}}),Object.defineProperty(T,v,x)}:function(T,R,m,v){v===void 0&&(v=m),T[v]=R[m]}),t=is&&is.__setModuleDefault||(Object.create?function(T,R){Object.defineProperty(T,"default",{enumerable:!0,value:R})}:function(T,R){T.default=R}),n=is&&is.__importStar||function(T){if(T&&T.__esModule)return T;var R={};if(T!=null)for(var m in T)m!=="default"&&Object.prototype.hasOwnProperty.call(T,m)&&e(R,T,m);return t(R,T),R};Object.defineProperty(is,"__esModule",{value:!0}),is.Firefox120=void 0;const r=n(fr()),s=un(),o=Kn(),a=n(Pn()),c=n(ur()),f=n(_s()),d=n(ba()),p=Ir(),h=Rs(),g=mi(),S=new s.Logger("Firefox120"),y="Firefox120",b={OS:16,MIS:2048};let C=class $D extends p.HandlerInterface{static createFactory(){return()=>new $D}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return y}close(){if(S.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const R=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),m=document.createElement("canvas");m.getContext("2d");const x=m.captureStream().getVideoTracks()[0];try{R.addTransceiver("audio",{direction:"sendrecv"}),R.addTransceiver(x,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const _=await R.createOffer();try{m.remove()}catch{}try{x.stop()}catch{}try{R.close()}catch{}const k=r.parse(_.sdp);return f.extractRtpCapabilities({sdpObject:k})}catch(_){try{m.remove()}catch{}try{x.stop()}catch{}try{R.close()}catch{}throw _}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:b}}run({direction:R,iceParameters:m,iceCandidates:v,dtlsParameters:x,sctpParameters:_,iceServers:k,iceTransportPolicy:D,additionalSettings:M,proprietaryConstraints:P,extendedRtpCapabilities:L}){this.assertNotClosed(),S.debug("run()"),this._direction=R,this._remoteSdp=new h.RemoteSdp({iceParameters:m,iceCandidates:v,dtlsParameters:x,sctpParameters:_}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",L),video:c.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",L),video:c.getSendingRemoteRtpParameters("video",L)},this._pc=new RTCPeerConnection({iceServers:k??[],iceTransportPolicy:D??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...M},P),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(R){throw this.assertNotClosed(),new o.UnsupportedError("not supported")}async restartIce(R){if(this.assertNotClosed(),S.debug("restartIce()"),this._remoteSdp.updateIceParameters(R),!!this._transportReady)if(this._direction==="send"){const m=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const v={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v)}else{const m={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);const v=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:R,encodings:m,codecOptions:v,codec:x,onRtpSender:_}){this.assertNotClosed(),this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",R.kind,R.id),m&&m.length>1&&m.forEach((N,B)=>{N.rid=`r${B}`});const k=a.clone(this._sendingRtpParametersByKind[R.kind]);k.codecs=c.reduceCodecs(k.codecs,x);const D=a.clone(this._sendingRemoteRtpParametersByKind[R.kind]);D.codecs=c.reduceCodecs(D.codecs,x);const M=this._pc.addTransceiver(R,{direction:"sendonly",streams:[this._sendStream],sendEncodings:m});_&&_(M.sender);const P=await this._pc.createOffer();let L=r.parse(P.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L});const O=(0,g.parse)((m??[{}])[0].scalabilityMode);S.debug("send() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const V=M.mid;k.mid=V,L=r.parse(this._pc.localDescription.sdp);const H=L.media[L.media.length-1];if(k.rtcp.cname=f.getCname({offerMediaObject:H}),!m)k.encodings=d.getRtpEncodings({offerMediaObject:H});else if(m.length===1){const N=d.getRtpEncodings({offerMediaObject:H});Object.assign(N[0],m[0]),k.encodings=N}else k.encodings=m;if(k.encodings.length>1&&(k.codecs[0].mimeType.toLowerCase()==="video/vp8"||k.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const N of k.encodings)N.scalabilityMode?N.scalabilityMode=`L1T${O.temporalLayers}`:N.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:H,offerRtpParameters:k,answerRtpParameters:D,codecOptions:v,extmapAllowMixed:!0});const q={type:"answer",sdp:this._remoteSdp.getSdp()};return S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",q),await this._pc.setRemoteDescription(q),this._mapMidTransceiver.set(V,M),{localId:V,rtpParameters:k,rtpSender:M.sender}}async stopSending(R){if(this.assertSendDirection(),S.debug("stopSending() [localId:%s]",R),this._closed)return;const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated transceiver not found");m.sender.replaceTrack(null),this._pc.removeTrack(m.sender),this._remoteSdp.disableMediaSection(m.mid);const v=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const x={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.delete(R)}async pauseSending(R){this.assertNotClosed(),this.assertSendDirection(),S.debug("pauseSending() [localId:%s]",R);const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(R);const v=await this._pc.createOffer();S.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const x={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async resumeSending(R){this.assertNotClosed(),this.assertSendDirection(),S.debug("resumeSending() [localId:%s]",R);const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(R);const v=await this._pc.createOffer();S.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const x={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async replaceTrack(R,m){this.assertNotClosed(),this.assertSendDirection(),m?S.debug("replaceTrack() [localId:%s, track.id:%s]",R,m.id):S.debug("replaceTrack() [localId:%s, no track]",R);const v=this._mapMidTransceiver.get(R);if(!v)throw new Error("associated RTCRtpTransceiver not found");await v.sender.replaceTrack(m)}async setMaxSpatialLayer(R,m){this.assertNotClosed(),this.assertSendDirection(),S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",R,m);const v=this._mapMidTransceiver.get(R);if(!v)throw new Error("associated transceiver not found");const x=v.sender.getParameters();x.encodings.forEach((D,M)=>{M<=m?D.active=!0:D.active=!1}),await v.sender.setParameters(x),this._remoteSdp.muxMediaSectionSimulcast(R,x.encodings);const _=await this._pc.createOffer();S.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",_),await this._pc.setLocalDescription(_);const k={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}async setRtpEncodingParameters(R,m){this.assertNotClosed(),this.assertSendDirection(),S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",R,m);const v=this._mapMidTransceiver.get(R);if(!v)throw new Error("associated RTCRtpTransceiver not found");const x=v.sender.getParameters();x.encodings.forEach((D,M)=>{x.encodings[M]={...D,...m}}),await v.sender.setParameters(x),this._remoteSdp.muxMediaSectionSimulcast(R,x.encodings);const _=await this._pc.createOffer();S.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",_),await this._pc.setLocalDescription(_);const k={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}async getSenderStats(R){this.assertNotClosed(),this.assertSendDirection();const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated RTCRtpTransceiver not found");return m.sender.getStats()}async sendDataChannel({ordered:R,maxPacketLifeTime:m,maxRetransmits:v,label:x,protocol:_}){this.assertNotClosed(),this.assertSendDirection();const k={negotiated:!0,id:this._nextSendSctpStreamId,ordered:R,maxPacketLifeTime:m,maxRetransmits:v,protocol:_};S.debug("sendDataChannel() [options:%o]",k);const D=this._pc.createDataChannel(x,k);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%b.MIS,!this._hasDataChannelMediaSection){const P=await this._pc.createOffer(),L=r.parse(P.sdp),O=L.media.find(H=>H.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P),this._remoteSdp.sendSctpAssociation({offerMediaObject:O});const V={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}const M={streamId:k.id,ordered:k.ordered,maxPacketLifeTime:k.maxPacketLifeTime,maxRetransmits:k.maxRetransmits};return{dataChannel:D,sctpStreamParameters:M}}async receive(R){this.assertNotClosed(),this.assertRecvDirection();const m=[],v=new Map;for(const D of R){const{trackId:M,kind:P,rtpParameters:L,streamId:O}=D;S.debug("receive() [trackId:%s, kind:%s]",M,P);const V=L.mid??String(this._mapMidTransceiver.size);v.set(M,V),this._remoteSdp.receive({mid:V,kind:P,offerRtpParameters:L,streamId:O??L.rtcp.cname,trackId:M})}const x={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);for(const D of R){const{trackId:M,onRtpReceiver:P}=D;if(P){const L=v.get(M),O=this._pc.getTransceivers().find(V=>V.mid===L);if(!O)throw new Error("transceiver not found");P(O.receiver)}}let _=await this._pc.createAnswer();const k=r.parse(_.sdp);for(const D of R){const{trackId:M,rtpParameters:P}=D,L=v.get(M),O=k.media.find(V=>String(V.mid)===L);f.applyCodecParameters({offerRtpParameters:P,answerMediaObject:O}),_={type:"answer",sdp:r.write(k)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:k}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",_),await this._pc.setLocalDescription(_);for(const D of R){const{trackId:M}=D,P=v.get(M),L=this._pc.getTransceivers().find(O=>O.mid===P);if(!L)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(P,L),m.push({localId:P,track:L.receiver.track,rtpReceiver:L.receiver})}return m}async stopReceiving(R){if(this.assertRecvDirection(),this._closed)return;for(const x of R){S.debug("stopReceiving() [localId:%s]",x);const _=this._mapMidTransceiver.get(x);if(!_)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(_.mid)}const m={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);const v=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v);for(const x of R)this._mapMidTransceiver.delete(x)}async pauseReceiving(R){this.assertNotClosed(),this.assertRecvDirection();for(const x of R){S.debug("pauseReceiving() [localId:%s]",x);const _=this._mapMidTransceiver.get(x);if(!_)throw new Error("associated RTCRtpTransceiver not found");_.direction="inactive",this._remoteSdp.pauseMediaSection(x)}const m={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);const v=await this._pc.createAnswer();S.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}async resumeReceiving(R){this.assertNotClosed(),this.assertRecvDirection();for(const x of R){S.debug("resumeReceiving() [localId:%s]",x);const _=this._mapMidTransceiver.get(x);if(!_)throw new Error("associated RTCRtpTransceiver not found");_.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(x)}const m={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);const v=await this._pc.createAnswer();S.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}async getReceiverStats(R){this.assertRecvDirection();const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated RTCRtpTransceiver not found");return m.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:R,label:m,protocol:v}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:x,ordered:_,maxPacketLifeTime:k,maxRetransmits:D}=R,M={negotiated:!0,id:x,ordered:_,maxPacketLifeTime:k,maxRetransmits:D,protocol:v};S.debug("receiveDataChannel() [options:%o]",M);const P=this._pc.createDataChannel(m,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const L={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const O=await this._pc.createAnswer();if(!this._transportReady){const V=r.parse(O.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:V})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setLocalDescription(O),this._hasDataChannelMediaSection=!0}return{dataChannel:P}}async setupTransport({localDtlsRole:R,localSdpObject:m}){m||(m=r.parse(this._pc.localDescription.sdp));const v=f.extractDtlsParameters({sdpObject:m});v.role=R,this._remoteSdp.updateDtlsRole(R==="client"?"server":"client"),await new Promise((x,_)=>{this.safeEmit("@connect",{dtlsParameters:v},x,_)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new o.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return is.Firefox120=C,is}var as={},PR;function H9(){if(PR)return as;PR=1;var e=as&&as.__createBinding||(Object.create?function(T,R,m,v){v===void 0&&(v=m);var x=Object.getOwnPropertyDescriptor(R,m);(!x||("get"in x?!R.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return R[m]}}),Object.defineProperty(T,v,x)}:function(T,R,m,v){v===void 0&&(v=m),T[v]=R[m]}),t=as&&as.__setModuleDefault||(Object.create?function(T,R){Object.defineProperty(T,"default",{enumerable:!0,value:R})}:function(T,R){T.default=R}),n=as&&as.__importStar||function(T){if(T&&T.__esModule)return T;var R={};if(T!=null)for(var m in T)m!=="default"&&Object.prototype.hasOwnProperty.call(T,m)&&e(R,T,m);return t(R,T),R};Object.defineProperty(as,"__esModule",{value:!0}),as.Firefox60=void 0;const r=n(fr()),s=un(),o=Kn(),a=n(Pn()),c=n(ur()),f=n(_s()),d=n(ba()),p=Ir(),h=Rs(),g=mi(),S=new s.Logger("Firefox60"),y="Firefox60",b={OS:16,MIS:2048};let C=class FD extends p.HandlerInterface{static createFactory(){return()=>new FD}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return y}close(){if(S.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const R=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),m=document.createElement("canvas");m.getContext("2d");const x=m.captureStream().getVideoTracks()[0];try{R.addTransceiver("audio",{direction:"sendrecv"});const _=R.addTransceiver(x,{direction:"sendrecv"}),k=_.sender.getParameters(),D=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];k.encodings=D,await _.sender.setParameters(k);const M=await R.createOffer();try{m.remove()}catch{}try{x.stop()}catch{}try{R.close()}catch{}const P=r.parse(M.sdp);return f.extractRtpCapabilities({sdpObject:P})}catch(_){try{m.remove()}catch{}try{x.stop()}catch{}try{R.close()}catch{}throw _}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:b}}run({direction:R,iceParameters:m,iceCandidates:v,dtlsParameters:x,sctpParameters:_,iceServers:k,iceTransportPolicy:D,additionalSettings:M,proprietaryConstraints:P,extendedRtpCapabilities:L}){this.assertNotClosed(),S.debug("run()"),this._direction=R,this._remoteSdp=new h.RemoteSdp({iceParameters:m,iceCandidates:v,dtlsParameters:x,sctpParameters:_}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",L),video:c.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",L),video:c.getSendingRemoteRtpParameters("video",L)},this._pc=new RTCPeerConnection({iceServers:k??[],iceTransportPolicy:D??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...M},P),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(R){throw this.assertNotClosed(),new o.UnsupportedError("not supported")}async restartIce(R){if(this.assertNotClosed(),S.debug("restartIce()"),this._remoteSdp.updateIceParameters(R),!!this._transportReady)if(this._direction==="send"){const m=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const v={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v)}else{const m={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);const v=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:R,encodings:m,codecOptions:v,codec:x}){this.assertNotClosed(),this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",R.kind,R.id),m&&(m=a.clone(m),m.forEach((q,N)=>{q.rid=`r${N}`}),m.reverse());const _=a.clone(this._sendingRtpParametersByKind[R.kind]);_.codecs=c.reduceCodecs(_.codecs,x);const k=a.clone(this._sendingRemoteRtpParametersByKind[R.kind]);k.codecs=c.reduceCodecs(k.codecs,x);const D=this._pc.addTransceiver(R,{direction:"sendonly",streams:[this._sendStream]});if(m){const q=D.sender.getParameters();q.encodings=m,await D.sender.setParameters(q)}const M=await this._pc.createOffer();let P=r.parse(M.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:P});const L=(0,g.parse)((m??[{}])[0].scalabilityMode);S.debug("send() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const O=D.mid;_.mid=O,P=r.parse(this._pc.localDescription.sdp);const V=P.media[P.media.length-1];if(_.rtcp.cname=f.getCname({offerMediaObject:V}),!m)_.encodings=d.getRtpEncodings({offerMediaObject:V});else if(m.length===1){const q=d.getRtpEncodings({offerMediaObject:V});Object.assign(q[0],m[0]),_.encodings=q}else _.encodings=m.reverse();if(_.encodings.length>1&&(_.codecs[0].mimeType.toLowerCase()==="video/vp8"||_.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const q of _.encodings)q.scalabilityMode?q.scalabilityMode=`L1T${L.temporalLayers}`:q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:V,offerRtpParameters:_,answerRtpParameters:k,codecOptions:v,extmapAllowMixed:!0});const H={type:"answer",sdp:this._remoteSdp.getSdp()};return S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H),this._mapMidTransceiver.set(O,D),{localId:O,rtpParameters:_,rtpSender:D.sender}}async stopSending(R){if(this.assertSendDirection(),S.debug("stopSending() [localId:%s]",R),this._closed)return;const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated transceiver not found");m.sender.replaceTrack(null),this._pc.removeTrack(m.sender),this._remoteSdp.disableMediaSection(m.mid);const v=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const x={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.delete(R)}async pauseSending(R){this.assertNotClosed(),this.assertSendDirection(),S.debug("pauseSending() [localId:%s]",R);const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(R);const v=await this._pc.createOffer();S.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const x={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async resumeSending(R){this.assertNotClosed(),this.assertSendDirection(),S.debug("resumeSending() [localId:%s]",R);const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(R);const v=await this._pc.createOffer();S.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const x={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async replaceTrack(R,m){this.assertNotClosed(),this.assertSendDirection(),m?S.debug("replaceTrack() [localId:%s, track.id:%s]",R,m.id):S.debug("replaceTrack() [localId:%s, no track]",R);const v=this._mapMidTransceiver.get(R);if(!v)throw new Error("associated RTCRtpTransceiver not found");await v.sender.replaceTrack(m)}async setMaxSpatialLayer(R,m){this.assertNotClosed(),this.assertSendDirection(),S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",R,m);const v=this._mapMidTransceiver.get(R);if(!v)throw new Error("associated transceiver not found");const x=v.sender.getParameters();m=x.encodings.length-1-m,x.encodings.forEach((D,M)=>{M>=m?D.active=!0:D.active=!1}),await v.sender.setParameters(x),this._remoteSdp.muxMediaSectionSimulcast(R,x.encodings);const _=await this._pc.createOffer();S.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",_),await this._pc.setLocalDescription(_);const k={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}async setRtpEncodingParameters(R,m){this.assertNotClosed(),this.assertSendDirection(),S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",R,m);const v=this._mapMidTransceiver.get(R);if(!v)throw new Error("associated RTCRtpTransceiver not found");const x=v.sender.getParameters();x.encodings.forEach((D,M)=>{x.encodings[M]={...D,...m}}),await v.sender.setParameters(x),this._remoteSdp.muxMediaSectionSimulcast(R,x.encodings);const _=await this._pc.createOffer();S.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",_),await this._pc.setLocalDescription(_);const k={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k)}async getSenderStats(R){this.assertNotClosed(),this.assertSendDirection();const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated RTCRtpTransceiver not found");return m.sender.getStats()}async sendDataChannel({ordered:R,maxPacketLifeTime:m,maxRetransmits:v,label:x,protocol:_}){this.assertNotClosed(),this.assertSendDirection();const k={negotiated:!0,id:this._nextSendSctpStreamId,ordered:R,maxPacketLifeTime:m,maxRetransmits:v,protocol:_};S.debug("sendDataChannel() [options:%o]",k);const D=this._pc.createDataChannel(x,k);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%b.MIS,!this._hasDataChannelMediaSection){const P=await this._pc.createOffer(),L=r.parse(P.sdp),O=L.media.find(H=>H.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P),this._remoteSdp.sendSctpAssociation({offerMediaObject:O});const V={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}const M={streamId:k.id,ordered:k.ordered,maxPacketLifeTime:k.maxPacketLifeTime,maxRetransmits:k.maxRetransmits};return{dataChannel:D,sctpStreamParameters:M}}async receive(R){this.assertNotClosed(),this.assertRecvDirection();const m=[],v=new Map;for(const D of R){const{trackId:M,kind:P,rtpParameters:L,streamId:O}=D;S.debug("receive() [trackId:%s, kind:%s]",M,P);const V=L.mid??String(this._mapMidTransceiver.size);v.set(M,V),this._remoteSdp.receive({mid:V,kind:P,offerRtpParameters:L,streamId:O??L.rtcp.cname,trackId:M})}const x={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);let _=await this._pc.createAnswer();const k=r.parse(_.sdp);for(const D of R){const{trackId:M,rtpParameters:P}=D,L=v.get(M),O=k.media.find(V=>String(V.mid)===L);f.applyCodecParameters({offerRtpParameters:P,answerMediaObject:O}),_={type:"answer",sdp:r.write(k)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:k}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",_),await this._pc.setLocalDescription(_);for(const D of R){const{trackId:M}=D,P=v.get(M),L=this._pc.getTransceivers().find(O=>O.mid===P);if(!L)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(P,L),m.push({localId:P,track:L.receiver.track,rtpReceiver:L.receiver})}return m}async stopReceiving(R){if(this.assertRecvDirection(),this._closed)return;for(const x of R){S.debug("stopReceiving() [localId:%s]",x);const _=this._mapMidTransceiver.get(x);if(!_)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(_.mid)}const m={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);const v=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v);for(const x of R)this._mapMidTransceiver.delete(x)}async pauseReceiving(R){this.assertNotClosed(),this.assertRecvDirection();for(const x of R){S.debug("pauseReceiving() [localId:%s]",x);const _=this._mapMidTransceiver.get(x);if(!_)throw new Error("associated RTCRtpTransceiver not found");_.direction="inactive",this._remoteSdp.pauseMediaSection(x)}const m={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);const v=await this._pc.createAnswer();S.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}async resumeReceiving(R){this.assertNotClosed(),this.assertRecvDirection();for(const x of R){S.debug("resumeReceiving() [localId:%s]",x);const _=this._mapMidTransceiver.get(x);if(!_)throw new Error("associated RTCRtpTransceiver not found");_.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(x)}const m={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);const v=await this._pc.createAnswer();S.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}async getReceiverStats(R){this.assertRecvDirection();const m=this._mapMidTransceiver.get(R);if(!m)throw new Error("associated RTCRtpTransceiver not found");return m.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:R,label:m,protocol:v}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:x,ordered:_,maxPacketLifeTime:k,maxRetransmits:D}=R,M={negotiated:!0,id:x,ordered:_,maxPacketLifeTime:k,maxRetransmits:D,protocol:v};S.debug("receiveDataChannel() [options:%o]",M);const P=this._pc.createDataChannel(m,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const L={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const O=await this._pc.createAnswer();if(!this._transportReady){const V=r.parse(O.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:V})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setLocalDescription(O),this._hasDataChannelMediaSection=!0}return{dataChannel:P}}async setupTransport({localDtlsRole:R,localSdpObject:m}){m||(m=r.parse(this._pc.localDescription.sdp));const v=f.extractDtlsParameters({sdpObject:m});v.role=R,this._remoteSdp.updateDtlsRole(R==="client"?"server":"client"),await new Promise((x,_)=>{this.safeEmit("@connect",{dtlsParameters:v},x,_)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new o.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return as.Firefox60=C,as}var cs={},MR;function W9(){if(MR)return cs;MR=1;var e=cs&&cs.__createBinding||(Object.create?function(R,m,v,x){x===void 0&&(x=v);var _=Object.getOwnPropertyDescriptor(m,v);(!_||("get"in _?!m.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(R,x,_)}:function(R,m,v,x){x===void 0&&(x=v),R[x]=m[v]}),t=cs&&cs.__setModuleDefault||(Object.create?function(R,m){Object.defineProperty(R,"default",{enumerable:!0,value:m})}:function(R,m){R.default=m}),n=cs&&cs.__importStar||function(R){if(R&&R.__esModule)return R;var m={};if(R!=null)for(var v in R)v!=="default"&&Object.prototype.hasOwnProperty.call(R,v)&&e(m,R,v);return t(m,R),m};Object.defineProperty(cs,"__esModule",{value:!0}),cs.Safari12=void 0;const r=n(fr()),s=un(),o=n(Pn()),a=n(ur()),c=n(_s()),f=n(ba()),d=n(Cm()),p=Kn(),h=Ir(),g=Rs(),S=mi(),y=new s.Logger("Safari12"),b="Safari12",C={OS:1024,MIS:1024};let T=class zD extends h.HandlerInterface{static createFactory(){return()=>new zD}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return b}close(){if(y.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const m=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{m.addTransceiver("audio"),m.addTransceiver("video");const v=await m.createOffer();try{m.close()}catch{}const x=r.parse(v.sdp),_=c.extractRtpCapabilities({sdpObject:x});return d.addNackSuppportForOpus(_),_}catch(v){try{m.close()}catch{}throw v}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:C}}run({direction:m,iceParameters:v,iceCandidates:x,dtlsParameters:_,sctpParameters:k,iceServers:D,iceTransportPolicy:M,additionalSettings:P,proprietaryConstraints:L,extendedRtpCapabilities:O}){this.assertNotClosed(),y.debug("run()"),this._direction=m,this._remoteSdp=new g.RemoteSdp({iceParameters:v,iceCandidates:x,dtlsParameters:_,sctpParameters:k}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",O),video:a.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",O),video:a.getSendingRemoteRtpParameters("video",O)},_.role&&_.role!=="auto"&&(this._forcedLocalDtlsRole=_.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:D??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...P},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(m){this.assertNotClosed(),y.debug("updateIceServers()");const v=this._pc.getConfiguration();v.iceServers=m,this._pc.setConfiguration(v)}async restartIce(m){if(this.assertNotClosed(),y.debug("restartIce()"),this._remoteSdp.updateIceParameters(m),!!this._transportReady)if(this._direction==="send"){const v=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const x={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:m,encodings:v,codecOptions:x,codec:_,onRtpSender:k}){this.assertNotClosed(),this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",m.kind,m.id);const D=o.clone(this._sendingRtpParametersByKind[m.kind]);D.codecs=a.reduceCodecs(D.codecs,_);const M=o.clone(this._sendingRemoteRtpParametersByKind[m.kind]);M.codecs=a.reduceCodecs(M.codecs,_);const P=this._remoteSdp.getNextMediaSectionIdx(),L=this._pc.addTransceiver(m,{direction:"sendonly",streams:[this._sendStream]});k&&k(L.sender);let O=await this._pc.createOffer(),V=r.parse(O.sdp),H;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V});const q=(0,S.parse)((v??[{}])[0].scalabilityMode);v&&v.length>1&&(y.debug("send() | enabling legacy simulcast"),V=r.parse(O.sdp),H=V.media[P.idx],f.addLegacySimulcast({offerMediaObject:H,numStreams:v.length}),O={type:"offer",sdp:r.write(V)}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const N=L.mid;if(D.mid=N,V=r.parse(this._pc.localDescription.sdp),H=V.media[P.idx],D.rtcp.cname=c.getCname({offerMediaObject:H}),D.encodings=f.getRtpEncodings({offerMediaObject:H}),v)for(let $=0;$<D.encodings.length;++$)v[$]&&Object.assign(D.encodings[$],v[$]);if(D.encodings.length>1&&(D.codecs[0].mimeType.toLowerCase()==="video/vp8"||D.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const $ of D.encodings)$.scalabilityMode?$.scalabilityMode=`L1T${q.temporalLayers}`:$.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:H,reuseMid:P.reuseMid,offerRtpParameters:D,answerRtpParameters:M,codecOptions:x});const B={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",B),await this._pc.setRemoteDescription(B),this._mapMidTransceiver.set(N,L),{localId:N,rtpParameters:D,rtpSender:L.sender}}async stopSending(m){if(this.assertSendDirection(),this._closed)return;y.debug("stopSending() [localId:%s]",m);const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");if(v.sender.replaceTrack(null),this._pc.removeTrack(v.sender),this._remoteSdp.closeMediaSection(v.mid))try{v.stop()}catch{}const _=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",_),await this._pc.setLocalDescription(_);const k={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._mapMidTransceiver.delete(m)}async pauseSending(m){this.assertNotClosed(),this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",m);const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");v.direction="inactive",this._remoteSdp.pauseMediaSection(m);const x=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const _={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}async resumeSending(m){this.assertNotClosed(),this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",m);const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");v.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(m);const x=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const _={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}async replaceTrack(m,v){this.assertNotClosed(),this.assertSendDirection(),v?y.debug("replaceTrack() [localId:%s, track.id:%s]",m,v.id):y.debug("replaceTrack() [localId:%s, no track]",m);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");await x.sender.replaceTrack(v)}async setMaxSpatialLayer(m,v){this.assertNotClosed(),this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",m,v);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");const _=x.sender.getParameters();_.encodings.forEach((M,P)=>{P<=v?M.active=!0:M.active=!1}),await x.sender.setParameters(_),this._remoteSdp.muxMediaSectionSimulcast(m,_.encodings);const k=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const D={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async setRtpEncodingParameters(m,v){this.assertNotClosed(),this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",m,v);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");const _=x.sender.getParameters();_.encodings.forEach((M,P)=>{_.encodings[P]={...M,...v}}),await x.sender.setParameters(_),this._remoteSdp.muxMediaSectionSimulcast(m,_.encodings);const k=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const D={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async getSenderStats(m){this.assertNotClosed(),this.assertSendDirection();const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.sender.getStats()}async sendDataChannel({ordered:m,maxPacketLifeTime:v,maxRetransmits:x,label:_,protocol:k}){this.assertNotClosed(),this.assertSendDirection();const D={negotiated:!0,id:this._nextSendSctpStreamId,ordered:m,maxPacketLifeTime:v,maxRetransmits:x,protocol:k};y.debug("sendDataChannel() [options:%o]",D);const M=this._pc.createDataChannel(_,D);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%C.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),O=r.parse(L.sdp),V=O.media.find(q=>q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const H={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H),this._hasDataChannelMediaSection=!0}const P={streamId:D.id,ordered:D.ordered,maxPacketLifeTime:D.maxPacketLifeTime,maxRetransmits:D.maxRetransmits};return{dataChannel:M,sctpStreamParameters:P}}async receive(m){this.assertNotClosed(),this.assertRecvDirection();const v=[],x=new Map;for(const M of m){const{trackId:P,kind:L,rtpParameters:O,streamId:V}=M;y.debug("receive() [trackId:%s, kind:%s]",P,L);const H=O.mid??String(this._mapMidTransceiver.size);x.set(P,H),this._remoteSdp.receive({mid:H,kind:L,offerRtpParameters:O,streamId:V??O.rtcp.cname,trackId:P})}const _={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);for(const M of m){const{trackId:P,onRtpReceiver:L}=M;if(L){const O=x.get(P),V=this._pc.getTransceivers().find(H=>H.mid===O);if(!V)throw new Error("transceiver not found");L(V.receiver)}}let k=await this._pc.createAnswer();const D=r.parse(k.sdp);for(const M of m){const{trackId:P,rtpParameters:L}=M,O=x.get(P),V=D.media.find(H=>String(H.mid)===O);c.applyCodecParameters({offerRtpParameters:L,answerMediaObject:V})}k={type:"answer",sdp:r.write(D)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k);for(const M of m){const{trackId:P}=M,L=x.get(P),O=this._pc.getTransceivers().find(V=>V.mid===L);if(!O)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(L,O),v.push({localId:L,track:O.receiver.track,rtpReceiver:O.receiver})}return v}async stopReceiving(m){if(this.assertRecvDirection(),this._closed)return;for(const _ of m){y.debug("stopReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(k.mid)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const _ of m)this._mapMidTransceiver.delete(_)}async pauseReceiving(m){this.assertNotClosed(),this.assertRecvDirection();for(const _ of m){y.debug("pauseReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");k.direction="inactive",this._remoteSdp.pauseMediaSection(_)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async resumeReceiving(m){this.assertNotClosed(),this.assertRecvDirection();for(const _ of m){y.debug("resumeReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");k.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(_)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async getReceiverStats(m){this.assertNotClosed(),this.assertRecvDirection();const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:m,label:v,protocol:x}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:_,ordered:k,maxPacketLifeTime:D,maxRetransmits:M}=m,P={negotiated:!0,id:_,ordered:k,maxPacketLifeTime:D,maxRetransmits:M,protocol:x};y.debug("receiveDataChannel() [options:%o]",P);const L=this._pc.createDataChannel(v,P);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const V=await this._pc.createAnswer();if(!this._transportReady){const H=r.parse(V.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:m,localSdpObject:v}){v||(v=r.parse(this._pc.localDescription.sdp));const x=c.extractDtlsParameters({sdpObject:v});x.role=m,this._remoteSdp.updateDtlsRole(m==="client"?"server":"client"),await new Promise((_,k)=>{this.safeEmit("@connect",{dtlsParameters:x},_,k)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new p.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return cs.Safari12=T,cs}var ls={},NR;function q9(){if(NR)return ls;NR=1;var e=ls&&ls.__createBinding||(Object.create?function(b,C,T,R){R===void 0&&(R=T);var m=Object.getOwnPropertyDescriptor(C,T);(!m||("get"in m?!C.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return C[T]}}),Object.defineProperty(b,R,m)}:function(b,C,T,R){R===void 0&&(R=T),b[R]=C[T]}),t=ls&&ls.__setModuleDefault||(Object.create?function(b,C){Object.defineProperty(b,"default",{enumerable:!0,value:C})}:function(b,C){b.default=C}),n=ls&&ls.__importStar||function(b){if(b&&b.__esModule)return b;var C={};if(b!=null)for(var T in b)T!=="default"&&Object.prototype.hasOwnProperty.call(b,T)&&e(C,b,T);return t(C,b),C};Object.defineProperty(ls,"__esModule",{value:!0}),ls.Safari11=void 0;const r=n(fr()),s=un(),o=n(Pn()),a=n(ur()),c=n(_s()),f=n(_m()),d=Ir(),p=Rs(),h=new s.Logger("Safari11"),g="Safari11",S={OS:1024,MIS:1024};let y=class BD extends d.HandlerInterface{static createFactory(){return()=>new BD}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return g}close(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){h.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const T=await C.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{C.close()}catch{}const R=r.parse(T.sdp);return c.extractRtpCapabilities({sdpObject:R})}catch(T){try{C.close()}catch{}throw T}}async getNativeSctpCapabilities(){return h.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:C,iceParameters:T,iceCandidates:R,dtlsParameters:m,sctpParameters:v,iceServers:x,iceTransportPolicy:_,additionalSettings:k,proprietaryConstraints:D,extendedRtpCapabilities:M}){h.debug("run()"),this._direction=C,this._remoteSdp=new p.RemoteSdp({iceParameters:T,iceCandidates:R,dtlsParameters:m,sctpParameters:v,planB:!0}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",M),video:a.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",M),video:a.getSendingRemoteRtpParameters("video",M)},m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:x??[],iceTransportPolicy:_??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...k},D),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(h.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(C){h.debug("updateIceServers()");const T=this._pc.getConfiguration();T.iceServers=C,this._pc.setConfiguration(T)}async restartIce(C){if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),!!this._transportReady)if(this._direction==="send"){const T=await this._pc.createOffer({iceRestart:!0});h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const R={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const T={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const R=await this._pc.createAnswer();h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:T,codecOptions:R,codec:m}){this.assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),m&&h.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addTrack(C,this._sendStream);let v=await this._pc.createOffer(),x=r.parse(v.sdp),_;const k=o.clone(this._sendingRtpParametersByKind[C.kind]);k.codecs=a.reduceCodecs(k.codecs);const D=o.clone(this._sendingRemoteRtpParametersByKind[C.kind]);if(D.codecs=a.reduceCodecs(D.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:x}),C.kind==="video"&&T&&T.length>1&&(h.debug("send() | enabling simulcast"),x=r.parse(v.sdp),_=x.media.find(O=>O.type==="video"),f.addLegacySimulcast({offerMediaObject:_,track:C,numStreams:T.length}),v={type:"offer",sdp:r.write(x)}),h.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v),x=r.parse(this._pc.localDescription.sdp),_=x.media.find(O=>O.type===C.kind),k.rtcp.cname=c.getCname({offerMediaObject:_}),k.encodings=f.getRtpEncodings({offerMediaObject:_,track:C}),T)for(let O=0;O<k.encodings.length;++O)T[O]&&Object.assign(k.encodings[O],T[O]);if(k.encodings.length>1&&k.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const O of k.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:_,offerRtpParameters:k,answerRtpParameters:D,codecOptions:R});const M={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M);const P=String(this._nextSendLocalId);this._nextSendLocalId++;const L=this._pc.getSenders().find(O=>O.track===C);return this._mapSendLocalIdRtpSender.set(P,L),{localId:P,rtpParameters:k,rtpSender:L}}async stopSending(C){this.assertSendDirection();const T=this._mapSendLocalIdRtpSender.get(C);if(!T)throw new Error("associated RTCRtpSender not found");T.track&&this._sendStream.removeTrack(T.track),this._mapSendLocalIdRtpSender.delete(C);const R=await this._pc.createOffer();h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R);try{await this._pc.setLocalDescription(R)}catch(v){if(this._sendStream.getTracks().length===0){h.warn("stopSending() | ignoring expected error due no sending tracks: %s",v.toString());return}throw v}if(this._pc.signalingState==="stable")return;const m={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,T){this.assertSendDirection(),T?h.debug("replaceTrack() [localId:%s, track.id:%s]",C,T.id):h.debug("replaceTrack() [localId:%s, no track]",C);const R=this._mapSendLocalIdRtpSender.get(C);if(!R)throw new Error("associated RTCRtpSender not found");const m=R.track;await R.replaceTrack(T),m&&this._sendStream.removeTrack(m),T&&this._sendStream.addTrack(T)}async setMaxSpatialLayer(C,T){this.assertSendDirection(),h.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",C,T);const R=this._mapSendLocalIdRtpSender.get(C);if(!R)throw new Error("associated RTCRtpSender not found");const m=R.getParameters();m.encodings.forEach((v,x)=>{x<=T?v.active=!0:v.active=!1}),await R.setParameters(m)}async setRtpEncodingParameters(C,T){this.assertSendDirection(),h.debug("setRtpEncodingParameters() [localId:%s, params:%o]",C,T);const R=this._mapSendLocalIdRtpSender.get(C);if(!R)throw new Error("associated RTCRtpSender not found");const m=R.getParameters();m.encodings.forEach((v,x)=>{m.encodings[x]={...v,...T}}),await R.setParameters(m)}async getSenderStats(C){this.assertSendDirection();const T=this._mapSendLocalIdRtpSender.get(C);if(!T)throw new Error("associated RTCRtpSender not found");return T.getStats()}async sendDataChannel({ordered:C,maxPacketLifeTime:T,maxRetransmits:R,label:m,protocol:v}){this.assertSendDirection();const x={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:T,maxRetransmits:R,protocol:v};h.debug("sendDataChannel() [options:%o]",x);const _=this._pc.createDataChannel(m,x);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const D=await this._pc.createOffer(),M=r.parse(D.sdp),P=M.media.find(O=>O.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),this._remoteSdp.sendSctpAssociation({offerMediaObject:P});const L={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L),this._hasDataChannelMediaSection=!0}const k={streamId:x.id,ordered:x.ordered,maxPacketLifeTime:x.maxPacketLifeTime,maxRetransmits:x.maxRetransmits};return{dataChannel:_,sctpStreamParameters:k}}async receive(C){this.assertRecvDirection();const T=[];for(const x of C){const{trackId:_,kind:k,rtpParameters:D,streamId:M}=x;h.debug("receive() [trackId:%s, kind:%s]",_,k);const P=k;this._remoteSdp.receive({mid:P,kind:k,offerRtpParameters:D,streamId:M??D.rtcp.cname,trackId:_})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);let m=await this._pc.createAnswer();const v=r.parse(m.sdp);for(const x of C){const{kind:_,rtpParameters:k}=x,D=_,M=v.media.find(P=>String(P.mid)===D);c.applyCodecParameters({offerRtpParameters:k,answerMediaObject:M})}m={type:"answer",sdp:r.write(v)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:v}),h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const x of C){const{kind:_,trackId:k,rtpParameters:D}=x,M=_,P=k,L=this._pc.getReceivers().find(O=>O.track&&O.track.id===P);if(!L)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(P,{mid:M,rtpParameters:D,rtpReceiver:L}),T.push({localId:P,track:L.track,rtpReceiver:L})}return T}async stopReceiving(C){this.assertRecvDirection();for(const m of C){h.debug("stopReceiving() [localId:%s]",m);const{mid:v,rtpParameters:x}=this._mapRecvLocalIdInfo.get(m)??{};this._mapRecvLocalIdInfo.delete(m),this._remoteSdp.planBStopReceiving({mid:v,offerRtpParameters:x})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const R=await this._pc.createAnswer();h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(C){this.assertRecvDirection();const{rtpReceiver:T}=this._mapRecvLocalIdInfo.get(C)??{};if(!T)throw new Error("associated RTCRtpReceiver not found");return T.getStats()}async pauseReceiving(C){}async resumeReceiving(C){}async receiveDataChannel({sctpStreamParameters:C,label:T,protocol:R}){this.assertRecvDirection();const{streamId:m,ordered:v,maxPacketLifeTime:x,maxRetransmits:_}=C,k={negotiated:!0,id:m,ordered:v,maxPacketLifeTime:x,maxRetransmits:_,protocol:R};h.debug("receiveDataChannel() [options:%o]",k);const D=this._pc.createDataChannel(T,k);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const M={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const P=await this._pc.createAnswer();if(!this._transportReady){const L=r.parse(P.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:L})}h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setLocalDescription(P),this._hasDataChannelMediaSection=!0}return{dataChannel:D}}async setupTransport({localDtlsRole:C,localSdpObject:T}){T||(T=r.parse(this._pc.localDescription.sdp));const R=c.extractDtlsParameters({sdpObject:T});R.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((m,v)=>{this.safeEmit("@connect",{dtlsParameters:R},m,v)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return ls.Safari11=y,ls}var ds={},us={},LR;function G9(){if(LR)return us;LR=1;var e=us&&us.__createBinding||(Object.create?function(a,c,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(c,f);(!p||("get"in p?!c.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(a,d,p)}:function(a,c,f,d){d===void 0&&(d=f),a[d]=c[f]}),t=us&&us.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),n=us&&us.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var f in a)f!=="default"&&Object.prototype.hasOwnProperty.call(a,f)&&e(c,a,f);return t(c,a),c};Object.defineProperty(us,"__esModule",{value:!0}),us.getCapabilities=s,us.mangleRtpParameters=o;const r=n(Pn());function s(){const a=RTCRtpReceiver.getCapabilities(),c=r.clone(a);for(const f of c.codecs??[]){if(f.channels=f.numChannels,delete f.numChannels,f.mimeType=f.mimeType??`${f.kind}/${f.name}`,f.parameters){const d=f.parameters;d.apt&&(d.apt=Number(d.apt)),d["packetization-mode"]&&(d["packetization-mode"]=Number(d["packetization-mode"]))}for(const d of f.rtcpFeedback??[])d.parameter||(d.parameter="")}return c}function o(a){const c=r.clone(a);c.mid&&(c.muxId=c.mid,delete c.mid);for(const f of c.codecs)f.channels&&(f.numChannels=f.channels,delete f.channels),f.mimeType&&!f.name&&(f.name=f.mimeType.split("/")[1]),delete f.mimeType;return c}return us}var OR;function K9(){if(OR)return ds;OR=1;var e=ds&&ds.__createBinding||(Object.create?function(g,S,y,b){b===void 0&&(b=y);var C=Object.getOwnPropertyDescriptor(S,y);(!C||("get"in C?!S.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return S[y]}}),Object.defineProperty(g,b,C)}:function(g,S,y,b){b===void 0&&(b=y),g[b]=S[y]}),t=ds&&ds.__setModuleDefault||(Object.create?function(g,S){Object.defineProperty(g,"default",{enumerable:!0,value:S})}:function(g,S){g.default=S}),n=ds&&ds.__importStar||function(g){if(g&&g.__esModule)return g;var S={};if(g!=null)for(var y in g)y!=="default"&&Object.prototype.hasOwnProperty.call(g,y)&&e(S,g,y);return t(S,g),S};Object.defineProperty(ds,"__esModule",{value:!0}),ds.Edge11=void 0;const r=un(),s=Kn(),o=n(Pn()),a=n(ur()),c=n(G9()),f=Ir(),d=new r.Logger("Edge11"),p="Edge11";let h=class UD extends f.HandlerInterface{static createFactory(){return()=>new UD}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return p}close(){d.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const S of this._rtpSenders.values())try{S.stop()}catch{}for(const S of this._rtpReceivers.values())try{S.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return d.debug("getNativeRtpCapabilities()"),c.getCapabilities()}async getNativeSctpCapabilities(){return d.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:S,iceParameters:y,iceCandidates:b,dtlsParameters:C,sctpParameters:T,iceServers:R,iceTransportPolicy:m,additionalSettings:v,proprietaryConstraints:x,extendedRtpCapabilities:_}){d.debug("run()"),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",_),video:a.getSendingRtpParameters("video",_)},this._remoteIceParameters=y,this._remoteIceCandidates=b,this._remoteDtlsParameters=C,this._cname=`CNAME-${o.generateRandomNumber()}`,this.setIceGatherer({iceServers:R,iceTransportPolicy:m}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(S){throw new s.UnsupportedError("not supported")}async restartIce(S){if(d.debug("restartIce()"),this._remoteIceParameters=S,!!this._transportReady){d.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,S,"controlling");for(const y of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(y);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:S,encodings:y,codecOptions:b,codec:C}){d.debug("send() [kind:%s, track.id:%s]",S.kind,S.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),d.debug("send() | calling new RTCRtpSender()");const T=new RTCRtpSender(S,this._dtlsTransport),R=o.clone(this._sendingRtpParametersByKind[S.kind]);R.codecs=a.reduceCodecs(R.codecs,C);const m=R.codecs.some(_=>/.+\/rtx$/i.test(_.mimeType));y||(y=[{}]);for(const _ of y)_.ssrc=o.generateRandomNumber(),m&&(_.rtx={ssrc:o.generateRandomNumber()});R.encodings=y,R.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const v=c.mangleRtpParameters(R);d.debug("send() | calling rtpSender.send() [params:%o]",v),await T.send(v);const x=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(x,T),{localId:x,rtpParameters:R,rtpSender:T}}async stopSending(S){d.debug("stopSending() [localId:%s]",S);const y=this._rtpSenders.get(S);if(!y)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(S);try{d.debug("stopSending() | calling rtpSender.stop()"),y.stop()}catch(b){throw d.warn("stopSending() | rtpSender.stop() failed:%o",b),b}}async pauseSending(S){}async resumeSending(S){}async replaceTrack(S,y){y?d.debug("replaceTrack() [localId:%s, track.id:%s]",S,y.id):d.debug("replaceTrack() [localId:%s, no track]",S);const b=this._rtpSenders.get(S);if(!b)throw new Error("RTCRtpSender not found");b.setTrack(y)}async setMaxSpatialLayer(S,y){d.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",S,y);const b=this._rtpSenders.get(S);if(!b)throw new Error("RTCRtpSender not found");const C=b.getParameters();C.encodings.forEach((T,R)=>{R<=y?T.active=!0:T.active=!1}),await b.setParameters(C)}async setRtpEncodingParameters(S,y){d.debug("setRtpEncodingParameters() [localId:%s, params:%o]",S,y);const b=this._rtpSenders.get(S);if(!b)throw new Error("RTCRtpSender not found");const C=b.getParameters();C.encodings.forEach((T,R)=>{C.encodings[R]={...T,...y}}),await b.setParameters(C)}async getSenderStats(S){const y=this._rtpSenders.get(S);if(!y)throw new Error("RTCRtpSender not found");return y.getStats()}async sendDataChannel(S){throw new s.UnsupportedError("not implemented")}async receive(S){const y=[];for(const b of S){const{trackId:C,kind:T}=b;d.debug("receive() [trackId:%s, kind:%s]",C,T)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const b of S){const{trackId:C,kind:T,rtpParameters:R}=b;d.debug("receive() | calling new RTCRtpReceiver()");const m=new RTCRtpReceiver(this._dtlsTransport,T);m.addEventListener("error",_=>{d.error('rtpReceiver "error" event [event:%o]',_)});const v=c.mangleRtpParameters(R);d.debug("receive() | calling rtpReceiver.receive() [params:%o]",v),await m.receive(v);const x=C;this._rtpReceivers.set(x,m),y.push({localId:x,track:m.track,rtpReceiver:m})}return y}async stopReceiving(S){for(const y of S){d.debug("stopReceiving() [localId:%s]",y);const b=this._rtpReceivers.get(y);if(!b)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(y);try{d.debug("stopReceiving() | calling rtpReceiver.stop()"),b.stop()}catch(C){d.warn("stopReceiving() | rtpReceiver.stop() failed:%o",C)}}}async pauseReceiving(S){}async resumeReceiving(S){}async getReceiverStats(S){const y=this._rtpReceivers.get(S);if(!y)throw new Error("RTCRtpReceiver not found");return y.getStats()}async receiveDataChannel(S){throw new s.UnsupportedError("not implemented")}setIceGatherer({iceServers:S,iceTransportPolicy:y}){const b=new RTCIceGatherer({iceServers:S??[],gatherPolicy:y??"all"});b.addEventListener("error",C=>{d.error('iceGatherer "error" event [event:%o]',C)});try{b.gather()}catch(C){d.debug("setIceGatherer() | iceGatherer.gather() failed: %s",C.toString())}this._iceGatherer=b}setIceTransport(){const S=new RTCIceTransport(this._iceGatherer);S.addEventListener("statechange",()=>{switch(S.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),S.addEventListener("icestatechange",()=>{switch(S.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),S.addEventListener("candidatepairchange",y=>{d.debug('iceTransport "candidatepairchange" event [pair:%o]',y.pair)}),this._iceTransport=S}setDtlsTransport(){const S=new RTCDtlsTransport(this._iceTransport);S.addEventListener("statechange",()=>{d.debug('dtlsTransport "statechange" event [state:%s]',S.state)}),S.addEventListener("dtlsstatechange",()=>{d.debug('dtlsTransport "dtlsstatechange" event [state:%s]',S.state),S.state==="closed"&&this.emit("@connectionstatechange","closed")}),S.addEventListener("error",y=>{d.error('dtlsTransport "error" event [event:%o]',y)}),this._dtlsTransport=S}async setupTransport({localDtlsRole:S}){d.debug("setupTransport()");const y=this._dtlsTransport.getLocalParameters();y.role=S,await new Promise((b,C)=>{this.safeEmit("@connect",{dtlsParameters:y},b,C)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const b of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(b);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(b=>b.algorithm==="sha-256"||b.algorithm==="sha-384"||b.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}};return ds.Edge11=h,ds}var fs={},AR;function Y9(){if(AR)return fs;AR=1;var e=fs&&fs.__createBinding||(Object.create?function(R,m,v,x){x===void 0&&(x=v);var _=Object.getOwnPropertyDescriptor(m,v);(!_||("get"in _?!m.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(R,x,_)}:function(R,m,v,x){x===void 0&&(x=v),R[x]=m[v]}),t=fs&&fs.__setModuleDefault||(Object.create?function(R,m){Object.defineProperty(R,"default",{enumerable:!0,value:m})}:function(R,m){R.default=m}),n=fs&&fs.__importStar||function(R){if(R&&R.__esModule)return R;var m={};if(R!=null)for(var v in R)v!=="default"&&Object.prototype.hasOwnProperty.call(R,v)&&e(m,R,v);return t(m,R),m};Object.defineProperty(fs,"__esModule",{value:!0}),fs.ReactNativeUnifiedPlan=void 0;const r=n(fr()),s=un(),o=n(Pn()),a=n(ur()),c=n(_s()),f=n(ba()),d=n(Cm()),p=Kn(),h=Ir(),g=Rs(),S=mi(),y=new s.Logger("ReactNativeUnifiedPlan"),b="ReactNativeUnifiedPlan",C={OS:1024,MIS:1024};let T=class VD extends h.HandlerInterface{static createFactory(){return()=>new VD}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return b}close(){if(y.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");const m=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{m.addTransceiver("audio"),m.addTransceiver("video");const v=await m.createOffer();try{m.close()}catch{}const x=r.parse(v.sdp),_=c.extractRtpCapabilities({sdpObject:x});return d.addNackSuppportForOpus(_),_}catch(v){try{m.close()}catch{}throw v}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:C}}run({direction:m,iceParameters:v,iceCandidates:x,dtlsParameters:_,sctpParameters:k,iceServers:D,iceTransportPolicy:M,additionalSettings:P,proprietaryConstraints:L,extendedRtpCapabilities:O}){this.assertNotClosed(),y.debug("run()"),this._direction=m,this._remoteSdp=new g.RemoteSdp({iceParameters:v,iceCandidates:x,dtlsParameters:_,sctpParameters:k}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",O),video:a.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",O),video:a.getSendingRemoteRtpParameters("video",O)},_.role&&_.role!=="auto"&&(this._forcedLocalDtlsRole=_.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:D??[],iceTransportPolicy:M??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...P},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(m){this.assertNotClosed(),y.debug("updateIceServers()");const v=this._pc.getConfiguration();v.iceServers=m,this._pc.setConfiguration(v)}async restartIce(m){if(this.assertNotClosed(),y.debug("restartIce()"),this._remoteSdp.updateIceParameters(m),!!this._transportReady)if(this._direction==="send"){const v=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const x={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:m,encodings:v,codecOptions:x,codec:_,onRtpSender:k}){this.assertNotClosed(),this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",m.kind,m.id),v&&v.length>1&&v.forEach((F,z)=>{F.rid=`r${z}`});const D=o.clone(this._sendingRtpParametersByKind[m.kind]);D.codecs=a.reduceCodecs(D.codecs,_);const M=o.clone(this._sendingRemoteRtpParametersByKind[m.kind]);M.codecs=a.reduceCodecs(M.codecs,_);const P=this._remoteSdp.getNextMediaSectionIdx(),L=this._pc.addTransceiver(m,{direction:"sendonly",streams:[this._sendStream],sendEncodings:v});k&&k(L.sender);let O=await this._pc.createOffer(),V=r.parse(O.sdp),H;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V});let q=!1;const N=(0,S.parse)((v??[{}])[0].scalabilityMode);v&&v.length===1&&N.spatialLayers>1&&D.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(y.debug("send() | enabling legacy simulcast for VP9 SVC"),q=!0,V=r.parse(O.sdp),H=V.media[P.idx],f.addLegacySimulcast({offerMediaObject:H,numStreams:N.spatialLayers}),O={type:"offer",sdp:r.write(V)}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);let B=L.mid??void 0;if(B||y.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),D.mid=B,V=r.parse(this._pc.localDescription.sdp),H=V.media[P.idx],D.rtcp.cname=c.getCname({offerMediaObject:H}),!v)D.encodings=f.getRtpEncodings({offerMediaObject:H});else if(v.length===1){let F=f.getRtpEncodings({offerMediaObject:H});Object.assign(F[0],v[0]),q&&(F=[F[0]]),D.encodings=F}else D.encodings=v;if(D.encodings.length>1&&(D.codecs[0].mimeType.toLowerCase()==="video/vp8"||D.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const F of D.encodings)F.scalabilityMode?F.scalabilityMode=`L1T${N.temporalLayers}`:F.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:H,reuseMid:P.reuseMid,offerRtpParameters:D,answerRtpParameters:M,codecOptions:x,extmapAllowMixed:!0});const $={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setRemoteDescription($),B||(B=L.mid,D.mid=B),this._mapMidTransceiver.set(B,L),{localId:B,rtpParameters:D,rtpSender:L.sender}}async stopSending(m){if(this.assertSendDirection(),this._closed)return;y.debug("stopSending() [localId:%s]",m);const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");if(v.sender.replaceTrack(null),this._pc.removeTrack(v.sender),this._remoteSdp.closeMediaSection(v.mid))try{v.stop()}catch{}const _=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",_),await this._pc.setLocalDescription(_);const k={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._mapMidTransceiver.delete(m)}async pauseSending(m){this.assertNotClosed(),this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",m);const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");v.direction="inactive",this._remoteSdp.pauseMediaSection(m);const x=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const _={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}async resumeSending(m){this.assertNotClosed(),this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",m);const v=this._mapMidTransceiver.get(m);if(this._remoteSdp.resumeSendingMediaSection(m),!v)throw new Error("associated RTCRtpTransceiver not found");v.direction="sendonly";const x=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const _={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_)}async replaceTrack(m,v){this.assertNotClosed(),this.assertSendDirection(),v?y.debug("replaceTrack() [localId:%s, track.id:%s]",m,v.id):y.debug("replaceTrack() [localId:%s, no track]",m);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");await x.sender.replaceTrack(v)}async setMaxSpatialLayer(m,v){this.assertNotClosed(),this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",m,v);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");const _=x.sender.getParameters();_.encodings.forEach((M,P)=>{P<=v?M.active=!0:M.active=!1}),await x.sender.setParameters(_),this._remoteSdp.muxMediaSectionSimulcast(m,_.encodings);const k=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const D={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async setRtpEncodingParameters(m,v){this.assertNotClosed(),this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",m,v);const x=this._mapMidTransceiver.get(m);if(!x)throw new Error("associated RTCRtpTransceiver not found");const _=x.sender.getParameters();_.encodings.forEach((M,P)=>{_.encodings[P]={...M,...v}}),await x.sender.setParameters(_),this._remoteSdp.muxMediaSectionSimulcast(m,_.encodings);const k=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const D={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async getSenderStats(m){this.assertNotClosed(),this.assertSendDirection();const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.sender.getStats()}async sendDataChannel({ordered:m,maxPacketLifeTime:v,maxRetransmits:x,label:_,protocol:k}){this.assertNotClosed(),this.assertSendDirection();const D={negotiated:!0,id:this._nextSendSctpStreamId,ordered:m,maxPacketLifeTime:v,maxRetransmits:x,protocol:k};y.debug("sendDataChannel() [options:%o]",D);const M=this._pc.createDataChannel(_,D);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%C.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),O=r.parse(L.sdp),V=O.media.find(q=>q.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const H={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H),this._hasDataChannelMediaSection=!0}const P={streamId:D.id,ordered:D.ordered,maxPacketLifeTime:D.maxPacketLifeTime,maxRetransmits:D.maxRetransmits};return{dataChannel:M,sctpStreamParameters:P}}async receive(m){this.assertNotClosed(),this.assertRecvDirection();const v=[],x=new Map;for(const M of m){const{trackId:P,kind:L,rtpParameters:O,streamId:V}=M;y.debug("receive() [trackId:%s, kind:%s]",P,L);const H=O.mid??String(this._mapMidTransceiver.size);x.set(P,H),this._remoteSdp.receive({mid:H,kind:L,offerRtpParameters:O,streamId:V??O.rtcp.cname,trackId:P})}const _={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",_),await this._pc.setRemoteDescription(_);for(const M of m){const{trackId:P,onRtpReceiver:L}=M;if(L){const O=x.get(P),V=this._pc.getTransceivers().find(H=>H.mid===O);if(!V)throw new Error("transceiver not found");L(V.receiver)}}let k=await this._pc.createAnswer();const D=r.parse(k.sdp);for(const M of m){const{trackId:P,rtpParameters:L}=M,O=x.get(P),V=D.media.find(H=>String(H.mid)===O);c.applyCodecParameters({offerRtpParameters:L,answerMediaObject:V})}k={type:"answer",sdp:r.write(D)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",k),await this._pc.setLocalDescription(k);for(const M of m){const{trackId:P}=M,L=x.get(P),O=this._pc.getTransceivers().find(V=>V.mid===L);if(O)this._mapMidTransceiver.set(L,O),v.push({localId:L,track:O.receiver.track,rtpReceiver:O.receiver});else throw new Error("new RTCRtpTransceiver not found")}return v}async stopReceiving(m){if(this.assertRecvDirection(),this._closed)return;for(const _ of m){y.debug("stopReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(k.mid)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const _ of m)this._mapMidTransceiver.delete(_)}async pauseReceiving(m){this.assertNotClosed(),this.assertRecvDirection();for(const _ of m){y.debug("pauseReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");k.direction="inactive",this._remoteSdp.pauseMediaSection(_)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async resumeReceiving(m){this.assertNotClosed(),this.assertRecvDirection();for(const _ of m){y.debug("resumeReceiving() [localId:%s]",_);const k=this._mapMidTransceiver.get(_);if(!k)throw new Error("associated RTCRtpTransceiver not found");k.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(_)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const x=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async getReceiverStats(m){this.assertNotClosed(),this.assertRecvDirection();const v=this._mapMidTransceiver.get(m);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:m,label:v,protocol:x}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:_,ordered:k,maxPacketLifeTime:D,maxRetransmits:M}=m,P={negotiated:!0,id:_,ordered:k,maxPacketLifeTime:D,maxRetransmits:M,protocol:x};y.debug("receiveDataChannel() [options:%o]",P);const L=this._pc.createDataChannel(v,P);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const V=await this._pc.createAnswer();if(!this._transportReady){const H=r.parse(V.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:m,localSdpObject:v}){v||(v=r.parse(this._pc.localDescription.sdp));const x=c.extractDtlsParameters({sdpObject:v});x.role=m,this._remoteSdp.updateDtlsRole(m==="client"?"server":"client"),await new Promise((_,k)=>{this.safeEmit("@connect",{dtlsParameters:x},_,k)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new p.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return fs.ReactNativeUnifiedPlan=T,fs}var ps={},$R;function X9(){if($R)return ps;$R=1;var e=ps&&ps.__createBinding||(Object.create?function(C,T,R,m){m===void 0&&(m=R);var v=Object.getOwnPropertyDescriptor(T,R);(!v||("get"in v?!T.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return T[R]}}),Object.defineProperty(C,m,v)}:function(C,T,R,m){m===void 0&&(m=R),C[m]=T[R]}),t=ps&&ps.__setModuleDefault||(Object.create?function(C,T){Object.defineProperty(C,"default",{enumerable:!0,value:T})}:function(C,T){C.default=T}),n=ps&&ps.__importStar||function(C){if(C&&C.__esModule)return C;var T={};if(C!=null)for(var R in C)R!=="default"&&Object.prototype.hasOwnProperty.call(C,R)&&e(T,C,R);return t(T,C),T};Object.defineProperty(ps,"__esModule",{value:!0}),ps.ReactNative=void 0;const r=n(fr()),s=un(),o=Kn(),a=n(Pn()),c=n(ur()),f=n(_s()),d=n(_m()),p=Ir(),h=Rs(),g=new s.Logger("ReactNative"),S="ReactNative",y={OS:1024,MIS:1024};let b=class HD extends p.HandlerInterface{static createFactory(){return()=>new HD}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return S}close(){if(g.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){g.debug("getNativeRtpCapabilities()");const T=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const R=await T.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{T.close()}catch{}const m=r.parse(R.sdp);return f.extractRtpCapabilities({sdpObject:m})}catch(R){try{T.close()}catch{}throw R}}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),{numStreams:y}}run({direction:T,iceParameters:R,iceCandidates:m,dtlsParameters:v,sctpParameters:x,iceServers:_,iceTransportPolicy:k,additionalSettings:D,proprietaryConstraints:M,extendedRtpCapabilities:P}){g.debug("run()"),this._direction=T,this._remoteSdp=new h.RemoteSdp({iceParameters:R,iceCandidates:m,dtlsParameters:v,sctpParameters:x,planB:!0}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",P),video:c.getSendingRtpParameters("video",P)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",P),video:c.getSendingRemoteRtpParameters("video",P)},v.role&&v.role!=="auto"&&(this._forcedLocalDtlsRole=v.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:_??[],iceTransportPolicy:k??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...D},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(T){g.debug("updateIceServers()");const R=this._pc.getConfiguration();R.iceServers=T,this._pc.setConfiguration(R)}async restartIce(T){if(g.debug("restartIce()"),this._remoteSdp.updateIceParameters(T),!!this._transportReady)if(this._direction==="send"){const R=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const m={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}else{const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const m=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m)}}async getTransportStats(){return this._pc.getStats()}async send({track:T,encodings:R,codecOptions:m,codec:v}){this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",T.kind,T.id),v&&g.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(T),this._pc.addStream(this._sendStream);let x=await this._pc.createOffer(),_=r.parse(x.sdp),k;const D=a.clone(this._sendingRtpParametersByKind[T.kind]);D.codecs=c.reduceCodecs(D.codecs);const M=a.clone(this._sendingRemoteRtpParametersByKind[T.kind]);if(M.codecs=c.reduceCodecs(M.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:_}),T.kind==="video"&&R&&R.length>1&&(g.debug("send() | enabling simulcast"),_=r.parse(x.sdp),k=_.media.find(O=>O.type==="video"),d.addLegacySimulcast({offerMediaObject:k,track:T,numStreams:R.length}),x={type:"offer",sdp:r.write(_)}),g.debug("send() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x),_=r.parse(this._pc.localDescription.sdp),k=_.media.find(O=>O.type===T.kind),D.rtcp.cname=f.getCname({offerMediaObject:k}),D.encodings=d.getRtpEncodings({offerMediaObject:k,track:T}),R)for(let O=0;O<D.encodings.length;++O)R[O]&&Object.assign(D.encodings[O],R[O]);if(D.encodings.length>1&&(D.codecs[0].mimeType.toLowerCase()==="video/vp8"||D.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const O of D.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:k,offerRtpParameters:D,answerRtpParameters:M,codecOptions:m});const P={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P);const L=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(L,T),{localId:L,rtpParameters:D}}async stopSending(T){this.assertSendDirection(),g.debug("stopSending() [localId:%s]",T);const R=this._mapSendLocalIdTrack.get(T);if(!R)throw new Error("track not found");this._mapSendLocalIdTrack.delete(T),this._sendStream.removeTrack(R),this._pc.addStream(this._sendStream);const m=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",m);try{await this._pc.setLocalDescription(m)}catch(x){if(this._sendStream.getTracks().length===0){g.warn("stopSending() | ignoring expected error due no sending tracks: %s",x.toString());return}throw x}if(this._pc.signalingState==="stable")return;const v={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v)}async pauseSending(T){}async resumeSending(T){}async replaceTrack(T,R){throw new o.UnsupportedError("not implemented")}async setMaxSpatialLayer(T,R){throw new o.UnsupportedError("not implemented")}async setRtpEncodingParameters(T,R){throw new o.UnsupportedError("not implemented")}async getSenderStats(T){throw new o.UnsupportedError("not implemented")}async sendDataChannel({ordered:T,maxPacketLifeTime:R,maxRetransmits:m,label:v,protocol:x}){this.assertSendDirection();const _={negotiated:!0,id:this._nextSendSctpStreamId,ordered:T,maxPacketLifeTime:R,maxRetransmitTime:R,maxRetransmits:m,protocol:x};g.debug("sendDataChannel() [options:%o]",_);const k=this._pc.createDataChannel(v,_);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%y.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),P=r.parse(M.sdp),L=P.media.find(V=>V.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const O={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._hasDataChannelMediaSection=!0}const D={streamId:_.id,ordered:_.ordered,maxPacketLifeTime:_.maxPacketLifeTime,maxRetransmits:_.maxRetransmits};return{dataChannel:k,sctpStreamParameters:D}}async receive(T){this.assertRecvDirection();const R=[],m=new Map;for(const k of T){const{trackId:D,kind:M,rtpParameters:P}=k;g.debug("receive() [trackId:%s, kind:%s]",D,M);const L=M;let O=k.streamId??P.rtcp.cname;g.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),O+=`-hack-${a.generateRandomNumber()}`,m.set(D,O),this._remoteSdp.receive({mid:L,kind:M,offerRtpParameters:P,streamId:O,trackId:D})}const v={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);let x=await this._pc.createAnswer();const _=r.parse(x.sdp);for(const k of T){const{kind:D,rtpParameters:M}=k,P=D,L=_.media.find(O=>String(O.mid)===P);f.applyCodecParameters({offerRtpParameters:M,answerMediaObject:L})}x={type:"answer",sdp:r.write(_)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:_}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const k of T){const{kind:D,trackId:M,rtpParameters:P}=k,L=M,O=D,V=m.get(M),q=this._pc.getRemoteStreams().find(N=>N.id===V).getTrackById(L);if(!q)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(L,{mid:O,rtpParameters:P}),R.push({localId:L,track:q})}return R}async stopReceiving(T){this.assertRecvDirection();for(const v of T){g.debug("stopReceiving() [localId:%s]",v);const{mid:x,rtpParameters:_}=this._mapRecvLocalIdInfo.get(v)??{};this._mapRecvLocalIdInfo.delete(v),this._remoteSdp.planBStopReceiving({mid:x,offerRtpParameters:_})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);const m=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m)}async pauseReceiving(T){}async resumeReceiving(T){}async getReceiverStats(T){throw new o.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:T,label:R,protocol:m}){this.assertRecvDirection();const{streamId:v,ordered:x,maxPacketLifeTime:_,maxRetransmits:k}=T,D={negotiated:!0,id:v,ordered:x,maxPacketLifeTime:_,maxRetransmitTime:_,maxRetransmits:k,protocol:m};g.debug("receiveDataChannel() [options:%o]",D);const M=this._pc.createDataChannel(R,D);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const P={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);const L=await this._pc.createAnswer();if(!this._transportReady){const O=r.parse(L.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setLocalDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:T,localSdpObject:R}){R||(R=r.parse(this._pc.localDescription.sdp));const m=f.extractDtlsParameters({sdpObject:R});m.role=T,this._remoteSdp.updateDtlsRole(T==="client"?"server":"client"),await new Promise((v,x)=>{this.safeEmit("@connect",{dtlsParameters:m},v,x)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return ps.ReactNative=b,ps}var FR;function WD(){if(FR)return Ar;FR=1;var e=Ar&&Ar.__createBinding||(Object.create?function(M,P,L,O){O===void 0&&(O=L);var V=Object.getOwnPropertyDescriptor(P,L);(!V||("get"in V?!P.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return P[L]}}),Object.defineProperty(M,O,V)}:function(M,P,L,O){O===void 0&&(O=L),M[O]=P[L]}),t=Ar&&Ar.__setModuleDefault||(Object.create?function(M,P){Object.defineProperty(M,"default",{enumerable:!0,value:P})}:function(M,P){M.default=P}),n=Ar&&Ar.__importStar||function(M){if(M&&M.__esModule)return M;var P={};if(M!=null)for(var L in M)L!=="default"&&Object.prototype.hasOwnProperty.call(M,L)&&e(P,M,L);return t(P,M),P};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.Device=void 0,Ar.detectDevice=k;const r=k9(),s=un(),o=Sa(),a=Kn(),c=n(Pn()),f=n(ur()),d=jD(),p=$9(),h=F9(),g=z9(),S=B9(),y=U9(),b=V9(),C=H9(),T=W9(),R=q9(),m=K9(),v=Y9(),x=X9(),_=new s.Logger("Device");function k(M){var P,L,O,V;if(!M&&typeof navigator=="object"&&navigator.product==="ReactNative"){if(_.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"){_.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(_.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(_.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}else if(M||typeof navigator=="object"&&typeof navigator.userAgent=="string"){M??(M=navigator.userAgent);const H=new r.UAParser(M);_.debug("detectDevice() | browser detected [userAgent:%s, parsed:%o]",M,H.getResult());const q=H.getBrowser(),N=(P=q.name)==null?void 0:P.toLowerCase(),B=parseInt(q.major??"0"),F=(L=H.getEngine().name)==null?void 0:L.toLowerCase(),z=H.getOS(),U=(O=z.name)==null?void 0:O.toLowerCase(),G=parseFloat(z.version??"0"),ne=(V=H.getDevice().model)==null?void 0:V.toLowerCase(),Q=U==="ios"||ne==="ipad",se=N&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(N),X=N&&["firefox","mobile firefox","mobile focus"].includes(N),oe=N&&["safari","mobile safari"].includes(N),K=N&&["edge"].includes(N);if((se||K)&&!Q&&B>=111)return"Chrome111";if(se&&!Q&&B>=74||K&&!Q&&B>=88)return"Chrome74";if(se&&!Q&&B>=70)return"Chrome70";if(se&&!Q&&B>=67)return"Chrome67";if(se&&!Q&&B>=55)return"Chrome55";if(X&&!Q&&B>=120)return"Firefox120";if(X&&!Q&&B>=60)return"Firefox60";if(X&&Q&&G>=14.3)return"Safari12";if(oe&&B>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(oe&&B>=11)return"Safari11";if(K&&!Q&&B>=11&&B<=18)return"Edge11";if(F==="webkit"&&Q&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(F==="blink"){const Z=M.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(Z){const fe=Number(Z[1]);return fe>=111?"Chrome111":fe>=74?"Chrome74":fe>=70?"Chrome70":fe>=67?"Chrome67":"Chrome55"}else return"Chrome111"}else{_.warn("detectDevice() | browser not supported [name:%s, version:%s]",N,B);return}}else{_.warn("detectDevice() | unknown device");return}}let D=class{constructor({handlerName:P,handlerFactory:L}={}){if(this._loaded=!1,this._observer=new o.EnhancedEventEmitter,_.debug("constructor()"),P&&L)throw new TypeError("just one of handlerName or handlerInterface can be given");if(L)this._handlerFactory=L;else{if(P)_.debug("constructor() | handler given: %s",P);else if(P=k(),P)_.debug("constructor() | detected handler: %s",P);else throw new a.UnsupportedError("device not supported");switch(P){case"Chrome111":{this._handlerFactory=p.Chrome111.createFactory();break}case"Chrome74":{this._handlerFactory=h.Chrome74.createFactory();break}case"Chrome70":{this._handlerFactory=g.Chrome70.createFactory();break}case"Chrome67":{this._handlerFactory=S.Chrome67.createFactory();break}case"Chrome55":{this._handlerFactory=y.Chrome55.createFactory();break}case"Firefox120":{this._handlerFactory=b.Firefox120.createFactory();break}case"Firefox60":{this._handlerFactory=C.Firefox60.createFactory();break}case"Safari12":{this._handlerFactory=T.Safari12.createFactory();break}case"Safari11":{this._handlerFactory=R.Safari11.createFactory();break}case"Edge11":{this._handlerFactory=m.Edge11.createFactory();break}case"ReactNativeUnifiedPlan":{this._handlerFactory=v.ReactNativeUnifiedPlan.createFactory();break}case"ReactNative":{this._handlerFactory=x.ReactNative.createFactory();break}default:throw new TypeError(`unknown handlerName "${P}"`)}}const O=this._handlerFactory();this._handlerName=O.name,O.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new a.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new a.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:P}){_.debug("load() [routerRtpCapabilities:%o]",P);let L;try{if(this._loaded)throw new a.InvalidStateError("already loaded");const O=c.clone(P);f.validateRtpCapabilities(O),L=this._handlerFactory();const V=await L.getNativeRtpCapabilities();_.debug("load() | got native RTP capabilities:%o",V);const H=c.clone(V);f.validateRtpCapabilities(H),this._extendedRtpCapabilities=f.getExtendedRtpCapabilities(H,O),_.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=f.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=f.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=f.getRecvRtpCapabilities(this._extendedRtpCapabilities),f.validateRtpCapabilities(this._recvRtpCapabilities),_.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await L.getNativeSctpCapabilities(),_.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),f.validateSctpCapabilities(this._sctpCapabilities),_.debug("load() succeeded"),this._loaded=!0,L.close()}catch(O){throw L&&L.close(),O}}canProduce(P){if(this._loaded){if(P!=="audio"&&P!=="video")throw new TypeError(`invalid kind "${P}"`)}else throw new a.InvalidStateError("not loaded");return this._canProduceByKind[P]}createSendTransport({id:P,iceParameters:L,iceCandidates:O,dtlsParameters:V,sctpParameters:H,iceServers:q,iceTransportPolicy:N,additionalSettings:B,proprietaryConstraints:$,appData:F}){return _.debug("createSendTransport()"),this.createTransport({direction:"send",id:P,iceParameters:L,iceCandidates:O,dtlsParameters:V,sctpParameters:H,iceServers:q,iceTransportPolicy:N,additionalSettings:B,proprietaryConstraints:$,appData:F})}createRecvTransport({id:P,iceParameters:L,iceCandidates:O,dtlsParameters:V,sctpParameters:H,iceServers:q,iceTransportPolicy:N,additionalSettings:B,proprietaryConstraints:$,appData:F}){return _.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:P,iceParameters:L,iceCandidates:O,dtlsParameters:V,sctpParameters:H,iceServers:q,iceTransportPolicy:N,additionalSettings:B,proprietaryConstraints:$,appData:F})}createTransport({direction:P,id:L,iceParameters:O,iceCandidates:V,dtlsParameters:H,sctpParameters:q,iceServers:N,iceTransportPolicy:B,additionalSettings:$,proprietaryConstraints:F,appData:z}){if(this._loaded){if(typeof L!="string")throw new TypeError("missing id");if(typeof O!="object")throw new TypeError("missing iceParameters");if(Array.isArray(V)){if(typeof H!="object")throw new TypeError("missing dtlsParameters");if(q&&typeof q!="object")throw new TypeError("wrong sctpParameters");if(z&&typeof z!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new a.InvalidStateError("not loaded");const U=new d.Transport({direction:P,id:L,iceParameters:O,iceCandidates:V,dtlsParameters:H,sctpParameters:q,iceServers:N,iceTransportPolicy:B,additionalSettings:$,proprietaryConstraints:F,appData:z,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",U),U}};return Ar.Device=D,Ar}var Ai={},jy={},zR;function Q9(){return zR||(zR=1,Object.defineProperty(jy,"__esModule",{value:!0})),jy}var Py={},BR;function J9(){return BR||(BR=1,Object.defineProperty(Py,"__esModule",{value:!0})),Py}var UR;function Z9(){return UR||(UR=1,function(e){var t=Ai&&Ai.__createBinding||(Object.create?function(r,s,o,a){a===void 0&&(a=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(r,a,c)}:function(r,s,o,a){a===void 0&&(a=o),r[a]=s[o]}),n=Ai&&Ai.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&t(s,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(WD(),e),n(jD(),e),n(ED(),e),n(kD(),e),n(ID(),e),n(DD(),e),n(Q9(),e),n(J9(),e),n(Ir(),e),n(Kn(),e)}(Ai)),Ai}var VR;function e7(){return VR||(VR=1,function(e){var t=Zr&&Zr.__createBinding||(Object.create?function(d,p,h,g){g===void 0&&(g=h);var S=Object.getOwnPropertyDescriptor(p,h);(!S||("get"in S?!p.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return p[h]}}),Object.defineProperty(d,g,S)}:function(d,p,h,g){g===void 0&&(g=h),d[g]=p[h]}),n=Zr&&Zr.__setModuleDefault||(Object.create?function(d,p){Object.defineProperty(d,"default",{enumerable:!0,value:p})}:function(d,p){d.default=p}),r=Zr&&Zr.__importStar||function(d){if(d&&d.__esModule)return d;var p={};if(d!=null)for(var h in d)h!=="default"&&Object.prototype.hasOwnProperty.call(d,h)&&t(p,d,h);return n(p,d),p},s=Zr&&Zr.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.debug=e.parseScalabilityMode=e.detectDevice=e.Device=e.version=e.types=void 0;const o=s(xm());e.debug=o.default;const a=WD();Object.defineProperty(e,"Device",{enumerable:!0,get:function(){return a.Device}}),Object.defineProperty(e,"detectDevice",{enumerable:!0,get:function(){return a.detectDevice}});const c=r(Z9());e.types=c,e.version="3.7.17";var f=mi();Object.defineProperty(e,"parseScalabilityMode",{enumerable:!0,get:function(){return f.parse}})}(Zr)),Zr}var t7=e7();let Yl=null;const n7=()=>{Yl=null},qD=()=>({volume:80,gainDb:0,noiseSuppression:!0,echoCancellation:!0,autoGainControl:!1}),GD=e=>{const t=Math.max(0,Math.min(100,e.volume)),n=Math.max(-10,Math.min(20,e.gainDb)),r=Math.pow(10,n/20);return t/100*r},r7=async e=>{const t=e??qD(),n=await navigator.mediaDevices.getUserMedia({audio:{noiseSuppression:t.noiseSuppression,echoCancellation:t.echoCancellation,autoGainControl:t.autoGainControl}}),r=n.getAudioTracks()[0],s=new AudioContext,o=s.createMediaStreamSource(n),a=s.createGain(),c=s.createMediaStreamDestination();return a.gain.value=GD(t),o.connect(a).connect(c),s.state==="suspended"&&await s.resume(),{rawTrack:r,processedTrack:c.stream.getAudioTracks()[0],audioContext:s,gainNode:a}},s7=async(e,t,n,r,s)=>new Promise((o,a)=>{ot.emit("joinRoom",{roomName:e,userName:t,userId:n,serverId:r,accessToken:s},c=>{c.error?a(c.error):o(c)})}),o7=async e=>{const t=new t7.Device;return await t.load({routerRtpCapabilities:e}),t},i7=async(e,t,n,r,s,o)=>new Promise((a,c)=>{ot.emit("createWebRtcTransport",{consumer:!1},async({params:f})=>{if(f.error){c(f.error);return}const d=e.createSendTransport(f);d.on("connect",({dtlsParameters:h},g)=>{ot.emit("transport-connect",{dtlsParameters:h}),g()}),d.on("produce",(h,g)=>{const S=localStorage.getItem("accessToken");ot.emit("transport-produce",{kind:h.kind,rtpParameters:h.rtpParameters,appData:h.appData,accessToken:S},({id:y})=>{g({id:y}),a7(ot,e,r,s,o)})});const p=await d.produce({track:t});n(p),a(d),p.on("trackended",()=>{n(null)})})}),a7=(e,t,n,r,s)=>{e.emit("getProducers",o=>{o.forEach(a=>KD(a,t,n,r,s))})},KD=async(e,t,n,r,s)=>{if(!t)return;const o=await c7(t,r,s);l7(o,e,o.id,t,n)},c7=async(e,t,n)=>{if(t&&!t.closed)return t;if(Yl){const r=await Yl;if(!r.closed)return r}return Yl=new Promise((r,s)=>{ot.emit("createWebRtcTransport",{consumer:!0},async({params:o})=>{if(o.error){s(o.error);return}const a=e.createRecvTransport(o);a.on("connect",({dtlsParameters:c},f)=>{ot.emit("transport-recv-connect",{dtlsParameters:c,serverConsumerTransportId:o.id}),f()}),n(a),r(a)})}),Yl},l7=async(e,t,n,r,s)=>{ot.emit("consume",{rtpCapabilities:r.rtpCapabilities,remoteProducerId:t,serverConsumerTransportId:n},async({params:o})=>{const{source:a,...c}=o,f=await e.consume({...c,appData:{source:a}});s(f),ot.emit("consumer-resume",{serverConsumerId:o.serverConsumerId})})},Ae=xN,re=RN,d7="modulepreload",u7=function(e){return"/hitscord-frontend/"+e},HR={},f7=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let a=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=a(n.map(d=>{if(d=u7(d),d in HR)return;HR[d]=!0;const p=d.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":d7,p||(g.as="script"),g.crossOrigin="",g.href=d,f&&g.setAttribute("nonce",f),document.head.appendChild(g),p)return new Promise((S,y)=>{g.addEventListener("load",S),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})};function fh(){return fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fh.apply(null,arguments)}function p7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function h7(e){I.useEffect(e,[])}var m7=["id","volume","playbackRate","soundEnabled","interrupt","onload"];function $S(e,t){var n=t===void 0?{}:t,r=n.volume,s=r===void 0?1:r,o=n.playbackRate,a=o===void 0?1:o,c=n.soundEnabled,f=c===void 0?!0:c,d=n.interrupt,p=d===void 0?!1:d,h=n.onload,g=p7(n,m7),S=wt.useRef(null),y=wt.useRef(!1),b=wt.useState(null),C=b[0],T=b[1],R=wt.useState(null),m=R[0],v=R[1],x=function(){typeof h=="function"&&h.call(this),y.current&&T(this.duration()*1e3),v(this)};h7(function(){return f7(()=>import("./howler-hwkpdJ52.js").then(P=>P.h),[]).then(function(P){if(!y.current){var L;S.current=(L=P.Howl)!==null&&L!==void 0?L:P.default.Howl,y.current=!0,new S.current(fh({src:Array.isArray(e)?e:[e],volume:s,rate:a,onload:x},g))}}),function(){y.current=!1}}),wt.useEffect(function(){S.current&&m&&v(new S.current(fh({src:Array.isArray(e)?e:[e],volume:s,onload:x},g)))},[JSON.stringify(e)]),wt.useEffect(function(){m&&(m.volume(s),g.sprite||m.rate(a))},[m,s,a]);var _=wt.useCallback(function(P){typeof P>"u"&&(P={}),!(!m||!f&&!P.forceSoundEnabled)&&(p&&m.stop(),P.playbackRate&&m.rate(P.playbackRate),m.play(P.id))},[m,f,p]),k=wt.useCallback(function(P){m&&m.stop(P)},[m]),D=wt.useCallback(function(P){m&&m.pause(P)},[m]),M=[_,{sound:m,stop:k,pause:D,duration:C}];return M}const FS=()=>{const e=re(y=>y.testServerStore.messages),t=re(y=>y.testServerStore.messageIsLoading),n=re(y=>y.testServerStore.remainingTopMessagesCount),r=re(y=>y.testServerStore.lastTopMessageId),s=re(y=>y.testServerStore.remainingBottomMessagesCount),o=re(y=>y.testServerStore.lastBottomMessageId),a=re(y=>y.testServerStore.startMessageId),c=re(y=>y.testServerStore.allMessagesCount),f=re(y=>y.testServerStore.serverData.channels.textChannels),d=re(y=>y.testServerStore.serverData.channels.notificationChannels),p=re(y=>y.testServerStore.currentChannelId),h=re(y=>y.testServerStore.currentNotificationChannelId);return{messages:e,messagesStatus:t,remainingTopMessagesCount:n,lastTopMessageId:r,remainingBottomMessagesCount:s,lastBottomMessageId:o,startMessageId:a,allMessagesCount:c,entityId:p??h,lastReadedMessageId:(()=>{if(p){const y=f.find(b=>b.channelId===p);return(y==null?void 0:y.lastReadedMessageId)||0}if(h){const y=d.find(b=>b.channelId===h);return(y==null?void 0:y.lastReadedMessageId)||0}return 0})()}},zS=()=>{const e=re(p=>p.chatsStore.messages),t=re(p=>p.chatsStore.messagesStatus),n=re(p=>p.chatsStore.remainingTopMessagesCount),r=re(p=>p.chatsStore.lastTopMessageId),s=re(p=>p.chatsStore.remainingBottomMessagesCount),o=re(p=>p.chatsStore.lastBottomMessageId),a=re(p=>p.chatsStore.startMessageId),c=re(p=>p.chatsStore.allMessagesCount),f=re(p=>p.chatsStore.activeChat),d=re(p=>p.chatsStore.chat.lastReadedMessageId);return{messages:e,messagesStatus:t,remainingTopMessagesCount:n,lastTopMessageId:r,remainingBottomMessagesCount:s,lastBottomMessageId:o,startMessageId:a,allMessagesCount:c,entityId:f,lastReadedMessageId:d}};function kn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var g7=typeof Symbol=="function"&&Symbol.observable||"@@observable",WR=g7,My=()=>Math.random().toString(36).substring(7).split("").join("."),v7={INIT:`@@redux/INIT${My()}`,REPLACE:`@@redux/REPLACE${My()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${My()}`},ph=v7;function BS(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function YD(e,t,n){if(typeof e!="function")throw new Error(kn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(kn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(kn(1));return n(YD)(e,t)}let r=e,s=t,o=new Map,a=o,c=0,f=!1;function d(){a===o&&(a=new Map,o.forEach((C,T)=>{a.set(T,C)}))}function p(){if(f)throw new Error(kn(3));return s}function h(C){if(typeof C!="function")throw new Error(kn(4));if(f)throw new Error(kn(5));let T=!0;d();const R=c++;return a.set(R,C),function(){if(T){if(f)throw new Error(kn(6));T=!1,d(),a.delete(R),o=null}}}function g(C){if(!BS(C))throw new Error(kn(7));if(typeof C.type>"u")throw new Error(kn(8));if(typeof C.type!="string")throw new Error(kn(17));if(f)throw new Error(kn(9));try{f=!0,s=r(s,C)}finally{f=!1}return(o=a).forEach(R=>{R()}),C}function S(C){if(typeof C!="function")throw new Error(kn(10));r=C,g({type:ph.REPLACE})}function y(){const C=h;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(kn(11));function R(){const v=T;v.next&&v.next(p())}return R(),{unsubscribe:C(R)}},[WR](){return this}}}return g({type:ph.INIT}),{dispatch:g,subscribe:h,getState:p,replaceReducer:S,[WR]:y}}function y7(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:ph.INIT})>"u")throw new Error(kn(12));if(typeof n(void 0,{type:ph.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(kn(13))})}function w7(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const a=t[o];typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let s;try{y7(n)}catch(o){s=o}return function(a={},c){if(s)throw s;let f=!1;const d={};for(let p=0;p<r.length;p++){const h=r[p],g=n[h],S=a[h],y=g(S,c);if(typeof y>"u")throw c&&c.type,new Error(kn(14));d[h]=y,f=f||y!==S}return f=f||r.length!==Object.keys(a).length,f?d:a}}function hh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function S7(...e){return t=>(n,r)=>{const s=t(n,r);let o=()=>{throw new Error(kn(15))};const a={getState:s.getState,dispatch:(f,...d)=>o(f,...d)},c=e.map(f=>f(a));return o=hh(...c)(s.dispatch),{...s,dispatch:o}}}function b7(e){return BS(e)&&"type"in e&&typeof e.type=="string"}var XD=Symbol.for("immer-nothing"),qR=Symbol.for("immer-draftable"),Tr=Symbol.for("immer-state");function gs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var yc=Object.getPrototypeOf;function ca(e){return!!e&&!!e[Tr]}function vo(e){var t;return e?QD(e)||Array.isArray(e)||!!e[qR]||!!((t=e.constructor)!=null&&t[qR])||Tm(e)||Em(e):!1}var x7=Object.prototype.constructor.toString();function QD(e){if(!e||typeof e!="object")return!1;const t=yc(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===x7}function mh(e,t){Rm(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Rm(e){const t=e[Tr];return t?t.type_:Array.isArray(e)?1:Tm(e)?2:Em(e)?3:0}function Dw(e,t){return Rm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function JD(e,t,n){const r=Rm(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function C7(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Tm(e){return e instanceof Map}function Em(e){return e instanceof Set}function Ui(e){return e.copy_||e.base_}function jw(e,t){if(Tm(e))return new Map(e);if(Em(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=QD(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Tr];let s=Reflect.ownKeys(r);for(let o=0;o<s.length;o++){const a=s[o],c=r[a];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[a]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[a]})}return Object.create(yc(e),r)}else{const r=yc(e);if(r!==null&&n)return{...e};const s=Object.create(r);return Object.assign(s,e)}}function US(e,t=!1){return km(e)||ca(e)||!vo(e)||(Rm(e)>1&&(e.set=e.add=e.clear=e.delete=_7),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>US(r,!0))),e}function _7(){gs(2)}function km(e){return Object.isFrozen(e)}var R7={};function la(e){const t=R7[e];return t||gs(0,e),t}var bd;function ZD(){return bd}function T7(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function GR(e,t){t&&(la("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Pw(e){Mw(e),e.drafts_.forEach(E7),e.drafts_=null}function Mw(e){e===bd&&(bd=e.parent_)}function KR(e){return bd=T7(bd,e)}function E7(e){const t=e[Tr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function YR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Tr].modified_&&(Pw(t),gs(4)),vo(e)&&(e=gh(t,e),t.parent_||vh(t,e)),t.patches_&&la("Patches").generateReplacementPatches_(n[Tr].base_,e,t.patches_,t.inversePatches_)):e=gh(t,n,[]),Pw(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==XD?e:void 0}function gh(e,t,n){if(km(t))return t;const r=t[Tr];if(!r)return mh(t,(s,o)=>XR(e,r,t,s,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return vh(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let o=s,a=!1;r.type_===3&&(o=new Set(s),s.clear(),a=!0),mh(o,(c,f)=>XR(e,r,s,c,f,n,a)),vh(e,s,!1),n&&e.patches_&&la("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function XR(e,t,n,r,s,o,a){if(ca(s)){const c=o&&t&&t.type_!==3&&!Dw(t.assigned_,r)?o.concat(r):void 0,f=gh(e,s,c);if(JD(n,r,f),ca(f))e.canAutoFreeze_=!1;else return}else a&&n.add(s);if(vo(s)&&!km(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;gh(e,s),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&vh(e,s)}}function vh(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&US(t,n)}function k7(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:ZD(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,o=VS;n&&(s=[r],o=xd);const{revoke:a,proxy:c}=Proxy.revocable(s,o);return r.draft_=c,r.revoke_=a,c}var VS={get(e,t){if(t===Tr)return e;const n=Ui(e);if(!Dw(n,t))return I7(e,n,t);const r=n[t];return e.finalized_||!vo(r)?r:r===Ny(e.base_,t)?(Ly(e),e.copy_[t]=Lw(r,e)):r},has(e,t){return t in Ui(e)},ownKeys(e){return Reflect.ownKeys(Ui(e))},set(e,t,n){const r=ej(Ui(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=Ny(Ui(e),t),o=s==null?void 0:s[Tr];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(C7(n,s)&&(n!==void 0||Dw(e.base_,t)))return!0;Ly(e),Nw(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ny(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ly(e),Nw(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ui(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){gs(11)},getPrototypeOf(e){return yc(e.base_)},setPrototypeOf(){gs(12)}},xd={};mh(VS,(e,t)=>{xd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});xd.deleteProperty=function(e,t){return xd.set.call(this,e,t,void 0)};xd.set=function(e,t,n){return VS.set.call(this,e[0],t,n,e[0])};function Ny(e,t){const n=e[Tr];return(n?Ui(n):e)[t]}function I7(e,t,n){var s;const r=ej(t,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(e.draft_):void 0}function ej(e,t){if(!(t in e))return;let n=yc(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=yc(n)}}function Nw(e){e.modified_||(e.modified_=!0,e.parent_&&Nw(e.parent_))}function Ly(e){e.copy_||(e.copy_=jw(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var D7=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const a=this;return function(f=o,...d){return a.produce(f,p=>n.call(this,p,...d))}}typeof n!="function"&&gs(6),r!==void 0&&typeof r!="function"&&gs(7);let s;if(vo(t)){const o=KR(this),a=Lw(t,void 0);let c=!0;try{s=n(a),c=!1}finally{c?Pw(o):Mw(o)}return GR(o,r),YR(s,o)}else if(!t||typeof t!="object"){if(s=n(t),s===void 0&&(s=t),s===XD&&(s=void 0),this.autoFreeze_&&US(s,!0),r){const o=[],a=[];la("Patches").generateReplacementPatches_(t,s,o,a),r(o,a)}return s}else gs(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(a,...c)=>this.produceWithPatches(a,f=>t(f,...c));let r,s;return[this.produce(t,n,(a,c)=>{r=a,s=c}),r,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){vo(e)||gs(8),ca(e)&&(e=j7(e));const t=KR(this),n=Lw(e,void 0);return n[Tr].isManual_=!0,Mw(t),n}finishDraft(e,t){const n=e&&e[Tr];(!n||!n.isManual_)&&gs(9);const{scope_:r}=n;return GR(r,t),YR(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=la("Patches").applyPatches_;return ca(e)?r(e,t):this.produce(e,s=>r(s,t))}};function Lw(e,t){const n=Tm(e)?la("MapSet").proxyMap_(e,t):Em(e)?la("MapSet").proxySet_(e,t):k7(e,t);return(t?t.scope_:ZD()).drafts_.push(n),n}function j7(e){return ca(e)||gs(10,e),tj(e)}function tj(e){if(!vo(e)||km(e))return e;const t=e[Tr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=jw(e,t.scope_.immer_.useStrictShallowCopy_)}else n=jw(e,!0);return mh(n,(r,s)=>{JD(n,r,tj(s))}),t&&(t.finalized_=!1),n}var Er=new D7,nj=Er.produce;Er.produceWithPatches.bind(Er);Er.setAutoFreeze.bind(Er);Er.setUseStrictShallowCopy.bind(Er);Er.applyPatches.bind(Er);Er.createDraft.bind(Er);Er.finishDraft.bind(Er);function rj(e){return({dispatch:n,getState:r})=>s=>o=>typeof o=="function"?o(n,r,e):s(o)}var P7=rj(),M7=rj,N7=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?hh:hh.apply(null,arguments)},L7=e=>e&&typeof e.match=="function";function nd(e,t){function n(...r){if(t){let s=t(...r);if(!s)throw new Error(uo(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>b7(r)&&r.type===e,n}var sj=class Xl extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Xl.prototype)}static get[Symbol.species](){return Xl}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Xl(...t[0].concat(this)):new Xl(...t.concat(this))}};function QR(e){return vo(e)?nj(e,()=>{}):e}function JR(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function O7(e){return typeof e=="boolean"}var A7=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:o=!0}=t??{};let a=new sj;return n&&(O7(n)?a.push(P7):a.push(M7(n.extraArgument))),a},$7="RTK_autoBatch",ZR=e=>t=>{setTimeout(t,e)},F7=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let s=!0,o=!1,a=!1;const c=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ZR(10):e.type==="callback"?e.queueNotification:ZR(e.timeout),d=()=>{a=!1,o&&(o=!1,c.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const h=()=>s&&p(),g=r.subscribe(h);return c.add(p),()=>{g(),c.delete(p)}},dispatch(p){var h;try{return s=!((h=p==null?void 0:p.meta)!=null&&h[$7]),o=!s,o&&(a||(a=!0,f(d))),r.dispatch(p)}finally{s=!0}}})},z7=e=>function(n){const{autoBatch:r=!0}=n??{};let s=new sj(e);return r&&s.push(F7(typeof r=="object"?r:void 0)),s};function B7(e){const t=A7(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:o=void 0,enhancers:a=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(BS(n))c=w7(n);else throw new Error(uo(1));let f;typeof r=="function"?f=r(t):f=t();let d=hh;s&&(d=N7({trace:!1,...typeof s=="object"&&s}));const p=S7(...f),h=z7(p);let g=typeof a=="function"?a(h):h();const S=d(...g);return YD(c,o,S)}function oj(e){const t={},n=[];let r;const s={addCase(o,a){const c=typeof o=="string"?o:o.type;if(!c)throw new Error(uo(28));if(c in t)throw new Error(uo(29));return t[c]=a,s},addMatcher(o,a){return n.push({matcher:o,reducer:a}),s},addDefaultCase(o){return r=o,s}};return e(s),[t,n,r]}function U7(e){return typeof e=="function"}function V7(e,t){let[n,r,s]=oj(t),o;if(U7(e))o=()=>QR(e());else{const c=QR(e);o=()=>c}function a(c=o(),f){let d=[n[f.type],...r.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return d.filter(p=>!!p).length===0&&(d=[s]),d.reduce((p,h)=>{if(h)if(ca(p)){const S=h(p,f);return S===void 0?p:S}else{if(vo(p))return nj(p,g=>h(g,f));{const g=h(p,f);if(g===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return p},c)}return a.getInitialState=o,a}var H7=(e,t)=>L7(e)?e.match(t):e(t);function bn(...e){return t=>e.some(n=>H7(n,t))}var W7="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",q7=(e=21)=>{let t="",n=e;for(;n--;)t+=W7[Math.random()*64|0];return t},G7=["name","message","stack","code"],Oy=class{constructor(e,t){zv(this,"_type");this.payload=e,this.meta=t}},eT=class{constructor(e,t){zv(this,"_type");this.payload=e,this.meta=t}},K7=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of G7)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},tT="External signal was aborted",Pe=(()=>{function e(t,n,r){const s=nd(t+"/fulfilled",(f,d,p,h)=>({payload:f,meta:{...h||{},arg:p,requestId:d,requestStatus:"fulfilled"}})),o=nd(t+"/pending",(f,d,p)=>({payload:void 0,meta:{...p||{},arg:d,requestId:f,requestStatus:"pending"}})),a=nd(t+"/rejected",(f,d,p,h,g)=>({payload:h,error:(r&&r.serializeError||K7)(f||"Rejected"),meta:{...g||{},arg:p,requestId:d,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(f==null?void 0:f.name)==="AbortError",condition:(f==null?void 0:f.name)==="ConditionError"}}));function c(f,{signal:d}={}){return(p,h,g)=>{const S=r!=null&&r.idGenerator?r.idGenerator(f):q7(),y=new AbortController;let b,C;function T(m){C=m,y.abort()}d&&(d.aborted?T(tT):d.addEventListener("abort",()=>T(tT),{once:!0}));const R=async function(){var x,_;let m;try{let k=(x=r==null?void 0:r.condition)==null?void 0:x.call(r,f,{getState:h,extra:g});if(X7(k)&&(k=await k),k===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const D=new Promise((M,P)=>{b=()=>{P({name:"AbortError",message:C||"Aborted"})},y.signal.addEventListener("abort",b)});p(o(S,f,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:S,arg:f},{getState:h,extra:g}))),m=await Promise.race([D,Promise.resolve(n(f,{dispatch:p,getState:h,extra:g,requestId:S,signal:y.signal,abort:T,rejectWithValue:(M,P)=>new Oy(M,P),fulfillWithValue:(M,P)=>new eT(M,P)})).then(M=>{if(M instanceof Oy)throw M;return M instanceof eT?s(M.payload,S,f,M.meta):s(M,S,f)})])}catch(k){m=k instanceof Oy?a(null,S,f,k.payload,k.meta):a(k,S,f)}finally{b&&y.signal.removeEventListener("abort",b)}return r&&!r.dispatchConditionRejection&&a.match(m)&&m.meta.condition||p(m),m}();return Object.assign(R,{abort:T,requestId:S,arg:f,unwrap(){return R.then(Y7)}})}}return Object.assign(c,{pending:o,rejected:a,fulfilled:s,settled:bn(a,s),typePrefix:t})}return e.withTypes=()=>e,e})();function Y7(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function X7(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Q7=Symbol.for("rtk-slice-createasyncthunk");function J7(e,t){return`${e}/${t}`}function Z7({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Q7];return function(s){const{name:o,reducerPath:a=o}=s;if(!o)throw new Error(uo(11));const c=(typeof s.reducers=="function"?s.reducers(tB()):s.reducers)||{},f=Object.keys(c),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(m,v){const x=typeof m=="string"?m:m.type;if(!x)throw new Error(uo(12));if(x in d.sliceCaseReducersByType)throw new Error(uo(13));return d.sliceCaseReducersByType[x]=v,p},addMatcher(m,v){return d.sliceMatchers.push({matcher:m,reducer:v}),p},exposeAction(m,v){return d.actionCreators[m]=v,p},exposeCaseReducer(m,v){return d.sliceCaseReducersByName[m]=v,p}};f.forEach(m=>{const v=c[m],x={reducerName:m,type:J7(o,m),createNotation:typeof s.reducers=="function"};rB(v)?oB(x,v,p,t):nB(x,v,p)});function h(){const[m={},v=[],x=void 0]=typeof s.extraReducers=="function"?oj(s.extraReducers):[s.extraReducers],_={...m,...d.sliceCaseReducersByType};return V7(s.initialState,k=>{for(let D in _)k.addCase(D,_[D]);for(let D of d.sliceMatchers)k.addMatcher(D.matcher,D.reducer);for(let D of v)k.addMatcher(D.matcher,D.reducer);x&&k.addDefaultCase(x)})}const g=m=>m,S=new Map;let y;function b(m,v){return y||(y=h()),y(m,v)}function C(){return y||(y=h()),y.getInitialState()}function T(m,v=!1){function x(k){let D=k[m];return typeof D>"u"&&v&&(D=C()),D}function _(k=g){const D=JR(S,v,()=>new WeakMap);return JR(D,k,()=>{const M={};for(const[P,L]of Object.entries(s.selectors??{}))M[P]=eB(L,k,C,v);return M})}return{reducerPath:m,getSelectors:_,get selectors(){return _(x)},selectSlice:x}}const R={name:o,reducer:b,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:C,...T(a),injectInto(m,{reducerPath:v,...x}={}){const _=v??a;return m.inject({reducerPath:_,reducer:b},x),{...R,...T(_,!0)}}};return R}}function eB(e,t,n,r){function s(o,...a){let c=t(o);return typeof c>"u"&&r&&(c=n()),e(c,...a)}return s.unwrapped=e,s}var qs=Z7();function tB(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function nB({type:e,reducerName:t,createNotation:n},r,s){let o,a;if("reducer"in r){if(n&&!sB(r))throw new Error(uo(17));o=r.reducer,a=r.prepare}else o=r;s.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,a?nd(e,a):nd(e))}function rB(e){return e._reducerDefinitionType==="asyncThunk"}function sB(e){return e._reducerDefinitionType==="reducerWithPrepare"}function oB({type:e,reducerName:t},n,r,s){if(!s)throw new Error(uo(18));const{payloadCreator:o,fulfilled:a,pending:c,rejected:f,settled:d,options:p}=n,h=s(e,o,p);r.exposeAction(t,h),a&&r.addCase(h.fulfilled,a),c&&r.addCase(h.pending,c),f&&r.addCase(h.rejected,f),d&&r.addMatcher(h.settled,d),r.exposeCaseReducer(t,{fulfilled:a||Sf,pending:c||Sf,rejected:f||Sf,settled:d||Sf})}function Sf(){}function uo(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function ij(e,t){return function(){return e.apply(t,arguments)}}const{toString:iB}=Object.prototype,{getPrototypeOf:HS}=Object,{iterator:Im,toStringTag:aj}=Symbol,Dm=(e=>t=>{const n=iB.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ts=e=>(e=e.toLowerCase(),t=>Dm(t)===e),jm=e=>t=>typeof t===e,{isArray:Lc}=Array,wc=jm("undefined");function Ad(e){return e!==null&&!wc(e)&&e.constructor!==null&&!wc(e.constructor)&&or(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const cj=Ts("ArrayBuffer");function aB(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&cj(e.buffer),t}const cB=jm("string"),or=jm("function"),lj=jm("number"),$d=e=>e!==null&&typeof e=="object",lB=e=>e===!0||e===!1,zf=e=>{if(Dm(e)!=="object")return!1;const t=HS(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(aj in e)&&!(Im in e)},dB=e=>{if(!$d(e)||Ad(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},uB=Ts("Date"),fB=Ts("File"),pB=Ts("Blob"),hB=Ts("FileList"),mB=e=>$d(e)&&or(e.pipe),gB=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||or(e.append)&&((t=Dm(e))==="formdata"||t==="object"&&or(e.toString)&&e.toString()==="[object FormData]"))},vB=Ts("URLSearchParams"),[yB,wB,SB,bB]=["ReadableStream","Request","Response","Headers"].map(Ts),xB=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fd(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Lc(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(Ad(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let c;for(r=0;r<a;r++)c=o[r],t.call(null,e[c],c,e)}}function dj(e,t){if(Ad(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const Ki=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,uj=e=>!wc(e)&&e!==Ki;function Ow(){const{caseless:e,skipUndefined:t}=uj(this)&&this||{},n={},r=(s,o)=>{const a=e&&dj(n,o)||o;zf(n[a])&&zf(s)?n[a]=Ow(n[a],s):zf(s)?n[a]=Ow({},s):Lc(s)?n[a]=s.slice():(!t||!wc(s))&&(n[a]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&Fd(arguments[s],r);return n}const CB=(e,t,n,{allOwnKeys:r}={})=>(Fd(t,(s,o)=>{n&&or(s)?e[o]=ij(s,n):e[o]=s},{allOwnKeys:r}),e),_B=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),RB=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},TB=(e,t,n,r)=>{let s,o,a;const c={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)a=s[o],(!r||r(a,e,t))&&!c[a]&&(t[a]=e[a],c[a]=!0);e=n!==!1&&HS(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},EB=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},kB=e=>{if(!e)return null;if(Lc(e))return e;let t=e.length;if(!lj(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},IB=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&HS(Uint8Array)),DB=(e,t)=>{const r=(e&&e[Im]).call(e);let s;for(;(s=r.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},jB=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},PB=Ts("HTMLFormElement"),MB=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),nT=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),NB=Ts("RegExp"),fj=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Fd(n,(s,o)=>{let a;(a=t(s,o,e))!==!1&&(r[o]=a||s)}),Object.defineProperties(e,r)},LB=e=>{fj(e,(t,n)=>{if(or(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(or(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},OB=(e,t)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return Lc(e)?r(e):r(String(e).split(t)),n},AB=()=>{},$B=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function FB(e){return!!(e&&or(e.append)&&e[aj]==="FormData"&&e[Im])}const zB=e=>{const t=new Array(10),n=(r,s)=>{if($d(r)){if(t.indexOf(r)>=0)return;if(Ad(r))return r;if(!("toJSON"in r)){t[s]=r;const o=Lc(r)?[]:{};return Fd(r,(a,c)=>{const f=n(a,s+1);!wc(f)&&(o[c]=f)}),t[s]=void 0,o}}return r};return n(e,0)},BB=Ts("AsyncFunction"),UB=e=>e&&($d(e)||or(e))&&or(e.then)&&or(e.catch),pj=((e,t)=>e?setImmediate:t?((n,r)=>(Ki.addEventListener("message",({source:s,data:o})=>{s===Ki&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Ki.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",or(Ki.postMessage)),VB=typeof queueMicrotask<"u"?queueMicrotask.bind(Ki):typeof process<"u"&&process.nextTick||pj,HB=e=>e!=null&&or(e[Im]),ue={isArray:Lc,isArrayBuffer:cj,isBuffer:Ad,isFormData:gB,isArrayBufferView:aB,isString:cB,isNumber:lj,isBoolean:lB,isObject:$d,isPlainObject:zf,isEmptyObject:dB,isReadableStream:yB,isRequest:wB,isResponse:SB,isHeaders:bB,isUndefined:wc,isDate:uB,isFile:fB,isBlob:pB,isRegExp:NB,isFunction:or,isStream:mB,isURLSearchParams:vB,isTypedArray:IB,isFileList:hB,forEach:Fd,merge:Ow,extend:CB,trim:xB,stripBOM:_B,inherits:RB,toFlatObject:TB,kindOf:Dm,kindOfTest:Ts,endsWith:EB,toArray:kB,forEachEntry:DB,matchAll:jB,isHTMLForm:PB,hasOwnProperty:nT,hasOwnProp:nT,reduceDescriptors:fj,freezeMethods:LB,toObjectSet:OB,toCamelCase:MB,noop:AB,toFiniteNumber:$B,findKey:dj,global:Ki,isContextDefined:uj,isSpecCompliantForm:FB,toJSONObject:zB,isAsyncFn:BB,isThenable:UB,setImmediate:pj,asap:VB,isIterable:HB};function ft(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}ue.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.status}}});const hj=ft.prototype,mj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{mj[e]={value:e}});Object.defineProperties(ft,mj);Object.defineProperty(hj,"isAxiosError",{value:!0});ft.from=(e,t,n,r,s,o)=>{const a=Object.create(hj);ue.toFlatObject(e,a,function(p){return p!==Error.prototype},d=>d!=="isAxiosError");const c=e&&e.message?e.message:"Error",f=t==null&&e?e.code:t;return ft.call(a,c,f,n,r,s),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",o&&Object.assign(a,o),a};const WB=null;function Aw(e){return ue.isPlainObject(e)||ue.isArray(e)}function gj(e){return ue.endsWith(e,"[]")?e.slice(0,-2):e}function rT(e,t,n){return e?e.concat(t).map(function(s,o){return s=gj(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function qB(e){return ue.isArray(e)&&!e.some(Aw)}const GB=ue.toFlatObject(ue,{},null,function(t){return/^is[A-Z]/.test(t)});function Pm(e,t,n){if(!ue.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ue.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,C){return!ue.isUndefined(C[b])});const r=n.metaTokens,s=n.visitor||p,o=n.dots,a=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(t);if(!ue.isFunction(s))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(ue.isDate(y))return y.toISOString();if(ue.isBoolean(y))return y.toString();if(!f&&ue.isBlob(y))throw new ft("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(y)||ue.isTypedArray(y)?f&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function p(y,b,C){let T=y;if(y&&!C&&typeof y=="object"){if(ue.endsWith(b,"{}"))b=r?b:b.slice(0,-2),y=JSON.stringify(y);else if(ue.isArray(y)&&qB(y)||(ue.isFileList(y)||ue.endsWith(b,"[]"))&&(T=ue.toArray(y)))return b=gj(b),T.forEach(function(m,v){!(ue.isUndefined(m)||m===null)&&t.append(a===!0?rT([b],v,o):a===null?b:b+"[]",d(m))}),!1}return Aw(y)?!0:(t.append(rT(C,b,o),d(y)),!1)}const h=[],g=Object.assign(GB,{defaultVisitor:p,convertValue:d,isVisitable:Aw});function S(y,b){if(!ue.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+b.join("."));h.push(y),ue.forEach(y,function(T,R){(!(ue.isUndefined(T)||T===null)&&s.call(t,T,ue.isString(R)?R.trim():R,b,g))===!0&&S(T,b?b.concat(R):[R])}),h.pop()}}if(!ue.isObject(e))throw new TypeError("data must be an object");return S(e),t}function sT(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function WS(e,t){this._pairs=[],e&&Pm(e,this,t)}const vj=WS.prototype;vj.append=function(t,n){this._pairs.push([t,n])};vj.toString=function(t){const n=t?function(r){return t.call(this,r,sT)}:sT;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function KB(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function yj(e,t,n){if(!t)return e;const r=n&&n.encode||KB;ue.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(t,n):o=ue.isURLSearchParams(t)?t.toString():new WS(t,n).toString(r),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class oT{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ue.forEach(this.handlers,function(r){r!==null&&t(r)})}}const wj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},YB=typeof URLSearchParams<"u"?URLSearchParams:WS,XB=typeof FormData<"u"?FormData:null,QB=typeof Blob<"u"?Blob:null,JB={isBrowser:!0,classes:{URLSearchParams:YB,FormData:XB,Blob:QB},protocols:["http","https","file","blob","url","data"]},qS=typeof window<"u"&&typeof document<"u",$w=typeof navigator=="object"&&navigator||void 0,ZB=qS&&(!$w||["ReactNative","NativeScript","NS"].indexOf($w.product)<0),eU=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tU=qS&&window.location.href||"http://localhost",nU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qS,hasStandardBrowserEnv:ZB,hasStandardBrowserWebWorkerEnv:eU,navigator:$w,origin:tU},Symbol.toStringTag,{value:"Module"})),Fn={...nU,...JB};function rU(e,t){return Pm(e,new Fn.classes.URLSearchParams,{visitor:function(n,r,s,o){return Fn.isNode&&ue.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function sU(e){return ue.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function oU(e){const t={},n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],t[o]=e[o];return t}function Sj(e){function t(n,r,s,o){let a=n[o++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),f=o>=n.length;return a=!a&&ue.isArray(s)?s.length:a,f?(ue.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!c):((!s[a]||!ue.isObject(s[a]))&&(s[a]=[]),t(n,r,s[a],o)&&ue.isArray(s[a])&&(s[a]=oU(s[a])),!c)}if(ue.isFormData(e)&&ue.isFunction(e.entries)){const n={};return ue.forEachEntry(e,(r,s)=>{t(sU(r),s,n,0)}),n}return null}function iU(e,t,n){if(ue.isString(e))try{return(t||JSON.parse)(e),ue.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const zd={transitional:wj,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=ue.isObject(t);if(o&&ue.isHTMLForm(t)&&(t=new FormData(t)),ue.isFormData(t))return s?JSON.stringify(Sj(t)):t;if(ue.isArrayBuffer(t)||ue.isBuffer(t)||ue.isStream(t)||ue.isFile(t)||ue.isBlob(t)||ue.isReadableStream(t))return t;if(ue.isArrayBufferView(t))return t.buffer;if(ue.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return rU(t,this.formSerializer).toString();if((c=ue.isFileList(t))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Pm(c?{"files[]":t}:t,f&&new f,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),iU(t)):t}],transformResponse:[function(t){const n=this.transitional||zd.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(ue.isResponse(t)||ue.isReadableStream(t))return t;if(t&&ue.isString(t)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(c){if(a)throw c.name==="SyntaxError"?ft.from(c,ft.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fn.classes.FormData,Blob:Fn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],e=>{zd.headers[e]={}});const aU=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cU=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||t[n]&&aU[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},iT=Symbol("internals");function $l(e){return e&&String(e).trim().toLowerCase()}function Bf(e){return e===!1||e==null?e:ue.isArray(e)?e.map(Bf):String(e)}function lU(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const dU=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ay(e,t,n,r,s){if(ue.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!ue.isString(t)){if(ue.isString(r))return t.indexOf(r)!==-1;if(ue.isRegExp(r))return r.test(t)}}function uU(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function fU(e,t){const n=ue.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,o,a){return this[r].call(this,t,s,o,a)},configurable:!0})})}let ir=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function o(c,f,d){const p=$l(f);if(!p)throw new Error("header name must be a non-empty string");const h=ue.findKey(s,p);(!h||s[h]===void 0||d===!0||d===void 0&&s[h]!==!1)&&(s[h||f]=Bf(c))}const a=(c,f)=>ue.forEach(c,(d,p)=>o(d,p,f));if(ue.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(ue.isString(t)&&(t=t.trim())&&!dU(t))a(cU(t),n);else if(ue.isObject(t)&&ue.isIterable(t)){let c={},f,d;for(const p of t){if(!ue.isArray(p))throw TypeError("Object iterator must return a key-value pair");c[d=p[0]]=(f=c[d])?ue.isArray(f)?[...f,p[1]]:[f,p[1]]:p[1]}a(c,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=$l(t),t){const r=ue.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return lU(s);if(ue.isFunction(n))return n.call(this,s,r);if(ue.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=$l(t),t){const r=ue.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Ay(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function o(a){if(a=$l(a),a){const c=ue.findKey(r,a);c&&(!n||Ay(r,r[c],c,n))&&(delete r[c],s=!0)}}return ue.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!t||Ay(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,r={};return ue.forEach(this,(s,o)=>{const a=ue.findKey(r,o);if(a){n[a]=Bf(s),delete n[o];return}const c=t?uU(o):String(o).trim();c!==o&&delete n[o],n[c]=Bf(s),r[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ue.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&ue.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[iT]=this[iT]={accessors:{}}).accessors,s=this.prototype;function o(a){const c=$l(a);r[c]||(fU(s,a),r[c]=!0)}return ue.isArray(t)?t.forEach(o):o(t),this}};ir.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(ir.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});ue.freezeMethods(ir);function $y(e,t){const n=this||zd,r=t||n,s=ir.from(r.headers);let o=r.data;return ue.forEach(e,function(c){o=c.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function bj(e){return!!(e&&e.__CANCEL__)}function Oc(e,t,n){ft.call(this,e??"canceled",ft.ERR_CANCELED,t,n),this.name="CanceledError"}ue.inherits(Oc,ft,{__CANCEL__:!0});function xj(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ft("Request failed with status code "+n.status,[ft.ERR_BAD_REQUEST,ft.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function pU(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function hU(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,o=0,a;return t=t!==void 0?t:1e3,function(f){const d=Date.now(),p=r[o];a||(a=d),n[s]=f,r[s]=d;let h=o,g=0;for(;h!==s;)g+=n[h++],h=h%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),d-a<t)return;const S=p&&d-p;return S?Math.round(g*1e3/S):void 0}}function mU(e,t){let n=0,r=1e3/t,s,o;const a=(d,p=Date.now())=>{n=p,s=null,o&&(clearTimeout(o),o=null),e(...d)};return[(...d)=>{const p=Date.now(),h=p-n;h>=r?a(d,p):(s=d,o||(o=setTimeout(()=>{o=null,a(s)},r-h)))},()=>s&&a(s)]}const yh=(e,t,n=3)=>{let r=0;const s=hU(50,250);return mU(o=>{const a=o.loaded,c=o.lengthComputable?o.total:void 0,f=a-r,d=s(f),p=a<=c;r=a;const h={loaded:a,total:c,progress:c?a/c:void 0,bytes:f,rate:d||void 0,estimated:d&&c&&p?(c-a)/d:void 0,event:o,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(h)},n)},aT=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},cT=e=>(...t)=>ue.asap(()=>e(...t)),gU=Fn.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Fn.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Fn.origin),Fn.navigator&&/(msie|trident)/i.test(Fn.navigator.userAgent)):()=>!0,vU=Fn.hasStandardBrowserEnv?{write(e,t,n,r,s,o){const a=[e+"="+encodeURIComponent(t)];ue.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),ue.isString(r)&&a.push("path="+r),ue.isString(s)&&a.push("domain="+s),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yU(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function wU(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Cj(e,t,n){let r=!yU(t);return e&&(r||n==!1)?wU(e,t):t}const lT=e=>e instanceof ir?{...e}:e;function da(e,t){t=t||{};const n={};function r(d,p,h,g){return ue.isPlainObject(d)&&ue.isPlainObject(p)?ue.merge.call({caseless:g},d,p):ue.isPlainObject(p)?ue.merge({},p):ue.isArray(p)?p.slice():p}function s(d,p,h,g){if(ue.isUndefined(p)){if(!ue.isUndefined(d))return r(void 0,d,h,g)}else return r(d,p,h,g)}function o(d,p){if(!ue.isUndefined(p))return r(void 0,p)}function a(d,p){if(ue.isUndefined(p)){if(!ue.isUndefined(d))return r(void 0,d)}else return r(void 0,p)}function c(d,p,h){if(h in t)return r(d,p);if(h in e)return r(void 0,d)}const f={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(d,p,h)=>s(lT(d),lT(p),h,!0)};return ue.forEach(Object.keys({...e,...t}),function(p){const h=f[p]||s,g=h(e[p],t[p],p);ue.isUndefined(g)&&h!==c||(n[p]=g)}),n}const _j=e=>{const t=da({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:c}=t;if(t.headers=a=ir.from(a),t.url=yj(Cj(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ue.isFormData(n)){if(Fn.hasStandardBrowserEnv||Fn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(ue.isFunction(n.getHeaders)){const f=n.getHeaders(),d=["content-type","content-length"];Object.entries(f).forEach(([p,h])=>{d.includes(p.toLowerCase())&&a.set(p,h)})}}if(Fn.hasStandardBrowserEnv&&(r&&ue.isFunction(r)&&(r=r(t)),r||r!==!1&&gU(t.url))){const f=s&&o&&vU.read(o);f&&a.set(s,f)}return t},SU=typeof XMLHttpRequest<"u",bU=SU&&function(e){return new Promise(function(n,r){const s=_j(e);let o=s.data;const a=ir.from(s.headers).normalize();let{responseType:c,onUploadProgress:f,onDownloadProgress:d}=s,p,h,g,S,y;function b(){S&&S(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let C=new XMLHttpRequest;C.open(s.method.toUpperCase(),s.url,!0),C.timeout=s.timeout;function T(){if(!C)return;const m=ir.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),x={data:!c||c==="text"||c==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:m,config:e,request:C};xj(function(k){n(k),b()},function(k){r(k),b()},x),C=null}"onloadend"in C?C.onloadend=T:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(T)},C.onabort=function(){C&&(r(new ft("Request aborted",ft.ECONNABORTED,e,C)),C=null)},C.onerror=function(v){const x=v&&v.message?v.message:"Network Error",_=new ft(x,ft.ERR_NETWORK,e,C);_.event=v||null,r(_),C=null},C.ontimeout=function(){let v=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const x=s.transitional||wj;s.timeoutErrorMessage&&(v=s.timeoutErrorMessage),r(new ft(v,x.clarifyTimeoutError?ft.ETIMEDOUT:ft.ECONNABORTED,e,C)),C=null},o===void 0&&a.setContentType(null),"setRequestHeader"in C&&ue.forEach(a.toJSON(),function(v,x){C.setRequestHeader(x,v)}),ue.isUndefined(s.withCredentials)||(C.withCredentials=!!s.withCredentials),c&&c!=="json"&&(C.responseType=s.responseType),d&&([g,y]=yh(d,!0),C.addEventListener("progress",g)),f&&C.upload&&([h,S]=yh(f),C.upload.addEventListener("progress",h),C.upload.addEventListener("loadend",S)),(s.cancelToken||s.signal)&&(p=m=>{C&&(r(!m||m.type?new Oc(null,e,C):m),C.abort(),C=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const R=pU(s.url);if(R&&Fn.protocols.indexOf(R)===-1){r(new ft("Unsupported protocol "+R+":",ft.ERR_BAD_REQUEST,e));return}C.send(o||null)})},xU=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const o=function(d){if(!s){s=!0,c();const p=d instanceof Error?d:this.reason;r.abort(p instanceof ft?p:new Oc(p instanceof Error?p.message:p))}};let a=t&&setTimeout(()=>{a=null,o(new ft(`timeout ${t} of ms exceeded`,ft.ETIMEDOUT))},t);const c=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),e=null)};e.forEach(d=>d.addEventListener("abort",o));const{signal:f}=r;return f.unsubscribe=()=>ue.asap(c),f}},CU=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},_U=async function*(e,t){for await(const n of RU(e))yield*CU(n,t)},RU=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},dT=(e,t,n,r)=>{const s=_U(e,t);let o=0,a,c=f=>{a||(a=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:d,value:p}=await s.next();if(d){c(),f.close();return}let h=p.byteLength;if(n){let g=o+=h;n(g)}f.enqueue(new Uint8Array(p))}catch(d){throw c(d),d}},cancel(f){return c(f),s.return()}},{highWaterMark:2})},uT=64*1024,{isFunction:bf}=ue,TU=(({Request:e,Response:t})=>({Request:e,Response:t}))(ue.global),{ReadableStream:fT,TextEncoder:pT}=ue.global,hT=(e,...t)=>{try{return!!e(...t)}catch{return!1}},EU=e=>{e=ue.merge.call({skipUndefined:!0},TU,e);const{fetch:t,Request:n,Response:r}=e,s=t?bf(t):typeof fetch=="function",o=bf(n),a=bf(r);if(!s)return!1;const c=s&&bf(fT),f=s&&(typeof pT=="function"?(y=>b=>y.encode(b))(new pT):async y=>new Uint8Array(await new n(y).arrayBuffer())),d=o&&c&&hT(()=>{let y=!1;const b=new n(Fn.origin,{body:new fT,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!b}),p=a&&c&&hT(()=>ue.isReadableStream(new r("").body)),h={stream:p&&(y=>y.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!h[y]&&(h[y]=(b,C)=>{let T=b&&b[y];if(T)return T.call(b);throw new ft(`Response type '${y}' is not supported`,ft.ERR_NOT_SUPPORT,C)})});const g=async y=>{if(y==null)return 0;if(ue.isBlob(y))return y.size;if(ue.isSpecCompliantForm(y))return(await new n(Fn.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(ue.isArrayBufferView(y)||ue.isArrayBuffer(y))return y.byteLength;if(ue.isURLSearchParams(y)&&(y=y+""),ue.isString(y))return(await f(y)).byteLength},S=async(y,b)=>{const C=ue.toFiniteNumber(y.getContentLength());return C??g(b)};return async y=>{let{url:b,method:C,data:T,signal:R,cancelToken:m,timeout:v,onDownloadProgress:x,onUploadProgress:_,responseType:k,headers:D,withCredentials:M="same-origin",fetchOptions:P}=_j(y),L=t||fetch;k=k?(k+"").toLowerCase():"text";let O=xU([R,m&&m.toAbortSignal()],v),V=null;const H=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let q;try{if(_&&d&&C!=="get"&&C!=="head"&&(q=await S(D,T))!==0){let U=new n(b,{method:"POST",body:T,duplex:"half"}),G;if(ue.isFormData(T)&&(G=U.headers.get("content-type"))&&D.setContentType(G),U.body){const[te,ne]=aT(q,yh(cT(_)));T=dT(U.body,uT,te,ne)}}ue.isString(M)||(M=M?"include":"omit");const N=o&&"credentials"in n.prototype,B={...P,signal:O,method:C.toUpperCase(),headers:D.normalize().toJSON(),body:T,duplex:"half",credentials:N?M:void 0};V=o&&new n(b,B);let $=await(o?L(V,P):L(b,B));const F=p&&(k==="stream"||k==="response");if(p&&(x||F&&H)){const U={};["status","statusText","headers"].forEach(Q=>{U[Q]=$[Q]});const G=ue.toFiniteNumber($.headers.get("content-length")),[te,ne]=x&&aT(G,yh(cT(x),!0))||[];$=new r(dT($.body,uT,te,()=>{ne&&ne(),H&&H()}),U)}k=k||"text";let z=await h[ue.findKey(h,k)||"text"]($,y);return!F&&H&&H(),await new Promise((U,G)=>{xj(U,G,{data:z,headers:ir.from($.headers),status:$.status,statusText:$.statusText,config:y,request:V})})}catch(N){throw H&&H(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new ft("Network Error",ft.ERR_NETWORK,y,V),{cause:N.cause||N}):ft.from(N,N&&N.code,y,V)}}},kU=new Map,Rj=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:s}=t,o=[r,s,n];let a=o.length,c=a,f,d,p=kU;for(;c--;)f=o[c],d=p.get(f),d===void 0&&p.set(f,d=c?new Map:EU(t)),p=d;return d};Rj();const Fw={http:WB,xhr:bU,fetch:{get:Rj}};ue.forEach(Fw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const mT=e=>`- ${e}`,IU=e=>ue.isFunction(e)||e===null||e===!1,Tj={getAdapter:(e,t)=>{e=ue.isArray(e)?e:[e];const{length:n}=e;let r,s;const o={};for(let a=0;a<n;a++){r=e[a];let c;if(s=r,!IU(r)&&(s=Fw[(c=String(r)).toLowerCase()],s===void 0))throw new ft(`Unknown adapter '${c}'`);if(s&&(ue.isFunction(s)||(s=s.get(t))))break;o[c||"#"+a]=s}if(!s){const a=Object.entries(o).map(([f,d])=>`adapter ${f} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=n?a.length>1?`since :
`+a.map(mT).join(`
`):" "+mT(a[0]):"as no adapter specified";throw new ft("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s},adapters:Fw};function Fy(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Oc(null,e)}function gT(e){return Fy(e),e.headers=ir.from(e.headers),e.data=$y.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Tj.getAdapter(e.adapter||zd.adapter,e)(e).then(function(r){return Fy(e),r.data=$y.call(e,e.transformResponse,r),r.headers=ir.from(r.headers),r},function(r){return bj(r)||(Fy(e),r&&r.response&&(r.response.data=$y.call(e,e.transformResponse,r.response),r.response.headers=ir.from(r.response.headers))),Promise.reject(r)})}const Ej="1.12.2",Mm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Mm[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const vT={};Mm.transitional=function(t,n,r){function s(o,a){return"[Axios v"+Ej+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,c)=>{if(t===!1)throw new ft(s(a," has been removed"+(n?" in "+n:"")),ft.ERR_DEPRECATED);return n&&!vT[a]&&(vT[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,a,c):!0}};Mm.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function DU(e,t,n){if(typeof e!="object")throw new ft("options must be an object",ft.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const o=r[s],a=t[o];if(a){const c=e[o],f=c===void 0||a(c,o,e);if(f!==!0)throw new ft("option "+o+" must be "+f,ft.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ft("Unknown option "+o,ft.ERR_BAD_OPTION)}}const Uf={assertOptions:DU,validators:Mm},Os=Uf.validators;let Qi=class{constructor(t){this.defaults=t||{},this.interceptors={request:new oT,response:new oT}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=da(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Uf.assertOptions(r,{silentJSONParsing:Os.transitional(Os.boolean),forcedJSONParsing:Os.transitional(Os.boolean),clarifyTimeoutError:Os.transitional(Os.boolean)},!1),s!=null&&(ue.isFunction(s)?n.paramsSerializer={serialize:s}:Uf.assertOptions(s,{encode:Os.function,serialize:Os.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Uf.assertOptions(n,{baseUrl:Os.spelling("baseURL"),withXsrfToken:Os.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&ue.merge(o.common,o[n.method]);o&&ue.forEach(["delete","get","head","post","put","patch","common"],y=>{delete o[y]}),n.headers=ir.concat(a,o);const c=[];let f=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(f=f&&b.synchronous,c.unshift(b.fulfilled,b.rejected))});const d=[];this.interceptors.response.forEach(function(b){d.push(b.fulfilled,b.rejected)});let p,h=0,g;if(!f){const y=[gT.bind(this),void 0];for(y.unshift(...c),y.push(...d),g=y.length,p=Promise.resolve(n);h<g;)p=p.then(y[h++],y[h++]);return p}g=c.length;let S=n;for(;h<g;){const y=c[h++],b=c[h++];try{S=y(S)}catch(C){b.call(this,C);break}}try{p=gT.call(this,S)}catch(y){return Promise.reject(y)}for(h=0,g=d.length;h<g;)p=p.then(d[h++],d[h++]);return p}getUri(t){t=da(this.defaults,t);const n=Cj(t.baseURL,t.url,t.allowAbsoluteUrls);return yj(n,t.params,t.paramsSerializer)}};ue.forEach(["delete","get","head","options"],function(t){Qi.prototype[t]=function(n,r){return this.request(da(r||{},{method:t,url:n,data:(r||{}).data}))}});ue.forEach(["post","put","patch"],function(t){function n(r){return function(o,a,c){return this.request(da(c||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Qi.prototype[t]=n(),Qi.prototype[t+"Form"]=n(!0)});let jU=class kj{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const a=new Promise(c=>{r.subscribe(c),o=c}).then(s);return a.cancel=function(){r.unsubscribe(o)},a},t(function(o,a,c){r.reason||(r.reason=new Oc(o,a,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new kj(function(s){t=s}),cancel:t}}};function PU(e){return function(n){return e.apply(null,n)}}function MU(e){return ue.isObject(e)&&e.isAxiosError===!0}const zw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zw).forEach(([e,t])=>{zw[t]=e});function Ij(e){const t=new Qi(e),n=ij(Qi.prototype.request,t);return ue.extend(n,Qi.prototype,t,{allOwnKeys:!0}),ue.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return Ij(da(e,s))},n}const tn=Ij(zd);tn.Axios=Qi;tn.CanceledError=Oc;tn.CancelToken=jU;tn.isCancel=bj;tn.VERSION=Ej;tn.toFormData=Pm;tn.AxiosError=ft;tn.Cancel=tn.CanceledError;tn.all=function(t){return Promise.all(t)};tn.spread=PU;tn.isAxiosError=MU;tn.mergeConfig=da;tn.AxiosHeaders=ir;tn.formToJSON=e=>Sj(ue.isHTMLForm(e)?new FormData(e):e);tn.getAdapter=Tj.getAdapter;tn.HttpStatusCode=zw;tn.default=tn;const{Axios:OZ,AxiosError:Me,CanceledError:AZ,isCancel:$Z,CancelToken:FZ,VERSION:zZ,all:BZ,Cancel:UZ,isAxiosError:VZ,spread:HZ,toFormData:WZ,AxiosHeaders:qZ,HttpStatusCode:GZ,formToJSON:KZ,getAdapter:YZ,mergeConfig:XZ}=tn,ke=tn.create({baseURL:"https://166664.msk.web.highserver.ru/api",headers:{"Content-Type":"application/json"}}),NU=async e=>{const{data:t}=await ke.post("/chat/create",{userTag:e});return t},LU=async(e,t)=>{await ke.put("/chat/name",{chatId:e,name:t})},OU=async()=>{const{data:e}=await ke.get("/chat/list");return e},AU=async e=>{const{data:t}=await ke.get("/chat/info",{params:{id:e}});return t},Bw=async(e,t,n,r)=>{const{data:s}=await ke.get("/chat/messages",{params:{chatId:e,number:t,fromMessageId:n,down:r}});return s},$U=async(e,t)=>{await ke.put("/chat/add",{chatId:e,userTag:t})},FU=async e=>{await ke.delete("/chat/goout",{data:{id:e}})},zU=async(e,t)=>{const n=new FormData;n.append("ChatID",e),n.append("Icon",t);const{data:r}=await ke.put("/chat/icon",n,{headers:{"Content-Type":"multipart/form-data"}});return r},BU=async e=>{await ke.put("/chat/settings/nonnotifiable",{id:e})},Qe={DEFAULT:" "},Vf=Pe("chatsSlice/createChat",async({userTag:e},{rejectWithValue:t})=>{var n,r;try{return await NU(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),Hf=Pe("chatsSlice/changeChatName",async({chatId:e,name:t},{rejectWithValue:n})=>{var r,s;try{await LU(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}}),Wf=Pe("chatsSlice/getChats",async(e,{rejectWithValue:t})=>{var n,r;try{return await OU()}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),qf=Pe("chatsSlice/getChatInfo",async({chatId:e},{rejectWithValue:t})=>{var n,r;try{return await AU(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),Gf=Pe("chatsSlice/getChatMessages",async({chatId:e,number:t,fromMessageId:n,down:r},{rejectWithValue:s})=>{var o,a;try{const c=await Bw(e,t,n,r);let f=c.messages,d=r?0:c.remainingMessagesCount,p=r?c.remainingMessagesCount:0;if(!r&&n!==0&&c.allMessagesCount>0&&f.length<t){const S=f.length>0?f[f.length-1].id:n,y=t-f.length+(f.length>0?1:0),b=await Bw(e,y,S,!0),C=new Map;f.forEach(T=>C.set(T.id,T)),b.messages.forEach(T=>C.set(T.id,T)),f=[...C.values()].sort((T,R)=>T.id-R.id),p=b.remainingMessagesCount}const g=f.length;return r?d=Math.max(c.allMessagesCount-g-p,0):p=p>0?p:Math.max(c.allMessagesCount-g-d,0),{...c,messages:f,numberOfMessages:f.length,startMessageId:f.length>0?f[0].id:c.startMessageId,remainingTopMessagesCount:d,remainingBottomMessagesCount:p}}catch(c){return c instanceof Me?s(((a=(o=c.response)==null?void 0:o.data)==null?void 0:a.message)||" "):s(" ")}}),Ji=Pe("chatsSlice/getMoreChatMessages",async({chatId:e,number:t,fromMessageId:n,down:r},{rejectWithValue:s})=>{var o,a;try{return await Bw(e,t,n,r)}catch(c){return c instanceof Me?s(((a=(o=c.response)==null?void 0:o.data)==null?void 0:a.message)||" "):s(" ")}}),Kf=Pe("chatsSlice/addUserInChat",async({chatId:e,userTag:t},{rejectWithValue:n})=>{var r,s;try{await $U(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}}),Yf=Pe("chatsSlice/goOutFromChat",async({id:e},{rejectWithValue:t})=>{var n,r;try{await FU(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),Xf=Pe("chatsSlice/changeChatIcon",async({chatId:e,icon:t},{rejectWithValue:n})=>{var r,s;try{return await zU(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||Qe.DEFAULT):n(Qe.DEFAULT)}}),Qf=Pe("chatsSlice/changeChatNotifiable",async({chatId:e},{rejectWithValue:t})=>{var n,r;try{await BU(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),mn=15,GS={canChangeRole:"  ",canWorkChannels:"  ",canDeleteUsers:"  ",canMuteOther:"  ",canDeleteOthersMessages:"   ",canIgnoreMaxCount:"  ",canCreateRoles:"  ",canCreateLessons:"  ",canCheckAttendance:"  ",canUseInvitations:"  "};var Ie=(e=>(e.IDLE="IDLE",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED",e))(Ie||{});const UU={chatsList:[],chatsLoading:Ie.IDLE,error:"",chat:{chatId:"",chatName:"",users:[],nonReadedCount:0,nonReadedTaggedCount:0,lastReadedMessageId:0,nonNotifiable:!1,icon:null},activeChat:null,chatLoading:Ie.IDLE,messages:[],messagesStatus:Ie.IDLE,messageIsLoading:Ie.IDLE,remainingTopMessagesCount:0,lastTopMessageId:0,remainingBottomMessagesCount:mn,lastBottomMessageId:0,startMessageId:0,allMessagesCount:0},Dj=qs({name:"chats",initialState:UU,reducers:{setActiveChat:(e,t)=>{e.activeChat=t.payload,e.messages=[],e.remainingTopMessagesCount=0,e.lastTopMessageId=0,e.remainingBottomMessagesCount=mn,e.lastBottomMessageId=0,e.startMessageId=0,e.allMessagesCount=0,e.error=""},addChatMessage:(e,t)=>{const{channelId:n}=t.payload;n===e.activeChat&&e.remainingBottomMessagesCount<=0&&e.messages.push(t.payload)},deleteChatMessageWS:(e,t)=>{e.activeChat===t.payload.chatId&&(e.messages=e.messages.filter(n=>n.id!==t.payload.messageId))},editChatMessageWS:(e,t)=>{if(e.activeChat===t.payload.channelId){const n=e.messages.findIndex(r=>r.id===t.payload.id);n!==-1&&(e.messages[n]=t.payload)}},readChatMessageWs:(e,t)=>{const{readChatId:n,readedMessageId:r,isTagged:s}=t.payload,o=e.chatsList.findIndex(a=>a.chatId===n);e.activeChat===n&&(e.chat.nonReadedCount=Math.max(0,e.chat.nonReadedCount-1),s&&(e.chat.nonReadedTaggedCount=Math.max(0,e.chat.nonReadedTaggedCount-1)),e.chat.lastReadedMessageId=r),o>=0&&(e.chatsList[o].nonReadedCount=Math.max(0,e.chatsList[o].nonReadedCount-1),s&&(e.chatsList[o].nonReadedTaggedCount=Math.max(0,e.chatsList[o].nonReadedTaggedCount-1)),e.chatsList[o].lastReadedMessageId=r)},changeChatReadedCount:(e,t)=>{const{readChatId:n,isTagged:r}=t.payload;e.activeChat===n&&(e.chat.nonReadedCount+=1,r&&(e.chat.nonReadedTaggedCount+=1));const s=e.chatsList.findIndex(o=>o.chatId===n);s>=0&&(e.chatsList[s].nonReadedCount+=1,r&&(e.chatsList[s].nonReadedTaggedCount+=1))},readOwnChatMessage:(e,t)=>{const{readChatId:n,readedMessageId:r}=t.payload,s=e.chatsList.findIndex(o=>o.chatId===n);e.activeChat===n&&(e.chat.lastReadedMessageId=r),s>=0&&(e.chatsList[s].lastReadedMessageId=r)},addUserInChatWs:(e,t)=>{const{chatId:n}=t.payload;e.activeChat===n&&e.chat.users.push(t.payload)},addChat:(e,t)=>{e.chatsList.push(t.payload)},updateChatIcon:(e,t)=>{const{chatId:n,icon:r}=t.payload,s=e.chatsList.findIndex(o=>o.chatId===n);s>=0&&(e.chatsList[s].icon=r),e.activeChat===n&&(e.chat.icon=r)},updateChatVoteWs:(e,t)=>{const n=e.messages.findIndex(r=>r.id===t.payload.id);n!==-1&&(e.messages[n]=t.payload)}},extraReducers:e=>{e.addCase(Vf.pending,t=>{t.error=""}).addCase(Vf.fulfilled,(t,n)=>{t.chatsList=[...t.chatsList,n.payload],t.error=""}).addCase(Vf.rejected,(t,n)=>{t.error=n.payload}).addCase(Hf.pending,t=>{t.error=""}).addCase(Hf.fulfilled,(t,{meta:n})=>{const{chatId:r,name:s}=n.arg;t.chatsList=t.chatsList.map(o=>o.chatId===r?{...o,name:s}:o),t.chat.chatId===r&&(t.chat.chatName=s),t.error=""}).addCase(Hf.rejected,(t,n)=>{t.error=n.payload}).addCase(Wf.pending,t=>{t.error="",t.chatsList=[],t.chatsLoading=Ie.PENDING}).addCase(Wf.fulfilled,(t,n)=>{t.chatsList=n.payload.chatsList,t.chatsLoading=Ie.FULFILLED,t.error=""}).addCase(Wf.rejected,(t,n)=>{t.chatsLoading=Ie.REJECTED,t.chat={chatId:"",chatName:"",users:[],nonReadedCount:0,nonReadedTaggedCount:0,lastReadedMessageId:0,nonNotifiable:!1,icon:null},t.error=n.payload}).addCase(qf.pending,t=>{t.error="",t.chat={chatId:"",chatName:"",users:[],nonReadedCount:0,nonReadedTaggedCount:0,lastReadedMessageId:0,nonNotifiable:!1,icon:null},t.remainingTopMessagesCount=0,t.lastTopMessageId=0,t.remainingBottomMessagesCount=mn,t.lastBottomMessageId=0,t.startMessageId=0,t.allMessagesCount=0,t.messages=[],t.chatLoading=Ie.PENDING}).addCase(qf.fulfilled,(t,n)=>{t.chat=n.payload,t.startMessageId=n.payload.lastReadedMessageId,t.chatLoading=Ie.FULFILLED,t.error=""}).addCase(qf.rejected,(t,n)=>{t.chatLoading=Ie.REJECTED,t.error=n.payload}).addCase(Gf.pending,t=>{t.messagesStatus=Ie.PENDING,t.remainingTopMessagesCount=0,t.lastTopMessageId=0,t.remainingBottomMessagesCount=mn,t.lastBottomMessageId=0,t.allMessagesCount=0,t.messages=[],t.error=""}).addCase(Gf.fulfilled,(t,n)=>{const{payload:r}=n,{messages:s,allMessagesCount:o,remainingTopMessagesCount:a,remainingBottomMessagesCount:c}=r;t.messages=s,t.remainingTopMessagesCount=a,t.remainingBottomMessagesCount=c,t.lastTopMessageId=s.length>0?s[0].id:0,t.lastBottomMessageId=s.length>0?s[s.length-1].id:0,t.allMessagesCount=o,t.messagesStatus=Ie.FULFILLED,t.error=""}).addCase(Gf.rejected,(t,n)=>{t.messagesStatus=Ie.REJECTED,t.error=n.payload}).addCase(Ji.pending,t=>{t.messageIsLoading=Ie.PENDING,t.error=""}).addCase(Ji.fulfilled,(t,n)=>{const{payload:r,meta:s}=n,{messages:o,remainingMessagesCount:a,allMessagesCount:c}=r,{down:f}=s.arg;if(o.length===0){f?t.remainingBottomMessagesCount=0:t.remainingTopMessagesCount=0,t.messageIsLoading=Ie.FULFILLED,t.allMessagesCount=c,t.error="";return}if(f){const d=o.slice(1);if(d.length===0){t.remainingBottomMessagesCount=0,t.messageIsLoading=Ie.FULFILLED,t.allMessagesCount=c,t.error="";return}t.messages=[...t.messages,...d],t.remainingBottomMessagesCount=a;const p=d.at(-1);p&&(t.lastBottomMessageId=p.id)}else{const d=o.slice(0,-1);if(d.length===0){t.remainingTopMessagesCount=0,t.messageIsLoading=Ie.FULFILLED,t.allMessagesCount=c,t.error="";return}t.messages=[...d,...t.messages],t.remainingTopMessagesCount=a,t.lastTopMessageId=o[0].id}t.messageIsLoading=Ie.FULFILLED,t.allMessagesCount=c,t.error=""}).addCase(Ji.rejected,(t,n)=>{t.messageIsLoading=Ie.REJECTED,t.error=n.payload}).addCase(Yf.fulfilled,(t,{meta:n})=>{const r=n.arg.id;t.chatsList=t.chatsList.filter(s=>s.chatId!==r),t.error=""}).addCase(Xf.fulfilled,(t,n)=>{t.chat.icon=n.payload,t.error=""}).addCase(Qf.fulfilled,t=>{t.chat.nonNotifiable=!t.chat.nonNotifiable}).addMatcher(bn(Kf.pending,Yf.pending,Xf.pending,Qf.pending),t=>{t.error=""}).addMatcher(bn(Kf.fulfilled),t=>{t.error=""}).addMatcher(bn(Kf.rejected,Yf.rejected,Xf.rejected,Qf.rejected),(t,n)=>{t.error=n.payload})}}),{setActiveChat:io,addChatMessage:VU,deleteChatMessageWS:HU,editChatMessageWS:WU,readChatMessageWs:qU,changeChatReadedCount:GU,readOwnChatMessage:KU,addUserInChatWs:YU,addChat:XU,updateChatIcon:QU,updateChatVoteWs:JU}=Dj.actions,ZU=Dj.reducer;var Rt=(e=>(e[e.TEXT_CHANNEL=0]="TEXT_CHANNEL",e[e.VOICE_CHANNEL=1]="VOICE_CHANNEL",e[e.NOTIFICATION_CHANNEL=2]="NOTIFICATION_CHANNEL",e))(Rt||{}),dc=(e=>(e[e.NotMuted=0]="NotMuted",e[e.SelfMuted=1]="SelfMuted",e[e.Muted=2]="Muted",e))(dc||{}),ai=(e=>(e.Classic="Classic",e.Vote="Vote",e))(ai||{}),Zi=(e=>(e[e.Classic=0]="Classic",e[e.Vote=1]="Vote",e))(Zi||{});const Uw=async(e,t,n,r)=>{const{data:s}=await ke.get("/channel/messages",{params:{channelId:e,number:t,fromMessageId:n,down:r}});return s},eV=async(e,t,n,r)=>{await ke.post("/channel/create",{serverId:e,name:t,channelType:n,maxCount:r})},tV=async e=>{await ke.delete("/channel/delete",{data:{channelId:e}})},nV=async(e,t)=>{await ke.put("/channel/name/change",{id:e,name:t})},rV=async()=>{await ke.put("/channel/voice/mute/self")},sV=async e=>{await ke.post("/channel/settings/change/text",e)},oV=async e=>{await ke.post("/channel/settings/change/notification",e)},iV=async e=>{await ke.post("/channel/settings/change/voice",e)},aV=async e=>{const{data:t}=await ke.get("/channel/settings",{params:{channelId:e}});return t},cV=async(e,t)=>{await ke.put("/channel/settings/maxcount",{voiceChannelId:e,maxCount:t})},lV=async e=>{await ke.put("/channel/settings/nonnotifiable",{id:e})},dV=async e=>{await ke.post("/channel/settings/change/sub",e)},uV=async()=>{const{data:e}=await ke.get("/server/get/List");return e},fV=async e=>{const{data:t}=await ke.get("/server/getserverdata",{params:{serverId:e}});return t},pV=async(e,t)=>{await ke.post("/server/create",{name:e,serverType:t})},hV=async e=>{await ke.delete("/server/delete",{data:{serverId:e}})},mV=async(e,t,n)=>{await ke.put("/server/changerole",{serverId:e,userId:t,role:n})},gV=async(e,t,n)=>{await ke.put("/server/addrole",{serverId:e,userId:t,role:n})},vV=async(e,t,n)=>{await ke.put("/server/removerole",{serverId:e,userId:t,role:n})},yV=async(e,t)=>{await ke.post("/server/subscribe",{invitationToken:e,userName:t})},wV=async e=>{await ke.delete("/server/unsubscribe",{data:{serverId:e}})},SV=async(e,t)=>{await ke.put("/server/name/server/change",{id:e,name:t})},bV=async(e,t)=>{await ke.put("/server/name/user/change",{id:e,name:t})},xV=async(e,t,n)=>{await ke.delete("/server/deleteuser",{data:{serverId:e,userId:t,banReason:n}})},CV=async(e,t)=>{await ke.delete("/server/unsubscribe/creator",{data:{serverId:e,newCreatorId:t}})},_V=async(e,t,n)=>{const{data:r}=await ke.get("/server/banned/list",{params:{serverId:e,Page:t,Size:n}});return r},RV=async(e,t)=>{await ke.delete("/server/banned/unban",{data:{userId:e,serverId:t}})},TV=async(e,t)=>{const n=new FormData;n.append("ServerId",e),n.append("Icon",t);const{data:r}=await ke.put("/server/icon",n,{headers:{"Content-Type":"multipart/form-data"}});return r},EV=async(e,t,n)=>{await ke.put("/server/isClosed",{serverId:e,isClosed:t,isApprove:n})},kV=async e=>{await ke.put("/server/settings/nonnotifiable",{id:e})},IV=async(e,t)=>{const{data:n}=await ke.post("/server/invitation/create",{serverId:e,expiredAt:t});return n},ni=Pe("testServerSlice/getUserServers",async(e,{rejectWithValue:t})=>{var n,r;try{return(await uV()).serversList}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),An=Pe("testServerSlice/getServerData",async({serverId:e},{rejectWithValue:t})=>{var n,r;try{return await fV(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),Jf=Pe("testServerSlice/createServer",async({name:e,serverType:t},{rejectWithValue:n})=>{var r,s;try{await pV(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}}),Zf=Pe("testServerSlice/deleteServer",async({serverId:e},{rejectWithValue:t})=>{var n,r;try{await hV(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),zy=Pe("testServerSlice/changeRole",async({serverId:e,userId:t,role:n},{rejectWithValue:r})=>{var s,o;try{await mV(e,t,n)}catch(a){return a instanceof Me?r(((o=(s=a.response)==null?void 0:s.data)==null?void 0:o.message)||" "):r(" ")}}),ep=Pe("testServerSlice/addRole",async({serverId:e,userId:t,role:n},{rejectWithValue:r})=>{var s,o;try{await gV(e,t,n)}catch(a){return a instanceof Me?r(((o=(s=a.response)==null?void 0:s.data)==null?void 0:o.message)||" "):r(" ")}}),tp=Pe("testServerSlice/removeRole",async({serverId:e,userId:t,role:n},{rejectWithValue:r})=>{var s,o;try{await vV(e,t,n)}catch(a){return a instanceof Me?r(((o=(s=a.response)==null?void 0:s.data)==null?void 0:o.message)||" "):r(" ")}}),np=Pe("testServerSlice/subscribeToServer",async({invitationToken:e,userName:t},{rejectWithValue:n})=>{var r,s;try{await yV(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}}),rd=Pe("testServerSlice/unsubscribeFromServer",async({serverId:e},{rejectWithValue:t})=>{var n,r;try{await wV(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),rp=Pe("testServerSlice/getChannelMessages",async({channelId:e,number:t,fromMessageId:n,down:r},{rejectWithValue:s})=>{var o,a;try{const c=await Uw(e,t,n,r);let f=c.messages,d=r?0:c.remainingMessagesCount,p=r?c.remainingMessagesCount:0;if(!r&&n!==0&&c.allMessagesCount>0&&f.length<t){const S=f.length>0?f[f.length-1].id:n,y=t-f.length+(f.length>0?1:0),b=await Uw(e,y,S,!0),C=new Map;f.forEach(T=>C.set(T.id,T)),b.messages.forEach(T=>C.set(T.id,T)),f=[...C.values()].sort((T,R)=>T.id-R.id),p=b.remainingMessagesCount}const g=f.length;return r?d=Math.max(c.allMessagesCount-g-p,0):p=p>0?p:Math.max(c.allMessagesCount-g-d,0),{...c,messages:f,numberOfMessages:f.length,startMessageId:f.length>0?f[0].id:c.startMessageId,remainingTopMessagesCount:d,remainingBottomMessagesCount:p}}catch(c){return c instanceof Me?s(((a=(o=c.response)==null?void 0:o.data)==null?void 0:a.message)||" "):s(" ")}}),ea=Pe("testServerSlice/getMoreMessages",async({channelId:e,number:t,fromMessageId:n,down:r},{rejectWithValue:s})=>{var o,a;try{return await Uw(e,t,n,r)}catch(c){return c instanceof Me?s(((a=(o=c.response)==null?void 0:o.data)==null?void 0:a.message)||" "):s(" ")}}),sp=Pe("testServerSlice/createChannel",async({serverId:e,name:t,channelType:n,maxCount:r},{rejectWithValue:s})=>{var o,a;try{await eV(e,t,n,r)}catch(c){return c instanceof Me?s(((a=(o=c.response)==null?void 0:o.data)==null?void 0:a.message)||" "):s(" ")}}),op=Pe("testServerSlice/deleteChannel",async({channelId:e},{rejectWithValue:t})=>{var n,r;try{await tV(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),ip=Pe("testServerSlice/changeServerName",async({serverId:e,name:t},{rejectWithValue:n})=>{var r,s;try{await SV(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}}),ap=Pe("testServerSlice/changeNameOnServer",async({serverId:e,name:t},{rejectWithValue:n})=>{var r,s;try{await bV(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}}),cp=Pe("testServerSlice/deleteUserFromServer",async({serverId:e,userId:t,banReason:n},{rejectWithValue:r})=>{var s,o;try{await xV(e,t,n)}catch(a){return a instanceof Me?r(((o=(s=a.response)==null?void 0:s.data)==null?void 0:o.message)||" "):r(" ")}}),lp=Pe("testServerSlice/changeNotificationChannelSettings",async({settings:e},{rejectWithValue:t})=>{var n,r;try{await oV(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),dp=Pe("testServerSlice/changeChannelName",async({id:e,name:t},{rejectWithValue:n})=>{var r,s;try{await nV(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}}),DV=Pe("testServerSlice/creatorUnsubscribeFromServer",async({serverId:e,newCreatorId:t},{rejectWithValue:n})=>{var r,s;try{await CV(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}}),up=Pe("testServerSlice/selfMute",async(e,{rejectWithValue:t})=>{var n,r;try{await rV()}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),fp=Pe("testServerSlice/changeTextChannelSettings",async({settings:e},{rejectWithValue:t})=>{var n,r;try{await sV(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),pp=Pe("testServerSlice/getChannelSettings",async({channelId:e},{rejectWithValue:t})=>{var n,r;try{return await aV(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),hp=Pe("testServerSlice/changeVoiceChannelSettings",async({settings:e},{rejectWithValue:t})=>{var n,r;try{await iV(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),sd=Pe("testServerSlice/getBannedUsers",async({serverId:e,page:t,size:n},{rejectWithValue:r})=>{var s,o;try{return await _V(e,t,n)}catch(a){return a instanceof Me?r(((o=(s=a.response)==null?void 0:s.data)==null?void 0:o.message)||" "):r(" ")}}),mp=Pe("testServerSlice/unbanUser",async({userId:e,serverId:t},{rejectWithValue:n})=>{var r,s;try{await RV(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}}),gp=Pe("testServerSlice/changeVoiceChannelMaxCount",async({voiceChannelId:e,maxCount:t},{rejectWithValue:n})=>{var r,s;try{await cV(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}}),vp=Pe("testServerSlice/changeServerIcon",async({serverId:e,icon:t},{rejectWithValue:n})=>{var r,s;try{return await TV(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||Qe.DEFAULT):n(Qe.DEFAULT)}}),od=Pe("testServerSlice/changeServerIsClosed",async({serverId:e,isClosed:t,isApprove:n},{rejectWithValue:r})=>{var s,o;try{await EV(e,t,n)}catch(a){return a instanceof Me?r(((o=(s=a.response)==null?void 0:s.data)==null?void 0:o.message)||" "):r(" ")}}),yp=Pe("testServerSlice/changeNotifiable",async({serverId:e},{rejectWithValue:t})=>{var n,r;try{await kV(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),id=Pe("testServerSlice/changeChannelNotifiable",async({channelId:e},{rejectWithValue:t})=>{var n,r;try{await lV(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),wp=Pe("testServerSlice/changeSubChannelSettings",async({settings:e},{rejectWithValue:t})=>{var n,r;try{await dV(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),Sp=Pe("testServerSlice/createInvitation",async({serverId:e,expiredAt:t},{rejectWithValue:n})=>{var r,s;try{return await IV(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}});var ri=(e=>(e[e.Student=0]="Student",e[e.Teacher=1]="Teacher",e))(ri||{});const jV={serversList:[],serverData:{serverId:"",serverName:"",serverType:ri.Student,icon:null,isClosed:!1,roles:[],userRoles:[],users:[],channels:{textChannels:[],voiceChannels:[],notificationChannels:[]},isCreator:!1,permissions:{canChangeRole:!1,canWorkChannels:!1,canDeleteUsers:!1,canMuteOther:!1,canDeleteOthersMessages:!1,canIgnoreMaxCount:!1,canCreateRoles:!1,canUseInvitations:!1},isNotifiable:!1,invitationString:null},currentServerId:null,currentChannelId:null,currentNotificationChannelId:null,currentVoiceChannelId:null,currentVoiceChannelName:null,currentVoiceChannelServerId:null,messages:[],hasNewMessage:!1,messagesStatus:Ie.IDLE,roleSettings:{canSee:null,canJoin:null,canWrite:null,canWriteSub:null,canUse:null,notificated:null},bannedUsers:[],pageBannedUsers:1,totalPagesBannedUsers:1,isLoading:!1,numberOfMessages:mn,startMessageId:0,remainingTopMessagesCount:0,lastTopMessageId:0,remainingBottomMessagesCount:mn,lastBottomMessageId:0,allMessagesCount:0,messageIsLoading:Ie.IDLE,error:""},jj=qs({name:"testServer",initialState:jV,reducers:{setCurrentServerId:(e,t)=>{e.currentServerId=t.payload,e.serverData.permissions={canChangeRole:!1,canWorkChannels:!1,canDeleteUsers:!1,canMuteOther:!1,canDeleteOthersMessages:!1,canIgnoreMaxCount:!1,canCreateRoles:!1,canUseInvitations:!1},e.error=""},setCurrentChannelId:(e,t)=>{const n=t.payload;if(e.currentChannelId!==n){if(e.currentChannelId=n,e.currentNotificationChannelId=null,n){const r=e.serverData.channels.textChannels.find(s=>s.channelId===n);r&&(e.startMessageId=r.lastReadedMessageId)}e.numberOfMessages=0,e.remainingTopMessagesCount=0,e.lastTopMessageId=0,e.allMessagesCount=0,e.remainingBottomMessagesCount=mn,e.lastBottomMessageId=0,e.messages=[]}},setCurrentNotificationChannelId:(e,t)=>{const n=t.payload;if(e.currentNotificationChannelId!==n){if(e.currentNotificationChannelId=n,e.currentChannelId=null,n){const r=e.serverData.channels.notificationChannels.find(s=>s.channelId===n);r&&(e.startMessageId=r.lastReadedMessageId)}e.numberOfMessages=0,e.remainingTopMessagesCount=0,e.lastTopMessageId=0,e.allMessagesCount=0,e.remainingBottomMessagesCount=mn,e.lastBottomMessageId=0,e.messages=[]}},setCurrentVoiceChannelId:(e,t)=>{e.currentVoiceChannelId=t.payload},setCurrentVoiceChannelName:(e,t)=>{const n=e.serverData.channels.voiceChannels.find(r=>r.channelId===t.payload);n&&(e.currentVoiceChannelName=n.channelName)},setCurrentVoiceChannelServerId:(e,t)=>{e.currentVoiceChannelServerId=t.payload},addMessage:(e,t)=>{const{channelId:n}=t.payload;(n===e.currentChannelId||n===e.currentNotificationChannelId)&&e.remainingBottomMessagesCount<=0&&e.messages.push(t.payload)},deleteMessageWs:(e,t)=>{e.messages=e.messages.filter(n=>n.id!==t.payload.messageId)},editMessageWs:(e,t)=>{const n=e.messages.findIndex(r=>r.id===t.payload.id);n!==-1&&(e.messages[n]=t.payload)},addUserWs:(e,t)=>{e.serverData.users.push(t.payload)},deleteUserWs:(e,t)=>{t.payload.ServerId===e.currentServerId&&(e.serverData.users=e.serverData.users.filter(n=>n.userId!==t.payload.UserId))},clearServerData:e=>{e.serversList=[],e.messages=[],e.currentServerId=null,e.currentNotificationChannelId=null,e.currentVoiceChannelId=null,e.currentServerId=null,e.currentChannelId=null,e.serverData={serverId:"",serverName:"",serverType:ri.Student,icon:null,isClosed:!1,roles:[],userRoles:[],users:[],channels:{textChannels:[],voiceChannels:[],notificationChannels:[]},isCreator:!1,permissions:{canChangeRole:!1,canWorkChannels:!1,canDeleteUsers:!1,canMuteOther:!1,canDeleteOthersMessages:!1,canIgnoreMaxCount:!1,canCreateRoles:!1,canUseInvitations:!1},isNotifiable:!1,invitationString:null},e.roleSettings={canSee:null,canJoin:null,canWrite:null,canWriteSub:null,canUse:null,notificated:null},e.numberOfMessages=0,e.startMessageId=0,e.remainingTopMessagesCount=0,e.lastTopMessageId=0,e.allMessagesCount=0,e.remainingBottomMessagesCount=mn,e.lastBottomMessageId=0},clearHasNewMessage:e=>{e.hasNewMessage=!1},setNewServerName:(e,t)=>{e.serverData.serverName=t.payload.name},setNewUserName:(e,t)=>{const n=e.serverData.users.findIndex(r=>r.userId===t.payload.userId);n!==-1&&(e.serverData.users[n].userName=t.payload.name)},removeUser:(e,t)=>{const n=e.serverData.users.findIndex(r=>r.userId===t.payload.userId);n!==-1&&e.serverData.users.splice(n,1)},removeServer:(e,t)=>{const n=e.serversList.findIndex(r=>r.serverId===t.payload.serverId);n!==-1&&e.serversList.splice(n,1)},editChannelName:(e,t)=>{const{channelId:n,newName:r}=t.payload,s=e.serverData.channels.textChannels.find(a=>a.channelId===n);if(s){s.channelName=r;return}const o=e.serverData.channels.voiceChannels.find(a=>a.channelId===n);if(o){o.channelName=r;return}},addUserOnVoiceChannel:(e,t)=>{const{channelId:n,userId:r,muteStatus:s}=t.payload,o=e.serverData.channels.voiceChannels.find(a=>a.channelId===n);console.log(r,s),o&&(o.users.some(a=>a.userId===r)||o.users.push({userId:r,muteStatus:s}))},removeUserFromVoiceChannel:(e,t)=>{const{channelId:n,userId:r}=t.payload,s=e.serverData.channels.voiceChannels.find(o=>o.channelId===n);s&&(s.users=s.users.filter(o=>o.userId!==r))},toggleUserMuteStatus:(e,t)=>{const{channelId:n,userId:r,isMuted:s}=t.payload,o=e.serverData.channels.voiceChannels.find(a=>a.channelId===n);o&&(o.users=o.users.map(a=>a.userId===r?{...a,isMuted:s}:a))},updatedRole:(e,t)=>{const{roleId:n,name:r,color:s}=t.payload,o=e.serverData.roles.findIndex(a=>a.id===n);o!==-1&&(e.serverData.roles[o]={...e.serverData.roles[o],name:r,color:s}),e.serverData.users=e.serverData.users.map(a=>(a.roles=a.roles.map(c=>c.roleId===n?{...c,roleName:r}:c),a))},readMessageWs:(e,t)=>{var d;const{readChannelId:n,readedMessageId:r,serverId:s,isTagged:o}=t.payload,a=e.serverData.channels.textChannels.findIndex(p=>p.channelId===n);a>=0&&(e.serverData.channels.textChannels[a].nonReadedCount=Math.max(0,e.serverData.channels.textChannels[a].nonReadedCount-1),o&&(e.serverData.channels.textChannels[a].nonReadedTaggedCount=Math.max(0,e.serverData.channels.textChannels[a].nonReadedTaggedCount-1)),e.serverData.channels.textChannels[a].lastReadedMessageId=r);const c=(d=e.serverData.channels.notificationChannels)==null?void 0:d.findIndex(p=>p.channelId===n);c>=0&&(e.serverData.channels.notificationChannels[c].nonReadedCount=Math.max(0,e.serverData.channels.notificationChannels[c].nonReadedCount-1),o&&(e.serverData.channels.notificationChannels[c].nonReadedTaggedCount=Math.max(0,e.serverData.channels.notificationChannels[c].nonReadedTaggedCount-1)),e.serverData.channels.notificationChannels[c].lastReadedMessageId=r);const f=e.serversList.findIndex(p=>p.serverId===s);f>=0&&(e.serversList[f].nonReadedCount=Math.max(0,e.serversList[f].nonReadedCount-1),o&&(e.serversList[f].nonReadedTaggedCount=Math.max(0,e.serversList[f].nonReadedTaggedCount-1)))},changeReadedCount:(e,t)=>{var f;const{channelId:n,serverId:r,isTagged:s}=t.payload,o=e.serverData.channels.textChannels.findIndex(d=>d.channelId===n);o>=0&&(e.serverData.channels.textChannels[o].nonReadedCount+=1,s&&(e.serverData.channels.textChannels[o].nonReadedTaggedCount+=1));const a=(f=e.serverData.channels.notificationChannels)==null?void 0:f.findIndex(d=>d.channelId===n);a>=0&&(e.serverData.channels.notificationChannels[a].nonReadedCount+=1,s&&(e.serverData.channels.notificationChannels[a].nonReadedTaggedCount+=1));const c=e.serversList.findIndex(d=>d.serverId===r);c>=0&&(e.serversList[c].nonReadedCount+=1,s&&(e.serversList[c].nonReadedTaggedCount+=1))},readOwnMessage:(e,t)=>{var a;const{channelId:n,readedMessageId:r}=t.payload,s=e.serverData.channels.textChannels.findIndex(c=>c.channelId===n);s>=0&&(e.serverData.channels.textChannels[s].lastReadedMessageId=r);const o=(a=e.serverData.channels.notificationChannels)==null?void 0:a.findIndex(c=>c.channelId===n);o>=0&&(e.serverData.channels.notificationChannels[o].lastReadedMessageId=r)},addRoleToUserWs:(e,t)=>{const{userId:n,roleId:r,serverId:s}=t.payload;if(e.currentServerId!==s)return;const o=e.serverData.roles.find(a=>a.id===r);if(o){const a=e.serverData.users.findIndex(c=>c.userId===n);a>=0&&(e.serverData.users[a].roles=[...e.serverData.users[a].roles,{roleId:o.id,roleName:o.name,roleType:o.type}])}},removeRoleFromUserWs:(e,t)=>{const{userId:n,roleId:r,serverId:s}=t.payload;if(e.currentServerId!==s)return;if(e.serverData.roles.find(a=>a.id===r)){const a=e.serverData.users.findIndex(c=>c.userId===n);a>=0&&(e.serverData.users[a].roles=e.serverData.users[a].roles.filter(c=>c.roleId!==r))}},updateVoteWs:(e,t)=>{const n=e.messages.findIndex(r=>r.id===t.payload.id);n!==-1&&(e.messages[n]=t.payload)},updateServerIcon:(e,t)=>{const{serverId:n,icon:r}=t.payload;e.currentServerId===n&&(e.serverData.icon=r),e.serversList=e.serversList.map(s=>s.serverId===n?{...s,icon:r}:s)},changeUserMuteStatusWs:(e,t)=>{const n=e.serverData.channels.voiceChannels.find(r=>r.channelId===t.payload.channelId);if(n){const r=n.users.findIndex(s=>s.userId===t.payload.userId);r>=0&&(console.log(t.payload),n.users[r].muteStatus=t.payload.muteStatus)}}},extraReducers:e=>{e.addCase(ni.pending,t=>{t.isLoading=!0,t.error=""}).addCase(ni.fulfilled,(t,n)=>{t.serversList=n.payload,t.isLoading=!1,t.error=""}).addCase(ni.rejected,(t,n)=>{t.isLoading=!1,t.error=n.payload}).addCase(An.pending,t=>{t.isLoading=!0,t.serverData={serverId:"",serverName:"",serverType:ri.Student,icon:null,isClosed:!1,roles:[],userRoles:[],users:[],channels:{textChannels:[],voiceChannels:[],notificationChannels:[]},isCreator:!1,permissions:{canChangeRole:!1,canWorkChannels:!1,canDeleteUsers:!1,canMuteOther:!1,canDeleteOthersMessages:!1,canIgnoreMaxCount:!1,canCreateRoles:!1,canUseInvitations:!1},isNotifiable:!1,invitationString:null},t.currentChannelId=null,t.numberOfMessages=0,t.startMessageId=0,t.remainingTopMessagesCount=0,t.lastTopMessageId=0,t.allMessagesCount=0,t.remainingBottomMessagesCount=mn,t.lastBottomMessageId=0,t.error=""}).addCase(An.fulfilled,(t,n)=>{t.serverData=n.payload;const r=n.payload.channels.textChannels;let s=t.currentChannelId;if(!r.find(a=>a.channelId===s)){s=r.length>0?r[0].channelId:null,t.currentChannelId=s;const a=n.payload.channels.textChannels.find(c=>c.channelId===s);a&&(t.startMessageId=a.lastReadedMessageId),t.messages=[]}t.isLoading=!1,t.error=""}).addCase(An.rejected,(t,n)=>{t.isLoading=!1,t.error=n.payload}).addCase(Jf.pending,t=>{t.error=""}).addCase(Jf.fulfilled,t=>{t.error=""}).addCase(Jf.rejected,(t,n)=>{t.error=n.payload}).addCase(Zf.pending,t=>{t.error=""}).addCase(Zf.fulfilled,t=>{t.error=""}).addCase(Zf.rejected,(t,n)=>{t.error=n.payload}).addCase(zy.pending,t=>{t.error=""}).addCase(zy.fulfilled,t=>{t.error=""}).addCase(zy.rejected,(t,n)=>{t.error=n.payload}).addCase(np.pending,t=>{t.error=""}).addCase(np.fulfilled,t=>{t.error=""}).addCase(np.rejected,(t,n)=>{t.error=n.payload}).addCase(rp.pending,t=>{t.messagesStatus=Ie.PENDING,t.numberOfMessages=0,t.remainingTopMessagesCount=0,t.allMessagesCount=0,t.remainingBottomMessagesCount=mn,t.isLoading=!0,t.error=""}).addCase(rp.fulfilled,(t,n)=>{const{payload:r}=n,{messages:s,allMessagesCount:o,remainingTopMessagesCount:a,remainingBottomMessagesCount:c,startMessageId:f}=r;t.messages=s,t.hasNewMessage=!1,t.messagesStatus=Ie.FULFILLED,t.isLoading=!1,t.remainingTopMessagesCount=a,t.remainingBottomMessagesCount=c,s.length>0?t.lastTopMessageId=s[0].id:t.lastTopMessageId=0,t.lastTopMessageId=s.length>0?s[0].id:0,t.lastBottomMessageId=s.length>0?s[s.length-1].id:0,t.allMessagesCount=o,t.startMessageId=f,t.error=""}).addCase(rp.rejected,(t,n)=>{t.isLoading=!1,t.messagesStatus=Ie.REJECTED,t.error=n.payload}).addCase(ea.pending,t=>{t.messageIsLoading=Ie.PENDING,t.error=""}).addCase(ea.fulfilled,(t,n)=>{const{payload:r,meta:s}=n,{messages:o,remainingMessagesCount:a,allMessagesCount:c}=r,{down:f}=s.arg;if(o.length===0){f?t.remainingBottomMessagesCount=0:t.remainingTopMessagesCount=0,t.messageIsLoading=Ie.FULFILLED,t.allMessagesCount=c,t.error="";return}if(f){const d=o.slice(1);if(d.length===0){t.remainingBottomMessagesCount=0,t.messageIsLoading=Ie.FULFILLED,t.allMessagesCount=c,t.error="";return}t.messages=[...t.messages,...d],t.remainingBottomMessagesCount=a;const p=d.at(-1);p&&(t.lastBottomMessageId=p.id)}else{const d=o.slice(0,-1);if(d.length===0){t.remainingTopMessagesCount=0,t.messageIsLoading=Ie.FULFILLED,t.allMessagesCount=c,t.error="";return}t.messages=[...d,...t.messages],t.remainingTopMessagesCount=a,t.lastTopMessageId=o[0].id}t.messageIsLoading=Ie.FULFILLED,t.allMessagesCount=c,t.error=""}).addCase(ea.rejected,(t,n)=>{t.messageIsLoading=Ie.REJECTED,t.error=n.payload}).addCase(sp.pending,t=>{t.error=""}).addCase(sp.fulfilled,t=>{t.error=""}).addCase(sp.rejected,(t,n)=>{t.error=n.payload}).addCase(op.pending,t=>{t.error=""}).addCase(op.fulfilled,t=>{t.error=""}).addCase(op.rejected,(t,n)=>{t.error=n.payload}).addCase(rd.pending,t=>{t.error=""}).addCase(rd.fulfilled,t=>{t.error=""}).addCase(rd.rejected,(t,n)=>{t.error=n.payload}).addCase(ip.pending,t=>{t.error=""}).addCase(ip.fulfilled,t=>{t.error=""}).addCase(ip.rejected,(t,n)=>{t.error=n.payload}).addCase(ap.pending,t=>{t.error=""}).addCase(ap.fulfilled,t=>{t.error=""}).addCase(ap.rejected,(t,n)=>{t.error=n.payload}).addCase(cp.pending,t=>{t.error=""}).addCase(cp.fulfilled,t=>{t.error=""}).addCase(cp.rejected,(t,n)=>{t.error=n.payload}).addCase(dp.pending,t=>{t.error=""}).addCase(dp.fulfilled,t=>{t.error=""}).addCase(dp.rejected,(t,n)=>{t.error=n.payload}).addCase(up.pending,t=>{t.error=""}).addCase(up.fulfilled,t=>{t.error=""}).addCase(up.rejected,(t,n)=>{t.error=n.payload}).addCase(mp.fulfilled,(t,{meta:n})=>{const{userId:r}=n.arg;t.bannedUsers.length>0&&(t.bannedUsers=t.bannedUsers.filter(s=>s.userId!==r))}).addCase(sd.fulfilled,(t,n)=>{t.bannedUsers=n.payload.bannedList,t.pageBannedUsers=n.payload.page,t.totalPagesBannedUsers=n.payload.total,t.error=""}).addCase(gp.fulfilled,(t,{meta:n})=>{const{voiceChannelId:r,maxCount:s}=n.arg,o=t.serverData.channels.voiceChannels.findIndex(a=>a.channelId===r);o!==-1&&(t.serverData.channels.voiceChannels[o]={...t.serverData.channels.voiceChannels[o],maxCount:s}),t.error=""}).addCase(ep.pending,t=>{t.error=""}).addCase(ep.fulfilled,t=>{t.error=""}).addCase(ep.rejected,(t,n)=>{t.error=n.payload}).addCase(tp.pending,t=>{t.error=""}).addCase(tp.fulfilled,t=>{t.error=""}).addCase(tp.rejected,(t,n)=>{t.error=n.payload}).addCase(vp.pending,t=>{t.error=""}).addCase(vp.fulfilled,(t,n)=>{t.serverData.icon=n.payload,t.error=""}).addCase(vp.rejected,(t,n)=>{t.error=n.payload}).addCase(od.fulfilled,t=>{t.serverData.isClosed=!t.serverData.isClosed,t.error=""}).addCase(yp.fulfilled,(t,{meta:n})=>{const{serverId:r}=n.arg;t.currentServerId===r&&(t.serverData.isNotifiable=!t.serverData.isNotifiable)}).addCase(id.fulfilled,(t,{meta:n})=>{const{channelId:r}=n.arg,s=t.serverData.channels.textChannels.findIndex(a=>a.channelId===r);s>=0&&(t.serverData.channels.textChannels[s].isNotifiable=!t.serverData.channels.textChannels[s].isNotifiable),t.serverData.channels.notificationChannels.findIndex(a=>a.channelId===r)>=0&&(t.serverData.channels.notificationChannels[s].isNotifiable=!t.serverData.channels.notificationChannels[s].isNotifiable)}).addCase(Sp.fulfilled,(t,{meta:n,payload:r})=>{const{serverId:s}=n.arg;t.currentServerId===s&&(t.serverData.invitationString=r.invitationString),t.error=""}).addMatcher(bn(pp.fulfilled),(t,n)=>{t.roleSettings=n.payload,t.error=""}).addMatcher(bn(pp.pending,fp.pending,wp.pending,hp.pending,sd.pending,mp.pending,gp.pending,lp.pending,od.pending,yp.pending,id.pending,Sp.pending),t=>{t.error=""}).addMatcher(bn(fp.fulfilled,wp.fulfilled,hp.fulfilled,lp.fulfilled),t=>{t.error=""}).addMatcher(bn(pp.rejected,fp.rejected,wp.rejected,hp.rejected,sd.rejected,mp.rejected,gp.rejected,lp.rejected,od.rejected,yp.rejected,id.rejected,Sp.rejected),(t,n)=>{t.error=n.payload})}}),{setCurrentServerId:KS,setCurrentChannelId:Pj,setCurrentVoiceChannelId:ta,addMessage:yT,deleteMessageWs:PV,editMessageWs:MV,addUserWs:NV,deleteUserWs:LV,clearServerData:YS,clearHasNewMessage:OV,setNewServerName:AV,setNewUserName:$V,removeUser:FV,removeServer:wT,editChannelName:zV,addUserOnVoiceChannel:BV,removeUserFromVoiceChannel:UV,toggleUserMuteStatus:QZ,updatedRole:VV,readMessageWs:HV,changeReadedCount:ST,readOwnMessage:bT,addRoleToUserWs:WV,removeRoleFromUserWs:qV,updateVoteWs:GV,setCurrentNotificationChannelId:KV,updateServerIcon:YV,changeUserMuteStatusWs:xT,setCurrentVoiceChannelName:Vw,setCurrentVoiceChannelServerId:Hw}=jj.actions,XV=jj.reducer,XS=({messagesStatus:e,dependencies:t=[],type:n="chat",hasAttachedFiles:r=!1})=>{const s=Ae(),o=I.useRef(null),[a,c]=I.useState(!0),[f,d]=I.useState(!1),p=zS(),h=FS(),{lastBottomMessageId:g,remainingBottomMessagesCount:S,entityId:y}=n==="chat"?p:h,b=I.useCallback(()=>{if(!o.current)return;const{scrollTop:R,scrollHeight:m,clientHeight:v}=o.current,x=R+v>=m-1;c(x),x&&d(!1)},[o]),C=I.useCallback(async(R="smooth")=>{if(o.current){if(S>0&&y){const m=S+1;n==="channel"?await s(ea({channelId:y,number:m,fromMessageId:g,down:!0})):await s(Ji({chatId:y,number:m,fromMessageId:g,down:!0}))}o.current.scrollTo({top:o.current.scrollHeight,behavior:R}),d(!1)}},[o]);return I.useEffect(()=>{a?o.current&&(o.current.scrollTo({top:o.current.scrollHeight,behavior:"smooth"}),n==="channel"&&s(OV())):d(!0)},[...t,a,C]),I.useEffect(()=>{e===Ie.FULFILLED&&o.current&&o.current.scrollTo({top:o.current.scrollHeight,behavior:"instant"})},[e]),{scrollRef:o,isAtBottom:a,showButton:f,handleScroll:b,scrollToBottom:C,buttonOffset:(()=>{let R=10;return r&&(R+=56),R})()}},Mj=()=>{const{roles:e}=re(n=>n.testServerStore.serverData);return{getRoleColor:n=>{const r=e.find(s=>s.id==n);return r?r.color:""}}},QS="files",QV=`${QS}/attachFile`,JV=`${QS}/removeFile`,Nm="/files",ZV=(e,t)=>`${Nm}/item?channelId=${e}&FileId=${t}`,eH=e=>`${Nm}/icon?fileId=${e}`,tH=`${Nm}/message`,nH=`${Nm}/remove`,CT=async(e,t)=>{const{data:n}=await ke.get(ZV(e,t));return n},_T=async e=>{const{data:t}=await ke.get(eH(e));return t},rH=async(e,t)=>{const n=new FormData;n.append("ChannelId",e),n.append("File",t);const{data:r}=await ke.post(tH,n,{headers:{"Content-Type":"multipart/form-data"}});return r},sH=async e=>{await ke.delete(nH,{data:{id:e}})},uc=Pe(QV,async({channelId:e,file:t},{rejectWithValue:n})=>{var r,s;try{return await rH(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||Qe.DEFAULT):n(Qe.DEFAULT)}}),bp=Pe(JV,async({fileId:e},{rejectWithValue:t})=>{var n,r;try{await sH(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),oH={uploadedFiles:[],loading:Ie.IDLE,error:""},Nj=qs({name:QS,initialState:oH,reducers:{clearFiles:e=>{e.uploadedFiles=[]}},extraReducers:e=>{e.addCase(uc.pending,t=>{t.loading=Ie.PENDING,t.error=""}).addCase(uc.fulfilled,(t,n)=>{t.loading=Ie.FULFILLED,t.uploadedFiles=[...t.uploadedFiles,n.payload],t.error=""}).addCase(uc.rejected,(t,n)=>{t.loading=Ie.REJECTED,t.error=n.payload}).addCase(bp.pending,t=>{t.error=""}).addCase(bp.fulfilled,(t,{meta:n})=>{const{fileId:r}=n.arg;t.uploadedFiles=t.uploadedFiles.filter(s=>s.fileId!==r),t.error=""}).addCase(bp.rejected,(t,n)=>{t.error=n.payload})}}),{clearFiles:JS}=Nj.actions,iH=Nj.reducer,Fl=new Map,zl=new Set,xf=new Map,Es=(e,t={})=>{const[n,r]=I.useState(null),[s,o]=I.useState(!1),[a,c]=I.useState(null);return I.useEffect(()=>{if(t.skip||!e){r(null);return}if(zl.has(e)){c("Failed to load icon"),r(null);return}if(Fl.has(e)){r(Fl.get(e));return}let d=xf.get(e);d||(d=_T(e).then(p=>{const h=`data:${p.fileType};base64,${p.base64File}`;return Fl.set(e,h),zl.delete(e),h}).catch(p=>{throw console.error("Error fetching icon:",p),zl.add(e),p}).finally(()=>{xf.delete(e)}),xf.set(e,d)),o(!0),d.then(p=>{r(p),c(null)}).catch(()=>{r(null),c("Failed to load icon")}).finally(()=>o(!1))},[e,t.skip]),{iconBase64:n,loading:s,error:a,refetch:async()=>{if(e){Fl.delete(e),zl.delete(e),xf.delete(e),o(!0);try{const d=await _T(e),p=`data:${d.fileType};base64,${d.base64File}`;Fl.set(e,p),r(p),c(null)}catch(d){console.error("Error refetching icon:",d),c("Failed to reload icon"),zl.add(e),r(null)}finally{o(!1)}}},isEmpty:!e}},Lj=()=>{const e=re(d=>d.subChatStore.messages),t=re(d=>d.subChatStore.messageIsLoading),n=re(d=>d.subChatStore.remainingTopMessagesCount),r=re(d=>d.subChatStore.lastTopMessageId),s=re(d=>d.subChatStore.remainingBottomMessagesCount),o=re(d=>d.subChatStore.lastBottomMessageId),a=re(d=>d.subChatStore.startMessageId),c=re(d=>d.subChatStore.allMessagesCount),f=re(d=>d.subChatStore.currentSubChatId);return{messages:e,messagesStatus:t,remainingTopMessagesCount:n,lastTopMessageId:r,remainingBottomMessagesCount:s,lastBottomMessageId:o,startMessageId:a,allMessagesCount:c,entityId:f,lastReadedMessageId:0}},Oj=()=>{var f;const{currentVoiceChannelId:e,serverData:t}=re(d=>d.testServerStore),[n,r]=I.useState([]),o=(f=t.channels.voiceChannels.find(d=>d.channelId===e))==null?void 0:f.users,a=(d,p)=>d.some(g=>n.some(S=>S.producerId===g))&&p===e,c=d=>{const p=o==null?void 0:o.find(h=>h.userId===d);return p?p.muteStatus===dc.Muted||p.muteStatus===dc.SelfMuted:!1};return I.useEffect(()=>{if(ot)return ot.on("active-speakers",({activeSpeakers:d})=>{r(d)}),()=>{ot.off("active-speakers")}},[]),{calculateIsSpeaking:a,getIsMuted:c}},Aj=({isStreaming:e,consumers:t,userProducerIds:n,isPreviewActive:r=!0,volume:s=1})=>{const o=I.useRef(null),a=I.useRef(null),c=I.useRef("");return I.useEffect(()=>{o.current&&(o.current.volume=Math.max(0,Math.min(1,s)))},[s]),I.useEffect(()=>{if(!e||t.length===0||n.length===0){o.current&&(o.current.srcObject=null),c.current="";return}if(!r){o.current&&(o.current.srcObject=null),c.current="";return}const f=t.find(h=>{var g;return h.kind==="video"&&((g=h.appData)==null?void 0:g.source)==="screen-video"&&n.includes(h.producerId)}),d=t.find(h=>{var g;return h.kind==="audio"&&((g=h.appData)==null?void 0:g.source)==="screen-audio"&&n.includes(h.producerId)}),p=[];if(f!=null&&f.track&&p.push(f.track),d!=null&&d.track&&p.push(d.track),p.length>0){const h=p.map(g=>g.id).join(",");if(c.current!==h){c.current=h;const g=new MediaStream(p);a.current=g,o.current&&(o.current.srcObject=g,o.current.play().catch(S=>console.error("  :",S)))}}else o.current&&(o.current.srcObject=null),c.current=""},[e,r,t,n]),{videoRef:o,previewStreamRef:a}},aH=({consumers:e,userProducerIds:t})=>{const n=I.useRef(null),r=I.useRef(null);return I.useEffect(()=>{const s=e.find(a=>{var c;return a.kind==="video"&&((c=a.appData)==null?void 0:c.source)==="camera"&&t.includes(a.producerId)});if(!(s!=null&&s.track)||s.track.readyState==="ended"){r.current=null,n.current&&(n.current.srcObject=null);return}r.current||(r.current=new MediaStream([s.track]));const o=n.current;o&&o.srcObject!==r.current&&(o.srcObject=r.current,o.play().catch(()=>{}))},[e,t]),{videoRef:n,streamRef:r}},By="notificationVolume",cH=.525,RT=.35,Lm=()=>{const[e,t]=I.useState(()=>{const s=localStorage.getItem(By);return s?Number(s):RT});I.useEffect(()=>{const s=o=>{if(o.key===By&&o.newValue!==null){const a=Number(o.newValue);a!==e&&t(a)}};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[e]);const n=s=>{const o=Math.max(0,Math.min(cH,s));localStorage.setItem(By,o.toString()),t(o)},r=Math.round(e/RT*100);return{volume:e,volumePercent:r,setNotificationVolume:n}},Uy="preloadImages",$j=()=>{const[e,t]=I.useState(()=>{const r=localStorage.getItem(Uy);return r===null?!0:r==="true"});return I.useEffect(()=>{const r=s=>{if(s.key===Uy&&s.newValue!==null){const o=s.newValue==="true";o!==e&&t(o)}};return window.addEventListener("storage",r),()=>window.removeEventListener("storage",r)},[e]),{preloadImages:e,setPreloadImages:r=>{localStorage.setItem(Uy,String(r)),t(r)}}};var at=(e=>(e.CHAT="CHAT",e.CHANNEL="CHANNEL",e.SUBCHAT="SUBCHAT",e))(at||{});/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fj=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=I.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...c},f)=>I.createElement("svg",{ref:f,...dH,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Fj("lucide",s),...c},[...a.map(([d,p])=>I.createElement(d,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(e,t)=>{const n=I.forwardRef(({className:r,...s},o)=>I.createElement(uH,{ref:o,iconNode:t,className:Fj(`lucide-${lH(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ZS=$e("ArrowDown",fH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=[["path",{d:"m9 6-6 6 6 6",key:"7v63n9"}],["path",{d:"M3 12h14",key:"13k4hi"}],["path",{d:"M21 19V5",key:"b4bplr"}]],hH=$e("ArrowLeftFromLine",pH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],eb=$e("ArrowLeft",mH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gH=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],vH=$e("ArrowRight",gH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],wH=$e("Ban",yH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],Bd=$e("BellOff",SH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],xH=$e("BellRing",bH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],gi=$e("Bell",CH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]],zj=$e("BookUser",_H);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Om=$e("Calendar",RH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11h8",key:"1feolt"}],["path",{d:"M7 16h12",key:"wsnu98"}],["path",{d:"M7 6h3",key:"w9rmul"}]],EH=$e("ChartBarIncreasing",TH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Am=$e("Check",kH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ud=$e("ChevronDown",IH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],jH=$e("ChevronLeft",DH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ao=$e("ChevronRight",PH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Vy=$e("CircleAlert",MH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],LH=$e("CircleCheck",NH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],AH=$e("CirclePlus",OH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],FH=$e("CircleX",$H);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Bj=$e("Copy",zH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]],Ww=$e("DoorOpen",BH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Uj=$e("EllipsisVertical",UH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],HH=$e("FileArchive",VH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qH=$e("FileText",WH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 18a3 3 0 1 0-6 0",key:"16awa0"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}]],KH=$e("FileUser",GH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Vj=$e("File",YH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],QH=$e("Hash",XH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ZH=$e("House",JH);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21",key:"9csbqa"}],["path",{d:"m14 19.5 3-3 3 3",key:"9vmjn0"}],["path",{d:"M17 22v-5.5",key:"1aa6fl"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],tW=$e("ImageUp",eW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],rW=$e("Image",nW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],oW=$e("ListChecks",sW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Hj=$e("LockOpen",iW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cW=$e("Lock",aW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Wj=$e("LogOut",lW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],uW=$e("Mail",dW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],pW=$e("Menu",fW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],mW=$e("MessageSquarePlus",hW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gW=[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]],vW=$e("MessagesSquare",gW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yW=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],ad=$e("MicOff",yW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wW=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],qj=$e("Mic",wW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SW=[["path",{d:"m9 10 3-3 3 3",key:"11gsxs"}],["path",{d:"M12 13V7",key:"h0r20n"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]],Gj=$e("MonitorUp",SW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bW=[["path",{d:"m14.5 12.5-5-5",key:"1jahn5"}],["path",{d:"m9.5 12.5 5-5",key:"1k2t7b"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]],Kj=$e("MonitorX",bW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xW=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],tb=$e("Paperclip",xW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CW=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_W=$e("Pen",CW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RW=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],$m=$e("Pencil",RW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TW=[["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["line",{x1:"16",x2:"22",y1:"2",y2:"8",key:"13zxdn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Yj=$e("PhoneMissed",TW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yo=$e("Plus",EW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kW=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],qw=$e("Reply",kW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IW=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Fm=$e("Save",IW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DW=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],nb=$e("Send",DW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],PW=$e("Server",jW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MW=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vd=$e("Settings",MW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NW=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],LW=$e("SlidersHorizontal",NW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OW=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],AW=$e("Tag",OW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $W=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],zm=$e("Trash2",$W);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],rb=$e("Trash",FW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=[["path",{d:"m19 5 3-3",key:"yk6iyv"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z",key:"1snsnr"}]],BW=$e("Unplug",zW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],VW=$e("Upload",UW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],WW=$e("UserCheck",HW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]],Xj=$e("UserPen",qW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],KW=$e("UserMinus",GW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Qj=$e("UserPlus",YW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=[["path",{d:"M2 21a8 8 0 0 1 10.434-7.62",key:"1yezr2"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["path",{d:"m19.5 14.3-.4.9",key:"1eb35c"}],["path",{d:"m16.9 20.8-.4.9",key:"dfjc4z"}],["path",{d:"m21.7 19.5-.9-.4",key:"q4dx6b"}],["path",{d:"m15.2 16.9-.9-.4",key:"1r0w5f"}],["path",{d:"m21.7 16.5-.9.4",key:"1knoei"}],["path",{d:"m15.2 19.1-.9.4",key:"j188fs"}],["path",{d:"m19.5 21.7-.4-.9",key:"1tonu5"}],["path",{d:"m16.9 15.2-.4-.9",key:"699xu"}]],Jj=$e("UserRoundCog",XW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=[["path",{d:"M2 21a8 8 0 0 1 10.821-7.487",key:"1c8h7z"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}]],Zj=$e("UserRoundPen",QW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],e2=$e("User",JW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],eq=$e("UsersRound",ZW);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],t2=$e("Users",tq);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nq=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],n2=$e("VideoOff",nq);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],wh=$e("Video",rq);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sq=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],sb=$e("Volume2",sq);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],To=$e("X",oq),Za={box:(e,t,n)=>({position:"relative",backgroundColor:t?"transparent":e?"var(--color-primary)":"var(--color-surface-2)",color:"var(--color-white)",padding:t?0:"10px 14px",borderRadius:"12px",maxWidth:"75%",display:"flex",flexDirection:"column",width:t?"100%":"auto",border:t?"none":n?"1px solid rgba(250, 204, 21, 0.5)":e?"1px solid var(--border-primary-soft)":"1px solid var(--color-white-05)",boxShadow:t?"none":n?"0 0 8px rgba(250, 204, 21, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2)":e?"0 2px 8px var(--color-primary-20), 0 1px 2px rgba(0, 0, 0, 0.1)":"0 2px 4px rgba(0, 0, 0, 0.15)",transition:"all 0.2s ease"}),breakText:()=>({wordWrap:"break-word",whiteSpace:"pre-wrap",wordBreak:"break-word",lineHeight:"1.5"}),meta:e=>({marginTop:4,fontSize:12,color:e?"rgba(255, 255, 255, 0.8)":"rgba(255, 255, 255, 0.6)",alignSelf:"flex-start"}),container:()=>({padding:"8px 12px",borderRadius:"8px",transition:"background-color 0.2s ease"}),actionButtons:()=>({transition:"all 0.2s ease"})};function iq(e,t,n,r,s){return r+(s-r)*((e-t)/(n-t))}function ob(e){return typeof e=="number"}function TT(e){return typeof e=="string"}function Gw(e){return Object.prototype.toString.call(e)==="[object Object]"}function aq(e){return Array.isArray(e)}function ET(e){return Gw(e)||aq(e)}function Yt(e){return Math.abs(e)}function ib(e){return e?e/Yt(e):0}function Ql(e,t){return Yt(e-t)}function cq(e,t){if(e===0||t===0||Yt(e)<=Yt(t))return 0;var n=Ql(Yt(e),Yt(t));return Yt(n/e)}function lq(e){var t=Math.pow(10,e);return function(n){return Math.round(n*t)/t}}function Cd(e){return na(e).map(Number)}function fo(e){return e[Bm(e)]}function Bm(e){return Math.max(0,e.length-1)}function na(e){return Object.keys(e)}function r2(e,t){return[e,t].reduce(function(n,r){return na(r).forEach(function(s){var o=n[s],a=r[s],c=Gw(o)&&Gw(a);n[s]=c?r2(o,a):a}),n},{})}function s2(e,t){var n=na(e),r=na(t);return n.length!==r.length?!1:n.every(function(s){var o=e[s],a=t[s];return typeof o=="function"?"".concat(o)==="".concat(a):!ET(o)||!ET(a)?o===a:s2(o,a)})}function dq(e,t){var n={start:r,center:s,end:o};function r(){return 0}function s(d){return o(d)/2}function o(d){return t-d}function a(){return t*Number(e)}function c(d){return ob(e)?a():n[e](d)}var f={measure:c};return f}function uq(e){var t=0;function n(a,c){return function(){a===!!t&&c()}}function r(){t=window.requestAnimationFrame(e)}function s(){window.cancelAnimationFrame(t),t=0}var o={proceed:n(!0,r),start:n(!1,r),stop:n(!0,s)};return o}function fq(e,t){var n=e==="y"?"y":"x",r=e==="y"?"x":"y",s=c(),o=f();function a(p){var h=p.width,g=p.height;return n==="x"?h:g}function c(){return n==="y"?"top":t==="rtl"?"right":"left"}function f(){return n==="y"?"bottom":t==="rtl"?"left":"right"}var d={scroll:n,cross:r,startEdge:s,endEdge:o,measureSize:a};return d}function Sc(e,t){var n=Yt(e-t);function r(d){return d<e}function s(d){return d>t}function o(d){return r(d)||s(d)}function a(d){return o(d)?r(d)?e:t:d}function c(d){return n?d-n*Math.ceil((d-t)/n):d}var f={length:n,max:t,min:e,constrain:a,reachedAny:o,reachedMax:s,reachedMin:r,removeOffset:c};return f}function o2(e,t,n){var r=Sc(0,e),s=r.min,o=r.constrain,a=e+1,c=f(t);function f(y){return n?Yt((a+y)%a):o(y)}function d(){return c}function p(y){return c=f(y),S}function h(y){return p(d()+y)}function g(){return o2(e,d(),n)}var S={add:h,clone:g,get:d,set:p,min:s,max:e};return S}function pq(e){var t=e==="rtl"?-1:1;function n(s){return s*t}var r={apply:n};return r}function Sh(){var e=[];function t(s,o,a,c){return c===void 0&&(c={passive:!0}),s.addEventListener(o,a,c),e.push(function(){return s.removeEventListener(o,a,c)}),r}function n(){return e=e.filter(function(s){return s()}),r}var r={add:t,removeAll:n};return r}function si(e){var t=e;function n(){return t}function r(h){return t=d(h),p}function s(h){return t+=d(h),p}function o(h){return t-=d(h),p}function a(h){return t*=h,p}function c(h){return t/=h,p}function f(){return t!==0&&c(t),p}function d(h){return ob(h)?h:h.get()}var p={add:s,divide:c,get:n,multiply:a,normalize:f,set:r,subtract:o};return p}function hq(e,t,n,r,s,o,a,c,f,d,p,h,g,S,y,b){var C=e.cross,T=["INPUT","SELECT","TEXTAREA"],R={passive:!1},m=si(0),v=Sh(),x=Sh(),_=g.measure(20),k={mouse:300,touch:400},D={mouse:500,touch:600},M=y?5:16,P=1,L=0,O=0,V=!1,H=!1,q=!1,N=!1;function B(){var Z=n;v.add(Z,"dragstart",function(fe){return fe.preventDefault()},R).add(Z,"touchmove",function(){},R).add(Z,"touchend",function(){}).add(Z,"touchstart",te).add(Z,"mousedown",te).add(Z,"touchcancel",Q).add(Z,"contextmenu",Q).add(Z,"click",se,!0)}function $(){var Z=N?document:n;x.add(Z,"touchmove",ne,R).add(Z,"touchend",Q).add(Z,"mousemove",ne,R).add(Z,"mouseup",Q)}function F(){v.removeAll(),x.removeAll()}function z(Z){var fe=Z.nodeName||"";return T.indexOf(fe)>-1}function U(){var Z=y?D:k,fe=N?"mouse":"touch";return Z[fe]}function G(Z,fe){var xe=p.clone().add(ib(Z)*-1),ye=xe.get()===p.min||xe.get()===p.max,Ee=d.byDistance(Z,!y).distance;return y||Yt(Z)<_?Ee:!S&&ye?Ee*.4:b&&fe?Ee*.5:d.byIndex(xe.get(),0).distance}function te(Z){if(N=!s.isTouchEvent(Z),!(N&&Z.button!==0)&&!z(Z.target)){var fe=Ql(r.get(),o.get())>=2,xe=N||!fe;V=!0,s.pointerDown(Z),m.set(r),r.set(o),f.useBaseMass().useSpeed(80),$(),L=s.readPoint(Z),O=s.readPoint(Z,C),h.emit("pointerDown"),xe&&(q=!1)}}function ne(Z){if(!H&&!N){if(!Z.cancelable)return Q(Z);var fe=s.readPoint(Z),xe=s.readPoint(Z,C),ye=Ql(fe,L),Ee=Ql(xe,O);if(H=ye>Ee,!H&&!q)return Q(Z)}var Be=s.pointerMove(Z);!q&&Be&&(q=!0),a.start(),r.add(t.apply(Be)),Z.preventDefault()}function Q(Z){var fe=d.byDistance(0,!1),xe=fe.index!==p.get(),ye=s.pointerUp(Z)*U(),Ee=G(t.apply(ye),xe),Be=cq(ye,Ee),et=Ql(r.get(),m.get())>=.5,pe=xe&&Be>.75,_e=Yt(ye)<_,je=pe?10:M,Ue=pe?P+2.5*Be:P;et&&!N&&(q=!0),H=!1,V=!1,x.removeAll(),f.useSpeed(_e?9:je).useMass(Ue),c.distance(Ee,!y),N=!1,h.emit("pointerUp")}function se(Z){q&&(Z.stopPropagation(),Z.preventDefault())}function X(){return!q}function oe(){return V}var K={addActivationEvents:B,clickAllowed:X,pointerDown:oe,removeAllEvents:F};return K}function mq(e){var t=170,n,r;function s(h){return typeof TouchEvent<"u"&&h instanceof TouchEvent}function o(h){return h.timeStamp}function a(h,g){var S=g||e.scroll,y="client".concat(S==="x"?"X":"Y");return(s(h)?h.touches[0]:h)[y]}function c(h){return n=h,r=h,a(h)}function f(h){var g=a(h)-a(r),S=o(h)-o(n)>t;return r=h,S&&(n=h),g}function d(h){if(!n||!r)return 0;var g=a(r)-a(n),S=o(h)-o(n),y=o(h)-o(r)>t,b=g/S,C=S&&!y&&Yt(b)>.1;return C?b:0}var p={isTouchEvent:s,pointerDown:c,pointerMove:f,pointerUp:d,readPoint:a};return p}function gq(e){function t(r){return e*(r/100)}var n={measure:t};return n}function vq(e,t,n){var r=lq(2),s=si(0),o=si(0),a=si(0),c=0,f=t,d=n;function p(){s.add(o),e.add(s),o.multiply(0)}function h(v){v.divide(d),o.add(v)}function g(v){a.set(v).subtract(e);var x=iq(a.get(),0,100,0,f);return c=ib(a.get()),a.normalize().multiply(x).subtract(s),h(a),m}function S(v){var x=v.get()-e.get(),_=!r(x);return _&&e.set(v),_}function y(){return c}function b(){return T(t)}function C(){return R(n)}function T(v){return f=v,m}function R(v){return d=v,m}var m={direction:y,seek:g,settle:S,update:p,useBaseMass:C,useBaseSpeed:b,useMass:R,useSpeed:T};return m}function yq(e,t,n,r,s){var o=s.measure(10),a=s.measure(50),c=.85,f=!1;function d(){return!(f||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function p(S){if(d()){var y=e.reachedMin(t.get())?"min":"max",b=Yt(e[y]-t.get()),C=n.get()-t.get(),T=Math.min(b/a,c);n.subtract(C*T),!S&&Yt(C)<o&&(n.set(e.constrain(n.get())),r.useSpeed(10).useMass(3))}}function h(S){f=!S}var g={constrain:p,toggleActive:h};return g}function wq(e,t,n,r){var s=Sc(-t+e,n[0]),o=n.map(s.constrain),a=f();function c(){var p=o[0],h=fo(o),g=o.lastIndexOf(p),S=o.indexOf(h)+1;return Sc(g,S)}function f(){if(t<=e)return[s.max];if(r==="keepSnaps")return o;var p=c(),h=p.min,g=p.max;return o.slice(h,g)}var d={snapsContained:a};return d}function Sq(e,t,n){var r=s();function s(){var a=t[0],c=fo(t),f=n?a-e:c,d=a;return Sc(f,d)}var o={limit:r};return o}function bq(e,t,n,r){var s=.1,o=t.min+s,a=t.max+s,c=Sc(o,a),f=c.reachedMin,d=c.reachedMax;function p(S){return S===1?d(n.get()):S===-1?f(n.get()):!1}function h(S){if(p(S)){var y=e*(S*-1);r.forEach(function(b){return b.add(y)})}}var g={loop:h};return g}function xq(e){var t=e.max,n=e.length;function r(o){var a=o-t;return a/-n}var s={get:r};return s}function Cq(e,t,n,r,s,o,a){var c=e.startEdge,f=e.endEdge,d=o.groupSlides,p=S().map(t.measure),h=y(),g=b();function S(){return d(r).map(function(T){return fo(T)[f]-T[0][c]}).map(Yt)}function y(){return r.map(function(T){return n[c]-T[c]}).map(function(T){return-Yt(T)})}function b(){var T=0,R=fo(h)-fo(s);return d(h).map(function(m){return m[0]}).map(function(m,v,x){var _=!v,k=v===Bm(x);return a&&_?T:a&&k?R:m+p[v]})}var C={snaps:h,snapsAligned:g};return C}function _q(e,t,n,r,s){var o=r.reachedAny,a=r.removeOffset,c=r.constrain;function f(y){return y.concat().sort(function(b,C){return Yt(b)-Yt(C)})[0]}function d(y){var b=e?a(y):c(y),C=t.map(function(R){return R-b}).map(function(R){return p(R,0)}).map(function(R,m){return{diff:R,index:m}}).sort(function(R,m){return Yt(R.diff)-Yt(m.diff)}),T=C[0].index;return{index:T,distance:b}}function p(y,b){var C=[y,y+n,y-n];if(!e)return C[0];if(!b)return f(C);var T=C.filter(function(R){return ib(R)===b});return f(T)}function h(y,b){var C=t[y]-s.get(),T=p(C,b);return{index:y,distance:T}}function g(y,b){var C=s.get()+y,T=d(C),R=T.index,m=T.distance,v=!e&&o(C);if(!b||v)return{index:R,distance:y};var x=t[R]-m,_=y+p(x,0);return{index:R,distance:_}}var S={byDistance:g,byIndex:h,shortcut:p};return S}function Rq(e,t,n,r,s,o){function a(p){var h=p.distance,g=p.index!==t.get();h&&(e.start(),s.add(h)),g&&(n.set(t.get()),t.set(p.index),o.emit("select"))}function c(p,h){var g=r.byDistance(p,h);a(g)}function f(p,h){var g=t.clone().set(p),S=r.byIndex(g.get(),h);a(S)}var d={distance:c,index:f};return d}function i2(e,t,n){var r=e.scroll==="x"?a:c,s=n.style,o=!1;function a(g){return"translate3d(".concat(g,"px,0px,0px)")}function c(g){return"translate3d(0px,".concat(g,"px,0px)")}function f(g){o||(s.transform=r(t.apply(g.get())))}function d(g){o=!g}function p(){o||(s.transform="",n.getAttribute("style")||n.removeAttribute("style"))}var h={clear:p,to:f,toggleActive:d};return h}function Tq(e,t,n,r,s,o,a,c,f){var d=Cd(s),p=Cd(s).reverse(),h=b().concat(C());function g(x,_){return x.reduce(function(k,D){return k-s[D]},_)}function S(x,_){return x.reduce(function(k,D){var M=g(k,_);return M>0?k.concat([D]):k},[])}function y(x,_){var k=_==="start",D=k?-r:r,M=a.findSlideBounds([D]);return x.map(function(P){var L=k?0:-r,O=k?r:0,V=M.filter(function(F){return F.index===P})[0],H=V[k?"end":"start"],q=si(-1),N=si(-1),B=i2(e,t,f[P]),$=function(){return q.set(c.get()>H?L:O)};return{index:P,location:N,translate:B,target:$}})}function b(){var x=o[0]-1,_=S(p,x);return y(_,"end")}function C(){var x=n-o[0]-1,_=S(d,x);return y(_,"start")}function T(){return h.every(function(x){var _=x.index,k=d.filter(function(D){return D!==_});return g(k,n)<=.1})}function R(){h.forEach(function(x){var _=x.target,k=x.translate,D=x.location,M=_();M.get()!==D.get()&&(M.get()===0?k.clear():k.to(M),D.set(M))})}function m(){h.forEach(function(x){return x.translate.clear()})}var v={canLoop:T,clear:m,loop:R,loopPoints:h};return v}function Eq(e,t,n,r,s,o,a){var c=s.removeOffset,f=s.constrain,d=.5,p=o?[0,t,-t]:[0],h=S(p,a);function g(C){var T=C||0;return n.map(function(R){var m=Sc(d,R-d);return m.constrain(R*T)})}function S(C,T){var R=C||p,m=g(T);return R.reduce(function(v,x){var _=r.map(function(k,D){return{start:k-n[D]+m[D]+x,end:k+e-m[D]+x,index:D}});return v.concat(_)},[])}function y(C,T){var R=o?c(C):f(C),m=T||h;return m.reduce(function(v,x){var _=x.index,k=x.start,D=x.end,M=v.indexOf(_)!==-1,P=k<R&&D>R;return!M&&P?v.concat([_]):v},[])}var b={check:y,findSlideBounds:S};return b}function kq(e,t,n,r,s){var o=e.measureSize,a=e.startEdge,c=e.endEdge,f=n[0]&&s,d=S(),p=y(),h=n.map(o),g=b();function S(){if(!f)return 0;var T=n[0];return Yt(t[a]-T[a])}function y(){if(!f)return 0;var T=window.getComputedStyle(fo(r));return parseFloat(T.getPropertyValue("margin-".concat(c)))}function b(){return n.map(function(T,R,m){var v=!R,x=R===Bm(m);return v?h[R]+d:x?h[R]+p:m[R+1][a]-T[a]}).map(Yt)}var C={slideSizes:h,slideSizesWithGaps:g};return C}function Iq(e,t,n){var r=ob(n);function s(f,d){return Cd(f).filter(function(p){return p%d===0}).map(function(p){return f.slice(p,p+d)})}function o(f){return Cd(f).reduce(function(d,p){var h=t.slice(fo(d),p+1),g=h.reduce(function(S,y){return S+y},0);return!p||g>e?d.concat(p):d},[]).map(function(d,p,h){return f.slice(d,h[p+1])})}function a(f){return r?s(f,n):o(f)}var c={groupSlides:a};return c}function Dq(e,t,n,r,s){var o=r.align,a=r.axis,c=r.direction,f=r.startIndex,d=r.inViewThreshold,p=r.loop,h=r.speed,g=r.dragFree,S=r.slidesToScroll,y=r.skipSnaps,b=r.containScroll,C=t.getBoundingClientRect(),T=n.map(function(Ee){return Ee.getBoundingClientRect()}),R=pq(c),m=fq(a,c),v=m.measureSize(C),x=gq(v),_=dq(o,v),k=!p&&b!=="",D=p||b!=="",M=kq(m,C,T,n,D),P=M.slideSizes,L=M.slideSizesWithGaps,O=Iq(v,L,S),V=Cq(m,_,C,T,L,O,k),H=V.snaps,q=V.snapsAligned,N=-fo(H)+fo(L),B=wq(v,N,q,b).snapsContained,$=k?B:q,F=Sq(N,$,p).limit,z=o2(Bm($),f,p),U=z.clone(),G=Cd(n),te=function(){p||ye.scrollBounds.constrain(ye.dragHandler.pointerDown()),ye.scrollBody.seek(X).update();var Ee=ye.scrollBody.settle(X);Ee&&!ye.dragHandler.pointerDown()&&(ye.animation.stop(),s.emit("settle")),Ee||s.emit("scroll"),p&&(ye.scrollLooper.loop(ye.scrollBody.direction()),ye.slideLooper.loop()),ye.translate.to(se),ye.animation.proceed()},ne=uq(te),Q=$[z.get()],se=si(Q),X=si(Q),oe=vq(se,h,1),K=_q(p,$,N,F,X),Z=Rq(ne,z,U,K,X,s),fe=Eq(v,N,P,H,F,p,d),xe=hq(m,R,e,X,mq(m),se,ne,Z,oe,K,z,s,x,p,g,y),ye={containerRect:C,slideRects:T,animation:ne,axis:m,direction:R,dragHandler:xe,eventStore:Sh(),percentOfView:x,index:z,indexPrevious:U,limit:F,location:se,options:r,scrollBody:oe,scrollBounds:yq(F,se,X,oe,x),scrollLooper:bq(N,F,se,[se,X]),scrollProgress:xq(F),scrollSnaps:$,scrollTarget:K,scrollTo:Z,slideLooper:Tq(m,R,v,N,L,$,fe,se,n),slidesToScroll:O,slidesInView:fe,slideIndexes:G,target:X,translate:i2(m,R,t)};return ye}function jq(){var e={};function t(a){return e[a]||[]}function n(a){return t(a).forEach(function(c){return c(a)}),o}function r(a,c){return e[a]=t(a).concat([c]),o}function s(a,c){return e[a]=t(a).filter(function(f){return f!==c}),o}var o={emit:n,off:s,on:r};return o}var Pq={align:"center",axis:"x",container:null,slides:null,containScroll:"",direction:"ltr",slidesToScroll:1,breakpoints:{},dragFree:!1,draggable:!0,inViewThreshold:0,loop:!1,skipSnaps:!1,speed:10,startIndex:0,active:!0};function ab(){function e(s,o){return r2(s,o||{})}function t(s,o){var a=JSON.stringify(na(s.breakpoints||{})),c=JSON.stringify(na(o.breakpoints||{}));return a!==c?!1:s2(s,o)}function n(s){var o=s.breakpoints||{},a=na(o).filter(function(c){return window.matchMedia(c).matches}).map(function(c){return o[c]}).reduce(function(c,f){return e(c,f)},{});return e(s,a)}var r={merge:e,areEqual:t,atMedia:n};return r}function Mq(){var e=ab(),t=e.atMedia,n=e.areEqual,r=[],s=[];function o(){return s.some(function(p){return p()})}function a(p){var h=t(p.options);return function(){return!n(h,t(p.options))}}function c(p,h){return s=p.map(a),r=p.filter(function(g){return t(g.options).active}),r.forEach(function(g){return g.init(h)}),p.reduce(function(g,S){var y;return Object.assign(g,(y={},y[S.name]=S,y))},{})}function f(){r=r.filter(function(p){return p.destroy()})}var d={init:c,destroy:f,haveChanged:o};return d}function ra(e,t,n){var r=Sh(),s=ab(),o=Mq(),a=jq(),c=a.on,f=a.off,d=x,p=!1,h,g=s.merge(Pq,ra.globalOptions),S=s.merge(g),y=[],b,C=0,T,R;function m(){var X=S.container,oe=S.slides,K=TT(X)?e.querySelector(X):X;T=K||e.children[0];var Z=TT(oe)?T.querySelectorAll(oe):oe;R=[].slice.call(Z||T.children)}function v(X,oe){if(!p){if(g=s.merge(g,X),S=s.atMedia(g),m(),h=Dq(e,T,R,S,a),C=h.axis.measureSize(e.getBoundingClientRect()),!S.active)return _();if(h.translate.to(h.location),y=oe||y,b=o.init(y,se),S.loop){if(!h.slideLooper.canLoop()){_(),v({loop:!1},oe),g=s.merge(g,{loop:!0});return}h.slideLooper.loop()}S.draggable&&T.offsetParent&&R.length&&h.dragHandler.addActivationEvents()}}function x(X,oe){var K=$();_(),v(s.merge({startIndex:K},X),oe),a.emit("reInit")}function _(){h.dragHandler.removeAllEvents(),h.animation.stop(),h.eventStore.removeAll(),h.translate.clear(),h.slideLooper.clear(),o.destroy()}function k(){p||(p=!0,r.removeAll(),_(),a.emit("destroy"))}function D(){var X=s.atMedia(g),oe=!s.areEqual(X,S),K=h.axis.measureSize(e.getBoundingClientRect()),Z=C!==K,fe=o.haveChanged();(Z||oe||fe)&&x(),a.emit("resize")}function M(X){var oe=h[X?"target":"location"].get(),K=S.loop?"removeOffset":"constrain";return h.slidesInView.check(h.limit[K](oe))}function P(X){var oe=M(X);return h.slideIndexes.filter(function(K){return oe.indexOf(K)===-1})}function L(X,oe,K){!S.active||p||(h.scrollBody.useBaseMass().useSpeed(oe?100:S.speed),h.scrollTo.index(X,K||0))}function O(X){var oe=h.index.clone().add(1);L(oe.get(),X===!0,-1)}function V(X){var oe=h.index.clone().add(-1);L(oe.get(),X===!0,1)}function H(){var X=h.index.clone().add(1);return X.get()!==$()}function q(){var X=h.index.clone().add(-1);return X.get()!==$()}function N(){return h.scrollSnaps.map(h.scrollProgress.get)}function B(){return h.scrollProgress.get(h.location.get())}function $(){return h.index.get()}function F(){return h.indexPrevious.get()}function z(){return h.dragHandler.clickAllowed()}function U(){return b}function G(){return h}function te(){return e}function ne(){return T}function Q(){return R}var se={canScrollNext:H,canScrollPrev:q,clickAllowed:z,containerNode:ne,internalEngine:G,destroy:k,off:f,on:c,plugins:U,previousScrollSnap:F,reInit:d,rootNode:te,scrollNext:O,scrollPrev:V,scrollProgress:B,scrollSnapList:N,scrollTo:L,selectedScrollSnap:$,slideNodes:Q,slidesInView:M,slidesNotInView:P};return v(t,n),r.add(window,"resize",D),setTimeout(function(){return a.emit("init")},0),se}ra.globalOptions=void 0;ra.optionsHandler=ab;function Nq(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function kT(e){return e.concat().sort(function(t,n){return t.name>n.name?1:-1}).map(function(t){return t.options})}function Lq(e,t){if(e.length!==t.length)return!1;var n=ra.optionsHandler().areEqual,r=kT(e),s=kT(t);return r.every(function(o,a){var c=s[a];return n(o,c)})}function cb(e,t){e===void 0&&(e={}),t===void 0&&(t=[]);var n=I.useRef(ra.optionsHandler()),r=I.useRef(e),s=I.useRef(t),o=I.useState(),a=o[0],c=o[1],f=I.useState(),d=f[0],p=f[1],h=I.useCallback(function(){a&&a.reInit(r.current,s.current)},[a]);return I.useEffect(function(){if(Nq()&&d){ra.globalOptions=cb.globalOptions;var g=ra(d,r.current,s.current);return c(g),function(){return g.destroy()}}else c(void 0)},[d,c]),I.useEffect(function(){n.current.areEqual(r.current,e)||(r.current=e,h())},[e,h]),I.useEffect(function(){Lq(s.current,t)||(s.current=t,h())},[t,h]),[p,a]}cb.globalOptions=void 0;const[Oq,Aq]=cr("Carousel component was not found in tree");var lb={root:"m_17884d0f",viewport:"m_a2dae653",container:"m_fcd81474",controls:"m_39bc3463",control:"m_64f58e10",indicators:"m_71ea3ab1",indicator:"m_eae68602",slide:"m_d98df724"};const $q={},db=we((e,t)=>{const{classNames:n,className:r,style:s,styles:o,vars:a,mod:c,...f}=le("CarouselSlide",$q,e),d=Aq();return u.jsx(ie,{ref:t,mod:[{orientation:d.orientation},c],...d.getStyles("slide",{className:r,style:s,classNames:n,styles:o}),...f})});db.classes=lb;db.displayName="@mantine/carousel/CarouselSlide";function Fq({slideGap:e,slideSize:t,selector:n}){const r=jn(),s=li({"--carousel-slide-gap":Nt(Fs(e)),"--carousel-slide-size":he(Fs(t))}),o=xn(r.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--carousel-slide-gap"]=Nt(e[d])),typeof t=="object"&&t[d]!==void 0&&(f[d]["--carousel-slide-size"]=Nt(t[d])),f),{}),c=vE(xn(o),r.breakpoints).filter(f=>xn(o[f.value]).length>0).map(f=>({query:`(min-width: ${r.breakpoints[f.value]})`,styles:o[f.value]}));return u.jsx(Cc,{styles:s,media:c,selector:n})}function IT(e){return typeof e=="object"&&e!==null?xn(e):[]}function zq(e){return e.sort((t,n)=>oa(t)-oa(n))}function Bq({slideGap:e,slideSize:t}){const n=Array.from(new Set([...IT(e),...IT(t)]));return zq(n)}function Uq({slideGap:e,slideSize:t,selector:n}){const r=li({"--carousel-slide-gap":Nt(Fs(e)),"--carousel-slide-size":he(Fs(t))}),s=Bq({slideGap:e,slideSize:t}).reduce((a,c)=>(a[c]||(a[c]={}),typeof e=="object"&&e[c]!==void 0&&(a[c]["--carousel-slide-gap"]=Nt(e[c])),typeof t=="object"&&t[c]!==void 0&&(a[c]["--carousel-slide-size"]=Nt(t[c])),a),{}),o=Object.keys(s).map(a=>({query:`carousel (min-width: ${a})`,styles:s[a]}));return u.jsx(Cc,{styles:r,container:o,selector:n})}function DT({dir:e,orientation:t,direction:n}){return n==="previous"?t==="horizontal"?90*(e==="ltr"?1:-1):-180:t==="horizontal"?90*(e==="ltr"?-1:1):0}const Vq={controlSize:26,controlsOffset:"sm",slideSize:"100%",slideGap:0,orientation:"horizontal",align:"center",slidesToScroll:1,includeGapInSize:!0,draggable:!0,dragFree:!1,loop:!1,speed:10,initialSlide:0,inViewThreshold:0,withControls:!0,withIndicators:!1,skipSnaps:!1,containScroll:"",withKeyboardEvents:!0,type:"media"},Hq=(e,{height:t,controlSize:n,controlsOffset:r})=>({root:{"--carousel-height":he(t),"--carousel-control-size":he(n),"--carousel-controls-offset":Nt(r)}}),_d=we((e,t)=>{const n=le("Carousel",Vq,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,children:d,getEmblaApi:p,onNextSlide:h,onPreviousSlide:g,onSlideChange:S,nextControlProps:y,previousControlProps:b,controlSize:C,controlsOffset:T,slideSize:R,slideGap:m,orientation:v,height:x,align:_,slidesToScroll:k,includeGapInSize:D,draggable:M,dragFree:P,loop:L,speed:O,initialSlide:V,inViewThreshold:H,withControls:q,withIndicators:N,plugins:B,nextControlIcon:$,previousControlIcon:F,skipSnaps:z,containScroll:U,withKeyboardEvents:G,mod:te,type:ne,...Q}=n,se=Oe({name:"Carousel",classes:lb,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:Hq}),X=Dh(),{dir:oe}=wo(),[K,Z]=cb({axis:v==="horizontal"?"x":"y",direction:v==="horizontal"?oe:void 0,startIndex:V,loop:L,align:_,slidesToScroll:k,draggable:M,dragFree:P,speed:O,inViewThreshold:H,skipSnaps:z,containScroll:U},B),[fe,xe]=I.useState(0),[ye,Ee]=I.useState(0),Be=I.useCallback(Fe=>Z&&Z.scrollTo(Fe),[Z]),et=I.useCallback(()=>{if(!Z)return;const Fe=Z.selectedScrollSnap();xe(Fe),Fe!==fe&&(S==null||S(Fe))},[Z,xe,S,fe]),pe=I.useCallback(()=>{Z==null||Z.scrollPrev(),g==null||g()},[Z]),_e=I.useCallback(()=>{Z==null||Z.scrollNext(),h==null||h()},[Z]),je=I.useCallback(Fe=>{G&&(Fe.key==="ArrowRight"&&(Fe.preventDefault(),_e()),Fe.key==="ArrowLeft"&&(Fe.preventDefault(),pe()))},[Z]);I.useEffect(()=>{if(Z)return p==null||p(Z),et(),Ee(Z.scrollSnapList().length),Z.on("select",et),()=>{Z.off("select",et)}},[Z,k,et]),I.useEffect(()=>{Z&&(Z.reInit(),Ee(Z.scrollSnapList().length),xe(Fe=>br(Fe,0,I.Children.toArray(d).length-1)))},[I.Children.toArray(d).length,k]);const Ue=(Z==null?void 0:Z.canScrollPrev())||!1,Je=(Z==null?void 0:Z.canScrollNext())||!1,Ze=Array(ye).fill(0).map((Fe,be)=>I.createElement(on,{...se("indicator"),key:be,"data-active":be===fe||void 0,"aria-hidden":!0,tabIndex:-1,onClick:()=>Be(be),"data-orientation":v,onMouseDown:Ve=>Ve.preventDefault()}));return u.jsxs(Oq,{value:{getStyles:se,orientation:v},children:[ne==="container"?u.jsx(Uq,{...n,selector:`.${X}`}):u.jsx(Fq,{...n,selector:`.${X}`}),u.jsxs(ie,{ref:t,...se("root",{className:"responsiveClassName"}),...Q,mod:[{orientation:v,"include-gap-in-size":D},te],onKeyDownCapture:je,children:[u.jsx("div",{...se("viewport"),ref:K,"data-type":ne,children:u.jsx("div",{...se("container",{className:X}),"data-orientation":v,children:d})}),N&&u.jsx("div",{...se("indicators"),"data-orientation":v,children:Ze}),q&&u.jsxs("div",{...se("controls"),"data-orientation":v,children:[u.jsx(on,{...b,...se("control",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),onClick:Fe=>{var be;pe(),(be=b==null?void 0:b.onClick)==null||be.call(b,Fe)},"data-inactive":!Ue||void 0,tabIndex:Ue?0:-1,children:typeof F<"u"?F:u.jsx(vc,{style:{transform:`rotate(${DT({dir:oe,orientation:v,direction:"previous"})}deg)`}})}),u.jsx(on,{...se("control",{className:y==null?void 0:y.className,style:y==null?void 0:y.style}),...y,onClick:Fe=>{var be;_e(),(be=y==null?void 0:y.onClick)==null||be.call(y,Fe)},"data-inactive":!Je||void 0,tabIndex:Je?0:-1,children:typeof $<"u"?$:u.jsx(vc,{style:{transform:`rotate(${DT({dir:oe,orientation:v,direction:"next"})}deg)`}})})]})]})]})});_d.classes=lb;_d.displayName="@mantine/carousel/Carousel";_d.Slide=db;var xp={exports:{}},Wq=xp.exports,jT;function qq(){return jT||(jT=1,function(e,t){(function(n,r){r()})(Wq,function(){function n(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function r(d,p,h){var g=new XMLHttpRequest;g.open("GET",d),g.responseType="blob",g.onload=function(){f(g.response,p,h)},g.onerror=function(){console.error("could not download file")},g.send()}function s(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Vl=="object"&&Vl.global===Vl?Vl:void 0,c=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(d,p,h){var g=a.URL||a.webkitURL,S=document.createElement("a");p=p||d.name||"download",S.download=p,S.rel="noopener",typeof d=="string"?(S.href=d,S.origin===location.origin?o(S):s(S.href)?r(d,p,h):o(S,S.target="_blank")):(S.href=g.createObjectURL(d),setTimeout(function(){g.revokeObjectURL(S.href)},4e4),setTimeout(function(){o(S)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,h){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,h),p);else if(s(d))r(d,p,h);else{var g=document.createElement("a");g.href=d,g.target="_blank",setTimeout(function(){o(g)})}}:function(d,p,h,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof d=="string")return r(d,p,h);var S=d.type==="application/octet-stream",y=/constructor/i.test(a.HTMLElement)||a.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||S&&y||c)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var m=C.result;m=b?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=m:location=m,g=null},C.readAsDataURL(d)}else{var T=a.URL||a.webkitURL,R=T.createObjectURL(d);g?g.location=R:location.href=R,g=null,setTimeout(function(){T.revokeObjectURL(R)},4e4)}});a.saveAs=f.saveAs=f,e.exports=f})}(xp)),xp.exports}var Gq=qq();const Kq=ci(Gq),Yq={message:()=>({background:"rgba(255,255,255,0.1)",padding:"4px 8px",borderRadius:6,cursor:"pointer"})},Xq=e=>e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`,PT=e=>e.startsWith("image/")?u.jsx(rW,{size:18}):e.includes("pdf")||e.includes("text")?u.jsx(qH,{size:18}):e.includes("zip")||e.includes("rar")?u.jsx(HH,{size:18}):u.jsx(Vj,{size:18}),Um=e=>{I.useEffect(()=>{const t="file-upload";e?sr.show({id:t,loading:!0,title:" ",message:" ...",autoClose:!1,withCloseButton:!1}):sr.update({id:t,title:"",message:"  ",loading:!1,autoClose:2e3,withCloseButton:!0})},[e])},MT=new Map,Hy=new Map,Qq=(e,t)=>`${e}:${t}`,Jq=({files:e,channelId:t})=>{var v,x;const{showError:n}=St(),[r,s]=I.useState(!1),[o,a]=I.useState(0),[c,f]=I.useState(null),[d,p]=I.useState([]);Um(c!==null);const{preloadImages:h}=$j(),g=I.useMemo(()=>e.filter(_=>_.fileType.startsWith("image/")),[e]),S=I.useMemo(()=>e.filter(_=>!_.fileType.startsWith("image/")),[e]),y=I.useMemo(()=>g.map(_=>_.fileId).join("|"),[g]),b=I.useMemo(()=>{const _=new Map;return d.forEach(k=>_.set(k.fileId,k)),_},[d]),C=async _=>{const k=Qq(t,_.fileId),D=MT.get(k);if(D)return D;let M=Hy.get(k);return M||(M=CT(t,_.fileId).then(P=>{if(!P.base64File)return null;const L={fileId:_.fileId,name:_.fileName,src:`data:${_.fileType};base64,${P.base64File}`};return MT.set(k,L),L}).finally(()=>{Hy.delete(k)}),Hy.set(k,M)),M};I.useEffect(()=>{if(g.length===0){p([]);return}if(!h){p([]);return}let _=!0;return(async()=>{try{const D=await Promise.all(g.map(C));if(!_)return;p(D.filter(Boolean))}catch{if(!_)return;n("  ")}})(),()=>{_=!1}},[t,y,h]);const T=(_,k=d)=>{const D=k.findIndex(M=>M.fileId===_);a(D!==-1?D:0),s(!0)},R=async _=>{const k=b.get(_.fileId);if(k){T(k.fileId);return}try{const D=await C(_);if(!D)return;const P=d.some(L=>L.fileId===D.fileId)?d:[...d,D];p(P),T(D.fileId,P)}catch{n("  ")}},m=async _=>{if(c!==_.fileId)try{f(_.fileId);const k=await CT(t,_.fileId);if(!k.base64File){f(null);return}const D=atob(k.base64File),M=Uint8Array.from(D,L=>L.charCodeAt(0)),P=new Blob([M],{type:k.fileType});Kq(P,_.fileName)}catch{n("  ")}finally{f(null)}};return u.jsxs(u.Fragment,{children:[u.jsxs(Cn,{direction:"column",gap:8,mt:8,children:[g.length>0&&u.jsx(Cn,{wrap:"wrap",gap:8,children:g.map(_=>{const k=b.get(_.fileId);return u.jsx(ie,{style:{width:180,height:180,cursor:"pointer",overflow:"hidden",borderRadius:8,background:"var(--color-surface-2)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>R(_),children:k?u.jsx(td,{src:k.src,fit:"cover",width:"100%",height:"100%",alt:k.name}):u.jsxs(Cn,{direction:"column",align:"center",gap:6,children:[PT(_.fileType),u.jsx(me,{size:"xs",c:"gray.4",ta:"center",children:_.fileName})]})},_.fileId)})}),S.map(_=>{const k=c===_.fileId;return u.jsxs(ve,{gap:"xs",style:{...Yq.message(),opacity:k?.6:1,pointerEvents:k?"none":"auto",cursor:k?"not-allowed":"pointer"},onClick:()=>m(_),children:[k?u.jsx(Rr,{size:"xs"}):PT(_.fileType),u.jsx(me,{size:"sm",style:{wordBreak:"break-word"},children:_.fileName}),u.jsx(me,{size:"xs",c:"gray.4",children:Xq(_.fileSize)})]},_.fileId)})]}),u.jsx(dt,{opened:r,onClose:()=>s(!1),size:"lg",centered:!0,title:(v=d[o])==null?void 0:v.name,children:d.length>1?u.jsx(_d,{withIndicators:!0,height:500,initialSlide:o,onSlideChange:a,children:d.map((_,k)=>u.jsx(_d.Slide,{children:u.jsx(td,{src:_.src,height:500,fit:"contain",alt:_.name})},k))}):u.jsx(td,{src:(x=d[o])==null?void 0:x.src,height:500,fit:"contain"})})]})},a2=e=>(e=e.replace(/\/\/\{usertag:([a-zA-Z--0-9_#]+)\}\/\//g,'<span style="color: #ffffff; font-weight: 500;">@$1</span>'),e=e.replace(/\/\/\{roletag:([a-zA-Z--0-9_-]+)\}\/\//g,'<span style="color: #ffffff; font-weight: 500;">@$1</span>'),e),Gs="user",Zq=`${Gs}/registerUser`,eG=`${Gs}/loginUser`,tG=`${Gs}/getUserProfile`,nG=`${Gs}/logoutUser`,rG=`${Gs}/refreshTokens`,sG=`${Gs}/changeSettings`,oG=`${Gs}/changeUserProfile`,iG=`${Gs}/changeNotificationLifetime`,aG=`${Gs}/changeProfileIcon`,Ks="/auth",cG=`${Ks}/registration`,lG=`${Ks}/login`,dG=`${Ks}/profile/get`,uG=`${Ks}/logout`,fG=`${Ks}/refresh`,pG=e=>`${Ks}/settings/${e}`,hG=`${Ks}/settings/notification/lifetime`,mG=`${Ks}/profile/change`,gG=`${Ks}/icon`,vG=e=>`${Ks}/data?UserId=${e}`,yG=async e=>{const{data:t}=await ke.post(cG,{...e});return t},wG=async e=>{const{data:t}=await ke.post(lG,{...e});return t},SG=async()=>{const{data:e}=await ke.get(dG);return e},bG=async()=>{await ke.delete(uG)},xG=async e=>{const{data:t}=await ke.post(fG,{},{headers:{Authorization:`Bearer ${e}`}});return t},CG=async e=>{await ke.put(pG(e))},_G=async e=>{await ke.put(hG,{lifeTime:e})},RG=async e=>{const{data:t}=await ke.put(mG,{...e});return t},TG=async e=>{const t=new FormData;t.append("Icon",e);const{data:n}=await ke.put(gG,t,{headers:{"Content-Type":"multipart/form-data"}});return n},EG=async e=>{const{data:t}=await ke.get(vG(e));return t},Cp=Pe(Zq,async(e,{rejectWithValue:t})=>{var n,r;try{return yG(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),_p=Pe(eG,async(e,{rejectWithValue:t})=>{var n,r;try{return await wG(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),cd=Pe(tG,async(e,{rejectWithValue:t})=>{var n,r;try{return await SG()}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Rp=Pe(nG,async(e,{rejectWithValue:t})=>{var n,r;try{await bG()}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Tp=Pe(rG,async({refreshToken:e},{rejectWithValue:t})=>{var n,r;try{return await xG(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),fc=Pe(sG,async({type:e},{rejectWithValue:t})=>{var n,r;try{await CG(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Ep=Pe(iG,async({time:e},{rejectWithValue:t})=>{var n,r;try{await _G(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),kp=Pe(oG,async({newProfile:e},{rejectWithValue:t})=>{var n,r;try{return await RG(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Ip=Pe(aG,async({icon:e},{rejectWithValue:t})=>{var n,r;try{return await TG(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}});var sa=(e=>(e.NOTIFIABLE="notifiable",e.FRIENDSHIP="friendship",e.NONFRIEND="nonfriend",e))(sa||{}),zt=(e=>(e.ACCESS="accessToken",e.REFRESH="refreshToken",e))(zt||{}),ub=(e=>(e.STREAM_VOLUMES="stream-user-volumes",e.USER_VOLUMES="user-volumes",e))(ub||{});const Wy=e=>{try{return localStorage.getItem(e)||""}catch(t){return console.error("Could not load token",t),""}},c2=(e,t,n=ub.STREAM_VOLUMES)=>{try{const r=localStorage.getItem(n),s=r?JSON.parse(r):{};s[e]=t,localStorage.setItem(n,JSON.stringify(s))}catch(r){console.error("Error saving volume to localStorage:",r,n)}},kG=e=>{let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4!==0;)t+="=";return t},IG=e=>{const t=kG(e),n=atob(t);return JSON.parse(n)},DG={user:{id:"",name:"",tag:"",mail:"",accontCreateDate:"",notifiable:!1,friendshipApplication:!1,nonFriendMessage:!1,icon:null,notificationLifeTime:0,systemRoles:[]},accessToken:Wy(zt.ACCESS),refreshToken:Wy(zt.REFRESH),isLoggedIn:!!Wy(zt.ACCESS),error:"",loading:Ie.IDLE},l2=qs({name:Gs,initialState:DG,reducers:{clearTokens:e=>{e.accessToken="",e.refreshToken="",e.isLoggedIn=!1},clearUserData:e=>{e.user={id:"",name:"",tag:"",mail:"",accontCreateDate:"",notifiable:!1,friendshipApplication:!1,nonFriendMessage:!1,icon:null,notificationLifeTime:0,systemRoles:[]}}},extraReducers:e=>{e.addCase(Cp.fulfilled,(t,n)=>{t.error="",t.accessToken=n.payload.accessToken,t.refreshToken=n.payload.refreshToken,localStorage.setItem(zt.ACCESS,n.payload.accessToken),localStorage.setItem(zt.REFRESH,n.payload.refreshToken),t.isLoggedIn=!0}).addCase(_p.fulfilled,(t,n)=>{t.error="",t.accessToken=n.payload.accessToken,t.refreshToken=n.payload.refreshToken,localStorage.setItem(zt.ACCESS,n.payload.accessToken),localStorage.setItem(zt.REFRESH,n.payload.refreshToken),t.isLoggedIn=!0}).addCase(cd.fulfilled,(t,n)=>{t.error="",t.user=n.payload}).addCase(Rp.fulfilled,t=>{t.isLoggedIn=!1,t.error="",t.accessToken="",t.refreshToken="",localStorage.setItem(zt.ACCESS,""),localStorage.setItem(zt.REFRESH,"")}).addCase(Rp.rejected,(t,n)=>{t.isLoggedIn=!1,t.error=n.payload,t.accessToken="",t.refreshToken="",localStorage.setItem(zt.ACCESS,""),localStorage.setItem(zt.REFRESH,"")}).addCase(Tp.pending,t=>{t.error="",t.accessToken="",t.refreshToken="",t.loading=Ie.PENDING}).addCase(Tp.fulfilled,(t,n)=>{t.error="",t.loading=Ie.FULFILLED,t.accessToken=n.payload.accessToken,t.refreshToken=n.payload.refreshToken,localStorage.setItem(zt.ACCESS,n.payload.accessToken),localStorage.setItem(zt.REFRESH,n.payload.refreshToken)}).addCase(Tp.rejected,(t,n)=>{t.error=n.payload,t.loading=Ie.REJECTED,t.accessToken="",t.refreshToken="",localStorage.setItem(zt.ACCESS,""),localStorage.setItem(zt.REFRESH,""),t.isLoggedIn=!1}).addCase(fc.fulfilled,(t,{meta:n})=>{const{type:r}=n.arg;switch(r){case sa.FRIENDSHIP:t.user.friendshipApplication=!t.user.friendshipApplication;break;case sa.NONFRIEND:t.user.nonFriendMessage=!t.user.nonFriendMessage;break;case sa.NOTIFIABLE:t.user.notifiable=!t.user.notifiable;break}t.error=""}).addCase(kp.fulfilled,(t,n)=>{t.user=n.payload,t.error=""}).addCase(Ep.fulfilled,(t,{meta:n})=>{const{time:r}=n.arg;t.user.notificationLifeTime=r,t.error=""}).addCase(Ip.fulfilled,(t,n)=>{t.user.icon=n.payload,t.error=""}).addMatcher(bn(fc.pending,kp.pending,Rp.pending,cd.pending,Cp.pending,Ep.pending,Ip.pending,_p.pending),t=>{t.error=""}).addMatcher(bn(Cp.rejected,_p.rejected,fc.rejected,kp.rejected,cd.rejected,Ep.rejected,Ip.rejected),(t,n)=>{t.error=n.payload})}}),{clearTokens:NT,clearUserData:JZ}=l2.actions,jG=l2.reducer,Cf={},qy=new Map,Ac=e=>{const t=re(c=>c.testServerStore.serverData.users),n=re(c=>c.chatsStore.chat.users),r=I.useCallback(async c=>{if(Cf[c])return;let f=qy.get(c);f||(f=EG(c).then(d=>(Cf[c]=d,d)).catch(d=>{throw console.error(`Failed to load user ${c}`,d),d}).finally(()=>{qy.delete(c)}),qy.set(c,f)),await f},[]),s=I.useCallback(c=>{switch(e){case at.CHAT:return n.find(f=>f.userId===c);case at.CHANNEL:case at.SUBCHAT:return t.find(f=>f.userId===c);default:return}},[e,n,t]),o=I.useCallback(c=>{const f=s(c);if(f)return f.userName;const d=Cf[c];if(d)return d.userName;r(c)},[s,r]),a=I.useCallback(c=>{var p,h;const f=s(c);if(f)return(p=f.icon)==null?void 0:p.fileId;const d=Cf[c];if(d)return(h=d.icon)==null?void 0:h.fileId;r(c)},[s,r]);return{getUsername:o,getUserIcon:a}},fb="subChat",PG=`${fb}/getSubChatMessages`,MG=`${fb}/getMoreSubChatMessages`,Kw=async(e,t,n,r)=>{const{data:s}=await ke.get("/channel/messages",{params:{channelId:e,number:t,fromMessageId:n,down:r}});return s},Dp=Pe(PG,async({chatId:e,number:t,fromMessageId:n,down:r},{rejectWithValue:s,getState:o})=>{var a,c,f;try{const d=await Kw(e,t,n,r);if(d.messages.length>0)return d;const g=(a=o().chatsStore.chatsList)==null?void 0:a.find(b=>b.chatId===e),S=((g==null?void 0:g.nonReadedCount)??0)>0||((g==null?void 0:g.nonReadedTaggedCount)??0)>0;return!r&&n!==0&&d.messages.length===0&&S?await Kw(e,t,n,!0):d}catch(d){return d instanceof Me?s(((f=(c=d.response)==null?void 0:c.data)==null?void 0:f.message)||" "):s(" ")}}),jp=Pe(MG,async({chatId:e,number:t,fromMessageId:n,down:r},{rejectWithValue:s})=>{var o,a;try{return await Kw(e,t,n,r)}catch(c){return c instanceof Me?s(((a=(o=c.response)==null?void 0:o.data)==null?void 0:a.message)||" "):s(" ")}}),NG={error:"",currentSubChatId:null,subChatInfo:null,messages:[],messagesStatus:Ie.IDLE,messageIsLoading:Ie.IDLE,remainingTopMessagesCount:0,lastTopMessageId:0,remainingBottomMessagesCount:mn,lastBottomMessageId:0,startMessageId:0,allMessagesCount:0},d2=qs({name:fb,initialState:NG,reducers:{setCurrentSubChatId(e,t){e.currentSubChatId=t.payload},setSubChatInfo(e,t){e.subChatInfo=t.payload},addSubChatMessage:(e,t)=>{const{channelId:n}=t.payload;n===e.currentSubChatId&&e.remainingBottomMessagesCount<=0&&e.messages.push(t.payload)},deleteSubChatMessageWS:(e,t)=>{e.currentSubChatId===t.payload.channelId&&(e.messages=e.messages.filter(n=>n.id!==t.payload.messageId))},editSubChatMessageWS:(e,t)=>{if(e.currentSubChatId===t.payload.channelId){const n=e.messages.findIndex(r=>r.id===t.payload.id);n!==-1&&(e.messages[n]=t.payload)}},updateSubChatVoteWs:(e,t)=>{const n=e.messages.findIndex(r=>r.id===t.payload.id);n!==-1&&(e.messages[n]=t.payload)}},extraReducers:e=>{e.addCase(Dp.pending,t=>{t.messagesStatus=Ie.PENDING,t.remainingTopMessagesCount=0,t.lastTopMessageId=0,t.remainingBottomMessagesCount=mn,t.lastBottomMessageId=0,t.allMessagesCount=0,t.messages=[],t.error=""}).addCase(Dp.fulfilled,(t,n)=>{const{payload:r}=n,{messages:s,allMessagesCount:o,remainingMessagesCount:a}=r;if(t.messages=s,s.length>0?t.remainingTopMessagesCount=a:t.remainingTopMessagesCount=0,t.lastTopMessageId=s.length>0?s[0].id:0,t.lastBottomMessageId=s.length>0?s[s.length-1].id:0,s.length>0){const c=s[s.length-1];(c==null?void 0:c.id)===o&&(t.remainingBottomMessagesCount=0)}else o===0&&(t.remainingBottomMessagesCount=0);t.allMessagesCount=o,t.messagesStatus=Ie.FULFILLED,t.error=""}).addCase(Dp.rejected,(t,n)=>{t.messagesStatus=Ie.REJECTED,t.error=n.payload}).addCase(jp.pending,t=>{t.messageIsLoading=Ie.PENDING,t.error=""}).addCase(jp.fulfilled,(t,n)=>{const{payload:r,meta:s}=n,{messages:o,remainingMessagesCount:a,allMessagesCount:c}=r,{down:f}=s.arg;if(f){const d=o.slice(1);t.messages=[...t.messages,...d],t.remainingBottomMessagesCount=a;const p=d.at(-1);p&&(t.lastBottomMessageId=p.id)}else{const d=o.slice(0,-1);t.messages=[...d,...t.messages],t.remainingTopMessagesCount=a,t.lastTopMessageId=o[0].id}t.messageIsLoading=Ie.FULFILLED,t.allMessagesCount=c,t.error=""}).addCase(jp.rejected,(t,n)=>{t.messageIsLoading=Ie.REJECTED,t.error=n.payload})}}),{addSubChatMessage:LG,setCurrentSubChatId:u2,editSubChatMessageWS:OG,deleteSubChatMessageWS:AG,updateSubChatVoteWs:$G,setSubChatInfo:f2}=d2.actions,FG=d2.reducer;function ld(e){const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear(),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0");return`${n}.${r}.${s} ${o}:${a}`}const Yi=e=>({fileId:e.FileId,fileName:e.FileName,fileType:e.FileType,fileSize:e.FileSize}),pb=e=>({messageType:ai.Classic,serverId:e.ServerId||null,channelId:e.ChannelId,id:e.Id,authorId:e.AuthorId,createdAt:e.CreatedAt,text:e.Text}),p2=e=>({id:e.Id,number:e.Number,content:e.Content,totalVotes:e.TotalVotes,votedUserIds:e.VotedUserIds}),h2=e=>({subChannelId:e.SubChannelId,canUse:e.CanUse,isNotifiable:e.IsNotifiable}),$i=e=>{const t=e.MessageType,n={messageType:t,serverId:e.ServerId||null,serverName:e.ServerName||null,channelId:e.ChannelId,channelName:e.ChannelName||null,id:e.Id,authorId:e.AuthorId,createdAt:e.CreatedAt,replyToMessage:e.ReplyToMessage?pb(e.ReplyToMessage):null,isTagged:e.isTagged};return t===ai.Classic?{...n,text:e.Text||null,modifiedAt:e.ModifiedAt||null,nestedChannel:e.NestedChannel?h2(e.NestedChannel):null,files:e.Files?e.Files.map(Yi):null}:t===ai.Vote?{...n,title:e.Title||null,content:e.Content||null,isAnonimous:e.IsAnonimous||!1,multiple:e.Multiple||!1,deadline:e.Deadline||null,variants:e.Variants?e.Variants.map(p2):[],totalUsers:e.TotalUsers}:{...n,text:e.Text||null}},Gy=e=>{const t=e.MessageType,n={messageType:t,serverId:e.ServerId||null,serverName:e.ServerName||null,channelId:e.ChannelId,channelName:e.ChannelName||null,id:e.Id,authorId:e.AuthorId,createdAt:e.CreatedAt,replyToMessage:e.ReplyToMessage?pb(e.ReplyToMessage):null,isTagged:e.isTagged};return t===ai.Classic?{...n,text:e.Text||null,modifiedAt:e.ModifiedAt||null,nestedChannel:e.NestedChannel?h2(e.NestedChannel):null,files:e.Files?e.Files.map(Yi):null}:t===ai.Vote?{...n,title:e.Title||null,content:e.Content||null,isAnonimous:e.IsAnonimous||!1,multiple:e.Multiple||!1,deadline:e.Deadline||null,variants:e.Variants?e.Variants.map(p2):[],totalUsers:e.TotalUsers}:{...n,text:e.Text||null}},zG=e=>({roleId:e.RoleId,roleName:e.RoleName,roleType:e.RoleType}),m2=e=>({fileId:e.FileId,fileName:e.FileName,fileType:e.FileType,fileSize:e.FileSize,base64File:e.Base64File}),g2=e=>({name:e.Name,type:e.Type}),BG=e=>({serverId:e.ServerId,userId:e.UserId,userName:e.UserName,userTag:e.UserTag,icon:e.Icon?m2(e.Icon):null,notifiable:e.Notifiable,friendshipApplication:e.FriendshipApplication,nonFriendMessage:e.NonFriendMessage,roles:e.Roles?e.Roles.map(zG):[],isFriend:e.IsFriend,systemRoles:e.SystemRoles.map(g2)}),hb=e=>e.map(t=>{const n=t.users.reduce((r,s)=>(r[s.socketId]||(r[s.socketId]={userName:s.userName,userId:s.userId,producers:[]}),r[s.socketId].producers.push({producerId:s.producerId,source:s.source}),r),{});return{roomName:t.roomName,users:n}}),v2=e=>{const[t,n,r]=e.split("-").map(s=>s.padStart(2,"0"));return`${r}.${n}.${t}`},LT=e=>({text:e.Text,modifiedAt:e.ModifiedAt,nestedChannel:e.NestedChannel,files:e.Files?e.Files.map(Yi):null,messageType:ai.Classic,serverId:e.ServerId,serverName:e.ServerName,channelId:e.ChannelId,channelName:e.ChannelName,id:e.Id,authorId:e.AuthorId,createdAt:e.CreatedAt,replyToMessage:e.ReplyToMessage?pb(e.ReplyToMessage):null}),UG=()=>{const{serverData:e,currentChannelId:t,currentNotificationChannelId:n}=re(s=>s.testServerStore);return{canWrite:(()=>{if(t){const s=e.channels.textChannels.find(o=>o.channelId===t);return s?s.canWrite:!1}if(n){const s=e.channels.notificationChannels.find(o=>o.channelId===n);return s?s.canWrite:!1}return!0})()}},VG=({type:e,isOwnMessage:t,content:n,replyMessage:r,time:s,modifiedAt:o,authorId:a,channelId:c,files:f,onReplyMessage:d,onReplyPreviewClick:p,EditMessage:h,MessageActions:g,nestedChannel:S,isTagged:y})=>{const b=Ae(),{serverData:C,currentChannelId:T,currentNotificationChannelId:R}=re(F=>F.testServerStore),m=T??R,v=C.permissions.canDeleteOthersMessages,x=t||m&&v,[_,k]=I.useState(!1),[D,M]=I.useState(!1),[P,L]=I.useState(n),{getUsername:O,getUserIcon:V}=Ac(e),{canWrite:H}=UG(),q=I.useMemo(()=>O(a),[O,a]),N=I.useMemo(()=>V(a),[V,a]),{iconBase64:B}=Es(N),$=F=>{b(u2(F)),b(f2({subChannelId:F,canUse:S.canUse,isNotifiable:S.isNotifiable,isOwner:t}))};return u.jsxs(ve,{justify:"space-between",align:"flex-start",style:{flexDirection:t?"row":"row-reverse",...Za.container()},grow:!0,onMouseEnter:F=>{k(!0),F.currentTarget&&(F.currentTarget.style.backgroundColor="var(--color-white-02)")},onMouseLeave:F=>{k(!1),F.currentTarget&&(F.currentTarget.style.backgroundColor="transparent")},children:[u.jsxs(ve,{gap:"xs",justify:t?"flex-start":"flex-end",style:{opacity:_||D?1:0,transition:"opacity 0.2s ease"},children:[H&&u.jsx(tt,{variant:"subtle","aria-label":"reply",onClick:d,style:Za.actionButtons(),color:"blue",onMouseEnter:F=>{F.currentTarget.style.backgroundColor="var(--color-primary-10)"},onMouseLeave:F=>{F.currentTarget.style.backgroundColor="transparent"},children:u.jsx(qw,{size:18})}),x&&u.jsxs(lt,{position:"bottom-start",shadow:"md",width:150,offset:-30,children:[u.jsx(lt.Target,{children:u.jsx(tt,{variant:"subtle","aria-label":"edit",onClick:()=>{},style:Za.actionButtons(),color:"gray",onMouseEnter:F=>{F.currentTarget.style.backgroundColor="var(--color-primary-10)"},onMouseLeave:F=>{F.currentTarget.style.backgroundColor="transparent"},children:u.jsx(Uj,{size:18})})}),u.jsx(lt.Dropdown,{children:g&&u.jsx(g,{setIsEditing:M,setEditedContent:L,messageContent:n,isOwnMessage:t})})]})]}),u.jsxs(ve,{flex:1,align:"flex-start",style:{flexDirection:t?"row-reverse":"row"},gap:"xs",children:[u.jsx($t,{size:"md",color:"blue",src:B,children:q?q[0]:"?"}),u.jsxs(ge,{gap:"xs",align:t?"flex-end":"flex-start",style:{flex:1},children:[u.jsxs(ve,{gap:"xs",style:{flexDirection:t?"row-reverse":"row"},children:[u.jsx(me,{fw:500,style:{...Za.breakText(),color:"var(--color-white)"},children:q}),u.jsx(me,{size:"xs",style:{color:"rgba(255, 255, 255, 0.6)"},children:ld(s)}),o&&u.jsx(me,{size:"xs",fs:"italic",style:{color:"rgba(255, 255, 255, 0.5)"},children:"()"})]}),u.jsxs(ie,{style:Za.box(t,D,y),onMouseEnter:F=>{!y&&!D&&(t?F.currentTarget.style.boxShadow="0 4px 12px var(--color-primary-20), 0 2px 4px rgba(0, 0, 0, 0.15)":F.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)")},onMouseLeave:F=>{if(!y&&!D){const z=t?"0 2px 8px var(--color-primary-20), 0 1px 2px rgba(0, 0, 0, 0.1)":"0 2px 4px rgba(0, 0, 0, 0.15)";F.currentTarget.style.boxShadow=z}},children:[r&&u.jsx(ma,{title:u.jsxs(ve,{gap:"xs",children:[u.jsx(qw,{size:12}),u.jsx(me,{size:"sm",fw:500,children:O(r.authorId)})]}),withCloseButton:!1,onClick:()=>p==null?void 0:p(r.id),style:{backgroundColor:"var(--color-white-05)",border:"1px solid var(--border-primary-soft)",borderRadius:"6px",marginBottom:"8px",cursor:p?"pointer":"default"},children:u.jsx(me,{size:"sm",style:{color:"rgba(255, 255, 255, 0.8)"},children:r.text})}),D&&h?u.jsx(h,{editedContent:P,setEditedContent:L,setIsEditing:M,originalContent:n}):u.jsx(me,{style:Za.breakText(),dangerouslySetInnerHTML:{__html:n?a2(n):""}}),f&&f.length>0&&u.jsx(Jq,{files:f,channelId:c}),S&&S.canUse&&u.jsx(Ne,{radius:"md",variant:"light",color:"blue",onClick:()=>$(S==null?void 0:S.subChannelId),style:{marginTop:"8px",transition:"all 0.2s ease"},onMouseEnter:F=>{F.currentTarget.style.transform="translateY(-1px)",F.currentTarget.style.boxShadow="0 4px 8px var(--color-primary-20)"},onMouseLeave:F=>{F.currentTarget.style.transform="translateY(0)",F.currentTarget.style.boxShadow="none"},children:" "})]})]})]})]})},mb=({scrollRef:e,type:t,highlightDurationMs:n=1500,maxAutoloadBatches:r=20})=>{const s=Ae(),o=I.useRef(null),a=zS(),c=FS(),f=Lj(),d={[at.CHAT]:a,[at.CHANNEL]:c,[at.SUBCHAT]:f},{messages:p,entityId:h,remainingTopMessagesCount:g,remainingBottomMessagesCount:S,lastTopMessageId:y,lastBottomMessageId:b}=d[t],C=I.useRef({messages:p,entityId:h,remainingTopMessagesCount:g,remainingBottomMessagesCount:S,lastTopMessageId:y,lastBottomMessageId:b});I.useEffect(()=>()=>{o.current&&window.clearTimeout(o.current)},[]),I.useEffect(()=>{C.current={messages:p,entityId:h,remainingTopMessagesCount:g,remainingBottomMessagesCount:S,lastTopMessageId:y,lastBottomMessageId:b}},[h,b,y,p,S,g]);const T=I.useCallback(_=>{const k=_.style.boxShadow,D=_.style.transition;_.style.transition="box-shadow 0.2s ease",_.style.boxShadow="0 0 0 2px var(--mantine-color-blue-5)",o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{_.style.boxShadow=k,_.style.transition=D},n)},[n]),R=I.useCallback(_=>{var k;return((k=e.current)==null?void 0:k.querySelector(`[data-message-id="${_}"]`))??null},[e]),m=I.useCallback(async _=>{const k=C.current;if(!k.entityId)return!1;const D=_?k.remainingBottomMessagesCount:k.remainingTopMessagesCount,M=_?k.lastBottomMessageId:k.lastTopMessageId;if(D<1||M<1)return!1;const P=Math.min(D,mn)+1;return t===at.CHANNEL?(await s(ea({channelId:k.entityId,number:P,fromMessageId:M,down:_}))).meta.requestStatus!=="rejected":t===at.CHAT?(await s(Ji({chatId:k.entityId,number:P,fromMessageId:M,down:_}))).meta.requestStatus!=="rejected":(await s(jp({chatId:k.entityId,number:P,fromMessageId:M,down:_}))).meta.requestStatus!=="rejected"},[s,t]),v=I.useCallback(()=>new Promise(_=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>_())})}),[]);return{scrollToMessage:I.useCallback(async(_,k={behavior:"smooth",block:"center"})=>{var M,P;if(!e.current)return!1;const D=R(_);if(D)return D.scrollIntoView({behavior:k.behavior??"smooth",block:k.block??"center"}),T(D),!0;for(let L=0;L<r;L+=1){const O=C.current,V=(M=O.messages[0])==null?void 0:M.id,H=(P=O.messages[O.messages.length-1])==null?void 0:P.id,q=O.remainingTopMessagesCount>0,N=O.remainingBottomMessagesCount>0;let B;if(V!==void 0&&_<V&&q)B=!1;else if(H!==void 0&&_>H&&N)B=!0;else if(V===void 0&&H===void 0&&(q||N))B=!q;else break;if(!await m(B))break;await v();const F=R(_);if(F)return F.scrollIntoView({behavior:k.behavior??"smooth",block:k.block??"center"}),T(F),!0}return!1},[R,T,m,r,e,v])}},HG="/hitscord-frontend/assets/zapsplat_multimedia_alert_prompt_mallet_marimba_success_104792-Cx9Tm56S.mp3",WG=()=>{const{setIsConnected:e,setAudioProducer:t,setDevice:n,setProducerTransport:r,consumerTransport:s,setConsumerTransport:o,addConsumer:a,setIsMuted:c,setIsUserMute:f,micSettings:d,setMicAudioState:p}=Un(),{volume:h}=Lm(),[g]=$S(HG,{volume:h});return async(y,b,C,T,R)=>{let m=null;try{if(!ot.connected)throw new Error("Socket is not connected");m=await r7(d);const v=m.processedTrack,{rtpCapabilities:x,muteStatus:_}=await s7(y,b,C,T,R),k=_===dc.SelfMuted||_===dc.Muted;k&&(v.enabled=!1);const D=await o7(x);n(D);const M=await i7(D,v,t,a,s,o);r(M),c(k),f(_===dc.Muted),p(m),e(!0),g()}catch(v){console.error("Error connecting:",v),e(!1),m&&(m.processedTrack.stop(),m.rawTrack.stop(),m.audioContext.close().catch(()=>{})),p(null)}}},qG="/hitscord-frontend/assets/zapsplat_multimedia_alert_prompt_mallet_marimba_warning_or_error_104796-qLioYMyB.mp3",$c=()=>{const{setIsConnected:e,setDevice:t,setVideoProducer:n,setConsumers:r,setIsMuted:s,setIsStreaming:o,setAudioProducer:a,setVideoAudioProducer:c,consumerTransport:f,setConsumerTransport:d,clearMicAudioState:p}=Un(),{volume:h}=Lm(),[g]=$S(qG,{volume:h});return async(y,b)=>{s(!1),await new Promise(C=>{ot.once("leaveConfirmed",C),ot.emit("leaveRoom",{accessToken:y,voiceChannelId:b})}),e(!1),t(null),r([]),o(!1),a(null),n(null),c(null),f==null||f.close(),d(null),n7(),p(),g()}},GG={isUserStreamView:!1,isOpenHome:!0},y2=qs({name:"app",initialState:GG,reducers:{toggleUserStreamView(e){e.isUserStreamView=!e.isUserStreamView},setUserStreamView(e,t){e.isUserStreamView=t.payload},setOpenHome(e,t){e.isOpenHome=t.payload}}}),{toggleUserStreamView:w2,setUserStreamView:xr,setOpenHome:ys}=y2.actions,KG=y2.reducer,St=()=>{const e=Ae(),{user:t}=re(a=>a.userStore),n=(a,c,f,d=!1)=>{if(d){f!==c&&(e(ys(!0)),e(io(c)));return}if(f===c){e(xr(!1)),e(ys(!1));return}e(KS(a)),e(Pj(c)),e(xr(!1)),e(ys(!1)),ot.emit("setServer",{serverId:a,userName:t.name,userId:t.id})};return{showSuccess:a=>{sr.show({message:a,position:"top-center",color:"green",radius:"md",autoClose:2e3,icon:u.jsx(LH,{})})},showError:a=>{sr.show({title:"",message:a,position:"top-center",color:"red",radius:"md",autoClose:2e3,icon:u.jsx(FH,{})})},showMessage:(a,c,f,d=!1)=>{sr.show({title:u.jsxs(ve,{gap:"xs",children:[u.jsx(xH,{size:14}),u.jsx(me,{children:" "})]}),message:u.jsxs(ge,{gap:0,children:[u.jsxs(ve,{gap:"xs",children:[u.jsx(me,{fw:500,children:a.serverName}),u.jsxs(me,{children:["# ",a.channelName]})]}),u.jsx(me,{lineClamp:2,dangerouslySetInnerHTML:{__html:a2(a.text)}}),u.jsx(Ne,{variant:"light",size:"xs",radius:"md",mt:"xs",onClick:()=>n(a.serverId,a.channelId,f,d),children:"  "})]}),position:"top-right",color:"yellow",radius:"md",autoClose:c*1e3})}}},S2=()=>{const{videoProducer:e,setVideoProducer:t,producerTransport:n,setIsStreaming:r,videoAudioProducer:s,setVideoAudioProducer:o}=Un(),a=I.useRef(null),c=I.useRef(null),f=async()=>{const p=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}),h=p.getVideoTracks()[0],g=await n.produce({track:h,appData:{source:"screen-video"}});t(g),a.current=g.id,g.on("trackended",d);const S=p.getAudioTracks()[0];if(S){const y=await n.produce({track:S,appData:{source:"screen-audio"}});o(y),c.current=y.id,y.on("trackended",d)}r(!0)},d=async()=>{const p=localStorage.getItem("accessToken");e?(e.close(),ot.emit("stopProducer",{producerId:e.id,accessToken:p})):ot.emit("stopProducer",{producerId:a.current,accessToken:p}),s?(s.close(),ot.emit("stopProducer",{producerId:s.id,accessToken:p})):ot.emit("stopProducer",{producerId:c.current,accessToken:p}),a.current=null,c.current=null,t(null),o(null),r(!1)};return{startScreenSharing:f,stopScreenSharing:d}},b2=()=>{const{videoProducer:e,setVideoProducer:t,producerTransport:n,isStreaming:r,isCameraOn:s,setIsCameraOn:o}=Un(),a=I.useRef(null),c=I.useRef(null),f=async()=>{var h,g;if(n){if(r){console.warn("      ");return}try{const S=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});c.current=S;const y=S.getVideoTracks()[0];if(!e||((h=e.appData)==null?void 0:h.source)!=="screen-video"){if(e&&((g=e.appData)==null?void 0:g.source)==="camera"){const C=localStorage.getItem("accessToken");e.close(),ot.emit("stopProducer",{producerId:e.id,accessToken:C})}const b=await n.produce({track:y,appData:{source:"camera"}});t(b),a.current=b.id,o(!0),y.onended=d}}catch(S){console.error("   :",S)}}},d=async()=>{var g;const h=localStorage.getItem("accessToken");c.current&&(c.current.getTracks().forEach(S=>S.stop()),c.current=null),e&&((g=e.appData)==null?void 0:g.source)==="camera"?(e.close(),ot.emit("stopProducer",{producerId:e.id,accessToken:h}),t(null)):a.current&&ot.emit("stopProducer",{producerId:a.current,accessToken:h}),a.current=null,o(!1)};return{startCamera:f,stopCamera:d,toggleCamera:async()=>{var g;s||((g=e==null?void 0:e.appData)==null?void 0:g.source)==="camera"||c.current&&c.current.getVideoTracks().some(S=>S.readyState==="live")?await d():await f()}}},YG=e=>{const[t,n]=I.useState(!1),[r,s]=I.useState(!1),[o,a]=I.useState(!1),[c,f]=I.useState(!1),[d,p]=I.useState(!1),[h,g]=I.useState([]),[S,y]=I.useState([]),[b,C]=I.useState(null),[T,R]=I.useState(null),[m,v]=I.useState(null),[x,_]=I.useState(null),[k,D]=I.useState(null),[M,P]=I.useState(null),[L,O]=I.useState(null),[V,H]=I.useState(new Set),[q,N]=I.useState(()=>{const X=qD();if(typeof localStorage>"u")return X;try{const oe=localStorage.getItem("micSettings");if(!oe)return X;const K=JSON.parse(oe);return{...X,...K}}catch{return X}}),B=I.useRef(null),$=Ae(),{currentVoiceChannelId:F}=re(X=>X.testServerStore),{accessToken:z}=re(X=>X.userStore),U=X=>{g(oe=>[...oe,X])},G=X=>{H(oe=>{const K=new Set(oe);return K.has(X)?K.delete(X):K.add(X),K})},te=()=>{T&&(r?T.resume():T.pause(),$(up()),s(!r))},ne=X=>{X.processedTrack.stop(),X.rawTrack.stop(),X.audioContext.close().catch(()=>{})},Q=X=>{B.current&&ne(B.current),B.current=X},se=()=>{B.current&&(ne(B.current),B.current=null)};return I.useEffect(()=>{if(!ot)return;ot.on("producerClosed",({producerId:oe})=>{g(K=>K.filter(Z=>Z.producerId!==oe))}),ot.on("producer-closed",({remoteProducerId:oe})=>{g(K=>K.filter(Z=>Z.producerId!==oe))}),ot.on("new-producer",({producerId:oe})=>{b&&KD(oe,b,U,M,P)}),ot.on("updateUsersList",({rooms:oe})=>{y(oe)});const X=()=>{ot.emit("leaveRoom",{accessToken:z,voiceChannelId:F})};return window.addEventListener("beforeunload",X),()=>{window.removeEventListener("beforeunload",X),ot.off("producerClosed"),ot.off("producer-closed"),ot.off("new-producer"),ot.off("updateUsersList")}},[b,M]),I.useEffect(()=>{typeof localStorage>"u"||localStorage.setItem("micSettings",JSON.stringify(q))},[q]),I.useEffect(()=>{const X=B.current;X&&(X.gainNode.gain.value=GD(q),X.rawTrack.applyConstraints({noiseSuppression:q.noiseSuppression,echoCancellation:q.echoCancellation,autoGainControl:q.autoGainControl}).catch(()=>{}))},[q]),u.jsx(pD.Provider,{value:{isConnected:t,isMuted:r,isStreaming:c,isCameraOn:d,setIsConnected:n,setIsMuted:s,setIsStreaming:f,setIsCameraOn:p,audioProducer:T,setAudioProducer:R,videoProducer:m,setVideoProducer:v,device:b,setDevice:C,producerTransport:k,setProducerTransport:D,consumerTransport:M,setConsumerTransport:P,consumers:h,users:S,addConsumer:U,setConsumers:g,toggleMute:te,selectedUserId:L,setSelectedUserId:O,previewUserIds:V,togglePreview:G,videoAudioProducer:x,setVideoAudioProducer:_,isUserMute:o,setIsUserMute:a,micSettings:q,setMicSettings:N,setMicAudioState:Q,clearMicAudioState:se},children:e.children})},bh=(e,t=ub.STREAM_VOLUMES)=>{try{const n=localStorage.getItem(t);if(n)return JSON.parse(n)[e]??1}catch(n){console.error("Error reading volume from localStorage:",n,t)}return 1},XG=e=>{const{consumers:t}=Un(),n=I.useRef(new Map),[r,s]=I.useState({}),o=I.useRef(new Map);I.useEffect(()=>{t.forEach(({producerId:d,track:p,kind:h,appData:g})=>{const S=g==null?void 0:g.source;if(h==="audio"&&S!=="screen-audio"&&!n.current.has(d)){const y=o.current.get(d),b=y?bh(y):1,C=document.createElement("audio");C.srcObject=new MediaStream([p]),C.autoplay=!0,C.volume=r[y||d]??b,n.current.set(d,C),document.body.appendChild(C)}});const f=t.map(d=>d.producerId);return n.current.forEach((d,p)=>{f.includes(p)||(d.pause(),d.remove(),n.current.delete(p))}),()=>{n.current.forEach(d=>{d.pause(),d.remove()}),n.current.clear()}},[t]),I.useEffect(()=>{n.current.forEach((f,d)=>{const p=o.current.get(d);p&&r[p]!==void 0&&(f.volume=r[p])})},[r]);const a=(f,d)=>{s(p=>({...p,[f]:d/100})),c2(f,d/100)},c=(f,d)=>{o.current.set(f,d),s(p=>{if(p[d]===void 0){const h=bh(d);return{...p,[d]:h}}return p})};return u.jsx(fD.Provider,{value:{setVolume:a,registerProducerUser:c,userVolumes:r},children:e.children})},QG=()=>{const e=I.useContext(fD);if(!e)throw new Error("useAudioContext  must be used within a AudioProvider");return e};function JG(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const ZG=typeof window<"u"?I.useLayoutEffect:I.useEffect;function En(e,t){ZG(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function eK(e,t){e&&JG(e),En(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),En(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),En(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),En(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),En(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),En(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),En(`mantine-form:${e}:clear-errors`,t.clearErrors),En(`mantine-form:${e}:reset`,t.reset),En(`mantine-form:${e}:validate`,t.validate),En(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),En(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),En(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),En(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),En(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),En(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),En(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),En(`mantine-form:${e}:reset-touched`,t.resetTouched)}function tK(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function Yw(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function nK(e){const[t,n]=I.useState(Yw(e)),r=I.useRef(t),s=I.useCallback(f=>{n(d=>{const p=Yw(typeof f=="function"?f(d):f);return r.current=p,p})},[]),o=I.useCallback(()=>s({}),[]),a=I.useCallback(f=>{r.current[f]!==void 0&&s(d=>{const p={...d};return delete p[f],p})},[t]),c=I.useCallback((f,d)=>{d==null||d===!1?a(f):r.current[f]!==d&&s(p=>({...p,[f]:d}))},[t]);return{errorsState:t,setErrors:s,clearErrors:o,setFieldError:c,clearFieldError:a}}function Xw(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function OT(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function AT(e,t,n,r){if(t===void 0)return n;const s=`${String(e)}`;let o=n;r===-1&&(o=Xw(`${s}.${t}`,o));const a={...o},c=new Set;return Object.entries(o).filter(([f])=>{if(!f.startsWith(`${s}.`))return!1;const d=OT(f,s);return Number.isNaN(d)?!1:d>=t}).forEach(([f,d])=>{const p=OT(f,s),h=f.replace(`${s}.${p}`,`${s}.${p+r}`);a[h]=d,c.add(h),c.has(f)||delete a[f]}),a}function rK(e,{from:t,to:n},r){const s=`${e}.${t}`,o=`${e}.${n}`,a={...r};return Object.keys(r).every(c=>{let f,d;if(c.startsWith(s)&&(f=c,d=c.replace(s,o)),c.startsWith(o)&&(f=c.replace(o,s),d=c),f&&d){const p=a[f],h=a[d];return h===void 0?delete a[f]:a[f]=h,p===void 0?delete a[d]:a[d]=p,!1}return!0}),a}function $T(e,t,n){typeof n.value=="object"&&(n.value=ic(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function ic(e){if(typeof e!="object")return e;var t=0,n,r,s,o=Object.prototype.toString.call(e);if(o==="[object Object]"?s=Object.create(e.__proto__||null):o==="[object Array]"?s=Array(e.length):o==="[object Set]"?(s=new Set,e.forEach(function(a){s.add(ic(a))})):o==="[object Map]"?(s=new Map,e.forEach(function(a,c){s.set(ic(c),ic(a))})):o==="[object Date]"?s=new Date(+e):o==="[object RegExp]"?s=new RegExp(e.source,e.flags):o==="[object DataView]"?s=new e.constructor(ic(e.buffer)):o==="[object ArrayBuffer]"?s=e.slice(0):o.slice(-6)==="Array]"&&(s=new e.constructor(e)),s){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)$T(s,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(s,n=r[t])&&s[n]===e[n]||$T(s,n,Object.getOwnPropertyDescriptor(e,n))}return s||e}function x2(e){return typeof e!="string"?[]:e.split(".")}function Dn(e,t){const n=x2(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let s=1;s<n.length&&r!=null;s+=1)r=r[n[s]];return r}function Hd(e,t,n){const r=x2(e);if(r.length===0)return n;const s=ic(n);if(r.length===1)return s[r[0]]=t,s;let o=s[r[0]];for(let a=1;a<r.length-1;a+=1){if(o===void 0)return s;o=o[r[a]]}return o[r[r.length-1]]=t,s}function sK(e,{from:t,to:n},r){const s=Dn(e,r);if(!Array.isArray(s))return r;const o=[...s],a=s[t];return o.splice(t,1),o.splice(n,0,a),Hd(e,o,r)}function oK(e,t,n,r){const s=Dn(e,r);if(!Array.isArray(s))return r;const o=[...s];return o.splice(typeof n=="number"?n:o.length,0,t),Hd(e,o,r)}function iK(e,t,n){const r=Dn(e,n);return Array.isArray(r)?Hd(e,r.filter((s,o)=>o!==t),n):n}function aK(e,t,n,r){const s=Dn(e,r);if(!Array.isArray(s)||s.length<=n)return r;const o=[...s];return o[n]=t,Hd(e,o,r)}function cK({$values:e,$errors:t,$status:n}){const r=I.useCallback((c,f)=>{n.clearFieldDirty(c),t.setErrors(d=>rK(c,f,d)),e.setValues({values:sK(c,f,e.refValues.current),updateState:!0})},[]),s=I.useCallback((c,f)=>{n.clearFieldDirty(c),t.setErrors(d=>AT(c,f,d,-1)),e.setValues({values:iK(c,f,e.refValues.current),updateState:!0})},[]),o=I.useCallback((c,f,d)=>{n.clearFieldDirty(c),t.setErrors(p=>AT(c,d,p,1)),e.setValues({values:oK(c,f,d,e.refValues.current),updateState:!0})},[]),a=I.useCallback((c,f,d)=>{n.clearFieldDirty(c),e.setValues({values:aK(c,d,f,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:s,insertListItem:o,replaceListItem:a}}var Ky,FT;function lK(){return FT||(FT=1,Ky=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=r;s--!==0;){var a=o[s];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}),Ky}var dK=lK();const _f=ci(dK);function Bl(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(s=>s.startsWith(`${t}.`));return e[t]||r.some(s=>e[s])||!1}return n.some(r=>e[r])}function uK({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[s,o]=I.useState(t),[a,c]=I.useState(e),f=I.useRef(t),d=I.useRef(e),p=I.useCallback(_=>{const k=typeof _=="function"?_(f.current):_;f.current=k,n==="controlled"&&o(k)},[]),h=I.useCallback((_,k=!1)=>{const D=typeof _=="function"?_(d.current):_;d.current=D,(n==="controlled"||k)&&c(D)},[]),g=I.useCallback(()=>p({}),[]),S=I.useCallback(_=>{const k=_?{...r.refValues.current,..._}:r.refValues.current;r.setValuesSnapshot(k),h({})},[]),y=I.useCallback((_,k)=>{p(D=>Bl(D,_)===k?D:{...D,[_]:k})},[]),b=I.useCallback((_,k,D)=>{h(M=>Bl(M,_)===k?M:{...M,[_]:k},D)},[]),C=I.useCallback((_,k)=>{const D=Bl(d.current,_),M=!_f(Dn(_,r.getValuesSnapshot()),k),P=Xw(_,d.current);P[_]=M,h(P,D!==M)},[]),T=I.useCallback(_=>Bl(f.current,_),[]),R=I.useCallback(_=>h(k=>{if(typeof _!="string")return k;const D=Xw(_,k);return delete D[_],_f(D,k)?k:D}),[]),m=I.useCallback(_=>{if(_){const D=Dn(_,d.current);if(typeof D=="boolean")return D;const M=Dn(_,r.refValues.current),P=Dn(_,r.valuesSnapshot.current);return!_f(M,P)}return Object.keys(d.current).length>0?Bl(d.current):!_f(r.refValues.current,r.valuesSnapshot.current)},[]),v=I.useCallback(()=>d.current,[]),x=I.useCallback(()=>f.current,[]);return{touchedState:s,dirtyState:a,touchedRef:f,dirtyRef:d,setTouched:p,setDirty:h,resetDirty:S,resetTouched:g,isTouched:T,setFieldTouched:y,setFieldDirty:b,setTouchedState:o,setDirtyState:c,clearFieldDirty:R,isDirty:m,getDirty:v,getTouched:x,setCalculatedFieldDirty:C}}function fK({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[s,o]=I.useState(e||{}),a=I.useRef(s),c=I.useRef(s),f=I.useCallback(({values:b,subscribers:C,updateState:T=!0,mergeWithPreviousValues:R=!0})=>{const m=a.current,v=b instanceof Function?b(a.current):b,x=R?{...m,...v}:v;a.current=x,T&&o(x),t==null||t(x,m),C==null||C.filter(Boolean).forEach(_=>_({updatedValues:x,previousValues:m}))},[t]),d=I.useCallback(b=>{var R;const C=Dn(b.path,a.current),T=b.value instanceof Function?b.value(C):b.value;if(C!==T){const m=a.current,v=Hd(b.path,T,a.current);f({values:v,updateState:b.updateState}),(R=b.subscribers)==null||R.filter(Boolean).forEach(x=>x({path:b.path,updatedValues:v,previousValues:m}))}},[f]),p=I.useCallback(b=>{c.current=b},[]),h=I.useCallback((b,C)=>{r.current||(r.current=!0,f({values:b,updateState:n==="controlled"}),p(b),C())},[f]),g=I.useCallback(()=>{f({values:c.current,updateState:!0,mergeWithPreviousValues:!1})},[f]),S=I.useCallback(()=>a.current,[]),y=I.useCallback(()=>c.current,[]);return{initialized:r,stateValues:s,refValues:a,valuesSnapshot:c,setValues:f,setFieldValue:d,resetValues:g,setValuesSnapshot:p,initialize:h,getValues:S,getValuesSnapshot:y}}function pK({$status:e}){const t=I.useRef({}),n=I.useCallback((s,o)=>{I.useEffect(()=>(t.current[s]=t.current[s]||[],t.current[s].push(o),()=>{t.current[s]=t.current[s].filter(a=>a!==o)}),[o])},[]),r=I.useCallback(s=>t.current[s]?t.current[s].map(o=>a=>o({previousValue:Dn(s,a.previousValues),value:Dn(s,a.updatedValues),touched:e.isTouched(s),dirty:e.isDirty(s)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function zT(e,t){return e?`${e}-${t.toString()}`:t.toString()}const Rf=Symbol("root-rule");function BT(e){const t=Yw(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function Qw(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((s,o)=>{const a=e[o],c=`${n===""?"":`${n}.`}${o}`,f=Dn(c,t);let d=!1;return typeof a=="function"&&(s[c]=a(f,t,c)),typeof a=="object"&&Array.isArray(f)&&(d=!0,f.forEach((p,h)=>Qw(a,t,`${c}.${h}`,s)),Rf in a&&(s[c]=a[Rf](f,t,c))),typeof a=="object"&&typeof f=="object"&&f!==null&&(d||Qw(a,t,c,s),Rf in a&&(s[c]=a[Rf](f,t,c))),s},r)}function Jw(e,t){return BT(typeof e=="function"?e(t):Qw(e,t))}function Tf(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=Jw(t,n),s=Object.keys(r.errors).find(o=>e.split(".").every((a,c)=>a===o.split(".")[c]));return{hasError:!!s,error:s?r.errors[s]:null}}const hK="__MANTINE_FORM_INDEX__";function UT(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${hK}`)):!1:!1}function ks({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:s={},initialTouched:o={},clearInputErrorOnChange:a=!0,validateInputOnChange:c=!1,validateInputOnBlur:f=!1,onValuesChange:d,transformValues:p=b=>b,enhanceGetInputProps:h,validate:g,onSubmitPreventDefault:S="always",touchTrigger:y="change"}={}){const b=nK(r),C=fK({initialValues:n,onValuesChange:d,mode:t}),T=uK({initialDirty:s,initialTouched:o,$values:C,mode:t}),R=cK({$values:C,$errors:b,$status:T}),m=pK({$status:T}),[v,x]=I.useState(0),[_,k]=I.useState({}),[D,M]=I.useState(!1),P=I.useCallback(()=>{C.resetValues(),b.clearErrors(),T.resetDirty(),T.resetTouched(),t==="uncontrolled"&&x(Q=>Q+1)},[]),L=I.useCallback(Q=>{a&&b.clearErrors(),t==="uncontrolled"&&x(se=>se+1),Object.keys(m.subscribers.current).forEach(se=>{const X=Dn(se,C.refValues.current),oe=Dn(se,Q);X!==oe&&m.getFieldSubscribers(se).forEach(K=>K({previousValues:Q,updatedValues:C.refValues.current}))})},[a]),O=I.useCallback(Q=>{const se=C.refValues.current;C.initialize(Q,()=>t==="uncontrolled"&&x(X=>X+1)),L(se)},[L]),V=I.useCallback((Q,se,X)=>{const oe=UT(Q,c),K=se instanceof Function?se(Dn(Q,C.refValues.current)):se;T.setCalculatedFieldDirty(Q,K),y==="change"&&T.setFieldTouched(Q,!0),!oe&&a&&b.clearFieldError(Q),C.setFieldValue({path:Q,value:se,updateState:t==="controlled",subscribers:[...m.getFieldSubscribers(Q),oe?Z=>{const fe=Tf(Q,g,Z.updatedValues);fe.hasError?b.setFieldError(Q,fe.error):b.clearFieldError(Q)}:null,(X==null?void 0:X.forceUpdate)!==!1&&t!=="controlled"?()=>k(Z=>({...Z,[Q]:(Z[Q]||0)+1})):null]})},[d,g]),H=I.useCallback(Q=>{const se=C.refValues.current;C.setValues({values:Q,updateState:t==="controlled"}),L(se)},[d,L]),q=I.useCallback(()=>{const Q=Jw(g,C.refValues.current);return b.setErrors(Q.errors),Q},[g]),N=I.useCallback(Q=>{const se=Tf(Q,g,C.refValues.current);return se.hasError?b.setFieldError(Q,se.error):b.clearFieldError(Q),se},[g]),B=(Q,{type:se="input",withError:X=!0,withFocus:oe=!0,...K}={})=>{const fe={onChange:tK(xe=>V(Q,xe,{forceUpdate:!1})),"data-path":zT(e,Q)};return X&&(fe.error=b.errorsState[Q]),se==="checkbox"?fe[t==="controlled"?"checked":"defaultChecked"]=Dn(Q,C.refValues.current):fe[t==="controlled"?"value":"defaultValue"]=Dn(Q,C.refValues.current),oe&&(fe.onFocus=()=>T.setFieldTouched(Q,!0),fe.onBlur=()=>{if(UT(Q,f)){const xe=Tf(Q,g,C.refValues.current);xe.hasError?b.setFieldError(Q,xe.error):b.clearFieldError(Q)}}),Object.assign(fe,h==null?void 0:h({inputProps:fe,field:Q,options:{type:se,withError:X,withFocus:oe,...K},form:ne}))},$=(Q,se)=>X=>{S==="always"&&(X==null||X.preventDefault());const oe=q();if(oe.hasErrors)S==="validation-failed"&&(X==null||X.preventDefault()),se==null||se(oe.errors,C.refValues.current,X);else{const K=Q==null?void 0:Q(p(C.refValues.current),X);K instanceof Promise&&(M(!0),K.finally(()=>M(!1)))}},F=Q=>p(Q||C.refValues.current),z=I.useCallback(Q=>{Q.preventDefault(),P()},[]),U=I.useCallback(Q=>Q?!Tf(Q,g,C.refValues.current).hasError:!Jw(g,C.refValues.current).hasErrors,[g]),G=Q=>`${v}-${Q}-${_[Q]||0}`,te=I.useCallback(Q=>document.querySelector(`[data-path="${zT(e,Q)}"]`),[]),ne={watch:m.watch,initialized:C.initialized.current,values:C.stateValues,getValues:C.getValues,setInitialValues:C.setValuesSnapshot,initialize:O,setValues:H,setFieldValue:V,submitting:D,setSubmitting:M,errors:b.errorsState,setErrors:b.setErrors,setFieldError:b.setFieldError,clearFieldError:b.clearFieldError,clearErrors:b.clearErrors,resetDirty:T.resetDirty,setTouched:T.setTouched,setDirty:T.setDirty,isTouched:T.isTouched,resetTouched:T.resetTouched,isDirty:T.isDirty,getTouched:T.getTouched,getDirty:T.getDirty,reorderListItem:R.reorderListItem,insertListItem:R.insertListItem,removeListItem:R.removeListItem,replaceListItem:R.replaceListItem,reset:P,validate:q,validateField:N,getInputProps:B,onSubmit:$,onReset:z,isValid:U,getTransformedValues:F,key:G,getInputNode:te};return eK(e,ne),ne}const Cr=(e,t)=>n=>n===void 0?null:n.trim().length<e?`${t}    ${e} `:null,ws=(e,t)=>n=>n===void 0?null:n.trim().length>e?`${t}    ${e} `:null,gb=e=>e===void 0||/^\S+@\S+$/.test(e)?null:"  email",Ss=(...e)=>t=>{for(const n of e){const r=n(t);if(r)return r}return null},mK=()=>{const{accessToken:e}=re(a=>a.userStore),t=Ae(),n=Ws(),r=ks({initialValues:{mail:"",password:""},validate:{mail:Ss(Cr(6,"Email"),ws(50,"Email"),gb),password:Cr(6,"")}}),s=async a=>{(await t(_p(a))).meta.requestStatus==="fulfilled"&&n("/main")},o=()=>{n("/")};return I.useEffect(()=>{e&&n("/main")},[e,n]),u.jsxs(Bn,{shadow:"sm",padding:"lg",radius:"md",bg:"#1c1c1c",c:"white",w:"30vw",miw:"300px",children:[u.jsxs(ve,{justify:"space-between",align:"center",mb:"md",children:[u.jsx(me,{fw:500,children:"   "}),u.jsx(tt,{variant:"subtle",onClick:o,children:u.jsx(eb,{size:24})})]}),u.jsx("form",{onSubmit:r.onSubmit(s),children:u.jsxs(ge,{gap:"md",children:[u.jsx(qt,{label:"Email",placeholder:" email",...r.getInputProps("mail"),maxLength:50,required:!0}),u.jsx(fm,{label:"",placeholder:" ",...r.getInputProps("password"),required:!0}),u.jsx(ve,{justify:"center",mt:"md",children:u.jsx(Ne,{type:"submit",children:""})})]})})]})},gK=()=>u.jsx(Cn,{w:"100vw",h:"100vh",gap:"md",justify:"center",align:"center",direction:"column",bg:"linear-gradient(135deg, #4a90e2, #7b4397)",children:u.jsx(mK,{})}),vK=()=>{const e=Ws(),{code:t}=oz(),{ServerName:n,ServerIconId:r,InvitationToken:s}=IG(t||""),{iconBase64:o}=Es(r),a=Ae(),{user:c}=re(p=>p.userStore),f=ks({initialValues:{userName:c.name},validate:{userName:Ss(Cr(6,""),ws(50,""))}}),d=async p=>{if(!s)return;(await a(np({invitationToken:s,userName:p.userName}))).meta.requestStatus==="fulfilled"&&(e("/main"),f.reset())};return I.useEffect(()=>{c.name||a(cd())},[c]),I.useEffect(()=>{f.setFieldValue("userName",c.name)},[c.name]),u.jsx(Cn,{w:"100vw",h:"100vh",gap:"md",justify:"center",align:"center",direction:"column",bg:"linear-gradient(135deg, #4a90e2, #7b4397)",children:u.jsx("form",{onSubmit:f.onSubmit(d),children:u.jsxs(ge,{align:"center",gap:"20px",children:[u.jsxs(Xt,{order:3,children:["   : ",n]}),u.jsx($t,{size:100,radius:50,src:o}),u.jsx(qt,{variant:"filled",label:"  ",placeholder:"   ",w:500,radius:"md",...f.getInputProps("userName")}),u.jsx(Ne,{type:"submit",fullWidth:!0,variant:"default",radius:"md",children:""})]})})})},yK=()=>{const{accessToken:e}=re(n=>n.userStore),t=Ws();return I.useEffect(()=>{e&&t("/main")},[e,t]),u.jsxs(Cn,{w:"100vw",h:"100vh",gap:"md",justify:"center",align:"center",direction:"column",bg:"linear-gradient(135deg, #4a90e2, #7b4397)",children:[u.jsx(Xt,{order:3,children:"   Hitscord!"}),u.jsxs(ve,{gap:"20px",children:[u.jsx(z_,{to:"/login",children:u.jsx(Ne,{variant:"filled",radius:"md",children:""})}),u.jsx(z_,{to:"/register",children:u.jsx(Ne,{variant:"filled",radius:"md",children:""})})]})]})},vb=e=>(e=e.replace(/@([a-zA-Z]+#\d+)/g,"//{usertag:$1}//"),e=e.replace(/@([a-zA-Z0-9_-]+)/g,(t,n)=>/\d/.test(n)?t:`//{roletag:${n}}//`),e),wK=()=>{const{currentChannelId:e,currentNotificationChannelId:t,serverData:n}=re(o=>o.testServerStore),r=n.channels.textChannels.find(o=>o.channelId===e),s=n.channels.notificationChannels.find(o=>o.channelId===t);return{canWrite:e?r==null?void 0:r.canWrite:s==null?void 0:s.canWrite,canWriteSub:e?r==null?void 0:r.canWriteSub:!1,nonReadedCount:e?r==null?void 0:r.nonReadedCount:s==null?void 0:s.nonReadedCount,nonReadedTaggedCount:e?r==null?void 0:r.nonReadedTaggedCount:s==null?void 0:s.nonReadedTaggedCount}},C2=({users:e,roles:t,textareaRef:n,newMessage:r,setNewMessage:s})=>{const[o,a]=I.useState(!1),[c,f]=I.useState([]),[d,p]=I.useState(0),[h,g]=I.useState(null),S=I.useRef(null),y=(k,D)=>{const M=k.slice(0,D),P=M.match(/@([\w#-]*)$/);if(P){const L=P[1];return{type:"user",id:"",display:"",tag:"",startIndex:M.lastIndexOf("@"),searchText:L}}return null},b=k=>{const D=k.searchText.toLowerCase(),M=e.filter(L=>`${L.userName}#${L.userTag}`.toLowerCase().includes(D)).slice(0,5).map(L=>({type:"user",id:L.userId,display:L.userName,tag:`${L.userTag}`,startIndex:k.startIndex,searchText:k.searchText})),P=t?t.filter(L=>L.name.toLowerCase().includes(D)||L.tag.toLowerCase().includes(D)).slice(0,5).map(L=>({type:"role",id:L.id,display:L.name,tag:L.tag,startIndex:k.startIndex,searchText:k.searchText})):[];return[...M,...P]},C=()=>{a(!1),g(null)},T=k=>{const D=k.target.value,M=k.target.selectionStart||0;s(D);const P=y(D,M);if(P){const L=b(P);f(L),g(P),a(L.length>0),p(0)}else a(!1),g(null)},R=k=>{if(!h||!n.current)return;const D=r.slice(0,h.startIndex),M=r.slice(n.current.selectionStart||0),P=k.type==="user"?`@${k.tag} `:`@${k.tag} `,L=D+P+M;s(L),a(!1),g(null),setTimeout(()=>{const O=D.length+P.length;n.current.setSelectionRange(O,O),n.current.focus()},0)},m=()=>{p(k=>k<c.length-1?k+1:0)},v=()=>{p(k=>k>0?k-1:c.length-1)},x=()=>{c[d]&&R(c[d])},_=()=>{a(!1),g(null)};return I.useEffect(()=>{if(S.current&&o){const k=S.current.children[d];k&&k.scrollIntoView({block:"nearest"})}},[d,o]),{suggestionsRef:S,suggestions:c,showSuggestions:o,clearSuggestions:C,handleTextChange:T,insertMention:R,downSuggestion:m,upSuggestion:v,enterSuggestion:x,cancelSuggestion:_,selectedSuggestionIndex:d,setSelectedSuggestionIndex:p}},yb=()=>{const e=Ae(),{uploadedFiles:t}=re(r=>r.filesStore),n=r=>{e(bp({fileId:r}))};return u.jsx(u.Fragment,{children:t.length>0&&u.jsx(ie,{style:{position:"absolute",bottom:"100%",left:0,right:0,padding:"6px",backgroundColor:"#1E1F22",borderTopLeftRadius:8,borderTopRightRadius:8},children:u.jsx(Pt,{scrollbarSize:4,type:"auto",children:u.jsx(ve,{wrap:"nowrap",children:t.map(r=>u.jsx(Bn,{shadow:"sm",padding:"xs",radius:"md",withBorder:!0,style:{minWidth:140},children:u.jsxs(ve,{gap:"xs",justify:"space-between",align:"center",wrap:"nowrap",children:[u.jsx(Vj,{size:16}),u.jsx(me,{size:"xs",truncate:!0,children:r.fileName}),u.jsx(tt,{size:"sm",variant:"subtle",color:"red",onClick:()=>n(r.fileId),children:u.jsx(To,{size:14})})]})},r.fileId))})})})})};var Pp={exports:{}},SK=Pp.exports,VT;function bK(){return VT||(VT=1,function(e,t){(function(n,r){e.exports=r()})(SK,function(){var n=1e3,r=6e4,s=36e5,o="millisecond",a="second",c="minute",f="hour",d="day",p="week",h="month",g="quarter",S="year",y="date",b="Invalid Date",C=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,T=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(H){var q=["th","st","nd","rd"],N=H%100;return"["+H+(q[(N-20)%10]||q[N]||q[0])+"]"}},m=function(H,q,N){var B=String(H);return!B||B.length>=q?H:""+Array(q+1-B.length).join(N)+H},v={s:m,z:function(H){var q=-H.utcOffset(),N=Math.abs(q),B=Math.floor(N/60),$=N%60;return(q<=0?"+":"-")+m(B,2,"0")+":"+m($,2,"0")},m:function H(q,N){if(q.date()<N.date())return-H(N,q);var B=12*(N.year()-q.year())+(N.month()-q.month()),$=q.clone().add(B,h),F=N-$<0,z=q.clone().add(B+(F?-1:1),h);return+(-(B+(N-$)/(F?$-z:z-$))||0)},a:function(H){return H<0?Math.ceil(H)||0:Math.floor(H)},p:function(H){return{M:h,y:S,w:p,d,D:y,h:f,m:c,s:a,ms:o,Q:g}[H]||String(H||"").toLowerCase().replace(/s$/,"")},u:function(H){return H===void 0}},x="en",_={};_[x]=R;var k="$isDayjsObject",D=function(H){return H instanceof O||!(!H||!H[k])},M=function H(q,N,B){var $;if(!q)return x;if(typeof q=="string"){var F=q.toLowerCase();_[F]&&($=F),N&&(_[F]=N,$=F);var z=q.split("-");if(!$&&z.length>1)return H(z[0])}else{var U=q.name;_[U]=q,$=U}return!B&&$&&(x=$),$||!B&&x},P=function(H,q){if(D(H))return H.clone();var N=typeof q=="object"?q:{};return N.date=H,N.args=arguments,new O(N)},L=v;L.l=M,L.i=D,L.w=function(H,q){return P(H,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var O=function(){function H(N){this.$L=M(N.locale,null,!0),this.parse(N),this.$x=this.$x||N.x||{},this[k]=!0}var q=H.prototype;return q.parse=function(N){this.$d=function(B){var $=B.date,F=B.utc;if($===null)return new Date(NaN);if(L.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var z=$.match(C);if(z){var U=z[2]-1||0,G=(z[7]||"0").substring(0,3);return F?new Date(Date.UTC(z[1],U,z[3]||1,z[4]||0,z[5]||0,z[6]||0,G)):new Date(z[1],U,z[3]||1,z[4]||0,z[5]||0,z[6]||0,G)}}return new Date($)}(N),this.init()},q.init=function(){var N=this.$d;this.$y=N.getFullYear(),this.$M=N.getMonth(),this.$D=N.getDate(),this.$W=N.getDay(),this.$H=N.getHours(),this.$m=N.getMinutes(),this.$s=N.getSeconds(),this.$ms=N.getMilliseconds()},q.$utils=function(){return L},q.isValid=function(){return this.$d.toString()!==b},q.isSame=function(N,B){var $=P(N);return this.startOf(B)<=$&&$<=this.endOf(B)},q.isAfter=function(N,B){return P(N)<this.startOf(B)},q.isBefore=function(N,B){return this.endOf(B)<P(N)},q.$g=function(N,B,$){return L.u(N)?this[B]:this.set($,N)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(N,B){var $=this,F=!!L.u(B)||B,z=L.p(N),U=function(K,Z){var fe=L.w($.$u?Date.UTC($.$y,Z,K):new Date($.$y,Z,K),$);return F?fe:fe.endOf(d)},G=function(K,Z){return L.w($.toDate()[K].apply($.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(Z)),$)},te=this.$W,ne=this.$M,Q=this.$D,se="set"+(this.$u?"UTC":"");switch(z){case S:return F?U(1,0):U(31,11);case h:return F?U(1,ne):U(0,ne+1);case p:var X=this.$locale().weekStart||0,oe=(te<X?te+7:te)-X;return U(F?Q-oe:Q+(6-oe),ne);case d:case y:return G(se+"Hours",0);case f:return G(se+"Minutes",1);case c:return G(se+"Seconds",2);case a:return G(se+"Milliseconds",3);default:return this.clone()}},q.endOf=function(N){return this.startOf(N,!1)},q.$set=function(N,B){var $,F=L.p(N),z="set"+(this.$u?"UTC":""),U=($={},$[d]=z+"Date",$[y]=z+"Date",$[h]=z+"Month",$[S]=z+"FullYear",$[f]=z+"Hours",$[c]=z+"Minutes",$[a]=z+"Seconds",$[o]=z+"Milliseconds",$)[F],G=F===d?this.$D+(B-this.$W):B;if(F===h||F===S){var te=this.clone().set(y,1);te.$d[U](G),te.init(),this.$d=te.set(y,Math.min(this.$D,te.daysInMonth())).$d}else U&&this.$d[U](G);return this.init(),this},q.set=function(N,B){return this.clone().$set(N,B)},q.get=function(N){return this[L.p(N)]()},q.add=function(N,B){var $,F=this;N=Number(N);var z=L.p(B),U=function(ne){var Q=P(F);return L.w(Q.date(Q.date()+Math.round(ne*N)),F)};if(z===h)return this.set(h,this.$M+N);if(z===S)return this.set(S,this.$y+N);if(z===d)return U(1);if(z===p)return U(7);var G=($={},$[c]=r,$[f]=s,$[a]=n,$)[z]||1,te=this.$d.getTime()+N*G;return L.w(te,this)},q.subtract=function(N,B){return this.add(-1*N,B)},q.format=function(N){var B=this,$=this.$locale();if(!this.isValid())return $.invalidDate||b;var F=N||"YYYY-MM-DDTHH:mm:ssZ",z=L.z(this),U=this.$H,G=this.$m,te=this.$M,ne=$.weekdays,Q=$.months,se=$.meridiem,X=function(Z,fe,xe,ye){return Z&&(Z[fe]||Z(B,F))||xe[fe].slice(0,ye)},oe=function(Z){return L.s(U%12||12,Z,"0")},K=se||function(Z,fe,xe){var ye=Z<12?"AM":"PM";return xe?ye.toLowerCase():ye};return F.replace(T,function(Z,fe){return fe||function(xe){switch(xe){case"YY":return String(B.$y).slice(-2);case"YYYY":return L.s(B.$y,4,"0");case"M":return te+1;case"MM":return L.s(te+1,2,"0");case"MMM":return X($.monthsShort,te,Q,3);case"MMMM":return X(Q,te);case"D":return B.$D;case"DD":return L.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return X($.weekdaysMin,B.$W,ne,2);case"ddd":return X($.weekdaysShort,B.$W,ne,3);case"dddd":return ne[B.$W];case"H":return String(U);case"HH":return L.s(U,2,"0");case"h":return oe(1);case"hh":return oe(2);case"a":return K(U,G,!0);case"A":return K(U,G,!1);case"m":return String(G);case"mm":return L.s(G,2,"0");case"s":return String(B.$s);case"ss":return L.s(B.$s,2,"0");case"SSS":return L.s(B.$ms,3,"0");case"Z":return z}return null}(Z)||z.replace(":","")})},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(N,B,$){var F,z=this,U=L.p(B),G=P(N),te=(G.utcOffset()-this.utcOffset())*r,ne=this-G,Q=function(){return L.m(z,G)};switch(U){case S:F=Q()/12;break;case h:F=Q();break;case g:F=Q()/3;break;case p:F=(ne-te)/6048e5;break;case d:F=(ne-te)/864e5;break;case f:F=ne/s;break;case c:F=ne/r;break;case a:F=ne/n;break;default:F=ne}return $?F:L.a(F)},q.daysInMonth=function(){return this.endOf(h).$D},q.$locale=function(){return _[this.$L]},q.locale=function(N,B){if(!N)return this.$L;var $=this.clone(),F=M(N,B,!0);return F&&($.$L=F),$},q.clone=function(){return L.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},H}(),V=O.prototype;return P.prototype=V,[["$ms",o],["$s",a],["$m",c],["$H",f],["$W",d],["$M",h],["$y",S],["$D",y]].forEach(function(H){V[H[1]]=function(q){return this.$g(q,H[0],H[1])}}),P.extend=function(H,q){return H.$i||(H(q,O,P),H.$i=!0),P},P.locale=M,P.isDayjs=D,P.unix=function(H){return P(1e3*H)},P.en=_[x],P.Ls=_,P.p={},P})}(Pp)),Pp.exports}var xK=bK();const De=ci(xK);function CK({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:s}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=s[t-1][s[t-1].length-1]-1?s[t-1].length-1:s[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===s[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===s[t].length-2&&r>=s[t][s[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:s[t-1].length-1,cellIndex:s[t-1][s[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:s[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===s[t].length-1&&r===s[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===s[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function _2({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:s,size:o}){var f,d,p;const a=CK({direction:t,size:o,rowIndex:r,cellIndex:s,levelIndex:n});if(!a)return;const c=(p=(d=(f=e.current)==null?void 0:f[a.levelIndex])==null?void 0:d[a.rowIndex])==null?void 0:p[a.cellIndex];c&&(c.disabled||c.getAttribute("data-hidden")||c.getAttribute("data-outside")?_2({controlsRef:e,direction:t,levelIndex:a.levelIndex,cellIndex:a.cellIndex,rowIndex:a.rowIndex,size:o}):c.focus())}function _K(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function RK(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function wb({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:s}){const o=_K(s.key);if(o){s.preventDefault();const a=RK(e);_2({controlsRef:e,direction:o,levelIndex:t,rowIndex:n,cellIndex:r,size:a})}}function HT(e,t){if(!e||!t)return t;const n=e.getHours(),r=e.getMinutes(),s=e.getSeconds(),o=e.getMilliseconds(),a=new Date(t);return a.setHours(n),a.setMinutes(r),a.setSeconds(s),a.setMilliseconds(o),a}var Mp={exports:{}},TK=Mp.exports,WT;function EK(){return WT||(WT=1,function(e,t){(function(n,r){e.exports=r()})(TK,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(s,o,a){var c,f=function(g,S,y){y===void 0&&(y={});var b=new Date(g),C=function(T,R){R===void 0&&(R={});var m=R.timeZoneName||"short",v=T+"|"+m,x=r[v];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:T,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:m}),r[v]=x),x}(S,y);return C.formatToParts(b)},d=function(g,S){for(var y=f(g,S),b=[],C=0;C<y.length;C+=1){var T=y[C],R=T.type,m=T.value,v=n[R];v>=0&&(b[v]=parseInt(m,10))}var x=b[3],_=x===24?0:x,k=b[0]+"-"+b[1]+"-"+b[2]+" "+_+":"+b[4]+":"+b[5]+":000",D=+g;return(a.utc(k).valueOf()-(D-=D%1e3))/6e4},p=o.prototype;p.tz=function(g,S){g===void 0&&(g=c);var y,b=this.utcOffset(),C=this.toDate(),T=C.toLocaleString("en-US",{timeZone:g}),R=Math.round((C-new Date(T))/1e3/60),m=15*-Math.round(C.getTimezoneOffset()/15)-R;if(!Number(m))y=this.utcOffset(0,S);else if(y=a(T,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(m,!0),S){var v=y.utcOffset();y=y.add(b-v,"minute")}return y.$x.$timezone=g,y},p.offsetName=function(g){var S=this.$x.$timezone||a.tz.guess(),y=f(this.valueOf(),S,{timeZoneName:g}).find(function(b){return b.type.toLowerCase()==="timezonename"});return y&&y.value};var h=p.startOf;p.startOf=function(g,S){if(!this.$x||!this.$x.$timezone)return h.call(this,g,S);var y=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return h.call(y,g,S).tz(this.$x.$timezone,!0)},a.tz=function(g,S,y){var b=y&&S,C=y||S||c,T=d(+a(),C);if(typeof g!="string")return a(g).tz(C);var R=function(_,k,D){var M=_-60*k*1e3,P=d(M,D);if(k===P)return[M,k];var L=d(M-=60*(P-k)*1e3,D);return P===L?[M,P]:[_-60*Math.min(P,L)*1e3,Math.max(P,L)]}(a.utc(g,b).valueOf(),T,C),m=R[0],v=R[1],x=a(m).utcOffset(v);return x.$x.$timezone=C,x},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(g){c=g}}})}(Mp)),Mp.exports}var kK=EK();const IK=ci(kK);var Np={exports:{}},DK=Np.exports,qT;function jK(){return qT||(qT=1,function(e,t){(function(n,r){e.exports=r()})(DK,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(o,a,c){var f=a.prototype;c.utc=function(b){var C={date:b,utc:!0,args:arguments};return new a(C)},f.utc=function(b){var C=c(this.toDate(),{locale:this.$L,utc:!0});return b?C.add(this.utcOffset(),n):C},f.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var d=f.parse;f.parse=function(b){b.utc&&(this.$u=!0),this.$utils().u(b.$offset)||(this.$offset=b.$offset),d.call(this,b)};var p=f.init;f.init=function(){if(this.$u){var b=this.$d;this.$y=b.getUTCFullYear(),this.$M=b.getUTCMonth(),this.$D=b.getUTCDate(),this.$W=b.getUTCDay(),this.$H=b.getUTCHours(),this.$m=b.getUTCMinutes(),this.$s=b.getUTCSeconds(),this.$ms=b.getUTCMilliseconds()}else p.call(this)};var h=f.utcOffset;f.utcOffset=function(b,C){var T=this.$utils().u;if(T(b))return this.$u?0:T(this.$offset)?h.call(this):this.$offset;if(typeof b=="string"&&(b=function(x){x===void 0&&(x="");var _=x.match(r);if(!_)return null;var k=(""+_[0]).match(s)||["-",0,0],D=k[0],M=60*+k[1]+ +k[2];return M===0?0:D==="+"?M:-M}(b),b===null))return this;var R=Math.abs(b)<=16?60*b:b;if(R===0)return this.utc(C);var m=this.clone();if(C)return m.$offset=R,m.$u=!1,m;var v=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(m=this.local().add(R+v,n)).$offset=R,m.$x.$localOffset=v,m};var g=f.format;f.format=function(b){var C=b||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,C)},f.valueOf=function(){var b=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*b},f.isUTC=function(){return!!this.$u},f.toISOString=function(){return this.toDate().toISOString()},f.toString=function(){return this.toDate().toUTCString()};var S=f.toDate;f.toDate=function(b){return b==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():S.call(this)};var y=f.diff;f.diff=function(b,C,T){if(b&&this.$u===b.$u)return y.call(this,b,C,T);var R=this.local(),m=c(b).local();return y.call(R,m,C,T)}}})}(Np)),Np.exports}var PK=jK();const MK=ci(PK);De.extend(MK);De.extend(IK);function NK(e,t){return t?De(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const GT=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=NK(e,t);return n==="remove"&&(r*=-1),De(e).add(r,"minutes").toDate()};function po(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(s=>GT(s,n,e)):GT(t,n,e)}const LK={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},OK=I.createContext(LK);function Dr(){const e=I.useContext(OK),t=I.useCallback(a=>a||e.locale,[e.locale]),n=I.useCallback(a=>a||e.timezone||void 0,[e.timezone]),r=I.useCallback(a=>typeof a=="number"?a:e.firstDayOfWeek,[e.firstDayOfWeek]),s=I.useCallback(a=>Array.isArray(a)?a:e.weekendDays,[e.weekendDays]),o=I.useCallback(a=>typeof a=="string"?a:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:s,getLabelSeparator:o}}function AK(e,t){const n=Dr(),r=s=>po("remove",s,n.getTimezone()).toISOString();if(t==="range"&&Array.isArray(e)){const[s,o]=e;return s?o?`${r(s)}  ${r(o)}`:`${r(s)} `:""}return t==="multiple"&&Array.isArray(e)?e.map(s=>s&&r(s)).filter(Boolean).join(", "):!Array.isArray(e)&&e?r(e):""}function R2({value:e,type:t,name:n,form:r}){return u.jsx("input",{type:"hidden",value:AK(e,t),name:n,form:r})}R2.displayName="@mantine/dates/HiddenDatesInput";var $K={input:"m_468e7eda"};const FK={},Sb=we((e,t)=>{const n=le("TimeInput",FK,e),{classNames:r,styles:s,unstyled:o,vars:a,withSeconds:c,minTime:f,maxTime:d,value:p,onChange:h,...g}=n,{resolvedClassNames:S,resolvedStyles:y}=Br({classNames:r,styles:s,props:n}),b=T=>{if(f!==void 0||d!==void 0){const[R,m,v]=T.split(":").map(Number);if(f){const[x,_,k]=f.split(":").map(Number);if(R<x||R===x&&m<_||c&&R===x&&m===_&&v<k)return-1}if(d){const[x,_,k]=d.split(":").map(Number);if(R>x||R===x&&m>_||c&&R===x&&m===_&&v>k)return 1}}return 0},C=T=>{var R,m,v;if((R=n.onBlur)==null||R.call(n,T),f!==void 0||d!==void 0){const x=T.currentTarget.value;if(x){const _=b(x);_===1?(T.currentTarget.value=d,(m=n.onChange)==null||m.call(n,T)):_===-1&&(T.currentTarget.value=f,(v=n.onChange)==null||v.call(n,T))}}};return u.jsx(dr,{classNames:{...S,input:ln($K.input,S==null?void 0:S.input)},styles:y,unstyled:o,ref:t,value:p,...g,step:c?1:60,onChange:h,onBlur:C,type:"time",__staticSelector:"TimeInput"})});Sb.classes=dr.classes;Sb.displayName="@mantine/dates/TimeInput";var T2={day:"m_396ce5cb"};const zK={},BK=(e,{size:t})=>({day:{"--day-size":nt(t,"day-size")}}),bb=we((e,t)=>{const n=le("Day",zK,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,date:d,disabled:p,__staticSelector:h,weekend:g,outside:S,selected:y,renderDay:b,inRange:C,firstInRange:T,lastInRange:R,hidden:m,static:v,highlightToday:x,..._}=n,k=Oe({name:h||"Day",classes:T2,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:BK,rootSelector:"day"}),D=Dr();return u.jsx(on,{...k("day",{style:m?{display:"none"}:void 0}),component:v?"div":"button",ref:t,disabled:p,"data-today":De(d).isSame(po("add",new Date,D.getTimezone()),"day")||void 0,"data-hidden":m||void 0,"data-highlight-today":x||void 0,"data-disabled":p||void 0,"data-weekend":!p&&!S&&g||void 0,"data-outside":!p&&S||void 0,"data-selected":!p&&y||void 0,"data-in-range":C&&!p||void 0,"data-first-in-range":T&&!p||void 0,"data-last-in-range":R&&!p||void 0,"data-static":v||void 0,unstyled:c,..._,children:(b==null?void 0:b(d))||De(d).date()})});bb.classes=T2;bb.displayName="@mantine/dates/Day";function UK({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=De().day(n),s=[];for(let o=0;o<7;o+=1)typeof t=="string"?s.push(De(r).add(o,"days").locale(e).format(t)):s.push(t(De(r).add(o,"days").toDate()));return s}var E2={weekday:"m_18a3eca"};const VK={},HK=(e,{size:t})=>({weekdaysRow:{"--wr-fz":en(t),"--wr-spacing":Nt(t)}}),xb=we((e,t)=>{const n=le("WeekdaysRow",VK,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,locale:d,firstDayOfWeek:p,weekdayFormat:h,cellComponent:g="th",__staticSelector:S,withWeekNumbers:y,...b}=n,C=Oe({name:S||"WeekdaysRow",classes:E2,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:HK,rootSelector:"weekdaysRow"}),T=Dr(),R=UK({locale:T.getLocale(d),format:h,firstDayOfWeek:T.getFirstDayOfWeek(p)}).map((m,v)=>u.jsx(g,{...C("weekday"),children:m},v));return u.jsxs(ie,{component:"tr",ref:t,...C("weekdaysRow"),...b,children:[y&&u.jsx(g,{...C("weekday"),children:"#"}),R]})});xb.classes=E2;xb.displayName="@mantine/dates/WeekdaysRow";function WK(e,t=1){let n=De(e);const r=t===0?6:t-1;for(;n.day()!==r;)n=n.add(1,"day");return n.toDate()}function qK(e,t=1){let n=De(e);for(;n.day()!==t;)n=n.subtract(1,"day");return n.toDate()}function GK({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=De(e).subtract(De(e).date()-1,"day"),s=De(r).startOf("day"),o=s.toDate(),a=s.add(+s.daysInMonth()-1,"day").toDate(),c=WK(a,t),f=qK(o,t),d=[];for(;f<=c;){const p=[];for(let h=0;h<7;h+=1)p.push(new Date(f)),f.setDate(f.getDate()+1);d.push(p)}if(n&&d.length<6){const p=d[d.length-1],h=p[p.length-1],g=new Date(h);for(g.setDate(g.getDate()+1);d.length<6;){const S=[];for(let y=0;y<7;y+=1)S.push(new Date(g)),g.setDate(g.getDate()+1);d.push(S)}}return d}function k2(e,t){return t instanceof Date?De(e).isAfter(De(t).subtract(1,"day"),"day"):!0}function I2(e,t){return t instanceof Date?De(e).isBefore(De(t).add(1,"day"),"day"):!0}function KK(e,t,n,r,s,o,a){const c=e.flat().filter(p=>{var h;return I2(p,n)&&k2(p,t)&&!(s!=null&&s(p))&&!((h=r==null?void 0:r(p))!=null&&h.disabled)&&(!o||De(p).isSame(De(a),"month"))}),f=c.find(p=>{var h;return(h=r==null?void 0:r(p))==null?void 0:h.selected});if(f)return f;const d=c.find(p=>De().isSame(p,"date"));return d||c[0]}var Lp={exports:{}},YK=Lp.exports,KT;function XK(){return KT||(KT=1,function(e,t){(function(n,r){e.exports=r()})(YK,function(){var n="day";return function(r,s,o){var a=function(d){return d.add(4-d.isoWeekday(),n)},c=s.prototype;c.isoWeekYear=function(){return a(this).year()},c.isoWeek=function(d){if(!this.$utils().u(d))return this.add(7*(d-this.isoWeek()),n);var p,h,g,S,y=a(this),b=(p=this.isoWeekYear(),h=this.$u,g=(h?o.utc:o)().year(p).startOf("year"),S=4-g.isoWeekday(),g.isoWeekday()>4&&(S+=7),g.add(S,n));return y.diff(b,"week")+1},c.isoWeekday=function(d){return this.$utils().u(d)?this.day()||7:this.day(this.day()%7?d:d-7)};var f=c.startOf;c.startOf=function(d,p){var h=this.$utils(),g=!!h.u(p)||p;return h.p(d)==="isoweek"?g?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):f.bind(this)(d,p)}}})}(Lp)),Lp.exports}var QK=XK();const JK=ci(QK);De.extend(JK);function ZK(e){const t=e.find(n=>De(n).day()===1);return De(t).isoWeek()}var D2={month:"m_cc9820d3",monthCell:"m_8f457cd5",weekNumber:"m_6cff9dea"};const eY={withCellSpacing:!0},tY=(e,{size:t})=>({weekNumber:{"--wn-fz":en(t),"--wn-size":nt(t,"wn-size")}}),Vm=we((e,t)=>{const n=le("Month",eY,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,__staticSelector:d,locale:p,firstDayOfWeek:h,weekdayFormat:g,month:S,weekendDays:y,getDayProps:b,excludeDate:C,minDate:T,maxDate:R,renderDay:m,hideOutsideDates:v,hideWeekdays:x,getDayAriaLabel:_,static:k,__getDayRef:D,__onDayKeyDown:M,__onDayClick:P,__onDayMouseEnter:L,__preventFocus:O,__stopPropagation:V,withCellSpacing:H,size:q,highlightToday:N,withWeekNumbers:B,...$}=n,F=Oe({name:d||"Month",classes:D2,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:tY,rootSelector:"month"}),z=Dr(),U=GK({month:S,firstDayOfWeek:z.getFirstDayOfWeek(h),consistentWeeks:z.consistentWeeks}),G=KK(U,T,R,b,C,v,S),{resolvedClassNames:te,resolvedStyles:ne}=Br({classNames:r,styles:a,props:n}),Q=U.map((se,X)=>{const oe=se.map((K,Z)=>{const fe=!De(K).isSame(De(S),"month"),xe=(_==null?void 0:_(K))||De(K).locale(p||z.locale).format("D MMMM YYYY"),ye=b==null?void 0:b(K),Ee=De(K).isSame(G,"date");return u.jsx("td",{...F("monthCell"),"data-with-spacing":H||void 0,children:u.jsx(bb,{__staticSelector:d||"Month",classNames:te,styles:ne,unstyled:c,"data-mantine-stop-propagation":V||void 0,highlightToday:N,renderDay:m,date:K,size:q,weekend:z.getWeekendDays(y).includes(K.getDay()),outside:fe,hidden:v?fe:!1,"aria-label":xe,static:k,disabled:(C==null?void 0:C(K))||!I2(K,R)||!k2(K,T),ref:Be=>D==null?void 0:D(X,Z,Be),...ye,onKeyDown:Be=>{var et;(et=ye==null?void 0:ye.onKeyDown)==null||et.call(ye,Be),M==null||M(Be,{rowIndex:X,cellIndex:Z,date:K})},onMouseEnter:Be=>{var et;(et=ye==null?void 0:ye.onMouseEnter)==null||et.call(ye,Be),L==null||L(Be,K)},onClick:Be=>{var et;(et=ye==null?void 0:ye.onClick)==null||et.call(ye,Be),P==null||P(Be,K)},onMouseDown:Be=>{var et;(et=ye==null?void 0:ye.onMouseDown)==null||et.call(ye,Be),O&&Be.preventDefault()},tabIndex:O||!Ee?-1:0})},K.toString())});return u.jsxs("tr",{...F("monthRow"),children:[B&&u.jsx("td",{...F("weekNumber"),children:ZK(se)}),oe]},X)});return u.jsxs(ie,{component:"table",...F("month"),size:q,ref:t,...$,children:[!x&&u.jsx("thead",{...F("monthThead"),children:u.jsx(xb,{__staticSelector:d||"Month",locale:p,firstDayOfWeek:h,weekdayFormat:g,size:q,classNames:te,styles:ne,unstyled:c,withWeekNumbers:B})}),u.jsx("tbody",{...F("monthTbody"),children:Q})]})});Vm.classes=D2;Vm.displayName="@mantine/dates/Month";var j2={pickerControl:"m_dc6a3c71"};const nY={},rY=(e,{size:t})=>({pickerControl:{"--dpc-fz":en(t),"--dpc-size":nt(t,"dpc-size")}}),Hm=we((e,t)=>{const n=le("PickerControl",nY,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,firstInRange:d,lastInRange:p,inRange:h,__staticSelector:g,selected:S,disabled:y,...b}=n,C=Oe({name:g||"PickerControl",classes:j2,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:rY,rootSelector:"pickerControl"});return u.jsx(on,{...C("pickerControl"),ref:t,unstyled:c,"data-picker-control":!0,"data-selected":S&&!y||void 0,"data-disabled":y||void 0,"data-in-range":h&&!y&&!S||void 0,"data-first-in-range":d&&!y||void 0,"data-last-in-range":p&&!y||void 0,disabled:y,...b})});Hm.classes=j2;Hm.displayName="@mantine/dates/PickerControl";function P2(e,t,n){return!t&&!n?!1:!!(t&&De(e).isBefore(t,"year")||n&&De(e).isAfter(n,"year"))}function sY(e,t,n,r){const s=e.flat().filter(c=>{var f;return!P2(c,t,n)&&!((f=r==null?void 0:r(c))!=null&&f.disabled)}),o=s.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(o)return o;const a=s.find(c=>De().isSame(c,"year"));return a||s[0]}function M2(e){const t=e.getFullYear(),n=t-t%10;let r=0;const s=[[],[],[],[]];for(let o=0;o<4;o+=1){const a=o===3?1:3;for(let c=0;c<a;c+=1)s[o].push(new Date(n+r,0)),r+=1}return s}var N2={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const oY={yearsListFormat:"YYYY",withCellSpacing:!0},Wm=we((e,t)=>{const n=le("YearsList",oY,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,decade:d,yearsListFormat:p,locale:h,minDate:g,maxDate:S,getYearControlProps:y,__staticSelector:b,__getControlRef:C,__onControlKeyDown:T,__onControlClick:R,__onControlMouseEnter:m,__preventFocus:v,__stopPropagation:x,withCellSpacing:_,size:k,...D}=n,M=Oe({name:b||"YearsList",classes:N2,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,rootSelector:"yearsList"}),P=Dr(),L=M2(d),O=sY(L,g,S,y),V=L.map((H,q)=>{const N=H.map((B,$)=>{const F=y==null?void 0:y(B),z=De(B).isSame(O,"year");return u.jsx("td",{...M("yearsListCell"),"data-with-spacing":_||void 0,children:u.jsx(Hm,{...M("yearsListControl"),size:k,unstyled:c,"data-mantine-stop-propagation":x||void 0,disabled:P2(B,g,S),ref:U=>C==null?void 0:C(q,$,U),...F,onKeyDown:U=>{var G;(G=F==null?void 0:F.onKeyDown)==null||G.call(F,U),T==null||T(U,{rowIndex:q,cellIndex:$,date:B})},onClick:U=>{var G;(G=F==null?void 0:F.onClick)==null||G.call(F,U),R==null||R(U,B)},onMouseEnter:U=>{var G;(G=F==null?void 0:F.onMouseEnter)==null||G.call(F,U),m==null||m(U,B)},onMouseDown:U=>{var G;(G=F==null?void 0:F.onMouseDown)==null||G.call(F,U),v&&U.preventDefault()},tabIndex:v||!z?-1:0,children:De(B).locale(P.getLocale(h)).format(p)})},$)});return u.jsx("tr",{...M("yearsListRow"),children:N},q)});return u.jsx(ie,{component:"table",ref:t,size:k,...M("yearsList"),...D,children:u.jsx("tbody",{children:V})})});Wm.classes=N2;Wm.displayName="@mantine/dates/YearsList";function L2(e,t,n){return!t&&!n?!1:!!(t&&De(e).isBefore(t,"month")||n&&De(e).isAfter(n,"month"))}function iY(e,t,n,r){const s=e.flat().filter(c=>{var f;return!L2(c,t,n)&&!((f=r==null?void 0:r(c))!=null&&f.disabled)}),o=s.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(o)return o;const a=s.find(c=>De().isSame(c,"month"));return a||s[0]}function aY(e){const t=De(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let s=0;s<4;s+=1)for(let o=0;o<3;o+=1)n[s].push(De(t).add(r,"months").toDate()),r+=1;return n}var O2={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const cY={monthsListFormat:"MMM",withCellSpacing:!0},qm=we((e,t)=>{const n=le("MonthsList",cY,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,__staticSelector:d,year:p,monthsListFormat:h,locale:g,minDate:S,maxDate:y,getMonthControlProps:b,__getControlRef:C,__onControlKeyDown:T,__onControlClick:R,__onControlMouseEnter:m,__preventFocus:v,__stopPropagation:x,withCellSpacing:_,size:k,...D}=n,M=Oe({name:d||"MonthsList",classes:O2,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,rootSelector:"monthsList"}),P=Dr(),L=aY(p),O=iY(L,S,y,b),V=L.map((H,q)=>{const N=H.map((B,$)=>{const F=b==null?void 0:b(B),z=De(B).isSame(O,"month");return u.jsx("td",{...M("monthsListCell"),"data-with-spacing":_||void 0,children:u.jsx(Hm,{...M("monthsListControl"),size:k,unstyled:c,__staticSelector:d||"MonthsList","data-mantine-stop-propagation":x||void 0,disabled:L2(B,S,y),ref:U=>C==null?void 0:C(q,$,U),...F,onKeyDown:U=>{var G;(G=F==null?void 0:F.onKeyDown)==null||G.call(F,U),T==null||T(U,{rowIndex:q,cellIndex:$,date:B})},onClick:U=>{var G;(G=F==null?void 0:F.onClick)==null||G.call(F,U),R==null||R(U,B)},onMouseEnter:U=>{var G;(G=F==null?void 0:F.onMouseEnter)==null||G.call(F,U),m==null||m(U,B)},onMouseDown:U=>{var G;(G=F==null?void 0:F.onMouseDown)==null||G.call(F,U),v&&U.preventDefault()},tabIndex:v||!z?-1:0,children:De(B).locale(P.getLocale(g)).format(h)})},$)});return u.jsx("tr",{...M("monthsListRow"),children:N},q)});return u.jsx(ie,{component:"table",ref:t,size:k,...M("monthsList"),...D,children:u.jsx("tbody",{children:V})})});qm.classes=O2;qm.displayName="@mantine/dates/MonthsList";var A2={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const lY={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},dY=(e,{size:t})=>({calendarHeader:{"--dch-control-size":nt(t,"dch-control-size"),"--dch-fz":en(t)}}),vi=we((e,t)=>{const n=le("CalendarHeader",lY,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,nextIcon:d,previousIcon:p,nextLabel:h,previousLabel:g,onNext:S,onPrevious:y,onLevelClick:b,label:C,nextDisabled:T,previousDisabled:R,hasNextLevel:m,levelControlAriaLabel:v,withNext:x,withPrevious:_,__staticSelector:k,__preventFocus:D,__stopPropagation:M,...P}=n,L=Oe({name:k||"CalendarHeader",classes:A2,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,varsResolver:dY,rootSelector:"calendarHeader"}),O=D?V=>V.preventDefault():void 0;return u.jsxs(ie,{...L("calendarHeader"),ref:t,...P,children:[_&&u.jsx(on,{...L("calendarHeaderControl"),"data-direction":"previous","aria-label":g,onClick:y,unstyled:c,onMouseDown:O,disabled:R,"data-disabled":R||void 0,tabIndex:D||R?-1:0,"data-mantine-stop-propagation":M||void 0,children:p||u.jsx(vc,{...L("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),u.jsx(on,{component:m?"button":"div",...L("calendarHeaderLevel"),onClick:m?b:void 0,unstyled:c,onMouseDown:m?O:void 0,disabled:!m,"data-static":!m||void 0,"aria-label":v,tabIndex:D||!m?-1:0,"data-mantine-stop-propagation":M||void 0,children:C}),x&&u.jsx(on,{...L("calendarHeaderControl"),"data-direction":"next","aria-label":h,onClick:S,unstyled:c,onMouseDown:O,disabled:T,"data-disabled":T||void 0,tabIndex:D||T?-1:0,"data-mantine-stop-propagation":M||void 0,children:d||u.jsx(vc,{...L("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});vi.classes=A2;vi.displayName="@mantine/dates/CalendarHeader";function uY(e){const t=M2(e);return[t[0][0],t[3][0]]}const fY={decadeLabelFormat:"YYYY"},Gm=we((e,t)=>{const n=le("DecadeLevel",fY,e),{decade:r,locale:s,minDate:o,maxDate:a,yearsListFormat:c,getYearControlProps:f,__getControlRef:d,__onControlKeyDown:p,__onControlClick:h,__onControlMouseEnter:g,withCellSpacing:S,__preventFocus:y,nextIcon:b,previousIcon:C,nextLabel:T,previousLabel:R,onNext:m,onPrevious:v,nextDisabled:x,previousDisabled:_,levelControlAriaLabel:k,withNext:D,withPrevious:M,decadeLabelFormat:P,classNames:L,styles:O,unstyled:V,__staticSelector:H,__stopPropagation:q,size:N,...B}=n,$=Dr(),[F,z]=uY(r),U={__staticSelector:H||"DecadeLevel",classNames:L,styles:O,unstyled:V,size:N},G=typeof x=="boolean"?x:a?!De(z).endOf("year").isBefore(a):!1,te=typeof _=="boolean"?_:o?!De(F).startOf("year").isAfter(o):!1,ne=(Q,se)=>De(Q).locale(s||$.locale).format(se);return u.jsxs(ie,{"data-decade-level":!0,size:N,ref:t,...B,children:[u.jsx(vi,{label:typeof P=="function"?P(F,z):`${ne(F,P)}  ${ne(z,P)}`,__preventFocus:y,__stopPropagation:q,nextIcon:b,previousIcon:C,nextLabel:T,previousLabel:R,onNext:m,onPrevious:v,nextDisabled:G,previousDisabled:te,hasNextLevel:!1,levelControlAriaLabel:k,withNext:D,withPrevious:M,...U}),u.jsx(Wm,{decade:r,locale:s,minDate:o,maxDate:a,yearsListFormat:c,getYearControlProps:f,__getControlRef:d,__onControlKeyDown:p,__onControlClick:h,__onControlMouseEnter:g,__preventFocus:y,__stopPropagation:q,withCellSpacing:S,...U})]})});Gm.classes={...Wm.classes,...vi.classes};Gm.displayName="@mantine/dates/DecadeLevel";const pY={yearLabelFormat:"YYYY"},Km=we((e,t)=>{const n=le("YearLevel",pY,e),{year:r,locale:s,minDate:o,maxDate:a,monthsListFormat:c,getMonthControlProps:f,__getControlRef:d,__onControlKeyDown:p,__onControlClick:h,__onControlMouseEnter:g,withCellSpacing:S,__preventFocus:y,nextIcon:b,previousIcon:C,nextLabel:T,previousLabel:R,onNext:m,onPrevious:v,onLevelClick:x,nextDisabled:_,previousDisabled:k,hasNextLevel:D,levelControlAriaLabel:M,withNext:P,withPrevious:L,yearLabelFormat:O,__staticSelector:V,__stopPropagation:H,size:q,classNames:N,styles:B,unstyled:$,...F}=n,z=Dr(),U={__staticSelector:V||"YearLevel",classNames:N,styles:B,unstyled:$,size:q},G=typeof _=="boolean"?_:a?!De(r).endOf("year").isBefore(a):!1,te=typeof k=="boolean"?k:o?!De(r).startOf("year").isAfter(o):!1;return u.jsxs(ie,{"data-year-level":!0,size:q,ref:t,...F,children:[u.jsx(vi,{label:typeof O=="function"?O(r):De(r).locale(s||z.locale).format(O),__preventFocus:y,__stopPropagation:H,nextIcon:b,previousIcon:C,nextLabel:T,previousLabel:R,onNext:m,onPrevious:v,onLevelClick:x,nextDisabled:G,previousDisabled:te,hasNextLevel:D,levelControlAriaLabel:M,withNext:P,withPrevious:L,...U}),u.jsx(qm,{year:r,locale:s,minDate:o,maxDate:a,monthsListFormat:c,getMonthControlProps:f,__getControlRef:d,__onControlKeyDown:p,__onControlClick:h,__onControlMouseEnter:g,__preventFocus:y,__stopPropagation:H,withCellSpacing:S,...U})]})});Km.classes={...vi.classes,...qm.classes};Km.displayName="@mantine/dates/YearLevel";const hY={monthLabelFormat:"MMMM YYYY"},Ym=we((e,t)=>{const n=le("MonthLevel",hY,e),{month:r,locale:s,firstDayOfWeek:o,weekdayFormat:a,weekendDays:c,getDayProps:f,excludeDate:d,minDate:p,maxDate:h,renderDay:g,hideOutsideDates:S,hideWeekdays:y,getDayAriaLabel:b,__getDayRef:C,__onDayKeyDown:T,__onDayClick:R,__onDayMouseEnter:m,withCellSpacing:v,highlightToday:x,withWeekNumbers:_,__preventFocus:k,__stopPropagation:D,nextIcon:M,previousIcon:P,nextLabel:L,previousLabel:O,onNext:V,onPrevious:H,onLevelClick:q,nextDisabled:N,previousDisabled:B,hasNextLevel:$,levelControlAriaLabel:F,withNext:z,withPrevious:U,monthLabelFormat:G,classNames:te,styles:ne,unstyled:Q,__staticSelector:se,size:X,static:oe,...K}=n,Z=Dr(),fe={__staticSelector:se||"MonthLevel",classNames:te,styles:ne,unstyled:Q,size:X},xe=typeof N=="boolean"?N:h?!De(r).endOf("month").isBefore(h):!1,ye=typeof B=="boolean"?B:p?!De(r).startOf("month").isAfter(p):!1;return u.jsxs(ie,{"data-month-level":!0,size:X,ref:t,...K,children:[u.jsx(vi,{label:typeof G=="function"?G(r):De(r).locale(s||Z.locale).format(G),__preventFocus:k,__stopPropagation:D,nextIcon:M,previousIcon:P,nextLabel:L,previousLabel:O,onNext:V,onPrevious:H,onLevelClick:q,nextDisabled:xe,previousDisabled:ye,hasNextLevel:$,levelControlAriaLabel:F,withNext:z,withPrevious:U,...fe}),u.jsx(Vm,{month:r,locale:s,firstDayOfWeek:o,weekdayFormat:a,weekendDays:c,getDayProps:f,excludeDate:d,minDate:p,maxDate:h,renderDay:g,hideOutsideDates:S,hideWeekdays:y,getDayAriaLabel:b,__getDayRef:C,__onDayKeyDown:T,__onDayClick:R,__onDayMouseEnter:m,__preventFocus:k,__stopPropagation:D,static:oe,withCellSpacing:v,highlightToday:x,withWeekNumbers:_,...fe})]})});Ym.classes={...Vm.classes,...vi.classes};Ym.displayName="@mantine/dates/MonthLevel";var $2={levelsGroup:"m_30b26e33"};const mY={},yi=we((e,t)=>{const n=le("LevelsGroup",mY,e),{classNames:r,className:s,style:o,styles:a,unstyled:c,vars:f,__staticSelector:d,...p}=n,h=Oe({name:d||"LevelsGroup",classes:$2,props:n,className:s,style:o,classNames:r,styles:a,unstyled:c,vars:f,rootSelector:"levelsGroup"});return u.jsx(ie,{ref:t,...h("levelsGroup"),...p})});yi.classes=$2;yi.displayName="@mantine/dates/LevelsGroup";const gY={numberOfColumns:1},Xm=we((e,t)=>{const n=le("DecadeLevelGroup",gY,e),{decade:r,locale:s,minDate:o,maxDate:a,yearsListFormat:c,getYearControlProps:f,__onControlClick:d,__onControlMouseEnter:p,withCellSpacing:h,__preventFocus:g,nextIcon:S,previousIcon:y,nextLabel:b,previousLabel:C,onNext:T,onPrevious:R,nextDisabled:m,previousDisabled:v,classNames:x,styles:_,unstyled:k,__staticSelector:D,__stopPropagation:M,numberOfColumns:P,levelControlAriaLabel:L,decadeLabelFormat:O,size:V,vars:H,...q}=n,N=I.useRef([]),B=Array(P).fill(0).map(($,F)=>{const z=De(r).add(F*10,"years").toDate();return u.jsx(Gm,{size:V,yearsListFormat:c,decade:z,withNext:F===P-1,withPrevious:F===0,decadeLabelFormat:O,__onControlClick:d,__onControlMouseEnter:p,__onControlKeyDown:(U,G)=>wb({levelIndex:F,rowIndex:G.rowIndex,cellIndex:G.cellIndex,event:U,controlsRef:N}),__getControlRef:(U,G,te)=>{Array.isArray(N.current[F])||(N.current[F]=[]),Array.isArray(N.current[F][U])||(N.current[F][U]=[]),N.current[F][U][G]=te},levelControlAriaLabel:typeof L=="function"?L(z):L,locale:s,minDate:o,maxDate:a,__preventFocus:g,__stopPropagation:M,nextIcon:S,previousIcon:y,nextLabel:b,previousLabel:C,onNext:T,onPrevious:R,nextDisabled:m,previousDisabled:v,getYearControlProps:f,__staticSelector:D||"DecadeLevelGroup",classNames:x,styles:_,unstyled:k,withCellSpacing:h},F)});return u.jsx(yi,{classNames:x,styles:_,__staticSelector:D||"DecadeLevelGroup",ref:t,size:V,unstyled:k,...q,children:B})});Xm.classes={...yi.classes,...Gm.classes};Xm.displayName="@mantine/dates/DecadeLevelGroup";const vY={numberOfColumns:1},Qm=we((e,t)=>{const n=le("YearLevelGroup",vY,e),{year:r,locale:s,minDate:o,maxDate:a,monthsListFormat:c,getMonthControlProps:f,__onControlClick:d,__onControlMouseEnter:p,withCellSpacing:h,__preventFocus:g,nextIcon:S,previousIcon:y,nextLabel:b,previousLabel:C,onNext:T,onPrevious:R,onLevelClick:m,nextDisabled:v,previousDisabled:x,hasNextLevel:_,classNames:k,styles:D,unstyled:M,__staticSelector:P,__stopPropagation:L,numberOfColumns:O,levelControlAriaLabel:V,yearLabelFormat:H,size:q,vars:N,...B}=n,$=I.useRef([]),F=Array(O).fill(0).map((z,U)=>{const G=De(r).add(U,"years").toDate();return u.jsx(Km,{size:q,monthsListFormat:c,year:G,withNext:U===O-1,withPrevious:U===0,yearLabelFormat:H,__stopPropagation:L,__onControlClick:d,__onControlMouseEnter:p,__onControlKeyDown:(te,ne)=>wb({levelIndex:U,rowIndex:ne.rowIndex,cellIndex:ne.cellIndex,event:te,controlsRef:$}),__getControlRef:(te,ne,Q)=>{Array.isArray($.current[U])||($.current[U]=[]),Array.isArray($.current[U][te])||($.current[U][te]=[]),$.current[U][te][ne]=Q},levelControlAriaLabel:typeof V=="function"?V(G):V,locale:s,minDate:o,maxDate:a,__preventFocus:g,nextIcon:S,previousIcon:y,nextLabel:b,previousLabel:C,onNext:T,onPrevious:R,onLevelClick:m,nextDisabled:v,previousDisabled:x,hasNextLevel:_,getMonthControlProps:f,classNames:k,styles:D,unstyled:M,__staticSelector:P||"YearLevelGroup",withCellSpacing:h},U)});return u.jsx(yi,{classNames:k,styles:D,__staticSelector:P||"YearLevelGroup",ref:t,size:q,unstyled:M,...B,children:F})});Qm.classes={...Km.classes,...yi.classes};Qm.displayName="@mantine/dates/YearLevelGroup";const yY={numberOfColumns:1},Jm=we((e,t)=>{const n=le("MonthLevelGroup",yY,e),{month:r,locale:s,firstDayOfWeek:o,weekdayFormat:a,weekendDays:c,getDayProps:f,excludeDate:d,minDate:p,maxDate:h,renderDay:g,hideOutsideDates:S,hideWeekdays:y,getDayAriaLabel:b,__onDayClick:C,__onDayMouseEnter:T,withCellSpacing:R,highlightToday:m,withWeekNumbers:v,__preventFocus:x,nextIcon:_,previousIcon:k,nextLabel:D,previousLabel:M,onNext:P,onPrevious:L,onLevelClick:O,nextDisabled:V,previousDisabled:H,hasNextLevel:q,classNames:N,styles:B,unstyled:$,numberOfColumns:F,levelControlAriaLabel:z,monthLabelFormat:U,__staticSelector:G,__stopPropagation:te,size:ne,static:Q,vars:se,...X}=n,oe=I.useRef([]),K=Array(F).fill(0).map((Z,fe)=>{const xe=De(r).add(fe,"months").toDate();return u.jsx(Ym,{month:xe,withNext:fe===F-1,withPrevious:fe===0,monthLabelFormat:U,__stopPropagation:te,__onDayClick:C,__onDayMouseEnter:T,__onDayKeyDown:(ye,Ee)=>wb({levelIndex:fe,rowIndex:Ee.rowIndex,cellIndex:Ee.cellIndex,event:ye,controlsRef:oe}),__getDayRef:(ye,Ee,Be)=>{Array.isArray(oe.current[fe])||(oe.current[fe]=[]),Array.isArray(oe.current[fe][ye])||(oe.current[fe][ye]=[]),oe.current[fe][ye][Ee]=Be},levelControlAriaLabel:typeof z=="function"?z(xe):z,locale:s,firstDayOfWeek:o,weekdayFormat:a,weekendDays:c,getDayProps:f,excludeDate:d,minDate:p,maxDate:h,renderDay:g,hideOutsideDates:S,hideWeekdays:y,getDayAriaLabel:b,__preventFocus:x,nextIcon:_,previousIcon:k,nextLabel:D,previousLabel:M,onNext:P,onPrevious:L,onLevelClick:O,nextDisabled:V,previousDisabled:H,hasNextLevel:q,classNames:N,styles:B,unstyled:$,__staticSelector:G||"MonthLevelGroup",size:ne,static:Q,withCellSpacing:R,highlightToday:m,withWeekNumbers:v},fe)});return u.jsx(yi,{classNames:N,styles:B,__staticSelector:G||"MonthLevelGroup",ref:t,size:ne,...X,children:K})});Jm.classes={...yi.classes,...Ym.classes};Jm.displayName="@mantine/dates/MonthLevelGroup";var F2={input:"m_6fa5e2aa"};const wY={},Zm=we((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:s,classNames:o,styles:a,unstyled:c,popoverProps:f,modalProps:d,dropdownType:p,children:h,formattedValue:g,dropdownHandlers:S,dropdownOpened:y,onClick:b,clearable:C,onClear:T,clearButtonProps:R,rightSection:m,shouldClear:v,readOnly:x,disabled:_,value:k,name:D,form:M,type:P,...L}=z0("PickerInputBase",wY,e),O=u.jsx(Dt.ClearButton,{onClick:T,unstyled:c,...R}),V=()=>{P==="range"&&Array.isArray(k)&&k[0]&&!k[1]&&T(),S.close()};return u.jsxs(u.Fragment,{children:[p==="modal"&&!x&&u.jsx(dt,{opened:y,onClose:V,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:c,...d,children:h}),u.jsx(Dt.Wrapper,{...r,children:u.jsxs(an,{position:"bottom-start",opened:y,trapFocus:!0,returnFocus:!1,unstyled:c,...f,disabled:(f==null?void 0:f.disabled)||p==="modal"||x,onChange:H=>{var q;H||((q=f==null?void 0:f.onClose)==null||q.call(f),V())},children:[u.jsx(an.Target,{children:u.jsx(Dt,{"data-dates-input":!0,"data-read-only":x||void 0,disabled:_,component:"button",type:"button",multiline:!0,onClick:H=>{b==null||b(H),S.toggle()},__clearSection:O,__clearable:C&&v&&!x&&!_,rightSection:m,...n,ref:t,classNames:{...o,input:ln(F2.input,o==null?void 0:o.input)},...L,children:g||u.jsx(Dt.Placeholder,{error:n.error,unstyled:c,className:o==null?void 0:o.placeholder,style:a==null?void 0:a.placeholder,children:s})})}),u.jsx(an.Dropdown,{"data-dates-dropdown":!0,children:h})]})}),u.jsx(R2,{value:k,name:D,form:M,type:P})]})});Zm.classes=F2;Zm.displayName="@mantine/dates/PickerInputBase";const YT=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function Cb({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:s=!0}){const o=I.useRef(e),a=Dr(),[c,f,d]=gn({value:po("add",t,a.getTimezone(),!s),defaultValue:po("add",n,a.getTimezone(),!s),finalValue:YT(e),onChange:h=>{r==null||r(po("remove",h,a.getTimezone(),!s))}});let p=c;return o.current!==e&&(o.current=e,t===void 0&&(p=n!==void 0?n:YT(e),f(p))),[p,f,d]}function Yy(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function SY(e){return e===0?"month":e===1?"year":"decade"}function Ul(e,t,n){return SY(br(Yy(e,0),Yy(t,0),Yy(n,2)))}const bY={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},eg=we((e,t)=>{const n=le("Calendar",bY,e),{vars:r,maxLevel:s,minLevel:o,defaultLevel:a,level:c,onLevelChange:f,date:d,defaultDate:p,onDateChange:h,numberOfColumns:g,columnsToScroll:S,ariaLabels:y,nextLabel:b,previousLabel:C,onYearSelect:T,onMonthSelect:R,onYearMouseEnter:m,onMonthMouseEnter:v,__updateDateOnYearSelect:x,__updateDateOnMonthSelect:_,firstDayOfWeek:k,weekdayFormat:D,weekendDays:M,getDayProps:P,excludeDate:L,renderDay:O,hideOutsideDates:V,hideWeekdays:H,getDayAriaLabel:q,monthLabelFormat:N,nextIcon:B,previousIcon:$,__onDayClick:F,__onDayMouseEnter:z,withCellSpacing:U,highlightToday:G,withWeekNumbers:te,monthsListFormat:ne,getMonthControlProps:Q,yearLabelFormat:se,yearsListFormat:X,getYearControlProps:oe,decadeLabelFormat:K,classNames:Z,styles:fe,unstyled:xe,minDate:ye,maxDate:Ee,locale:Be,__staticSelector:et,size:pe,__preventFocus:_e,__stopPropagation:je,onNextDecade:Ue,onPreviousDecade:Je,onNextYear:Ze,onPreviousYear:Fe,onNextMonth:be,onPreviousMonth:Ve,static:He,__timezoneApplied:Ye,...Le}=n,{resolvedClassNames:ct,resolvedStyles:vt}=Br({classNames:Z,styles:fe,props:n}),[ut,pt]=gn({value:c?Ul(c,o,s):void 0,defaultValue:a?Ul(a,o,s):void 0,finalValue:Ul(void 0,o,s),onChange:f}),[Ge,bt]=Cb({type:"default",value:d,defaultValue:p,onChange:h,applyTimezone:!Ye}),pr={__staticSelector:et||"Calendar",styles:vt,classNames:ct,unstyled:xe,size:pe},ko=Dr(),Is=S||g||1,Ca=new Date,zc=ye&&ye>Ca?ye:Ca,hr=Ge||po("add",zc,ko.getTimezone()),Io=()=>{const Gt=De(hr).add(Is,"month").toDate();be==null||be(Gt),bt(Gt)},Do=()=>{const Gt=De(hr).subtract(Is,"month").toDate();Ve==null||Ve(Gt),bt(Gt)},Gd=()=>{const Gt=De(hr).add(Is,"year").toDate();Ze==null||Ze(Gt),bt(Gt)},Kd=()=>{const Gt=De(hr).subtract(Is,"year").toDate();Fe==null||Fe(Gt),bt(Gt)},Yd=()=>{const Gt=De(hr).add(10*Is,"year").toDate();Ue==null||Ue(Gt),bt(Gt)},Xd=()=>{const Gt=De(hr).subtract(10*Is,"year").toDate();Je==null||Je(Gt),bt(Gt)};return u.jsxs(ie,{ref:t,size:pe,"data-calendar":!0,...Le,children:[ut==="month"&&u.jsx(Jm,{month:hr,minDate:ye,maxDate:Ee,firstDayOfWeek:k,weekdayFormat:D,weekendDays:M,getDayProps:P,excludeDate:L,renderDay:O,hideOutsideDates:V,hideWeekdays:H,getDayAriaLabel:q,onNext:Io,onPrevious:Do,hasNextLevel:s!=="month",onLevelClick:()=>pt("year"),numberOfColumns:g,locale:Be,levelControlAriaLabel:y==null?void 0:y.monthLevelControl,nextLabel:(y==null?void 0:y.nextMonth)??b,nextIcon:B,previousLabel:(y==null?void 0:y.previousMonth)??C,previousIcon:$,monthLabelFormat:N,__onDayClick:F,__onDayMouseEnter:z,__preventFocus:_e,__stopPropagation:je,static:He,withCellSpacing:U,highlightToday:G,withWeekNumbers:te,...pr}),ut==="year"&&u.jsx(Qm,{year:hr,numberOfColumns:g,minDate:ye,maxDate:Ee,monthsListFormat:ne,getMonthControlProps:Q,locale:Be,onNext:Gd,onPrevious:Kd,hasNextLevel:s!=="month"&&s!=="year",onLevelClick:()=>pt("decade"),levelControlAriaLabel:y==null?void 0:y.yearLevelControl,nextLabel:(y==null?void 0:y.nextYear)??b,nextIcon:B,previousLabel:(y==null?void 0:y.previousYear)??C,previousIcon:$,yearLabelFormat:se,__onControlMouseEnter:v,__onControlClick:(Gt,Ys)=>{_&&bt(Ys),pt(Ul("month",o,s)),R==null||R(Ys)},__preventFocus:_e,__stopPropagation:je,withCellSpacing:U,...pr}),ut==="decade"&&u.jsx(Xm,{decade:hr,minDate:ye,maxDate:Ee,yearsListFormat:X,getYearControlProps:oe,locale:Be,onNext:Yd,onPrevious:Xd,numberOfColumns:g,nextLabel:(y==null?void 0:y.nextDecade)??b,nextIcon:B,previousLabel:(y==null?void 0:y.previousDecade)??C,previousIcon:$,decadeLabelFormat:K,__onControlMouseEnter:m,__onControlClick:(Gt,Ys)=>{x&&bt(Ys),pt(Ul("year",o,s)),T==null||T(Ys)},__preventFocus:_e,__stopPropagation:je,withCellSpacing:U,...pr})]})});eg.classes={...Xm.classes,...Qm.classes,...Jm.classes};eg.displayName="@mantine/dates/Calendar";function xY(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:s,onLevelChange:o,nextIcon:a,previousIcon:c,date:f,defaultDate:d,onDateChange:p,numberOfColumns:h,columnsToScroll:g,ariaLabels:S,nextLabel:y,previousLabel:b,onYearSelect:C,onMonthSelect:T,onYearMouseEnter:R,onMonthMouseEnter:m,onNextMonth:v,onPreviousMonth:x,onNextYear:_,onPreviousYear:k,onNextDecade:D,onPreviousDecade:M,withCellSpacing:P,highlightToday:L,__updateDateOnYearSelect:O,__updateDateOnMonthSelect:V,withWeekNumbers:H,firstDayOfWeek:q,weekdayFormat:N,weekendDays:B,getDayProps:$,excludeDate:F,renderDay:z,hideOutsideDates:U,hideWeekdays:G,getDayAriaLabel:te,monthLabelFormat:ne,monthsListFormat:Q,getMonthControlProps:se,yearLabelFormat:X,yearsListFormat:oe,getYearControlProps:K,decadeLabelFormat:Z,allowSingleDateInRange:fe,allowDeselect:xe,minDate:ye,maxDate:Ee,locale:Be,...et}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:s,onLevelChange:o,nextIcon:a,previousIcon:c,date:f,defaultDate:d,onDateChange:p,numberOfColumns:h,columnsToScroll:g,ariaLabels:S,nextLabel:y,previousLabel:b,onYearSelect:C,onMonthSelect:T,onYearMouseEnter:R,onMonthMouseEnter:m,onNextMonth:v,onPreviousMonth:x,onNextYear:_,onPreviousYear:k,onNextDecade:D,onPreviousDecade:M,withCellSpacing:P,highlightToday:L,__updateDateOnYearSelect:O,__updateDateOnMonthSelect:V,withWeekNumbers:H,firstDayOfWeek:q,weekdayFormat:N,weekendDays:B,getDayProps:$,excludeDate:F,renderDay:z,hideOutsideDates:U,hideWeekdays:G,getDayAriaLabel:te,monthLabelFormat:ne,monthsListFormat:Q,getMonthControlProps:se,yearLabelFormat:X,yearsListFormat:oe,getYearControlProps:K,decadeLabelFormat:Z,allowSingleDateInRange:fe,allowDeselect:xe,minDate:ye,maxDate:Ee,locale:Be},others:et}}function XT(e,t){const n=[...t].sort((r,s)=>r.getTime()-s.getTime());return De(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&De(n[1]).endOf("day").add(1,"ms").isAfter(e)}function CY({type:e,level:t,value:n,defaultValue:r,onChange:s,allowSingleDateInRange:o,allowDeselect:a,onMouseLeave:c,applyTimezone:f=!0}){const[d,p]=Cb({type:e,value:n,defaultValue:r,onChange:s,applyTimezone:f}),[h,g]=I.useState(e==="range"&&d[0]&&!d[1]?d[0]:null),[S,y]=I.useState(null),b=_=>{if(e==="range"){if(h instanceof Date&&!d[1]){if(De(_).isSame(h,t)&&!o){g(null),y(null),p([null,null]);return}const k=[_,h];k.sort((D,M)=>D.getTime()-M.getTime()),p(k),y(null),g(null);return}if(d[0]&&!d[1]&&De(_).isSame(d[0],t)&&!o){g(null),y(null),p([null,null]);return}p([_,null]),y(null),g(_);return}if(e==="multiple"){d.some(k=>De(k).isSame(_,t))?p(d.filter(k=>!De(k).isSame(_,t))):p([...d,_]);return}d&&a&&De(_).isSame(d,t)?p(null):p(_)},C=_=>h instanceof Date&&S instanceof Date?XT(_,[S,h]):d[0]instanceof Date&&d[1]instanceof Date?XT(_,d):!1,T=e==="range"?_=>{c==null||c(_),y(null)}:c,R=_=>d[0]instanceof Date&&De(_).isSame(d[0],t)?!(S&&De(S).isBefore(d[0])):!1,m=_=>d[1]instanceof Date?De(_).isSame(d[1],t):!(d[0]instanceof Date)||!S?!1:De(S).isBefore(d[0])&&De(_).isSame(d[0],t),v=_=>{if(e==="range")return{selected:d.some(D=>D&&De(D).isSame(_,t)),inRange:C(_),firstInRange:R(_),lastInRange:m(_),"data-autofocus":!!d[0]&&De(d[0]).isSame(_,t)||void 0};if(e==="multiple")return{selected:d.some(D=>D&&De(D).isSame(_,t)),"data-autofocus":!!d[0]&&De(d[0]).isSame(_,t)||void 0};const k=De(d).isSame(_,t);return{selected:k,"data-autofocus":k||void 0}},x=e==="range"&&h?y:()=>{};return I.useEffect(()=>{if(e==="range")if(d[0]&&!d[1]&&(h==null?void 0:h.getTime())!==d[0].getTime())g(d[0]);else{const _=d[0]==null&&d[1]==null,k=d[0]!=null&&d[1]!=null;(_||k)&&(g(null),y(null))}},[d]),{onDateChange:b,onRootMouseLeave:T,onHoveredDateChange:x,getControlProps:v,_value:d,setValue:p}}const _Y={type:"default",defaultLevel:"month",numberOfColumns:1},tg=we((e,t)=>{const n=le("DatePicker",_Y,e),{classNames:r,styles:s,vars:o,type:a,defaultValue:c,value:f,onChange:d,__staticSelector:p,getDayProps:h,allowSingleDateInRange:g,allowDeselect:S,onMouseLeave:y,numberOfColumns:b,hideOutsideDates:C,__onDayMouseEnter:T,__onDayClick:R,__timezoneApplied:m,...v}=n,{onDateChange:x,onRootMouseLeave:_,onHoveredDateChange:k,getControlProps:D}=CY({type:a,level:"day",allowDeselect:S,allowSingleDateInRange:g,value:f,defaultValue:c,onChange:d,onMouseLeave:y,applyTimezone:!m}),{resolvedClassNames:M,resolvedStyles:P}=Br({classNames:r,styles:s,props:n}),L=Dr();return u.jsx(eg,{ref:t,minLevel:"month",classNames:M,styles:P,__staticSelector:p||"DatePicker",onMouseLeave:_,numberOfColumns:b,hideOutsideDates:C??b!==1,__onDayMouseEnter:(O,V)=>{k(V),T==null||T(O,V)},__onDayClick:(O,V)=>{x(V),R==null||R(O,V)},getDayProps:O=>({...D(O),...h==null?void 0:h(O)}),...v,date:po("add",v.date,L.getTimezone(),m),__timezoneApplied:!0})});tg.classes=eg.classes;tg.displayName="@mantine/dates/DatePicker";var z2={timeWrapper:"m_208d2562",timeInput:"m_62ee059"};const RY={dropdownType:"popover"},ng=we((e,t)=>{const n=le("DateTimePicker",RY,e),{value:r,defaultValue:s,onChange:o,valueFormat:a,locale:c,classNames:f,styles:d,unstyled:p,timeInputProps:h,submitButtonProps:g,withSeconds:S,level:y,defaultLevel:b,size:C,variant:T,dropdownType:R,vars:m,minDate:v,maxDate:x,..._}=n,k=Oe({name:"DateTimePicker",classes:z2,props:n,classNames:f,styles:d,unstyled:p,vars:m}),{resolvedClassNames:D,resolvedStyles:M}=Br({classNames:f,styles:d,props:n}),P=a||(S?"DD/MM/YYYY HH:mm:ss":"DD/MM/YYYY HH:mm"),L=I.useRef(null),O=dn(L,h==null?void 0:h.ref),{calendarProps:{allowSingleDateInRange:V,...H},others:q}=xY(_),N=Dr(),[B,$]=Cb({type:"default",value:r,defaultValue:s,onChange:o}),F=ye=>ye?De(ye).format(S?"HH:mm:ss":"HH:mm"):"",[z,U]=I.useState(F(B)),[G,te]=I.useState(y||b||"month"),[ne,Q]=_t(!1),se=B?De(B).locale(N.getLocale(c)).tz(N.getTimezone(),!0).format(P):"",X=ye=>{var Be;(Be=h==null?void 0:h.onChange)==null||Be.call(h,ye);const Ee=ye.currentTarget.value;if(U(Ee),Ee){const[et,pe,_e]=Ee.split(":").map(Number),je=po("add",new Date,N.getTimezone());je.setHours(et),je.setMinutes(pe),je.setSeconds(_e||0),je.setMilliseconds(0),$(HT(je,B||po("add",new Date,N.getTimezone())))}},oe=ye=>{var Ee;ye&&$(HT(B,ye)),(Ee=L.current)==null||Ee.focus()},K=ye=>{var Ee;(Ee=h==null?void 0:h.onKeyDown)==null||Ee.call(h,ye),ye.key==="Enter"&&(ye.preventDefault(),Q.close())};zn(()=>{ne||U(F(B))},[B,ne]),zn(()=>{ne&&te("month")},[ne]);const Z=v?De(v).format("HH:mm:ss"):null,fe=x?De(x).format("HH:mm:ss"):null,xe=R==="popover";return u.jsxs(Zm,{formattedValue:se,dropdownOpened:_.disabled?!1:ne,dropdownHandlers:Q,classNames:D,styles:M,unstyled:p,ref:t,onClear:()=>$(null),shouldClear:!!B,value:B,size:C,variant:T,dropdownType:R,...q,type:"default",__staticSelector:"DateTimePicker",children:[u.jsx(tg,{...H,maxDate:x,minDate:v,size:C,variant:T,type:"default",value:B,defaultDate:B,onChange:oe,locale:c,classNames:D,styles:M,unstyled:p,__staticSelector:"DateTimePicker",__stopPropagation:xe,level:y,defaultLevel:b,onLevelChange:ye=>{var Ee;te(ye),(Ee=H.onLevelChange)==null||Ee.call(H,ye)},__timezoneApplied:!0}),G==="month"&&u.jsxs("div",{...k("timeWrapper"),children:[u.jsx(Sb,{value:z,withSeconds:S,ref:O,unstyled:p,minTime:B&&v&&B.toDateString()===v.toDateString()?Z??void 0:void 0,maxTime:B&&x&&B.toDateString()===x.toDateString()?fe??void 0:void 0,...h,...k("timeInput",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onChange:X,onKeyDown:K,size:C,"data-mantine-stop-propagation":xe||void 0}),u.jsx(tt,{variant:"default",size:`input-${C||"sm"}`,...k("submitButton",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),unstyled:p,"data-mantine-stop-propagation":xe||void 0,children:u.jsx(eS,{size:"30%"}),...g,onClick:ye=>{var Ee;(Ee=g==null?void 0:g.onClick)==null||Ee.call(g,ye),Q.close()}})]})]})});ng.classes={...z2,...Zm.classes,...tg.classes};ng.displayName="@mantine/dates/DateTimePicker";const TY=({form:e,index:t})=>{const n=e.getValues().variants.length,r=()=>{e.removeListItem("variants",t)};return u.jsxs(ve,{align:"center",gap:"xs",children:[u.jsx(qt,{placeholder:` ${t+1}`,withAsterisk:!0,...e.getInputProps(`variants.${t}.content`),style:{flex:1},radius:"md"},e.key(`variants.${t}.content`)),n>2&&u.jsx(tt,{color:"red",variant:"light",onClick:r,children:u.jsx(To,{size:16})})]})},EY={title:"",content:void 0,isAnonimous:!1,multiple:!1,deadLine:void 0,variants:[{number:1,content:""},{number:2,content:""}]},kY=e=>{if(!e)return null;const t=new Date(e),n=new Date(Date.now()+5*60*1e3);return t<n?"      5 ":null},B2=I.createContext(null),Eo="friendship",IY=`${Eo}/createApplication`,DY=`${Eo}/getApplicationsFrom`,jY=`${Eo}/getApplicationsTo`,PY=`${Eo}/approveApplication`,MY=`${Eo}/declineApplication`,NY=`${Eo}/deleteApplication`,LY=`${Eo}/getFriendshipList`,OY=`${Eo}/deleteFriendship`,wi="/friendship",AY=`${wi}/application/create`,$Y=`${wi}/application/list/from`,FY=`${wi}/application/list/to`,zY=`${wi}/application/delete`,BY=`${wi}/application/decline`,UY=`${wi}/application/approve`,VY=e=>`${wi}/delete?UserId=${e}`,HY=`${wi}/list`,WY=async e=>{await ke.post(AY,{userTag:e})},qY=async()=>{const{data:e}=await ke.get($Y);return e},GY=async()=>{const{data:e}=await ke.get(FY);return e},KY=async e=>{await ke.delete(zY,{data:{applicationId:e}})},YY=async e=>{await ke.delete(BY,{data:{applicationId:e}})},XY=async e=>{await ke.post(UY,{applicationId:e})},QY=async e=>{await ke.delete(VY(e))},JY=async()=>{const{data:e}=await ke.get(HY);return e},dd=Pe(IY,async({userTag:e},{rejectWithValue:t})=>{var n,r;try{await WY(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Op=Pe(DY,async(e,{rejectWithValue:t})=>{var n,r;try{return await qY()}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Ap=Pe(jY,async(e,{rejectWithValue:t})=>{var n,r;try{return await GY()}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),$p=Pe(PY,async({applicationId:e},{rejectWithValue:t})=>{var n,r;try{await XY(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Fp=Pe(MY,async({applicationId:e},{rejectWithValue:t})=>{var n,r;try{await YY(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),zp=Pe(NY,async({applicationId:e},{rejectWithValue:t})=>{var n,r;try{await KY(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Bp=Pe(LY,async(e,{rejectWithValue:t})=>{var n,r;try{return await JY()}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Up=Pe(OY,async({userId:e},{rejectWithValue:t})=>{var n,r;try{await QY(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),ZY={applicationFrom:[],applicationTo:[],friendshipList:[],error:"",loading:Ie.IDLE},U2=qs({name:Eo,initialState:ZY,reducers:{addApplicationTo:(e,t)=>{e.applicationTo.push(t.payload)},addApplicationFrom:(e,t)=>{e.applicationFrom.push(t.payload)},removeApplicationFrom:(e,t)=>{e.applicationFrom=e.applicationFrom.filter(n=>n.id!==t.payload)},removeApplicationTo:(e,t)=>{e.applicationTo=e.applicationTo.filter(n=>n.id!==t.payload)},approveApplicationTo:(e,t)=>{const{user:n}=t.payload;e.friendshipList.push(n)},approveApplicationFrom:(e,t)=>{const{user:n}=t.payload;e.applicationFrom=e.applicationFrom.filter(r=>r.id!==t.payload.id),e.friendshipList.push(n)},removeFriend:(e,t)=>{e.friendshipList=e.friendshipList.filter(n=>n.userId!==t.payload)}},extraReducers:e=>{e.addCase(Op.fulfilled,(t,n)=>{t.applicationFrom=n.payload.applications,t.error=""}).addCase(Ap.fulfilled,(t,n)=>{t.applicationTo=n.payload.applications,t.error=""}).addCase($p.fulfilled,(t,{meta:n})=>{const r=n.arg.applicationId;t.applicationTo=t.applicationTo.filter(s=>s.id!==r),t.error=""}).addCase(Fp.fulfilled,(t,{meta:n})=>{const r=n.arg.applicationId;t.applicationTo=t.applicationTo.filter(s=>s.id!==r),t.error=""}).addCase(zp.fulfilled,(t,{meta:n})=>{const r=n.arg.applicationId;t.applicationFrom=t.applicationFrom.filter(s=>s.id!==r),t.error=""}).addCase(Bp.fulfilled,(t,n)=>{t.friendshipList=n.payload.users,t.error=""}).addCase(Up.fulfilled,(t,{meta:n})=>{const r=n.arg.userId;t.friendshipList=t.friendshipList.filter(s=>s.userId!==r),t.error=""}).addMatcher(bn(dd.fulfilled,dd.pending,Op.pending,Ap.pending,$p.pending,Fp.pending,zp.pending,Bp.pending,Up.pending),t=>{t.error=""}).addMatcher(bn(dd.rejected,Op.rejected,Ap.rejected,$p.rejected,Fp.rejected,zp.rejected,Bp.rejected,Up.rejected),(t,n)=>{t.error=n.payload})}}),{addApplicationTo:eX,addApplicationFrom:tX,removeApplicationFrom:nX,removeApplicationTo:rX,approveApplicationTo:sX,approveApplicationFrom:oX,removeFriend:iX}=U2.actions,aX=U2.reducer,_b=({userName:e,userTag:t,actions:n})=>u.jsx(Bn,{bg:"#2c2e33",padding:"xs",radius:"md",withBorder:!0,children:u.jsxs(ve,{justify:"space-between",children:[u.jsxs(ve,{children:[u.jsx($t,{size:"md",color:"blue",children:e[0]}),u.jsxs(ge,{gap:"xs",children:[u.jsx(me,{c:"white",children:e}),u.jsx(me,{c:"dimmed",children:t})]})]}),u.jsx(ve,{children:n})]})}),cX=e=>({userId:e.UserId,userName:e.UserName,userTag:e.UserTag,icon:e.Icon?m2(e.Icon):null,notifiable:e.Notifiable,friendshipApplication:e.FriendshipApplication,nonFriendMessage:e.NonFriendMessage}),Ef=e=>({id:e.Id,user:cX(e.User),createdAt:e.CreatedAt}),lX="/hitscord-frontend/assets/zapsplat_multimedia_notification_alert_ping_bright_chime_001_93276-CjDHi2l_.mp3",dX=e=>{const{volume:t}=Lm(),[n]=$S(lX,{volume:t}),r=Ae(),s=$c(),{showMessage:o,showError:a}=St(),{accessToken:c,user:f}=re($=>$.userStore),{currentServerId:d,currentVoiceChannelId:p,serverData:h,currentChannelId:g,currentNotificationChannelId:S}=re($=>$.testServerStore),{activeChat:y}=re($=>$.chatsStore),b=I.useRef(null),{setIsUserMute:C}=Un(),T=I.useRef(null),R=I.useRef(void 0),m=I.useRef([]),v=I.useRef(p),x=I.useRef(0),_=I.useRef(null),k=I.useRef(null),D=I.useRef(null);I.useEffect(()=>{T.current=d},[d]),I.useEffect(()=>{R.current=f.id},[f]),I.useEffect(()=>{v.current=p},[p]),I.useEffect(()=>{x.current=f.notificationLifeTime},[f.notificationLifeTime]),I.useEffect(()=>{m.current=h.userRoles},[h]),I.useEffect(()=>{_.current=g},[g]),I.useEffect(()=>{k.current=S},[S]),I.useEffect(()=>{D.current=y},[y]),I.useEffect(()=>{if(c){const $=new WebSocket(`wss://166664.msk.web.highserver.ru/api/wss?accessToken=${c}`);return $.onopen=()=>{setInterval(()=>{$.readyState===WebSocket.OPEN&&$.send(JSON.stringify({type:"ping"}))},5*60*1e3)},$.onmessage=F=>{const z=JSON.parse(F.data),U=T.current,G=v.current,te=x.current,ne=m.current,Q=k.current,se=_.current,X=D.current,oe=R.current;if(console.log(z),z.MessageType==="New user on server"){const K=BG(z.Payload),{ServerId:Z}=z.Payload;U===Z&&r(NV(K))}if(z.MessageType==="User unsubscribe"){const{UserId:K,ServerId:Z}=z.Payload;U===Z&&r(LV({UserId:K,ServerId:Z}))}if(z.MessageType==="Role changed"){const{ServerId:K}=z.Payload;c&&U&&U===K&&r(An({serverId:U}))}if((z.MessageType==="New channel"||z.MessageType==="Channel deleted")&&c&&U&&(z.Payload.ChannelType===1&&z.Payload.ChannelId===G&&s(c,G),U===z.Payload.ServerId&&r(An({serverId:U}))),z.MessageType==="New server name"&&U===z.Payload.Id&&r(AV({name:z.Payload.Name})),z.MessageType==="New users name on server"&&U===z.Payload.ServerId&&r($V({userId:z.Payload.UserId,name:z.Payload.Name})),z.MessageType==="User unsubscribe"&&U===z.Payload.ServerId&&r(FV({userId:z.Payload.UserId})),z.MessageType==="You removed from server"&&(sr.show({title:"",message:"    ",position:"top-center",color:"red",radius:"md",autoClose:2e3,icon:u.jsx(Vy,{})}),z.Payload.IsNeedRemoveFromVC&&s(c,G),r(ys(!0)),r(wT({serverId:z.Payload.ServerId}))),z.MessageType==="Server deleted"&&(sr.show({title:"",message:` ${z.Payload.ServerName}  `,position:"top-center",color:"red",radius:"md",autoClose:2e3,icon:u.jsx(Vy,{})}),s(c,G),r(ys(!0)),r(wT({serverId:z.Payload.ServerId}))),z.MessageType==="Change channel name"&&z.Payload.ServerId===U&&r(zV({channelId:z.Payload.ChannelId,newName:z.Payload.Name})),z.MessageType==="New user in voice channel"&&z.Payload.ServerId===U&&r(BV({channelId:z.Payload.ChannelId,userId:z.Payload.UserId,muteStatus:z.Payload.MuteStatus})),z.MessageType==="User remove from voice channel"&&z.Payload.ServerId===U&&r(UV({channelId:z.Payload.ChannelId,userId:z.Payload.UserId})),z.MessageType==="User change his mute status"){const{ServerId:K,ChannelId:Z,UserId:fe,MuteStatus:xe}=z.Payload;K===U&&r(xT({channelId:Z,userId:fe,muteStatus:Number(xe)}))}if(z.MessageType==="Voice channel settings edited"){const{ServerId:K,RoleId:Z}=z.Payload;ne.find(xe=>xe.roleId===Z)&&U===K&&r(An({serverId:K}))}if(z.MessageType==="New role"){const{ServerId:K}=z.Payload;U===K&&r(An({serverId:K}))}if(z.MessageType==="Updated role settings"){const{ServerId:K,RoleId:Z}=z.Payload.Role;ne.find(xe=>xe.roleId===Z)&&U===K&&r(An({serverId:K}))}if(z.MessageType==="Voice channel settings edited"){const{ServerId:K,RoleId:Z}=z.Payload;ne.find(xe=>xe.roleId===Z)&&U===K&&r(An({serverId:K}))}if(z.MessageType==="Text channel settings edited"){const{ServerId:K,RoleId:Z}=z.Payload;ne.find(xe=>xe.roleId===Z)&&U===K&&r(An({serverId:K}))}if(z.MessageType==="Sub channel settings edited"){const{ServerId:K,RoleId:Z}=z.Payload;ne.find(xe=>xe.roleId===Z)&&U&&U===K&&r(An({serverId:U}))}if(z.MessageType==="Notification channel settings edited"){const{ServerId:K,RoleId:Z}=z.Payload;ne.find(xe=>xe.roleId===Z)&&U&&U===K&&r(An({serverId:U}))}if(z.MessageType==="New message in text channel"){const K=$i(z.Payload);K.id&&(r(yT(K)),K.authorId!==f.id?r(ST({channelId:K.channelId,readedMessageId:K.id,serverId:K.serverId,isTagged:K.isTagged?K.isTagged:!1})):r(bT({channelId:K.channelId,readedMessageId:K.id,serverId:K.serverId,isTagged:K.isTagged?K.isTagged:!1})))}if(z.MessageType==="New message in notification channel"){const K=$i(z.Payload);K.id&&(r(yT(K)),K.authorId!==f.id?r(ST({channelId:K.channelId,readedMessageId:K.id,serverId:K.serverId,isTagged:K.isTagged})):r(bT({channelId:K.channelId,readedMessageId:K.id,serverId:K.serverId,isTagged:K.isTagged})))}if(z.MessageType==="New message in sub channel"){const K=$i(z.Payload);K.id&&r(LG(K))}if(z.MessageType==="New message in chat"){const K=Gy(z.Payload);K.id&&(r(VU(K)),K.authorId!==f.id?r(GU({readChatId:K.channelId,readedMessageId:K.id,isTagged:K.isTagged})):r(KU({readChatId:K.channelId,readedMessageId:K.id})))}if((z.MessageType==="Deleted message in text channel"||z.MessageType==="Deleted message in notification channel")&&r(PV({channelId:z.Payload.ChannelId,messageId:z.Payload.MessageId})),z.MessageType==="Deleted message in sub channel"&&r(AG({channelId:z.Payload.ChannelId,messageId:z.Payload.MessageId})),z.MessageType==="Deleted message in chat"&&r(HU({chatId:z.Payload.ChatId,messageId:z.Payload.MessageId})),z.MessageType==="Updated message in text channel"||z.MessageType==="Updated message in notification channel"){const K=$i(z.Payload);r(MV(K))}if(z.MessageType==="Updated message in chat"){const K=Gy(z.Payload);r(WU(K))}if(z.MessageType==="Updated message in sub channel"){const K=$i(z.Payload);r(OG(K))}if(z.MessageType==="User notified"){n();const K=se??Q;o(LT(z.Payload),te,K)}if(z.MessageType==="User notified in chat"&&(n(),o(LT(z.Payload),te,X,!0)),z.MessageType==="ErrorWithMessage"){const K=`${z.Payload.Object}: ${z.Payload.Message}`;a(K)}if(z.MessageType==="Role added to user"){const{ServerId:K,UserId:Z,RoleId:fe}=z.Payload;r(Z===oe?An({serverId:K}):WV({serverId:K,userId:Z,roleId:fe}))}if(z.MessageType==="Role removed from user"){const{ServerId:K,UserId:Z,RoleId:fe}=z.Payload;r(Z===oe?An({serverId:K}):qV({serverId:K,userId:Z,roleId:fe}))}if(z.MessageType==="New user in chat"&&r(YU({chatId:z.Payload.ChatId,userId:z.Payload.UserId,userName:z.Payload.UserName,userTag:z.Payload.UserTag,icon:z.Payload.Icon?Yi(z.Payload.Icon):null,notifiable:z.Payload.Notifiable,friendshipApplication:z.Payload.FriendshipApplication,nonFriendMessage:z.Payload.NonFriendMessage,isFriend:z.Payload.IsFriend,systemRoles:z.Payload.SystemRoles.map(g2)})),z.MessageType==="You have been added into a chat"&&r(XU({chatId:z.Payload.ChatId,chatName:z.Payload.ChatName,nonReadedCount:z.Payload.NonReadedCount,nonReadedTaggedCount:z.Payload.NonReadedTaggedCount,lastReadedMessageId:z.Payload.LastReadedMessageId,icon:z.Payload.Icon?Yi(z.Payload.Icon):null})),z.MessageType==="New icon on chat"&&r(QU({chatId:z.Payload.ChatId,icon:Yi(z.Payload.Icon)})),z.MessageType==="New icon on server"&&r(YV({serverId:z.Payload.ServerId,icon:Yi(z.Payload.Icon)})),z.MessageType==="User voted in text channel"||z.MessageType==="User unvoted in text channel"||z.MessageType==="User voted in notification channel"||z.MessageType==="User unvoted in notification channel"){const K=$i(z.Payload);r(GV(K))}if(z.MessageType==="User voted in sub channel"||z.MessageType==="User unvoted in sub channel"){const K=$i(z.Payload);r($G(K))}if(z.MessageType==="User voted in chat"||z.MessageType==="User unvoted in chat"){const K=Gy(z.Payload);r(JU(K))}if(z.MessageType==="New friendship application"){const K=Ef(z.Payload);sr.show({title:"",message:`       ${K.user.userName}`,position:"top-center",color:"yellow",radius:"md",autoClose:4e3,icon:u.jsx(Vy,{})}),r(eX(K))}if(z.MessageType==="Created friendship application"){const K=Ef(z.Payload);r(tX(K))}if(z.MessageType==="Friendship application declined"&&r(nX(z.Payload.Id)),z.MessageType==="Friendship application deleted"&&r(rX(z.Payload.Id)),z.MessageType==="Friendship application approved"){const K=Ef(z.Payload);r(oX(K))}if(z.MessageType==="You approved application"){const K=Ef(z.Payload);r(sX(K))}if(z.MessageType==="Friendship deleted"&&r(iX(z.Payload.UserId)),z.MessageType==="User mute status is changed"){const{ServerId:K,ChannelId:Z,UserId:fe,MuteStatus:xe}=z.Payload;U===K&&(r(xT({channelId:Z,userId:fe,muteStatus:Number(xe)})),fe===oe&&C(Number(xe)===2))}},$.onerror=F=>{console.error("WebSocket error:",F)},b.current=$,()=>{$.close()}}},[c,r]);const M=I.useCallback($=>{var F;if(b.current&&b.current.readyState===WebSocket.OPEN){const z={Type:"New message",Content:$};b.current.send(JSON.stringify(z))}else console.error("WebSocket is not open. Ready state:",(F=b.current)==null?void 0:F.readyState)},[b]),P=I.useCallback($=>{var F;if(b.current&&b.current.readyState===WebSocket.OPEN){const z={Type:"New message chat",Content:$};b.current.send(JSON.stringify(z))}else console.error("WebSocket is not open. Ready state:",(F=b.current)==null?void 0:F.readyState)},[b]),L=I.useCallback($=>{var F;if(b.current&&b.current.readyState===WebSocket.OPEN){const z={Type:"Update message",Content:$};b.current.send(JSON.stringify(z))}else console.error("WebSocket is not open. Ready state:",(F=b.current)==null?void 0:F.readyState)},[b]),O=I.useCallback($=>{var F;if(b.current&&b.current.readyState===WebSocket.OPEN){const z={Type:"Update message chat",Content:$};b.current.send(JSON.stringify(z))}else console.error("WebSocket is not open. Ready state:",(F=b.current)==null?void 0:F.readyState)},[b]),V=I.useCallback($=>{var F;if(b.current&&b.current.readyState===WebSocket.OPEN){const z={Type:"Delete message",Content:$};b.current.send(JSON.stringify(z))}else console.error("WebSocket is not open. Ready state:",(F=b.current)==null?void 0:F.readyState)},[b]),H=I.useCallback($=>{var F;if(b.current&&b.current.readyState===WebSocket.OPEN){const z={Type:"Delete message chat",Content:$};b.current.send(JSON.stringify(z))}else console.error("WebSocket is not open. Ready state:",(F=b.current)==null?void 0:F.readyState)},[b]),q=I.useCallback($=>{var F;if(b.current&&b.current.readyState===WebSocket.OPEN){const z={Type:"See message",Content:$};b.current.send(JSON.stringify(z))}else console.error("WebSocket is not open. Ready state:",(F=b.current)==null?void 0:F.readyState)},[b]),N=I.useCallback($=>{var F;if(b.current&&b.current.readyState===WebSocket.OPEN){const z={Type:"Vote",Content:$};b.current.send(JSON.stringify(z))}else console.error("WebSocket is not open. Ready state:",(F=b.current)==null?void 0:F.readyState)},[b]),B=I.useCallback($=>{var F;if(b.current&&b.current.readyState===WebSocket.OPEN){const z={Type:"Unvote",Content:$};b.current.send(JSON.stringify(z))}else console.error("WebSocket is not open. Ready state:",(F=b.current)==null?void 0:F.readyState)},[b]);return u.jsx(B2.Provider,{value:{sendMessage:M,sendChatMessage:P,editMessage:L,editChatMessage:O,deleteMessage:V,deleteChatMessage:H,readMessage:q,vote:N,unVote:B},children:e.children})},Si=()=>{const e=I.useContext(B2);if(!e)throw new Error("useWebSocket must be used within WebSocketProvider");return e},uX=({type:e,opened:t,close:n})=>{const{accessToken:r}=re(y=>y.userStore),{currentChannelId:s}=re(y=>y.testServerStore),{currentSubChatId:o}=re(y=>y.subChatStore),{activeChat:a}=re(y=>y.chatsStore),{sendMessage:c,sendChatMessage:f}=Si(),d=ks({initialValues:EY,validate:{title:Ss(Cr(1,""),ws(5e3,"")),content:Ss(Cr(1,""),ws(5e3,"")),deadLine:kY,variants:{content:Ss(Cr(1," "),ws(5e3," "))}}}),p=d.getValues().variants,h=async y=>{const{title:b,content:C,isAnonimous:T,multiple:R,deadLine:m,variants:v}=y,x=m?new Date(m).toISOString():void 0,_=v.sort((D,M)=>D.number-M.number).map((D,M)=>({Number:M+1,Content:D.content})),k={Title:b,Content:C,IsAnonimous:T,Multiple:R,Deadline:x,Variants:_};e===at.CHANNEL&&s&&c({Token:r,ChannelId:s,Vote:k,MessageType:Zi.Vote}),e===at.SUBCHAT&&o&&c({Token:r,ChannelId:o,Vote:k,MessageType:Zi.Vote}),e===at.CHAT&&a&&f({Token:r,ChannelId:a,Vote:k,MessageType:Zi.Vote}),d.reset(),n()},g=()=>{d.insertListItem("variants",{number:p.length+1,content:""})},S=()=>{n()};return u.jsx(dt,{opened:t,onClose:n,centered:!0,title:" ",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},children:u.jsx("form",{onSubmit:d.onSubmit(h),children:u.jsxs(ge,{gap:"md",children:[u.jsx(qt,{label:" ",required:!0,placeholder:" ",...d.getInputProps("title"),maxLength:5e3,radius:"md"},d.key("title")),u.jsx(ha,{label:" ()",placeholder:" ",...d.getInputProps("content"),autosize:!0,minRows:1,maxRows:3,maxLength:5e3,radius:"md"},d.key("content")),u.jsx(me,{children:" "}),p.map((y,b)=>u.jsx(TY,{form:d,index:b},y.number)),u.jsx(Ne,{variant:"light",leftSection:u.jsx(yo,{}),onClick:g,radius:"md",children:" "}),u.jsxs(ve,{justify:"space-between",children:[u.jsx(me,{children:" "}),u.jsx(rn,{size:"lg",...d.getInputProps("isAnonimous",{type:"checkbox"})},d.key("isAnonimous"))]}),u.jsxs(ve,{justify:"space-between",children:[u.jsx(me,{children:" "}),u.jsx(rn,{size:"lg",...d.getInputProps("multiple",{type:"checkbox"})},d.key("multiple"))]}),u.jsx(ng,{label:" ()",placeholder:"  ",...d.getInputProps("deadLine"),radius:"md"},d.key("deadLine")),u.jsxs(ve,{justify:"flex-end",mt:"md",children:[u.jsx(Ne,{variant:"outline",onClick:S,children:""}),u.jsx(Ne,{type:"submit",children:""})]})]})})})},Rb=({type:e})=>{const[t,{open:n,close:r}]=_t(!1),s=()=>{n()};return u.jsxs(u.Fragment,{children:[u.jsx(tt,{component:"label",size:"xl",variant:"transparent",onClick:s,children:u.jsx(EH,{size:20})}),u.jsx(uX,{type:e,opened:t,close:r})]})},kf={breakText:()=>({wordWrap:"break-word",whiteSpace:"pre-wrap",wordBreak:"break-word"}),card:()=>({borderRadius:"10px",background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(8px)",border:"1px solid rgba(255,255,255,0.1)"}),box:e=>({position:"relative",borderRadius:12,overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)",background:"rgba(255,255,255,0.04)",transition:"background 0.2s ease",cursor:e?"not-allowed":"pointer",minHeight:44,width:"100%",display:"flex",alignItems:"center",minWidth:0}),vote:e=>({position:"absolute",left:0,top:0,bottom:0,width:`${e}%`,background:"linear-gradient(90deg, #3b82f6, #2563eb)",opacity:.3,transition:"width 0.3s ease"})};/**
 * @license @tabler/icons-react v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fX={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=(e,t,n,r)=>{const s=I.forwardRef(({color:o="currentColor",size:a=24,stroke:c=2,title:f,className:d,children:p,...h},g)=>I.createElement("svg",{ref:g,...fX[e],width:a,height:a,className:["tabler-icon",`tabler-icon-${t}`,d].join(" "),strokeWidth:c,stroke:o,...h},[f&&I.createElement("title",{key:"svg-title"},f),...r.map(([S,y])=>I.createElement(S,y)),...Array.isArray(p)?p:[p]]));return s.displayName=`${n}`,s};/**
 * @license @tabler/icons-react v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]],hX=xa("outline","check","Check",pX);/**
 * @license @tabler/icons-react v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]],V2=xa("outline","eye","Eye",mX);/**
 * @license @tabler/icons-react v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"M3 9l9 6l9 -6l-9 -6l-9 6",key:"svg-0"}],["path",{d:"M21 9v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10",key:"svg-1"}],["path",{d:"M3 19l6 -6",key:"svg-2"}],["path",{d:"M15 13l6 6",key:"svg-3"}]],vX=xa("outline","mail-opened","MailOpened",gX);/**
 * @license @tabler/icons-react v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"M3 3l18 18",key:"svg-0"}],["path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1",key:"svg-1"}],["path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85",key:"svg-2"}],["path",{d:"M8 21l8 0",key:"svg-3"}],["path",{d:"M12 17l0 4",key:"svg-4"}]],wX=xa("outline","microphone-off","MicrophoneOff",yX);/**
 * @license @tabler/icons-react v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=[["path",{d:"M7 4v16l13 -8l-13 -8",key:"svg-0"}]],H2=xa("outline","player-play","PlayerPlay",SX);/**
 * @license @tabler/icons-react v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["path",{d:"M8.18 8.189a4.01 4.01 0 0 0 2.616 2.627m3.507 -.545a4 4 0 1 0 -5.59 -5.552",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4c.412 0 .81 .062 1.183 .178m2.633 2.618c.12 .38 .184 .785 .184 1.204v2",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]],QT=xa("outline","user-off","UserOff",bX);/**
 * @license @tabler/icons-react v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=[["path",{d:"M5 7a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]],CX=xa("outline","users","Users",xX),ec={variantName:()=>({background:"rgba(59, 130, 246, 0.1)",padding:"2px 8px",borderRadius:"6px"}),modalRoot:()=>({content:{background:"linear-gradient(145deg, #1a1b1e 0%, #141517 100%)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},header:{background:"rgba(26, 27, 30, 0.9)",borderBottom:"1px solid rgba(59, 130, 246, 0.15)",padding:"16px 20px"},title:{color:"#fff"},body:{padding:"16px 20px 20px"}}),userContainer:e=>({background:e%2===0?"rgba(255, 255, 255, 0.03)":"rgba(59, 130, 246, 0.05)",border:"1px solid rgba(255, 255, 255, 0.05)",borderRadius:"8px",transition:"all 0.2s ease","&:hover":{background:"rgba(59, 130, 246, 0.1)",borderColor:"rgba(59, 130, 246, 0.2)",transform:"translateX(4px)"}}),noVotesContainer:()=>({background:"rgba(255, 255, 255, 0.02)",border:"1px dashed rgba(59, 130, 246, 0.3)",borderRadius:"12px"})},_X=({opened:e,onClose:t,variantName:n,isAnonimous:r,variantsCount:s,voterNames:o,groupedVariants:a})=>u.jsx(dt,{opened:e,onClose:t,title:u.jsxs(ve,{gap:"xs",align:"center",children:[u.jsx(CX,{size:20,color:"#3b82f6"}),u.jsx(me,{fw:600,size:"lg",children:" :"}),u.jsx(me,{fw:500,c:"blue.4",style:ec.variantName(),children:n})]}),radius:"md",centered:!0,size:"md",overlayProps:{backgroundOpacity:.55,blur:3},styles:ec.modalRoot(),children:u.jsxs(ge,{gap:"sm",children:[u.jsxs(ve,{justify:"space-between",mb:"xs",children:[u.jsxs(me,{size:"sm",c:"gray.4",children:[": ",s]}),!r&&u.jsx(Et,{variant:"light",color:"blue",size:"sm",leftSection:u.jsx(hX,{size:12}),children:" "})]}),a?u.jsx(ge,{gap:"sm",children:a.map(c=>u.jsxs("div",{children:[u.jsxs(ve,{align:"center",gap:"xs",children:[u.jsx(me,{fw:600,children:c.name}),u.jsxs(me,{size:"sm",c:"gray.4",children:[" ",c.count]})]}),c.voterNames.length>0?u.jsx(ge,{gap:8,children:c.voterNames.map((f,d)=>u.jsx(Gn,{p:"sm",style:ec.userContainer(d),children:u.jsxs(ve,{justify:"space-between",children:[u.jsxs(ve,{gap:"sm",children:[u.jsx($t,{size:"sm",radius:"xl",color:"blue",styles:{placeholder:{background:"linear-gradient(135deg, #3b82f6, #1d4ed8)"}},children:f[0].toUpperCase()}),u.jsx(me,{fw:500,c:"gray.1",children:f})]}),u.jsx(Et,{variant:"dot",color:"blue",size:"sm",style:{background:"rgba(59, 130, 246, 0.15)"},children:""})]})},f))}):u.jsx(Gn,{p:"xl",style:ec.noVotesContainer(),children:u.jsxs(ge,{align:"center",gap:"md",children:[u.jsx(QT,{size:48,color:"rgba(59, 130, 246, 0.5)",stroke:1}),u.jsx(me,{ta:"center",c:"gray.5",fw:500,mb:4,children:" "})]})})]},c.name))}):o.length>0?u.jsx(ge,{gap:8,children:o.map((c,f)=>u.jsx(Gn,{p:"sm",style:ec.userContainer(f),children:u.jsxs(ve,{justify:"space-between",children:[u.jsxs(ve,{gap:"sm",children:[u.jsx($t,{size:"sm",radius:"xl",color:"blue",styles:{placeholder:{background:"linear-gradient(135deg, #3b82f6, #1d4ed8)"}},children:c[0].toUpperCase()}),u.jsx(me,{fw:500,c:"gray.1",children:c})]}),u.jsx(Et,{variant:"dot",color:"blue",size:"sm",style:{background:"rgba(59, 130, 246, 0.15)"},children:""})]})},c))}):u.jsx(Gn,{p:"xl",style:ec.noVotesContainer(),children:u.jsxs(ge,{align:"center",gap:"md",children:[u.jsx(QT,{size:48,color:"rgba(59, 130, 246, 0.5)",stroke:1}),u.jsx(me,{ta:"center",c:"gray.5",fw:500,mb:4,children:" "})]})})]})}),W2=(e,t)=>!!e.votedUserIds.find(n=>n===t),RX=(e,t)=>e.some(n=>n.votedUserIds.includes(t)),TX=(e,t)=>e.map(n=>({id:n.id,checked:W2(n,t)})),EX=({pollId:e,authorId:t,isOwnMessage:n,type:r,time:s,title:o,content:a,variants:c,multiple:f,deadLine:d,isAnonimous:p,onReplyMessage:h,totalUsers:g})=>{var se;const{accessToken:S,user:y}=re(X=>X.userStore),{currentChannelId:b,currentNotificationChannelId:C}=re(X=>X.testServerStore),{activeChat:T}=re(X=>X.chatsStore),{getUsername:R,getUserIcon:m}=Ac(r),{vote:v,unVote:x,deleteMessage:_,deleteChatMessage:k}=Si(),[D,M]=I.useState(!1),[P,L]=I.useState(null),O=b??C,V=y.id,H=ks({initialValues:{votes:TX(c,V)}}),q=I.useMemo(()=>R(t),[R,t]),N=I.useMemo(()=>m(t),[m,t]),B=RX(c,V),$=!!d&&new Date(d).getTime()<Date.now(),{iconBase64:F}=Es(N),z=I.useCallback(X=>X.map(oe=>R(oe)||"?"),[R]),U=I.useMemo(()=>{const X=c.flatMap(oe=>oe.votedUserIds||[]);return Array.from(new Set(X))},[c]),G=I.useMemo(()=>z(U),[z,U]),te=I.useMemo(()=>c.map(X=>({name:X.content,voterNames:z(X.votedUserIds||[]),count:X.votedUserIds.length})),[c,z]),ne=(X,oe)=>{const K=`votes.${X}.checked`,fe=!H.getInputProps(K).value;fe?v({Token:S,VoteVariantId:oe,isChannel:r===at.CHANNEL}):x({Token:S,VoteVariantId:oe,isChannel:r===at.CHANNEL}),H.setFieldValue(K,fe)},Q=()=>{switch(r){case at.CHANNEL:_({Token:S,ChannelId:O,MessageId:e});break;case at.CHAT:k({Token:S,ChannelId:T,MessageId:e});break}};return u.jsxs(ve,{justify:"space-between",align:"flex-start",style:{flexDirection:n?"row":"row-reverse"},grow:!0,onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),children:[u.jsxs(ve,{gap:"xs",justify:n?"flex-start":"flex-end",style:{opacity:D?1:0,transition:"opacity 0.3s ease"},children:[u.jsx(tt,{variant:"subtle","aria-label":"reply",onClick:h,children:u.jsx(qw,{size:20})}),u.jsxs(lt,{position:"bottom-start",shadow:"md",width:150,offset:-30,children:[u.jsx(lt.Target,{children:u.jsx(tt,{variant:"subtle","aria-label":"edit",onClick:()=>{},children:u.jsx(Uj,{size:20})})}),u.jsx(lt.Dropdown,{children:u.jsx(lt.Item,{leftSection:u.jsx(zm,{size:12}),onClick:Q,children:""})})]})]}),u.jsxs(ve,{flex:1,align:"flex-start",style:{flexDirection:n?"row-reverse":"row"},gap:"xs",children:[u.jsx($t,{size:"md",color:"blue",src:F,children:q?q[0]:"?"}),u.jsxs(ge,{gap:"xs",align:n?"flex-end":"flex-start",style:{flex:1},w:"100%",children:[u.jsxs(ve,{gap:"xs",style:{flexDirection:n?"row-reverse":"row"},children:[u.jsx(me,{fw:500,style:kf.breakText(),children:q}),u.jsx(me,{size:"xs",children:ld(s)})]}),u.jsx(Bn,{style:kf.card(),px:"xl",miw:200,children:u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",fw:700,c:"white",children:o}),a&&u.jsx(me,{c:"gray.4",children:a}),d&&!$&&u.jsxs(me,{size:"xs",c:"gray.5",children:["  ",ld(d)]}),$&&u.jsxs(me,{size:"xs",c:"red.4",children:["  (",ld(d),")"]}),c.map((X,oe)=>{const K=W2(X,V),Z=g>0?Math.round(X.votedUserIds.length/g*100):0,fe=$||!f&&B&&!K;return u.jsxs(ie,{style:kf.box(fe),onClick:()=>!fe&&ne(oe,X.id),children:[u.jsx(ie,{style:kf.vote(Z)}),u.jsxs(ve,{justify:"space-between",align:"center",px:"md",py:8,style:{position:"relative",zIndex:1},children:[u.jsxs(ve,{gap:"xs",children:[u.jsx(pa,{...H.getInputProps(`votes.${oe}.checked`,{type:"checkbox"}),onClick:xe=>xe.stopPropagation(),onChange:()=>ne(oe,X.id),styles:{input:{cursor:fe?"not-allowed":"pointer"}},disabled:fe,radius:"xl"}),u.jsx(me,{c:fe?"gray.5":K?"white":"gray.2",style:{transition:"color 0.2s"},children:X.content})]}),u.jsxs(me,{size:"xs",c:"gray.4",style:{cursor:p?"default":"pointer",transition:"color 0.2s"},onClick:xe=>{xe.stopPropagation(),p||L(oe)},onMouseEnter:xe=>{!p&&X.votedUserIds.length>0&&(xe.currentTarget.style.color="#fff")},onMouseLeave:xe=>{xe.currentTarget.style.color=""},children:[Z,"%"]})]})]},X.id)})]})}),u.jsxs(me,{size:"xs",c:"gray.5",ta:"center",style:{cursor:!p&&g>0?"pointer":"default"},onClick:X=>{X.stopPropagation(),!p&&g>0&&L(-1)},children:[" : ",g]})]})]}),u.jsx(_X,{opened:P!==null,onClose:()=>L(null),variantName:P===-1?" ":P!==null?(se=c[P])==null?void 0:se.content:"",isAnonimous:p,variantsCount:P===-1?g:P!==null?c[P].votedUserIds.length:0,voterNames:P===-1?G:P!==null?z(c[P].votedUserIds):[],groupedVariants:P===-1?te:void 0})]})},kX=({messageId:e,type:t,setIsEditing:n,setEditedContent:r,messageContent:s,isOwnMessage:o})=>{const{accessToken:a}=re(C=>C.userStore),{currentChannelId:c,currentNotificationChannelId:f}=re(C=>C.testServerStore),{activeChat:d}=re(C=>C.chatsStore),{currentSubChatId:p}=re(C=>C.subChatStore),{deleteMessage:h,deleteChatMessage:g}=Si(),S=c??f,y=()=>{switch(t){case at.CHANNEL:h({Token:a,ChannelId:S,MessageId:e});break;case at.CHAT:g({Token:a,ChannelId:d,MessageId:e});break;case at.SUBCHAT:h({Token:a,ChannelId:p,MessageId:e});break}},b=()=>{r(s),n(!0)};return u.jsxs(u.Fragment,{children:[o&&u.jsx(lt.Item,{leftSection:u.jsx(_W,{size:12}),onClick:b,children:""}),u.jsx(lt.Item,{leftSection:u.jsx(zm,{size:12}),onClick:y,children:""})]})},tc={container:e=>({padding:"10px",backgroundColor:"var(--color-surface-3)",borderRadius:"12px",border:e?"1px solid var(--color-primary)":"1px solid var(--border-primary-soft)",boxShadow:e?"0 0 0 3px var(--color-primary-10), 0 10px 22px rgba(0, 0, 0, 0.25)":"0 6px 16px rgba(0, 0, 0, 0.18)",transition:"border-color 0.2s ease, box-shadow 0.2s ease"}),header:()=>({marginBottom:6,userSelect:"none"}),textareaRoot:()=>({marginBottom:"8px",width:"100%",flexGrow:1}),textareaInput:e=>({boxSizing:"border-box",backgroundColor:"var(--color-white-05)",color:"var(--color-white)",border:`1px solid ${e?"var(--color-primary)":"var(--border-primary-soft)"}`,boxShadow:e?"0 0 0 3px var(--color-primary-10)":"none",borderRadius:"10px",padding:"10px 12px",fontSize:"14px",lineHeight:"1.5",transition:"border-color 0.2s ease, box-shadow 0.2s ease"}),buttonGroup:()=>({gap:"8px"}),actionIcon:()=>({transition:"transform 0.12s ease, box-shadow 0.12s ease"})},IX=({editedContent:e,setEditedContent:t,setIsEditing:n,originalContent:r,messageId:s,type:o})=>{const[a,c]=I.useState(!1),{accessToken:f}=re(_=>_.userStore),{currentChannelId:d,currentNotificationChannelId:p}=re(_=>_.testServerStore),{activeChat:h}=re(_=>_.chatsStore),{currentSubChatId:g}=re(_=>_.subChatStore),{editMessage:S,editChatMessage:y}=Si(),b=d??p,C=I.useMemo(()=>e.trim(),[e]),T=I.useMemo(()=>r.trim(),[r]),R=C.length>0&&C!==T,m=()=>{if(R){switch(o){case at.CHANNEL:S({Token:f,ChannelId:b,MessageId:s,Text:C});break;case at.CHAT:y({Token:f,ChannelId:h,MessageId:s,Text:C});break;case at.SUBCHAT:S({Token:f,ChannelId:g,MessageId:s,Text:C});break}n(!1)}},v=()=>{t(r),n(!1)},x=_=>{t(_.currentTarget.value)};return u.jsxs(ge,{gap:"xs",style:tc.container(a),children:[u.jsx(ha,{radius:"md",value:e,onChange:x,autosize:!0,minRows:1,maxRows:10,placeholder:" ...",style:tc.textareaRoot(),styles:{input:tc.textareaInput(a)},onFocus:()=>c(!0),onBlur:()=>c(!1),onKeyDown:_=>{if(_.key==="Escape"){_.preventDefault(),v();return}(_.ctrlKey||_.metaKey)&&_.key==="Enter"&&(_.preventDefault(),m())}}),u.jsxs(ve,{gap:"xs",justify:"flex-end",style:tc.buttonGroup(),children:[u.jsx(kt,{label:R?" (Ctrl+Enter)":" ",withArrow:!0,children:u.jsx("span",{style:{display:"inline-flex"},children:u.jsx(tt,{variant:"light",color:"green",onClick:m,size:"lg",disabled:!R,style:tc.actionIcon(),"aria-label":" ",children:u.jsx(Am,{size:16})})})}),u.jsx(kt,{label:" (Esc)",withArrow:!0,children:u.jsx(tt,{variant:"light",color:"red",onClick:v,size:"lg",style:tc.actionIcon(),"aria-label":" ",children:u.jsx(To,{size:16})})})]})]})},DX=(e,t)=>{const n=Ae(),{readMessage:r}=Si(),{accessToken:s}=re(P=>P.userStore),{activeChat:o}=re(P=>P.chatsStore),{chatLoading:a}=re(P=>P.chatsStore),{currentServerId:c}=re(P=>P.testServerStore),f=zS(),d=FS(),p=Lj(),h=()=>{switch(t){case at.CHANNEL:return d;case at.CHAT:return f;case at.SUBCHAT:return p;default:return d}},{messages:g,messagesStatus:S,startMessageId:y,lastTopMessageId:b,lastBottomMessageId:C,remainingBottomMessagesCount:T,remainingTopMessagesCount:R,entityId:m,lastReadedMessageId:v}=h(),x=I.useRef(null),_=I.useRef(null),k=I.useRef(!1),D=I.useRef(!1),M=I.useRef(null);return I.useEffect(()=>{t===at.CHAT&&o&&n(qf({chatId:o}))},[o,n,t]),I.useEffect(()=>{m&&(t===at.CHAT&&a===Ie.FULFILLED&&n(Gf({chatId:m,number:mn,fromMessageId:y,down:y===0})),t===at.SUBCHAT&&n(Dp({chatId:m,number:mn,fromMessageId:y,down:y===0})))},[m,y,t,n,a]),I.useEffect(()=>{if(!x.current)return;const P=new IntersectionObserver(async([L])=>{if(!L.isIntersecting||R<1||k.current)return;k.current=!0;const O=Math.min(R,mn);e.current&&(M.current=e.current.scrollHeight),t===at.CHANNEL&&m&&await n(ea({channelId:m,number:O+1,fromMessageId:b,down:!1})),t===at.CHAT&&m&&await n(Ji({chatId:m,number:O+1,fromMessageId:b,down:!1})),requestAnimationFrame(()=>{if(!e.current||M.current===null)return;const H=e.current.scrollHeight-M.current;e.current.scrollTop=H,M.current=null,k.current=!1})},{root:e.current,threshold:.1});return P.observe(x.current),()=>P.disconnect()},[m,R,b,t,n]),I.useEffect(()=>{if(!_.current)return;const P=new IntersectionObserver(async([L])=>{if(!L.isIntersecting||T<1||D.current)return;const O=Math.min(T,mn);D.current=!0;try{t===at.CHAT&&m&&await n(Ji({chatId:m,number:O+1,fromMessageId:C,down:!0})),t===at.CHANNEL&&m&&await n(ea({channelId:m,number:O+1,fromMessageId:C,down:!0}))}finally{D.current=!1}},{root:e.current,threshold:.1});return P.observe(_.current),()=>{D.current=!1,P.disconnect()}},[m,T,C,t,n]),I.useEffect(()=>{if(!e.current||t===at.SUBCHAT)return;const P=new IntersectionObserver(L=>{L.forEach(O=>{if(O.isIntersecting){const V=Number(O.target.getAttribute("data-message-id")),q=O.target.getAttribute("data-message-is-tagged")==="true",N=t===at.CHANNEL,B=N?m:o;if(!B)return;V>v&&(r({Token:s,isChannel:N,MessageId:V,ChannelId:B}),n(N?HV({readChannelId:B,readedMessageId:V,serverId:c,isTagged:q}):qU({readChatId:B,readedMessageId:V,isTagged:q})))}})},{threshold:.5,root:e.current});return g.forEach(L=>{const O=document.querySelector(`[data-message-id="${L.id}"]`);O&&P.observe(O)}),()=>P.disconnect()},[g,v,t,s,o,c,m,n,r,e]),{messages:g,messagesStatus:S,firstMessageElementRef:x,lastMessageElementRef:_}},Zw=({scrollRef:e,type:t,replyToMessage:n,onScrollToReplyMessage:r})=>{const{user:s}=re(d=>d.userStore),{messages:o,messagesStatus:a,firstMessageElementRef:c,lastMessageElementRef:f}=DX(e,t);return u.jsxs(ge,{gap:"sm",children:[a===Ie.PENDING&&u.jsx(Cn,{justify:"center",align:"center",w:"100%",children:u.jsx(Rr,{})}),o.map((d,p)=>{const h=p===0,g=p===o.length-1;return u.jsx("div",{ref:S=>{h&&(c.current=S),g&&(f.current=S)},"data-message-id":d.id,"data-message-is-tagged":d.isTagged,children:d.messageType===ai.Classic?u.jsx(VG,{content:d.text,replyMessage:d.replyToMessage,isOwnMessage:s.id===d.authorId,time:d.createdAt,modifiedAt:d.modifiedAt,authorId:d.authorId,channelId:d.channelId,isTagged:d.isTagged,files:d.files,nestedChannel:d.nestedChannel,EditMessage:S=>u.jsx(IX,{...S,type:t,messageId:d.id}),MessageActions:S=>u.jsx(kX,{...S,type:t,messageId:d.id}),type:t,onReplyMessage:()=>n(d),onReplyPreviewClick:r}):u.jsx(EX,{pollId:d.id,authorId:d.authorId,isOwnMessage:s.id===d.authorId,type:t,time:d.createdAt,title:d.title,content:d.content,variants:d.variants,multiple:d.multiple,deadLine:d.deadline,isAnonimous:d.isAnonimous,onReplyMessage:()=>n(d),totalUsers:d.totalUsers})},d.id)})]})},jX=()=>{const e=Ae(),{showSuccess:t}=St(),{currentSubChatId:n,subChatInfo:r}=re(a=>a.subChatStore),s=r==null?void 0:r.isNotifiable,o=async()=>{(await e(id({channelId:n}))).meta.requestStatus==="fulfilled"&&t("  ")};return u.jsx(rn,{checked:s,onChange:o,color:"teal",size:"md",label:s?" ":"  ",thumbIcon:s?u.jsx(gi,{size:12,color:"var(--mantine-color-teal-6)"}):u.jsx(Bd,{size:12,color:"var(--mantine-color-red-6)"})})},PX=e=>{switch(e){case Rt.TEXT_CHANNEL:return[{value:"0",label:""},{value:"2",label:""},{value:"3",label:" "}];case Rt.NOTIFICATION_CHANNEL:return[{value:"0",label:""},{value:"2",label:""},{value:"5",label:" "}];case Rt.VOICE_CHANNEL:return[{value:"0",label:""},{value:"1",label:""}];default:return[]}},Vp=e=>e.toLowerCase()==="true",MX=async e=>{const{data:t}=await ke.get("/roles/list",{params:{serverId:e}});return t},NX=async e=>{const{data:t}=await ke.post("/roles/create",e);return t},LX=async(e,t)=>{await ke.delete("/roles/delete",{data:{serverId:e,roleId:t}})},OX=async e=>{await ke.put("/roles/update",e)},AX=async e=>{await ke.put("/roles/settings",e)},pc=Pe("rolesSlice/getRoles",async({serverId:e},{rejectWithValue:t})=>{var n,r;try{return await MX(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),Hp=Pe("rolesSlice/createRole",async({role:e},{rejectWithValue:t,dispatch:n})=>{var r,s;try{const o=await NX(e);return n(pc({serverId:e.serverId})),o}catch(o){return o instanceof Me?t(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):t(" ")}}),Wp=Pe("rolesSlice/deleteRole",async({serverId:e,roleId:t},{rejectWithValue:n})=>{var r,s;try{await LX(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||" "):n(" ")}}),qp=Pe("rolesSlice/updateRole",async({updatedRole:e},{rejectWithValue:t})=>{var n,r;try{await OX(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}}),Gp=Pe("rolesSlice/updateRoleSettings",async({updatedRoleSettings:e},{rejectWithValue:t})=>{var n,r;try{await AX(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||" "):t(" ")}});var Ct=(e=>(e[e.CanChangeRole=0]="CanChangeRole",e[e.CanWorkChannels=1]="CanWorkChannels",e[e.CanDeleteUsers=2]="CanDeleteUsers",e[e.CanMuteOther=3]="CanMuteOther",e[e.CanDeleteOthersMessages=4]="CanDeleteOthersMessages",e[e.CanIgnoreMaxCount=5]="CanIgnoreMaxCount",e[e.CanCreateRole=6]="CanCreateRole",e[e.CanCreateLessons=7]="CanCreateLessons",e[e.CanCheckAttendance=8]="CanCheckAttendance",e[e.CanUseInvitations=9]="CanUseInvitations",e))(Ct||{}),hn=(e=>(e[e.Creator=0]="Creator",e[e.Admin=1]="Admin",e[e.Custom=2]="Custom",e[e.Uncertain=3]="Uncertain",e))(hn||{});const $X={rolesList:[],rolesLoading:Ie.IDLE,role:null,error:""},q2=qs({name:"roles",initialState:$X,reducers:{setEditedRole:(e,t)=>{e.role=t.payload}},extraReducers:e=>{e.addCase(pc.pending,t=>{t.rolesLoading=Ie.PENDING,t.error=""}).addCase(pc.fulfilled,(t,n)=>{t.rolesList=n.payload.roles,t.rolesLoading=Ie.FULFILLED,t.error=""}).addCase(pc.rejected,(t,n)=>{t.rolesLoading=Ie.REJECTED,t.error=n.payload}).addCase(Wp.fulfilled,(t,{meta:n})=>{const{roleId:r}=n.arg;t.rolesList=t.rolesList.filter(s=>s.role.id!==r),t.error=""}).addCase(Hp.fulfilled,(t,n)=>{const r={role:n.payload,settings:{canChangeRole:!1,canWorkChannels:!1,canDeleteUsers:!1,canMuteOther:!1,canDeleteOthersMessages:!1,canIgnoreMaxCount:!1,canCreateRoles:!1,canCreateLessons:!1,canCheckAttendance:!1,canUseInvitations:!1}};t.rolesList.push(r),t.error=""}).addCase(Gp.fulfilled,(t,{meta:n})=>{const{updatedRoleSettings:r}=n.arg,{roleId:s,setting:o,add:a}=r,c=t.rolesList.findIndex(f=>f.role.id===s);if(c!==-1){const f={...t.rolesList[c].settings};switch(o){case Ct.CanChangeRole:f.canChangeRole=a;break;case Ct.CanWorkChannels:f.canWorkChannels=a;break;case Ct.CanDeleteUsers:f.canDeleteUsers=a;break;case Ct.CanMuteOther:f.canMuteOther=a;break;case Ct.CanDeleteOthersMessages:f.canDeleteOthersMessages=a;break;case Ct.CanIgnoreMaxCount:f.canIgnoreMaxCount=a;break;case Ct.CanCreateRole:f.canCreateRoles=a;break;case Ct.CanCreateLessons:f.canCreateLessons=a;break;case Ct.CanCheckAttendance:f.canCheckAttendance=a;break;case Ct.CanUseInvitations:f.canUseInvitations=a;break;default:console.warn("Unknown setting:",o);break}t.rolesList[c].settings=f}if(t.role&&t.role.role.id===s){const f={...t.role.settings};switch(o){case Ct.CanChangeRole:f.canChangeRole=a;break;case Ct.CanWorkChannels:f.canWorkChannels=a;break;case Ct.CanDeleteUsers:f.canDeleteUsers=a;break;case Ct.CanMuteOther:f.canMuteOther=a;break;case Ct.CanDeleteOthersMessages:f.canDeleteOthersMessages=a;break;case Ct.CanIgnoreMaxCount:f.canIgnoreMaxCount=a;break;case Ct.CanCreateRole:f.canCreateRoles=a;break;case Ct.CanCreateLessons:f.canCreateLessons=a;break;case Ct.CanCheckAttendance:f.canCheckAttendance=a;break;case Ct.CanUseInvitations:f.canUseInvitations=a;break;default:console.warn("Unknown setting:",o);break}t.role.settings=f}t.error=""}).addCase(qp.fulfilled,(t,{meta:n})=>{const{updatedRole:r}=n.arg,s=t.rolesList.findIndex(o=>o.role.id===r.roleId);s!==-1&&(t.rolesList[s]={...t.rolesList[s],role:{...t.rolesList[s].role,name:r.name,color:r.color}}),t.role&&t.role.role.id===r.roleId&&(t.role={...t.role,role:{...t.role.role,name:r.name,color:r.color}}),t.error=""}).addMatcher(bn(Hp.pending,Wp.pending,qp.pending,Gp.pending),t=>{t.error=""}).addMatcher(bn(Hp.rejected,Wp.rejected,qp.rejected,Gp.rejected),(t,n)=>{t.error=n.payload})}}),{setEditedRole:xh}=q2.actions,FX=q2.reducer,zX=({onClose:e})=>{const t=Ae(),{currentChannelId:n,serverData:r}=re(T=>T.testServerStore),{currentSubChatId:s}=re(T=>T.subChatStore),{showSuccess:o}=St(),[a,c]=I.useState(null),[f,d]=I.useState(null),[p,h]=I.useState(!1),[g,S]=I.useState(""),y=r.channels.textChannels.find(T=>T.channelId===n),b=y?y.rolesCanWrite:[],C=async()=>{h(!0),(await t(wp({settings:{channelId:s,add:Vp(a),type:Number(f),roleId:g}}))).meta.requestStatus==="fulfilled"&&(h(!1),o("  "),e()),h(!1)};return u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:"   "}),u.jsxs(ve,{align:"center",children:[u.jsx(rr,{label:"",placeholder:" ",data:[{value:"true",label:""},{value:"false",label:""}],value:a,onChange:c,disabled:p}),u.jsx(rr,{label:"",placeholder:" ",data:[{value:"4",label:""}],value:f,onChange:d,disabled:p}),u.jsx(rr,{label:" ",placeholder:" ",data:b.filter(T=>T.roleType!==hn.Creator).map(T=>({value:T.roleId,label:T.roleName})),value:g,onChange:S,disabled:p})]}),u.jsx(Ne,{onClick:C,disabled:p,loading:p,children:" "})]})},BX=({opened:e,onClose:t})=>{const{subChatInfo:n}=re(a=>a.subChatStore),[r,s]=I.useState("notifiable"),o=n==null?void 0:n.isOwner;return u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",size:"auto",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},children:u.jsxs(ve,{align:"flex-start",gap:"md",children:[u.jsxs(ge,{gap:"xs",style:{width:200},children:[u.jsx(Ht,{label:"",leftSection:u.jsx(gi,{size:16}),active:r==="notifiable",onClick:()=>s("notifiable")}),o&&u.jsx(Ht,{label:"",leftSection:u.jsx(Zj,{size:16}),active:r==="settings",onClick:()=>s("settings")})]}),u.jsxs(Pt,{children:[r==="notifiable"&&u.jsx(jX,{}),r==="settings"&&o&&u.jsx(zX,{onClose:t})]})]})})},UX=()=>{const[e,{open:t,close:n}]=_t(!1);return u.jsxs(u.Fragment,{children:[u.jsx(tt,{variant:"transparent",color:"gray",onClick:t,children:u.jsx(Vd,{})}),u.jsx(BX,{opened:e,onClose:n})]})},VX=({opened:e,MessagesList:t})=>{const n=Ae(),{sendMessage:r}=Si(),{accessToken:s}=re(O=>O.userStore),{currentSubChatId:o,messagesStatus:a,messages:c}=re(O=>O.subChatStore),{uploadedFiles:f,loading:d}=re(O=>O.filesStore);Um(d===Ie.PENDING);const[p,h]=I.useState(""),[g,S]=I.useState(null),{getUsername:y}=Ac(at.SUBCHAT),{scrollRef:b,isAtBottom:C,showButton:T,handleScroll:R,scrollToBottom:m,buttonOffset:v}=XS({messagesStatus:a,dependencies:[c],type:"channel",hasAttachedFiles:f.length>0}),{scrollToMessage:x}=mb({scrollRef:b,type:at.SUBCHAT}),_=I.useRef(null),k=O=>{p.trim()&&o&&(p.trim().length>0||f.length>0)&&(r({Token:s,ChannelId:o,Classic:{Text:vb(p.trim()),NestedChannel:O,Files:f.map(V=>V.fileId)},ReplyToMessageId:g?g.id:void 0,MessageType:Zi.Classic}),h(""),S(null),n(JS()))},D=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),k(!1))},M=async O=>{if(!(!O.target.files||!o)){for(const V of Array.from(O.target.files))await n(uc({channelId:o,file:V})).unwrap();O.target.value=""}},P=()=>{n(u2(null)),n(f2(null))},L=p.trim().length>0||f.length>0;return u.jsxs(dt.Root,{opened:e,onClose:P,centered:!0,size:"75%",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},children:[u.jsx(dt.Overlay,{}),u.jsxs(dt.Content,{children:[u.jsxs(dt.Header,{children:[u.jsx(dt.Title,{children:""}),u.jsxs(ve,{gap:"xs",children:[u.jsx(UX,{}),u.jsx(dt.CloseButton,{})]})]}),u.jsx(dt.Body,{children:u.jsxs(ie,{style:{flex:1,padding:"10px",display:"flex",flexDirection:"column",backgroundColor:"#2C2E33",height:"80vh"},children:[u.jsxs(ie,{style:{flex:1,position:"relative",minHeight:0,display:"flex",flexDirection:"column",overflow:"hidden"},children:[u.jsx(Pt,{viewportRef:b,style:{flex:1,padding:10},onScrollPositionChange:R,p:"md",children:u.jsx(t,{scrollRef:b,type:at.SUBCHAT,replyToMessage:O=>S(O),onScrollToReplyMessage:x})}),!C&&T&&u.jsx(ie,{style:{position:"absolute",bottom:v,right:10,zIndex:10},children:u.jsx(tt,{size:"lg",variant:"filled",onClick:()=>m(),children:u.jsx(ZS,{size:20})})})]}),u.jsxs(ie,{pos:"relative",children:[u.jsx(yb,{}),g&&u.jsx(ie,{p:6,children:u.jsx(ma,{title:y(g.authorId),onClose:()=>S(null),children:u.jsx(me,{lineClamp:2,children:g.text||g.title})})}),u.jsxs(ve,{mt:"auto",align:"center",wrap:"nowrap",gap:0,children:[u.jsxs(tt,{component:"label",size:"xl",variant:"transparent",disabled:d===Ie.PENDING,children:[u.jsx(tb,{size:20}),u.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:M})]}),u.jsx(Rb,{type:at.SUBCHAT}),u.jsx(ha,{ref:_,w:"100%",placeholder:"...",value:p,onChange:O=>h(O.target.value),onKeyDown:D,autosize:!0,minRows:1,maxRows:3}),u.jsx(tt,{size:"xl",variant:"transparent",disabled:!L,onClick:()=>k(!1),children:u.jsx(nb,{size:20})})]})]})]})})]})]})},HX=({openSidebar:e,openDetailsPanel:t})=>{const n=Ae(),{sendMessage:r}=Si(),{accessToken:s}=re(pe=>pe.userStore),{currentServerId:o,currentChannelId:a,currentNotificationChannelId:c,messages:f,messagesStatus:d,serverData:p}=re(pe=>pe.testServerStore),{uploadedFiles:h,loading:g}=re(pe=>pe.filesStore),{currentSubChatId:S}=re(pe=>pe.subChatStore),y=p.users,b=p.roles,{getUsername:C}=Ac(at.CHANNEL),[T,R]=I.useState(""),[m,v]=I.useState(null),{scrollRef:x,isAtBottom:_,showButton:k,handleScroll:D,scrollToBottom:M,buttonOffset:P}=XS({messagesStatus:d,dependencies:[f],type:"channel",hasAttachedFiles:h.length>0}),{scrollToMessage:L}=mb({scrollRef:x,type:at.CHANNEL}),[O,{open:V,close:H}]=_t(!1),{canWrite:q,canWriteSub:N,nonReadedCount:B,nonReadedTaggedCount:$}=wK();Um(g===Ie.PENDING);const F=a??c,z=I.useRef(null),{suggestions:U,suggestionsRef:G,clearSuggestions:te,handleTextChange:ne,showSuggestions:Q,downSuggestion:se,upSuggestion:X,enterSuggestion:oe,cancelSuggestion:K,insertMention:Z,selectedSuggestionIndex:fe,setSelectedSuggestionIndex:xe}=C2({users:y,roles:b,textareaRef:z,newMessage:T,setNewMessage:R}),ye=T.trim().length>0||h.length>0,Ee=pe=>{o&&F&&(T.trim().length>0||h.length>0)&&(r({Token:s,ChannelId:F,Classic:{Text:vb(T.trim()),NestedChannel:pe,Files:h.map(_e=>_e.fileId)},ReplyToMessageId:m?m.id:void 0,MessageType:Zi.Classic}),R(""),v(null),te(),n(JS()))},Be=pe=>{if(!Q){pe.key==="Enter"&&!pe.shiftKey&&(pe.preventDefault(),Ee(!1));return}switch(pe.key){case"ArrowDown":pe.preventDefault(),se();break;case"ArrowUp":pe.preventDefault(),X();break;case"Tab":case"Enter":pe.preventDefault(),oe();break;case"Escape":pe.preventDefault(),K();break}},et=async pe=>{if(!(!pe.target.files||!a)){for(const _e of Array.from(pe.target.files))await n(uc({channelId:a,file:_e})).unwrap();pe.target.value=""}};return I.useEffect(()=>{S?V():O&&H()},[S]),u.jsxs(u.Fragment,{children:[u.jsxs(ie,{style:{flex:1,padding:"10px",display:"flex",flexDirection:"column",backgroundColor:"#2C2E33"},children:[u.jsxs(ve,{align:"center",gap:"xs",wrap:"nowrap",justify:"space-between",children:[u.jsx(tt,{variant:"transparent",onClick:e,hiddenFrom:"sm",children:u.jsx(pW,{size:20})}),u.jsx(tt,{variant:"transparent",onClick:t,hiddenFrom:"sm",children:u.jsx(t2,{size:20})})]}),u.jsx(vn,{my:"md"}),u.jsxs(ie,{style:{flex:1,position:"relative",minHeight:0,display:"flex",flexDirection:"column",overflow:"hidden"},children:[u.jsx(Pt,{viewportRef:x,style:{flex:1,padding:10},onScrollPositionChange:D,children:u.jsx(Zw,{scrollRef:x,type:at.CHANNEL,replyToMessage:pe=>v(pe),onScrollToReplyMessage:L})}),!_&&k&&u.jsx(ie,{style:{position:"absolute",bottom:P,right:10,zIndex:10},children:u.jsx(fS,{size:14,disabled:B<=0&&$<=0,color:$>0?"red":"blue",withBorder:!0,children:u.jsx(tt,{size:"lg",variant:"filled",onClick:()=>M(),children:u.jsx(ZS,{size:20})})})})]}),u.jsxs(ie,{pos:"relative",children:[u.jsx(yb,{}),m&&u.jsx(ie,{p:6,children:u.jsx(ma,{title:C(m.authorId),onClose:()=>v(null),children:u.jsx(me,{lineClamp:2,children:m.text||m.title})})}),Q&&U.length>0&&u.jsx(Gn,{ref:G,shadow:"md",p:"xs",pos:"absolute",bottom:"100%",left:0,right:0,mb:"xs",mah:200,bg:"#43474f",style:{overflow:"auto",zIndex:1e3},children:u.jsx(ge,{gap:"xs",children:U.map((pe,_e)=>u.jsxs(ve,{p:"xs",style:{cursor:"pointer",borderRadius:"4px",backgroundColor:_e===fe?"var(--mantine-color-blue-light)":"transparent"},onClick:()=>Z(pe),onMouseEnter:()=>xe(_e),children:[u.jsx($t,{size:"sm",color:"blue",children:pe.display.charAt(0).toUpperCase()}),u.jsxs(ie,{children:[u.jsx(me,{size:"sm",fw:500,children:pe.display}),u.jsxs(me,{size:"xs",c:"dimmed",children:["@",pe.tag,"  ",pe.type]})]})]},pe.id))})}),u.jsxs(ve,{mt:"auto",align:"center",wrap:"nowrap",gap:0,children:[q&&u.jsxs(tt,{component:"label",size:"xl",variant:"transparent",disabled:g===Ie.PENDING,children:[u.jsx(tb,{size:20}),u.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:et})]}),q&&u.jsx(Rb,{type:at.CHANNEL}),q&&N&&u.jsx(tt,{size:"xl",variant:"transparent",disabled:!ye,onClick:()=>Ee(!0),children:u.jsx(mW,{size:20})}),u.jsx(ha,{ref:z,w:"100%",placeholder:"...",value:T,onChange:ne,onKeyDown:Be,autosize:!0,disabled:!q,minRows:1,maxRows:3}),q&&u.jsx(tt,{size:"xl",variant:"transparent",disabled:!ye,onClick:()=>{Ee(!1)},children:u.jsx(nb,{size:20})})]})]})]}),u.jsx(VX,{opened:O,MessagesList:Zw})]})},WX=()=>{const e=re(n=>n.testServerStore.serverData.users);return{getUserIcon:I.useCallback(n=>{var s;const r=(s=e.find(o=>o.userId===n))==null?void 0:s.icon;return r==null?void 0:r.fileId},[e])}},Xy={group:()=>({width:"100%",overflow:"hidden",cursor:"pointer",flexWrap:"nowrap"}),userName:()=>({flex:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:"1.2em",maxHeight:"2.4em",wordBreak:"break-word"}),badge:()=>({maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer"})},If={userName:()=>({flex:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:"1.2em",maxHeight:"2.4em",wordBreak:"break-word",cursor:"default"}),userTag:()=>({flex:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:"1.2em",maxHeight:"2.4em",wordBreak:"break-word",cursor:"default"}),roleName:()=>({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer"})},qX=({userOnServer:e,userIcon:t})=>{const n=Ae(),{showSuccess:r}=St(),{getRoleColor:s}=Mj(),{applicationFrom:o}=re(C=>C.friendshipStore),{user:a}=re(C=>C.userStore),{userName:c,userTag:f,userId:d,notifiable:p,nonFriendMessage:h,systemRoles:g}=e,S="roles"in e?e.roles:[],y=o.find(C=>C.user.userId===d),b=async()=>{(await n(dd({userTag:f}))).meta.requestStatus==="fulfilled"&&r("   ")};return u.jsxs(ge,{gap:"xs",justify:"center",align:"center",w:"100%",children:[u.jsx($t,{size:"lg",color:"blue",src:t,children:c[0]}),u.jsx(me,{c:"white",style:If.userName(),children:c}),u.jsxs(ve,{children:[u.jsx(me,{c:"dimmed",style:If.userTag(),children:f}),u.jsx(uS,{value:f,timeout:2e3,children:({copied:C,copy:T})=>u.jsx(kt,{label:C?"":"",withArrow:!0,position:"right",children:u.jsx(tt,{color:C?"teal":"gray",variant:"subtle",onClick:T,children:C?u.jsx(Am,{size:16}):u.jsx(Bj,{size:16})})})})]}),u.jsx(ve,{gap:"sm",children:S.map(C=>u.jsx(Et,{color:s(C.roleId),radius:"md",variant:"light",style:If.roleName(),children:C.roleName},C.roleId))}),a.id!==d&&u.jsx(Ne,{leftSection:u.jsx(Qj,{}),variant:"light",radius:"md",onClick:b,disabled:!!y,children:y?" ":"  "}),u.jsx(vn,{color:"dimmed",w:"100%"}),u.jsxs(hm,{cols:2,spacing:"xs",verticalSpacing:"xs",children:[u.jsxs(ge,{gap:0,align:"center",justify:"center",children:[u.jsx(me,{c:"dimmed",children:""}),u.jsx(me,{fw:700,children:p?"":""})]}),u.jsxs(ge,{gap:0,align:"center",justify:"center",children:[u.jsx(me,{c:"dimmed",children:""}),u.jsx(me,{fw:700,children:h?"":""})]})]}),u.jsx(vn,{color:"dimmed",w:"100%"}),u.jsx(ve,{gap:"sm",children:g.map(C=>u.jsx(Et,{radius:"md",variant:"light",style:If.roleName(),children:C.name},C.name))})]})},G2=({user:e})=>{const{getRoleColor:t}=Mj(),{getUserIcon:n}=WX(),{userName:r,userId:s}=e,o=I.useMemo(()=>n(s),[n,s]),{iconBase64:a}=Es(o),[c,f]=I.useState(!1),d="roles"in e?e.roles[0]:null;return u.jsxs(an,{opened:c,onChange:f,position:"left",radius:"md",children:[u.jsx(an.Target,{children:u.jsxs(ve,{style:Xy.group(),onClick:()=>f(p=>!p),children:[u.jsx($t,{size:"md",color:"blue",src:a,children:r[0]}),u.jsxs(ge,{children:[u.jsx(kt,{label:r,position:"top-start",withArrow:!0,children:u.jsx(me,{c:"white",style:Xy.userName(),children:r})}),d&&u.jsx(kt,{label:d.roleName,position:"top",withArrow:!0,children:u.jsx(Et,{variant:"light",color:t(d.roleId),style:Xy.badge(),children:d.roleName})})]})]})}),u.jsx(an.Dropdown,{bg:"#43474f",children:u.jsx(qX,{userOnServer:e,userIcon:a})})]})},GX=e=>{if(!e.roles||e.roles.length===0)return hn.Uncertain;const t=e.roles.filter(n=>n.roleType!==void 0).map(n=>n.roleType);return t.includes(hn.Creator)?hn.Creator:t.includes(hn.Admin)?hn.Admin:t.includes(hn.Custom)?hn.Custom:hn.Uncertain},KX=e=>{switch(e){case hn.Creator:return"";case hn.Admin:return"";case hn.Custom:return"";case hn.Uncertain:return" ";default:return""}},YX=()=>{const{serverData:e}=re(s=>s.testServerStore),t=e.users.reduce((s,o)=>{const a=GX(o);return s[a]||(s[a]=[]),s[a].push(o),s},{}),n=Object.entries(t).sort(([s],[o])=>{const a=parseInt(s),c=parseInt(o);return a-c}).map(([s,o])=>({roleType:parseInt(s),users:o.sort((a,c)=>a.userName.localeCompare(c.userName)),count:o.length})),r=e.users.length;return u.jsx(ie,{style:{padding:"10px",backgroundColor:"#1A1B1E"},w:300,h:"100%",visibleFrom:"sm",children:u.jsxs(ge,{gap:"md",h:"100%",children:[u.jsx(me,{c:"white",children:""}),u.jsx(vn,{color:"gray"}),u.jsxs(me,{c:"gray.6",size:"sm",children:[": ",r]}),u.jsx(Pt.Autosize,{mah:"100%",maw:"100%",children:u.jsx(ge,{gap:"xs",children:n.map(s=>u.jsxs(ie,{children:[u.jsxs(me,{c:"gray.6",size:"sm",style:{marginBottom:"8px",fontWeight:500},children:[KX(s.roleType),"  ",s.count]}),u.jsx(ge,{gap:"xs",style:{marginBottom:"16px"},children:s.users.map(o=>u.jsx(G2,{user:o},o.userId))})]},s.roleType))})})]})})},XX=({onClose:e,opened:t})=>{const{serverData:n}=re(r=>r.testServerStore);return u.jsx(Wr,{opened:t,onClose:e,size:"xs",position:"right",styles:{content:{backgroundColor:"#1A1B1E",color:"#ffffff"},header:{backgroundColor:"#1A1B1E"},body:{height:"calc(100dvh - 60px)"}},children:u.jsx(ie,{style:{padding:"10px",backgroundColor:"#1A1B1E"},h:"100%",children:u.jsxs(ge,{gap:"md",h:"100%",children:[u.jsx(me,{c:"white",children:""}),u.jsx(vn,{color:"gray"}),u.jsx(Pt.Autosize,{mah:"100%",maw:"100%",children:u.jsx(ge,{gap:"xs",children:n.users.map(r=>u.jsxs(ve,{wrap:"nowrap",children:[u.jsx($t,{size:"md",color:"blue",children:r.userName}),u.jsx(me,{c:"white",children:r.userName}),u.jsx(Et,{fullWidth:!0,color:"green",radius:"sm",style:{marginLeft:"auto",maxWidth:100},children:"  "})]},r.userId))})})]})})})},QX=({opened:e,close:t})=>{const n=Ae(),{showSuccess:r}=St(),{activeChat:s}=re(f=>f.chatsStore),[o,a]=I.useState(""),c=async()=>{s&&(await n(Kf({chatId:s,userTag:o.trim()}))).meta.requestStatus==="fulfilled"&&(r("  "),t())};return u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},children:u.jsxs(ge,{gap:"md",children:[u.jsx(qt,{label:" usertag",placeholder:"usertag#000000",value:o,onChange:f=>a(f.currentTarget.value)}),u.jsx(ve,{justify:"flex-end",children:u.jsx(Ne,{onClick:c,children:""})})]})})},JX=()=>{const[e,{open:t,close:n}]=_t(!1);return u.jsxs(u.Fragment,{children:[u.jsx(Ne,{leftSection:u.jsx(Qj,{}),variant:"subtle",onClick:t,children:" "}),u.jsx(QX,{opened:e,close:n})]})},ZX=({opened:e,close:t,currentChat:n,setCurrentChat:r})=>{const s=Ae(),{showSuccess:o}=St(),[a,c]=I.useState(""),f=async()=>{n&&(await s(Hf({chatId:n.chatId,name:a.trim()}))).meta.requestStatus==="fulfilled"&&(o("  "),t(),r(null))};return I.useEffect(()=>{n&&c(n.chatName)},[n]),u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},children:u.jsxs(ge,{gap:"md",children:[u.jsx(qt,{label:"  ",placeholder:"",value:a,onChange:d=>c(d.currentTarget.value)}),u.jsx(ve,{justify:"flex-end",children:u.jsx(Ne,{onClick:f,children:""})})]})})},eQ=()=>{const{chat:e}=re(c=>c.chatsStore),[t,{open:n,close:r}]=_t(!1),[s,o]=I.useState(null),a=()=>{o(e),n()};return u.jsxs(u.Fragment,{children:[u.jsx(tt,{variant:"subtle","aria-label":"Edit",onClick:a,children:u.jsx($m,{size:20})}),u.jsx(ZX,{opened:t,close:r,currentChat:s,setCurrentChat:o})]})},tQ=({opened:e,onClose:t})=>{const n=Ae(),{showSuccess:r}=St(),[s,o]=I.useState(""),a=async()=>{(await n(Vf({userTag:s}))).meta.requestStatus==="fulfilled"&&(r("  "),t())};return u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},children:u.jsxs(ge,{gap:"md",children:[u.jsx(qt,{label:" usertag",placeholder:"usertag#000000",value:s,onChange:c=>o(c.currentTarget.value)}),u.jsx(ve,{justify:"flex-end",children:u.jsx(Ne,{onClick:a,children:""})})]})})},nQ=({chat:e})=>{const t=Ae(),{chatName:n,nonReadedCount:r,nonReadedTaggedCount:s,chatId:o,icon:a}=e,{iconBase64:c}=Es(a==null?void 0:a.fileId),f=()=>{t(io(o))};return u.jsx(Bn,{bg:"#1a1b1e",padding:"xs",radius:"md",c:"#fff",p:"md",w:"100%",children:u.jsxs(ve,{justify:"space-between",children:[u.jsxs(ve,{children:[u.jsx($t,{src:c,alt:"no image here",size:"xl"}),u.jsxs(ge,{children:[u.jsx(Xt,{order:3,children:n}),u.jsx(ve,{children:r<1?u.jsx(me,{children:"  "}):u.jsxs(u.Fragment,{children:[u.jsxs(Et,{color:"blue",children:[r," "]}),s>0&&u.jsx(Et,{color:"red",children:s})]})})]})]}),u.jsx(Ne,{variant:"light",radius:"md",leftSection:u.jsx(vH,{}),onClick:f,children:" "})]})})},rQ=({onCreateChatClick:e})=>{const t=Ae(),{chatsList:n,chatsLoading:r}=re(s=>s.chatsStore);return I.useEffect(()=>{t(Wf())},[]),u.jsxs(ge,{w:"100%",gap:"md",p:"md",children:[u.jsxs(ve,{justify:"space-between",children:[u.jsx(Xt,{order:1,children:""}),u.jsx(Ne,{leftSection:u.jsx(yo,{}),onClick:e,children:" "})]}),u.jsx(Pt,{style:{flex:1,maxHeight:"100%"},children:u.jsxs(ge,{gap:"xs",align:"center",children:[n.map(s=>u.jsx(nQ,{chat:s},s.chatId)),r===Ie.PENDING&&u.jsx(Rr,{})]})})]})},sQ=({chatId:e})=>{const t=Ae(),n=async()=>{if(!e)return;(await t(Yf({id:e}))).meta.requestStatus==="fulfilled"&&t(io(null))};return u.jsx(Ne,{leftSection:u.jsx(Wj,{}),variant:"subtle",color:"red",onClick:n,children:" "})},oQ=({opened:e,onClose:t})=>{const n=Ae(),{showSuccess:r}=St(),{activeChat:s,chat:o}=re(f=>f.chatsStore),a=o.nonNotifiable,c=async()=>{if(!s)return;(await n(Qf({chatId:s}))).meta.requestStatus==="fulfilled"&&r("  ")};return u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},size:"auto",children:u.jsx(rn,{checked:a,onChange:c,color:"teal",size:"md",label:a?" ":"  ",thumbIcon:a?u.jsx(gi,{size:12,color:"var(--mantine-color-teal-6)"}):u.jsx(Bd,{size:12,color:"var(--mantine-color-red-6)"})})})},iQ=({opened:e,close:t})=>{const n=Ae(),{showSuccess:r}=St(),[s,o]=I.useState(""),a=async()=>{(await n(dd({userTag:s.trim()}))).meta.requestStatus==="fulfilled"&&(r("  "),t())};return u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},children:u.jsxs(ge,{gap:"md",children:[u.jsx(qt,{label:" usertag",placeholder:"usertag#000000",value:s,onChange:c=>o(c.currentTarget.value)}),u.jsx(ve,{justify:"flex-end",children:u.jsx(Ne,{onClick:a,children:""})})]})})},aQ=()=>{const[e,{open:t,close:n}]=_t(!1);return u.jsxs(u.Fragment,{children:[u.jsx(Ne,{leftSection:u.jsx(yo,{}),onClick:t,children:" "}),u.jsx(iQ,{opened:e,close:n})]})},cQ=({applicationId:e})=>{const t=Ae(),n=()=>{e&&t($p({applicationId:e}))};return u.jsx(Ne,{leftSection:u.jsx(Am,{}),variant:"light",color:"green",radius:"md",onClick:n,children:""})},lQ=({applicationId:e})=>{const t=Ae(),n=()=>{e&&t(Fp({applicationId:e}))};return u.jsx(Ne,{leftSection:u.jsx(To,{}),variant:"light",color:"red",radius:"md",onClick:n,children:""})},dQ=({applicationId:e})=>{const t=Ae(),n=()=>{e&&t(zp({applicationId:e}))};return u.jsx(Ne,{leftSection:u.jsx(To,{}),variant:"light",color:"red",radius:"md",onClick:n,children:""})},uQ=({userId:e})=>{const t=Ae(),n=()=>{t(Up({userId:e}))};return u.jsx(Ne,{leftSection:u.jsx(To,{}),variant:"light",color:"red",radius:"md",onClick:n,children:"  "})},fQ=()=>{const{applicationFrom:e}=re(t=>t.friendshipStore);return u.jsxs(ge,{p:"xs",gap:"xs",children:[e.length<1&&u.jsx(me,{children:" "}),e.map(t=>u.jsx(_b,{userName:t.user.userName,userTag:t.user.userTag,actions:u.jsx(dQ,{applicationId:t.id})},t.id))]})},pQ=()=>{const{applicationTo:e}=re(t=>t.friendshipStore);return u.jsxs(ge,{p:"xs",gap:"xs",children:[e.length<1&&u.jsx(me,{children:" "}),e.map(t=>u.jsx(_b,{userName:t.user.userName,userTag:t.user.userTag,actions:u.jsxs(u.Fragment,{children:[u.jsx(cQ,{applicationId:t.id}),u.jsx(lQ,{applicationId:t.id})]})},t.id))]})},hQ=({type:e})=>{const t=Ae(),{currentServerId:n}=re(c=>c.testServerStore),{activeChat:r}=re(c=>c.chatsStore),{showSuccess:s,showError:o}=St();return{validateAndUpload:async c=>{if(c.size>10*1024*1024){o("   (. 10 )");return}if(!c.type.startsWith("image/")){o("   !");return}const f=new Image,d=URL.createObjectURL(c);try{if(await new Promise((p,h)=>{f.onload=()=>p(),f.onerror=()=>h(new Error("  ")),f.src=d}),f.width>650||f.height>650){o("   (. 650650)");return}}finally{URL.revokeObjectURL(d)}e==="profile"&&(await t(Ip({icon:c}))).meta.requestStatus==="fulfilled"&&s("  "),e==="server"&&n&&(await t(vp({serverId:n,icon:c}))).meta.requestStatus==="fulfilled"&&s("   "),e==="chat"&&r&&(await t(Xf({chatId:r,icon:c}))).meta.requestStatus==="fulfilled"&&s("   ")}}},Tb=({type:e})=>{const{validateAndUpload:t}=hQ({type:e}),n=I.useRef(null),r=o=>{var c;const a=(c=o.target.files)==null?void 0:c[0];a&&t(a)},s=()=>{var o;(o=n.current)==null||o.click()};return u.jsxs(u.Fragment,{children:[u.jsxs(Ne,{variant:"light",radius:"md",leftSection:u.jsx(VW,{}),onClick:s,children:[" ",e==="profile"?"":""]}),u.jsx("input",{type:"file",ref:n,hidden:!0,accept:"image/*",onChange:r})]})},mQ=({MessagesList:e})=>{const t=Ae(),[n,{open:r,close:s}]=_t(!1),{messages:o,chat:a,messagesStatus:c}=re(X=>X.chatsStore),{accessToken:f}=re(X=>X.userStore),{uploadedFiles:d,loading:p}=re(X=>X.filesStore),[h,g]=I.useState(null),{scrollRef:S,isAtBottom:y,showButton:b,handleScroll:C,scrollToBottom:T,buttonOffset:R}=XS({messagesStatus:c,dependencies:[o],hasAttachedFiles:d.length>0}),{scrollToMessage:m}=mb({scrollRef:S,type:at.CHAT}),{getUsername:v}=Ac(at.CHAT),x=a.nonNotifiable,{sendChatMessage:_}=Si();Um(p===Ie.PENDING);const[k,D]=I.useState(""),M=I.useRef(null),{suggestions:P,suggestionsRef:L,clearSuggestions:O,handleTextChange:V,showSuggestions:H,downSuggestion:q,upSuggestion:N,enterSuggestion:B,cancelSuggestion:$,insertMention:F,selectedSuggestionIndex:z,setSelectedSuggestionIndex:U}=C2({users:a.users,roles:void 0,textareaRef:M,newMessage:k,setNewMessage:D}),G=()=>{k.trim()&&a.chatId&&(k.trim().length>0||d.length>0)&&(_({Token:f,ChannelId:a.chatId,Classic:{Text:vb(k.trim()),Files:d.map(X=>X.fileId),NestedChannel:!1},ReplyToMessageId:h?h.id:void 0,MessageType:Zi.Classic}),D(""),g(null),O(),t(JS()))},te=X=>{if(!H){X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),G());return}switch(X.key){case"ArrowDown":X.preventDefault(),q();break;case"ArrowUp":X.preventDefault(),N();break;case"Tab":case"Enter":X.preventDefault(),B();break;case"Escape":X.preventDefault(),$();break}},ne=async X=>{if(!(!X.target.files||!(a!=null&&a.chatId))){for(const oe of Array.from(X.target.files))await t(uc({channelId:a.chatId,file:oe})).unwrap();X.target.value=""}},Q=()=>{t(io(null))},se=k.trim().length>0||d.length>0;return u.jsxs(u.Fragment,{children:[u.jsxs(ie,{style:{flex:1,padding:"10px",display:"flex",flexDirection:"column",backgroundColor:"#2C2E33"},children:[u.jsxs(ve,{align:"center",gap:"xs",wrap:"nowrap",justify:"space-between",children:[u.jsxs(ve,{align:"center",children:[u.jsx(tt,{variant:"subtle","aria-label":"Back",onClick:Q,children:u.jsx(eb,{size:20})}),u.jsxs(ge,{gap:0,children:[u.jsxs(ve,{children:[u.jsx(Xt,{order:4,children:a.chatName}),u.jsx(eQ,{})]}),u.jsxs(me,{size:"xs",c:"dimmed",children:[a.users.length," "]})]})]}),u.jsxs(ve,{children:[u.jsx(tt,{variant:"subtle","aria-label":"reply",onClick:r,children:x?u.jsx(gi,{size:24,color:"var(--mantine-color-teal-6)"}):u.jsx(Bd,{size:24,color:"var(--mantine-color-red-6)"})}),u.jsx(Tb,{type:"chat"}),u.jsx(JX,{}),u.jsx(sQ,{chatId:a.chatId})]})]}),u.jsx(vn,{my:"md"}),u.jsxs(ie,{style:{flex:1,position:"relative",minHeight:0,display:"flex",flexDirection:"column",overflow:"hidden"},children:[u.jsx(Pt,{viewportRef:S,style:{flex:1,padding:10},onScrollPositionChange:C,children:u.jsx(e,{scrollRef:S,type:at.CHAT,replyToMessage:X=>g(X),onScrollToReplyMessage:m})}),!y&&b&&u.jsx(ie,{style:{position:"absolute",bottom:R,right:10,zIndex:10},children:u.jsx(tt,{size:"lg",variant:"filled",onClick:()=>T(),children:u.jsx(ZS,{size:20})})})]}),u.jsxs(ie,{pos:"relative",children:[u.jsx(yb,{}),h&&u.jsx(ie,{p:6,children:u.jsx(ma,{title:v(h.authorId),onClose:()=>g(null),children:u.jsx(me,{lineClamp:2,children:h.text||h.title})})}),H&&P.length>0&&u.jsx(Gn,{ref:L,shadow:"md",p:"xs",pos:"absolute",bottom:"100%",left:0,right:0,mb:"xs",mah:200,bg:"#43474f",style:{overflow:"auto",zIndex:1e3},children:u.jsx(ge,{gap:"xs",children:P.map((X,oe)=>u.jsxs(ve,{p:"xs",style:{cursor:"pointer",borderRadius:"4px",backgroundColor:oe===z?"var(--mantine-color-blue-light)":"transparent"},onClick:()=>F(X),onMouseEnter:()=>U(oe),children:[u.jsx($t,{size:"sm",color:"blue",children:X.display.charAt(0).toUpperCase()}),u.jsxs(ie,{children:[u.jsx(me,{size:"sm",fw:500,children:X.display}),u.jsxs(me,{size:"xs",c:"dimmed",children:["@",X.tag,"  ",X.type]})]})]},X.id))})}),u.jsxs(ve,{mt:"auto",align:"center",wrap:"nowrap",gap:0,children:[u.jsxs(tt,{component:"label",size:"xl",variant:"transparent",disabled:p===Ie.PENDING,children:[u.jsx(tb,{size:20}),u.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:ne})]}),u.jsx(Rb,{type:at.CHAT}),u.jsx(ha,{w:"100%",ref:M,placeholder:"...",value:k,onChange:V,onKeyDown:te,autosize:!0,minRows:1,maxRows:3}),u.jsx(tt,{size:"xl",variant:"transparent",disabled:!se,onClick:G,children:u.jsx(nb,{size:20})})]})]})]}),u.jsx(oQ,{opened:n,onClose:s})]})},gQ=()=>{const{friendshipList:e}=re(t=>t.friendshipStore);return u.jsxs(ge,{p:"xs",gap:"xs",children:[e.length<1&&u.jsx(me,{children:"    "}),e.map(t=>u.jsx(_b,{userName:t.userName,userTag:t.userTag,actions:u.jsx(uQ,{userId:t.userId})},t.userId))]})},JT=({label:e,value:t})=>u.jsx(Gn,{p:"xs",radius:"md",style:{background:"var(--color-surface-3)",border:"1px solid var(--color-white-05)"},children:u.jsxs(ge,{gap:2,children:[u.jsx(me,{size:"xs",c:"dimmed",children:e}),u.jsx(kt,{label:t,withArrow:!0,children:u.jsx(me,{size:"sm",c:"var(--color-white)",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t})})]})}),vQ=()=>{var n;const{user:e}=re(r=>r.userStore),{iconBase64:t}=Es((n=e.icon)==null?void 0:n.fileId);return u.jsx(ie,{w:{base:300},visibleFrom:"sm",p:"md",style:{background:"var(--color-surface-1)",borderRight:"1px solid var(--border-primary-soft)"},children:u.jsx(Gn,{radius:"lg",p:"lg",withBorder:!0,style:{background:"var(--color-surface-2)",borderColor:"var(--border-primary-soft)"},children:u.jsxs(ge,{gap:"lg",align:"center",children:[u.jsx(ie,{style:{padding:4,borderRadius:"50%",background:"var(--color-primary-15)"},children:u.jsx($t,{size:90,radius:"xl",src:t,alt:e.name})}),u.jsx(kt,{label:e.name,withArrow:!0,children:u.jsx(Xt,{order:3,c:"var(--color-white)",ta:"center",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"wrap",maxWidth:"100%"},children:e.name})}),u.jsx(kt,{label:e.tag,withArrow:!0,children:u.jsxs(Et,{styles:{root:{background:"var(--color-primary-10)",color:"var(--color-primary)",border:"1px solid var(--border-primary-soft)"}},children:["@",e.tag]})}),u.jsx(vn,{w:"100%",color:"var(--color-white-05)"}),u.jsxs(ge,{gap:"sm",w:"100%",children:[u.jsx(JT,{label:"E-mail",value:e.mail}),u.jsx(JT,{label:" ",value:v2(e.accontCreateDate)})]})]})})})},yQ=()=>{const{micSettings:e,setMicSettings:t}=Un(),{volume:n,volumePercent:r,setNotificationVolume:s}=Lm(),{preloadImages:o,setPreloadImages:a}=$j();return u.jsxs(ge,{p:"xl",gap:"xl",w:"100%",style:{background:"var(--color-surface-1)"},children:[u.jsx(Gn,{p:"lg",radius:"lg",withBorder:!0,style:{background:"var(--color-surface-2)",borderColor:"var(--border-primary-soft)"},children:u.jsxs(ge,{gap:"lg",children:[u.jsx(Xt,{order:3,c:"var(--color-white)",children:" "}),u.jsxs(ge,{gap:6,children:[u.jsxs(ve,{justify:"space-between",children:[u.jsx(me,{size:"sm",c:"var(--color-white)",children:""}),u.jsxs(me,{size:"sm",c:"var(--color-white)",children:[e.volume,"%"]})]}),u.jsx(lo,{min:0,max:100,step:1,value:e.volume,onChange:c=>t(f=>({...f,volume:c})),styles:{track:{backgroundColor:"var(--color-white-05)"},bar:{backgroundColor:"var(--color-primary)"},thumb:{borderColor:"var(--color-primary)"}}})]}),u.jsxs(ge,{gap:6,children:[u.jsxs(ve,{justify:"space-between",children:[u.jsx(me,{size:"sm",c:"var(--color-white)",children:"Gain"}),u.jsxs(me,{size:"sm",c:"var(--color-white)",children:[e.gainDb," dB"]})]}),u.jsx(lo,{min:-10,max:20,step:1,value:e.gainDb,onChange:c=>t(f=>({...f,gainDb:c})),styles:{track:{backgroundColor:"var(--color-white-05)"},bar:{backgroundColor:"var(--color-primary)"},thumb:{borderColor:"var(--color-primary)"}}})]}),u.jsx(vn,{color:"var(--color-white-05)"}),u.jsxs(ge,{gap:"sm",children:[u.jsx(rn,{label:"",checked:e.noiseSuppression,onChange:c=>t(f=>({...f,noiseSuppression:c.currentTarget.checked})),styles:{track:{backgroundColor:e.noiseSuppression?"var(--color-primary)":"var(--color-white-05)"}}}),u.jsx(rn,{label:"",checked:e.echoCancellation,onChange:c=>t(f=>({...f,echoCancellation:c.currentTarget.checked})),styles:{track:{backgroundColor:e.echoCancellation?"var(--color-primary)":"var(--color-white-05)"}}}),u.jsx(rn,{label:"",checked:e.autoGainControl,onChange:c=>t(f=>({...f,autoGainControl:c.currentTarget.checked})),styles:{track:{backgroundColor:e.autoGainControl?"var(--color-primary)":"var(--color-white-05)"}}})]})]})}),u.jsx(Gn,{p:"lg",radius:"lg",withBorder:!0,style:{background:"var(--color-surface-2)",borderColor:"var(--border-primary-soft)"},children:u.jsxs(ge,{gap:"lg",children:[u.jsx(Xt,{order:3,c:"var(--color-white)",children:"  "}),u.jsxs(ge,{gap:6,children:[u.jsxs(ve,{justify:"space-between",children:[u.jsx(me,{size:"sm",c:"var(--color-white)",children:" "}),u.jsxs(me,{size:"sm",c:"var(--color-white)",children:[r,"%"]})]}),u.jsx(lo,{min:0,max:.525,step:.035,value:n,onChange:s,label:c=>`${Math.round(c/.35*100)}%`,styles:{track:{backgroundColor:"var(--color-white-05)"},bar:{backgroundColor:"var(--color-primary)"},thumb:{borderColor:"var(--color-primary)"}}})]})]})}),u.jsx(Gn,{p:"lg",radius:"lg",withBorder:!0,style:{background:"var(--color-surface-2)",borderColor:"var(--border-primary-soft)"},children:u.jsxs(ge,{gap:"lg",children:[u.jsx(Xt,{order:3,c:"var(--color-white)",children:" "}),u.jsx(rn,{label:" ",checked:o,onChange:c=>a(c.currentTarget.checked),styles:{track:{backgroundColor:o?"var(--color-primary)":"var(--color-white-05)"}}})]})})]})},wQ=({activeLink:e,ChatSection:t,MessagesList:n,Settings:r,FriendshipList:s,ApplicationFromList:o,ApplicationToList:a,ChatsList:c,CreateChat:f,AddFriend:d,UserApplications:p})=>{const[h,{open:g,close:S}]=_t(!1),{activeChat:y}=re(T=>T.chatsStore),[b,C]=I.useState("friends");return u.jsx(ie,{style:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"#2C2E33"},children:u.jsxs(Cn,{w:"100%",h:"100%",justify:"center",children:[e==="chats"&&u.jsx(u.Fragment,{children:y?u.jsx(t,{MessagesList:n}):u.jsxs(u.Fragment,{children:[u.jsx(c,{onCreateChatClick:g}),u.jsx(f,{opened:h,onClose:S})]})}),e==="profileSettings"&&u.jsx(r,{}),e==="settings"&&u.jsx(yQ,{}),e==="friends"&&u.jsxs(ge,{gap:"xs",w:"100%",h:"100%",p:10,children:[u.jsxs(ve,{justify:"space-between",mb:"md",children:[u.jsx(Xt,{order:1,children:""}),u.jsx(d,{})]}),u.jsxs(In,{value:b,onChange:C,styles:{tab:{"--tab-hover-color":"#4f4f4f"}},w:"100%",children:[u.jsxs(In.List,{children:[u.jsx(In.Tab,{value:"friends",children:" "}),u.jsx(In.Tab,{value:"applicationFrom",children:" "}),u.jsx(In.Tab,{value:"applicationTo",children:" "})]}),u.jsx(In.Panel,{value:"friends",children:u.jsx(s,{})}),u.jsx(In.Panel,{value:"applicationFrom",children:u.jsx(o,{})}),u.jsx(In.Panel,{value:"applicationTo",children:u.jsx(a,{})})]})]}),e==="serverApplications"&&u.jsx(p,{})]})})},SQ=({activeLink:e,setActiveLink:t})=>{const n=Ae(),r=()=>{t("chats"),n(io(null))},s=()=>{t("friends"),n(io(null))},o=()=>{t("profileSettings"),n(io(null))},a=()=>{t("settings"),n(io(null))},c=()=>{t("serverApplications"),n(io(null))};return u.jsxs(ge,{gap:"xs",bg:"#1A1B1E",w:"100%",maw:250,h:"100%",visibleFrom:"sm",p:10,children:[u.jsx(Ht,{label:"",leftSection:u.jsx(vW,{size:16}),rightSection:u.jsx(ao,{size:12}),active:e==="chats",onClick:r}),u.jsx(Ht,{label:"",leftSection:u.jsx(zj,{size:16}),rightSection:u.jsx(ao,{size:12}),active:e==="friends",onClick:s}),u.jsx(Ht,{label:" ",leftSection:u.jsx(Xj,{size:16}),rightSection:u.jsx(ao,{size:12}),active:e==="profileSettings",onClick:o}),u.jsx(Ht,{label:" ",leftSection:u.jsx(Vd,{size:16}),rightSection:u.jsx(ao,{size:12}),active:e==="settings",onClick:a}),u.jsx(Ht,{label:"    ",leftSection:u.jsx(PW,{size:16}),rightSection:u.jsx(ao,{size:12}),active:e==="serverApplications",onClick:c})]})},bQ=({isEdit:e,setIsEdit:t,form:n})=>{const r=Ae(),{showSuccess:s}=St(),{user:o}=re(h=>h.userStore),[a,c]=I.useState(!1),f=()=>{t(!0)},d=()=>{t(!1),n.setValues({email:o.mail,name:o.name,notifiable:o.notifiable,friendshipApplication:o.friendshipApplication,nonFriendMessage:o.nonFriendMessage})},p=async()=>{if(n.validate(),!n.isValid())return;const h=n.getValues();let g=!1;c(!0),h.friendshipApplication!==o.friendshipApplication&&(g=(await r(fc({type:sa.FRIENDSHIP}))).meta.requestStatus==="fulfilled"),h.nonFriendMessage!==o.nonFriendMessage&&(g=(await r(fc({type:sa.NONFRIEND}))).meta.requestStatus==="fulfilled"),h.notifiable!==o.notifiable&&(g=(await r(fc({type:sa.NOTIFIABLE}))).meta.requestStatus==="fulfilled"),g&&s("  "),(h.email!==o.mail||h.name!==o.name)&&(await r(kp({newProfile:{name:h.name,mail:h.email}}))).meta.requestStatus==="fulfilled"&&s("  "),h.notificationLifeTime!==o.notificationLifeTime&&(await r(Ep({time:h.notificationLifeTime}))).meta.requestStatus==="fulfilled"&&s("  "),c(!1),t(!1)};return u.jsx(ve,{justify:"flex-end",children:e?u.jsxs(u.Fragment,{children:[u.jsx(Ne,{variant:"outline",leftSection:u.jsx(wH,{}),radius:"md",size:"md",onClick:d,disabled:a,loading:a,children:""}),u.jsx(Ne,{leftSection:u.jsx(Fm,{}),radius:"md",size:"md",onClick:p,disabled:a,loading:a,children:" "})]}):u.jsx(Ne,{leftSection:u.jsx($m,{}),radius:"md",size:"md",onClick:f,children:" "})})},xQ=({isEdit:e,form:t})=>u.jsxs(u.Fragment,{children:[u.jsx(Xt,{order:2,c:"var(--color-white)",children:" "}),u.jsx(me,{c:"dimmed",children:" ,       "}),u.jsxs(ve,{justify:"space-between",mt:"lg",children:[u.jsxs(ge,{gap:0,children:[u.jsx(me,{c:"var(--color-white)",children:""}),u.jsx(me,{c:"dimmed",children:"    "})]}),u.jsx(rn,{disabled:!e,defaultChecked:!0,size:"lg",...t.getInputProps("notifiable",{type:"checkbox"})},t.key("notifiable"))]}),u.jsx(vn,{mt:"lg"}),u.jsxs(ve,{justify:"space-between",mt:"lg",children:[u.jsxs(ge,{gap:0,children:[u.jsx(me,{c:"var(--color-white)",children:"  "}),u.jsx(me,{c:"dimmed",children:"      "})]}),u.jsx(rn,{disabled:!e,defaultChecked:!0,size:"lg",...t.getInputProps("friendshipApplication",{type:"checkbox"})},t.key("friendshipApplication"))]}),u.jsx(vn,{mt:"lg"}),u.jsxs(ve,{justify:"space-between",mt:"lg",children:[u.jsxs(ge,{gap:0,children:[u.jsx(me,{c:"var(--color-white)",children:"  "}),u.jsx(me,{c:"dimmed",children:"    ,     "})]}),u.jsx(rn,{disabled:!e,defaultChecked:!0,size:"lg",...t.getInputProps("nonFriendMessage",{type:"checkbox"})},t.key("nonFriendMessage"))]})]});var Ch=(e=>(e[e.Student=0]="Student",e[e.Teacher=1]="Teacher",e))(Ch||{});const Wd="presets",CQ=`${Wd}/getSystemRoles`,_Q=`${Wd}/getPresets`,RQ=`${Wd}/createPreset`,TQ=`${Wd}/deletePreset`,rg="/server/presets",EQ=e=>`${rg}/list?ServerId=${e}`,kQ=e=>`${rg}/systemroles?ServerId=${e}`,IQ=`${rg}/create`,DQ=`${rg}/delete`,jQ=async e=>{const{data:t}=await ke.get(EQ(e));return t},PQ=async e=>{const{data:t}=await ke.get(kQ(e));return t},MQ=async(e,t,n)=>{const{data:r}=await ke.post(IQ,{serverId:e,serverRoleId:t,systemRoleId:n});return r},NQ=async(e,t,n)=>{await ke.delete(DQ,{data:{serverId:e,serverRoleId:t,systemRoleId:n}})},Kp=Pe(CQ,async({serverId:e},{rejectWithValue:t})=>{var n,r;try{return await PQ(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Yp=Pe(_Q,async({serverId:e},{rejectWithValue:t})=>{var n,r;try{return await jQ(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Jl=Pe(RQ,async({serverId:e,serverRoleId:t,systemRoleId:n},{rejectWithValue:r})=>{var s,o;try{return await MQ(e,t,n)}catch(a){return a instanceof Me?r(((o=(s=a.response)==null?void 0:s.data)==null?void 0:o.message)||Qe.DEFAULT):r(Qe.DEFAULT)}}),Zl=Pe(TQ,async({serverId:e,serverRoleId:t,systemRoleId:n},{rejectWithValue:r})=>{var s,o;try{await NQ(e,t,n)}catch(a){return a instanceof Me?r(((o=(s=a.response)==null?void 0:s.data)==null?void 0:o.message)||Qe.DEFAULT):r(Qe.DEFAULT)}}),LQ={presets:[],systemRoles:[],presetsLoading:Ie.IDLE,systemRolesLoading:Ie.IDLE,error:""},OQ=qs({name:Wd,initialState:LQ,reducers:{},extraReducers:e=>{e.addCase(Kp.pending,t=>{t.systemRolesLoading=Ie.PENDING,t.error=""}).addCase(Kp.fulfilled,(t,n)=>{t.systemRoles=n.payload.roles,t.systemRolesLoading=Ie.FULFILLED,t.error=""}).addCase(Kp.rejected,(t,n)=>{t.systemRolesLoading=Ie.REJECTED,t.error=n.payload}).addCase(Yp.pending,t=>{t.presetsLoading=Ie.PENDING,t.error=""}).addCase(Yp.fulfilled,(t,n)=>{t.presetsLoading=Ie.FULFILLED,t.presets=n.payload.presets,t.error=""}).addCase(Yp.rejected,(t,n)=>{t.presetsLoading=Ie.REJECTED,t.error=n.payload}).addCase(Zl.fulfilled,(t,{meta:n})=>{const{serverRoleId:r,systemRoleId:s}=n.arg;t.presets=t.presets.filter(o=>o.serverRoleId!==r&&o.systemRoleId!==s),t.error=""}).addCase(Jl.fulfilled,(t,n)=>{t.presets=[...t.presets,n.payload],t.error=""}).addMatcher(bn(Jl.pending,Zl.pending,Jl.fulfilled,Zl.fulfilled),t=>{t.error=""}).addMatcher(bn(Jl.rejected,Zl.rejected),(t,n)=>{t.error=n.payload})}}),AQ=OQ.reducer,$Q=({isEdit:e,form:t,systemRoles:n,updateAction:r})=>{var c;const{user:s}=re(f=>f.userStore),{iconBase64:o}=Es((c=s.icon)==null?void 0:c.fileId),a=f=>{switch(f){case Ch.Student:return"";case Ch.Teacher:return"";default:return""}};return u.jsxs(u.Fragment,{children:[u.jsx(Xt,{order:2,c:"var(--color-white)",children:"  "}),u.jsx(me,{c:"dimmed",children:"    "}),u.jsxs(ve,{mt:"md",children:[u.jsx($t,{src:o,alt:"User profile icon",size:"xl"}),u.jsxs(ge,{children:[u.jsxs(ve,{children:[u.jsx(Xt,{order:4,c:"var(--color-white)",children:s.name}),u.jsx(Et,{variant:"default",children:s.tag})]}),u.jsx(ve,{children:n.map(f=>u.jsx(Et,{variant:"light",children:`${f.name} (${a(f.type)})`},f.name))}),u.jsxs(ve,{children:[u.jsx(Om,{}),u.jsxs(me,{c:"dimmed",children:[" : ",v2(s.accontCreateDate)]})]}),r]})]}),u.jsx(vn,{mt:"md"}),u.jsxs(ge,{mt:"md",children:[u.jsx(qt,{leftSection:u.jsx(e2,{}),radius:"md",label:"",placeholder:" ",description:" 5  50 ",...t.getInputProps("name"),maxLength:50,disabled:!e},t.key("name")),u.jsx(qt,{leftSection:u.jsx(uW,{}),radius:"md",label:" ",placeholder:"  ",...t.getInputProps("email"),maxLength:50,disabled:!e},t.key("email")),u.jsx(qt,{leftSection:u.jsx(AW,{}),radius:"md",label:" ",placeholder:"  ",value:s.tag,disabled:!0}),u.jsx(Dd,{label:"  (.)",placeholder:"  2  20",...t.getInputProps("notificationLifeTime"),min:2,max:20,disabled:!e},t.key("notificationLifeTime"))]})]})},FQ=()=>{const[e,t]=I.useState(!1),{user:n}=re(s=>s.userStore),r=ks({mode:"uncontrolled",initialValues:{email:n.mail,name:n.name,notifiable:n.notifiable,friendshipApplication:n.friendshipApplication,nonFriendMessage:n.nonFriendMessage,notificationLifeTime:n.notificationLifeTime},validate:{email:Ss(Cr(6,"Email"),ws(50,"Email"),gb),name:Ss(Cr(6,""),ws(50,""))}});return u.jsxs(ge,{p:"xl",gap:"md",w:"100%",style:{background:"var(--color-surface-1)"},children:[u.jsx(Bn,{withBorder:!0,radius:"md",w:"100%",styles:{root:{backgroundColor:"var(--color-surface-2)",borderColor:"var(--border-primary-soft)"}},children:u.jsxs(Pt.Autosize,{w:"100%",h:"100%",offsetScrollbars:!0,children:[u.jsx($Q,{isEdit:e,form:r,systemRoles:n.systemRoles,updateAction:u.jsx(Tb,{type:"profile"})}),u.jsx(vn,{mt:"md",mb:"md"}),u.jsx(xQ,{isEdit:e,form:r})]})}),u.jsx(bQ,{isEdit:e,setIsEdit:t,form:r})]})},Fc="serverApplications",zQ=`${Fc}/approveServerApplication`,BQ=`${Fc}/removeServerApplication`,UQ=`${Fc}/removeUserApplication`,VQ=`${Fc}/getServerApplications`,HQ=`${Fc}/getUserApplications`,qd="/server/application",WQ=(e,t)=>`${qd}s/user?Page=${e}&Size=${t}`,qQ=(e,t,n)=>`${qd}s/server?ServerId=${e}&Page=${t}&Size=${n}`,GQ=`${qd}/remove/user`,KQ=`${qd}/remove/server`,YQ=`${qd}/approve`,XQ=async e=>{await ke.post(YQ,{id:e})},QQ=async e=>{await ke.delete(KQ,{data:{id:e}})},JQ=async e=>{await ke.delete(GQ,{data:{id:e}})},ZQ=async(e,t,n)=>{const{data:r}=await ke.get(qQ(e,t,n));return r},eJ=async(e,t)=>{const{data:n}=await ke.get(WQ(e,t));return n},Xp=Pe(zQ,async({applicationId:e},{rejectWithValue:t})=>{var n,r;try{await XQ(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Qp=Pe(BQ,async({applicationId:e},{rejectWithValue:t})=>{var n,r;try{await QQ(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),Jp=Pe(UQ,async({applicationId:e},{rejectWithValue:t})=>{var n,r;try{await JQ(e)}catch(s){return s instanceof Me?t(((r=(n=s.response)==null?void 0:n.data)==null?void 0:r.message)||Qe.DEFAULT):t(Qe.DEFAULT)}}),ud=Pe(VQ,async({serverId:e,page:t,size:n},{rejectWithValue:r})=>{var s,o;try{return await ZQ(e,t,n)}catch(a){return a instanceof Me?r(((o=(s=a.response)==null?void 0:s.data)==null?void 0:o.message)||Qe.DEFAULT):r(Qe.DEFAULT)}}),fd=Pe(HQ,async({page:e,size:t},{rejectWithValue:n})=>{var r,s;try{return await eJ(e,t)}catch(o){return o instanceof Me?n(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||Qe.DEFAULT):n(Qe.DEFAULT)}}),tJ={serverApplications:[],userApplications:[],serverApplicationsLoadingState:Ie.IDLE,userApplicationsLoadingState:Ie.IDLE,serverPage:0,serverTotal:0,userPage:0,userTotal:0,error:""},nJ=qs({name:Fc,initialState:tJ,reducers:{},extraReducers:e=>{e.addCase(ud.pending,t=>{t.serverApplicationsLoadingState=Ie.PENDING,t.error=""}).addCase(ud.fulfilled,(t,n)=>{t.serverApplicationsLoadingState=Ie.FULFILLED,t.error="",t.serverApplications=n.payload.applications,t.serverPage=n.payload.page,t.serverTotal=n.payload.total}).addCase(ud.rejected,(t,n)=>{t.serverApplicationsLoadingState=Ie.REJECTED,t.error=n.payload}).addCase(fd.pending,t=>{t.userApplicationsLoadingState=Ie.PENDING,t.error=""}).addCase(fd.fulfilled,(t,n)=>{t.userApplicationsLoadingState=Ie.FULFILLED,t.error="",t.userApplications=n.payload.applications,t.userPage=n.payload.page,t.userTotal=n.payload.total}).addCase(fd.rejected,(t,n)=>{t.userApplicationsLoadingState=Ie.REJECTED,t.error=n.payload}).addCase(Xp.fulfilled,(t,{meta:n})=>{const{applicationId:r}=n.arg;t.serverApplications=t.serverApplications.filter(s=>s.applicationId!==r),t.error=""}).addCase(Qp.fulfilled,(t,{meta:n})=>{const{applicationId:r}=n.arg;t.serverApplications=t.serverApplications.filter(s=>s.applicationId!==r),t.error=""}).addCase(Jp.fulfilled,(t,{meta:n})=>{const{applicationId:r}=n.arg;t.userApplications=t.userApplications.filter(s=>s.applicationId!==r),t.error=""}).addMatcher(bn(Xp.pending,Qp.pending,Jp.pending),t=>{t.error=""}).addMatcher(bn(Xp.rejected,Qp.rejected,Jp.rejected),(t,n)=>{t.error=n.payload})}}),rJ=nJ.reducer,sJ=({application:e})=>{const t=Ae(),{showSuccess:n}=St(),{serverName:r}=e,s=new Date(e.createdAt).toLocaleString(),o=async()=>{(await t(Jp({applicationId:e.applicationId}))).meta.requestStatus==="fulfilled"&&n("   ")};return u.jsx(Bn,{withBorder:!0,p:"md",radius:"md",w:"100%",children:u.jsxs(ve,{gap:"lg",w:"100%",justify:"space-between",children:[u.jsx(ge,{gap:"xs",children:u.jsx(me,{fw:700,children:r})}),u.jsxs(ge,{gap:"xs",children:[u.jsxs(ve,{gap:"xs",children:[u.jsx(Om,{size:16}),u.jsx(me,{c:"dimmed",children:" :"})]}),u.jsx(me,{children:s})]}),u.jsx(ge,{gap:"xs",children:u.jsx(Ne,{radius:"md",leftSection:u.jsx(To,{size:16}),color:"red",variant:"outline",onClick:o,children:""})})]})})},ZT=5,oJ=()=>{const e=Ae(),{userApplications:t,userApplicationsLoadingState:n,userPage:r,userTotal:s}=re(a=>a.serverApplicationsStore),o=a=>{e(fd({page:a,size:ZT}))};return I.useEffect(()=>{e(fd({page:1,size:ZT}))},[e]),u.jsxs(ge,{w:"100%",gap:"md",p:"md",children:[u.jsx(Xt,{order:1,children:"    "}),u.jsx(Pt,{style:{flex:1,maxHeight:"100%"},children:u.jsx(ge,{gap:"xs",align:"center",children:n===Ie.PENDING?u.jsx(Cn,{w:"100%",justify:"center",children:u.jsx(Rr,{})}):t.map(a=>u.jsx(sJ,{application:a},a.applicationId))})}),u.jsx(Cn,{w:"100%",justify:"center",children:t.length>0&&u.jsx(kr,{total:s,value:r,onChange:o})})]})},iJ=()=>{const{chat:e}=re(t=>t.chatsStore);return u.jsx(ie,{style:{padding:"10px",backgroundColor:"#1A1B1E"},w:300,h:"100%",visibleFrom:"sm",children:u.jsxs(ge,{gap:"md",h:"100%",children:[u.jsx(me,{c:"white",children:""}),u.jsx(vn,{color:"gray"}),u.jsx(Pt.Autosize,{mah:"100%",maw:"100%",children:u.jsx(ge,{gap:"xs",children:e.users.map(t=>u.jsx(G2,{user:t},t.userId))})})]})})},aJ=()=>{const e=Ae(),{activeChat:t}=re(s=>s.chatsStore),[n,r]=I.useState("chats");return I.useEffect(()=>{e(Op()),e(Ap()),e(Bp())},[]),u.jsxs(u.Fragment,{children:[u.jsx(SQ,{activeLink:n,setActiveLink:r}),u.jsx(wQ,{activeLink:n,ChatSection:mQ,MessagesList:Zw,Settings:FQ,FriendshipList:gQ,ApplicationFromList:fQ,ApplicationToList:pQ,ChatsList:rQ,CreateChat:tQ,AddFriend:aQ,UserApplications:oJ}),t&&u.jsx(iJ,{}),!t&&n!=="profileSettings"&&u.jsx(vQ,{})]})},cJ=({serverId:e,serverName:t,nonReadedCount:n,nonReadedTaggedCount:r,serverIcon:s})=>{const o=Ae(),{user:a}=re(g=>g.userStore),{isOpenHome:c}=re(g=>g.appStore),{currentServerId:f}=re(g=>g.testServerStore),{iconBase64:d}=Es(s==null?void 0:s.fileId),p=f===e&&!c,h=()=>{o(KS(e)),o(xr(!1)),o(ys(!1)),ot.emit("setServer",{serverId:e,userName:a.name,userId:a.id})};return u.jsxs(ie,{pos:"relative",w:56,h:56,style:{cursor:"pointer"},children:[u.jsx(ie,{pos:"absolute",left:-8,top:"50%",style:{transform:"translateY(-50%)",width:4,height:p?28:0,borderRadius:4,background:"var(--color-primary)",transition:"all 0.2s ease"}}),u.jsx(tt,{size:56,radius:"xl",variant:"transparent",onClick:h,style:{background:p?"var(--color-primary-15)":"transparent",transition:"all 0.2s ease"},children:u.jsx($t,{size:40,radius:"xl",src:d,style:{border:p?"2px solid var(--color-primary)":"2px solid transparent",transition:"all 0.2s ease"},children:t.charAt(0).toUpperCase()})}),r>0&&u.jsx(Et,{variant:"filled",size:"sm",circle:!0,pos:"absolute",top:30,right:30,w:18,h:18,p:0,style:{background:"#ef4444",border:"2px solid #0E0E10",fontSize:10},children:r>9?"9+":r}),n>0&&u.jsx(Et,{variant:"filled",size:"sm",circle:!0,pos:"absolute",top:5,right:30,w:18,h:18,p:0,style:{background:"var(--color-primary)",border:"2px solid #0E0E10",fontSize:10},children:n>9?"9+":n})]})},lJ=({opened:e,onClose:t})=>{const n=Ae(),[r,s]=I.useState("create"),{user:o}=re(d=>d.userStore),a=o.systemRoles.length>0?!!o.systemRoles.find(d=>d.type===Ch.Teacher):!0,c=ks({initialValues:{name:"",serverType:String(ri.Student)},validate:{name:Ss(Cr(6," "),ws(50," "))}}),f=async d=>{(await n(Jf({name:d.name,serverType:Number(d.serverType)}))).meta.requestStatus==="fulfilled"&&(n(ni()),c.reset(),t())};return u.jsx(dt,{opened:e,onClose:t,title:r==="create"?"  ":"  ",centered:!0,c:"#ffffff",styles:{header:{backgroundColor:"#1a1b1e"},content:{backgroundColor:"#1a1b1e"}},children:u.jsxs(In,{value:r,onChange:s,styles:{tab:{"--tab-hover-color":"#4f4f4f"}},children:[u.jsx(In.List,{children:u.jsx(In.Tab,{value:"create",children:" "})}),u.jsx(In.Panel,{value:"create",children:u.jsxs("form",{onSubmit:c.onSubmit(f),children:[u.jsx(qt,{label:" ",placeholder:"  ",description:" 6  50 ",maxLength:50,...c.getInputProps("name")}),u.jsx(rr,{label:" ",disabled:!a,data:[{value:String(ri.Student),label:""},{value:String(ri.Teacher),label:""}],...c.getInputProps("serverType")}),u.jsxs(ve,{justify:"flex-end",mt:"md",children:[u.jsx(Ne,{variant:"outline",onClick:t,children:""}),u.jsx(Ne,{type:"submit",children:""})]})]})})]})})},dJ=()=>{const{systemRoles:e}=re(o=>o.userStore.user),[t,{open:n,close:r}]=_t(!1),s=e.length>0;return u.jsxs(u.Fragment,{children:[u.jsx(tt,{size:"lg",variant:"transparent",onClick:n,disabled:!s,children:u.jsx(AH,{size:28,color:"#fff"})}),u.jsx(lJ,{opened:t,onClose:r})]})},uJ={banReason:()=>({maxWidth:260,whiteSpace:"pre-wrap",wordBreak:"break-word"})},fJ=({opened:e,loading:t,setLoading:n})=>{const r=Ae(),{showSuccess:s}=St(),{currentServerId:o,serverData:a,bannedUsers:c,pageBannedUsers:f,totalPagesBannedUsers:d}=re(S=>S.testServerStore),p=a.permissions.canDeleteUsers,h=async S=>{o&&(n(!0),(await r(mp({serverId:o,userId:S}))).meta.requestStatus==="fulfilled"&&(n(!1),s("  ")))},g=S=>{f<d&&o&&r(sd({serverId:o,page:S,size:5}))};return I.useEffect(()=>{p&&o&&e&&r(sd({serverId:o,page:1,size:5}))},[p,o,e]),u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",fw:500,children:" "}),c.length<1&&u.jsx(me,{children:"  "}),c&&c.map(S=>u.jsx(Bn,{withBorder:!0,p:"md",children:u.jsxs(ve,{justify:"space-between",align:"flex-start",wrap:"nowrap",children:[u.jsxs(ve,{wrap:"nowrap",align:"flex-start",children:[u.jsx($t,{radius:"xl",size:"lg",color:"blue",children:S.userName[0]}),u.jsxs(ge,{gap:4,children:[u.jsxs(ge,{gap:0,children:[u.jsx(me,{fw:500,children:S.userName}),u.jsx(me,{c:"dimmed",size:"sm",children:S.userTag})]}),S.banReason&&u.jsx(kt,{multiline:!0,w:400,label:S.banReason,children:u.jsx(Et,{variant:"light",style:uJ.banReason(),children:S.banReason})})]})]}),u.jsxs(ge,{align:"flex-end",gap:8,children:[u.jsxs(ve,{gap:6,children:[u.jsx(Om,{size:16}),u.jsx(me,{size:"sm",children:ld(S.banTime)})]}),u.jsx(Ne,{variant:"light",size:"xs",onClick:()=>h(S.userId),loading:t,disabled:t,children:""})]})]})},S.userId)),u.jsx(Cn,{w:"100%",justify:"center",children:c.length>0&&u.jsx(kr,{total:d,value:f,onChange:g})})]})},pJ=()=>{const e=Ae(),{showSuccess:t}=St(),{serverData:n,currentServerId:r}=re(d=>d.testServerStore),[s,o]=I.useState(!1),a=n.isClosed,c=async()=>{(await e(od({serverId:r,isClosed:!a}))).meta.requestStatus==="fulfilled"&&t("   ")},f=async()=>{(await e(od({serverId:r,isClosed:!a,isApprove:s}))).meta.requestStatus==="fulfilled"&&(o(!1),t("   "))};return u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:"  "}),u.jsx(ve,{gap:"md",children:a?u.jsxs(u.Fragment,{children:[u.jsx(cW,{}),u.jsx(me,{children:"  "})]}):u.jsxs(u.Fragment,{children:[u.jsx(Hj,{}),u.jsx(me,{children:"  "})]})}),a&&u.jsx(pa,{labelPosition:"left",label:"   ",checked:s,onChange:d=>o(d.currentTarget.checked)}),a?u.jsx(Ne,{radius:"md",variant:"light",onClick:f,children:" "}):u.jsx(Ne,{radius:"md",variant:"light",onClick:c,children:" "})]})},hJ=({application:e})=>{const t=Ae(),{showSuccess:n}=St(),{name:r,tag:s,systemRoles:o}=e.user,a=new Date(e.createdAt).toLocaleString(),c=async()=>{(await t(Qp({applicationId:e.applicationId}))).meta.requestStatus==="fulfilled"&&n(" ")},f=async()=>{(await t(Xp({applicationId:e.applicationId}))).meta.requestStatus==="fulfilled"&&n(" ")};return u.jsx(Bn,{withBorder:!0,p:"md",radius:"md",children:u.jsxs(ve,{gap:"lg",children:[u.jsx($t,{size:"md",color:"blue",children:r[0]}),u.jsxs(ge,{gap:"xs",children:[u.jsx(me,{fw:700,children:r}),u.jsx(me,{c:"dimmed",children:s}),o.map(d=>u.jsx(Et,{variant:"default",children:d.name},d.name))]}),u.jsxs(ge,{gap:"xs",children:[u.jsxs(ve,{gap:"xs",children:[u.jsx(Om,{size:16}),u.jsx(me,{c:"dimmed",children:" :"})]}),u.jsx(me,{children:a})]}),u.jsxs(ge,{gap:"xs",children:[u.jsx(Ne,{radius:"md",leftSection:u.jsx(Am,{size:16}),variant:"light",onClick:f,children:""}),u.jsx(Ne,{radius:"md",leftSection:u.jsx(To,{size:16}),color:"red",variant:"outline",onClick:c,children:""})]})]})})},eE=5,mJ=()=>{const e=Ae(),{currentServerId:t}=re(c=>c.testServerStore),{serverApplications:n,serverApplicationsLoadingState:r,serverPage:s,serverTotal:o}=re(c=>c.serverApplicationsStore),a=c=>{t&&e(ud({serverId:t,page:c,size:eE}))};return I.useEffect(()=>{t&&e(ud({serverId:t,page:1,size:eE}))},[e,t]),u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:"  "}),r===Ie.PENDING?u.jsx(Cn,{w:"100%",justify:"center",children:u.jsx(Rr,{})}):n.map(c=>u.jsx(hJ,{application:c},c.applicationId)),u.jsx(Cn,{w:"100%",justify:"center",children:n.length>0&&u.jsx(kr,{total:o,value:s,onChange:a})})]})},gJ=({opened:e,onClose:t})=>{const n=Ae(),{showSuccess:r}=St(),{currentServerId:s,serverData:o}=re(f=>f.testServerStore),{isNotifiable:a}=o,c=async()=>{(await n(yp({serverId:s}))).meta.requestStatus==="fulfilled"&&r("  ")};return u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},size:"auto",children:u.jsx(rn,{checked:a,onChange:c,color:"teal",size:"md",label:a?" ":"  ",thumbIcon:a?u.jsx(gi,{size:12,color:"var(--mantine-color-teal-6)"}):u.jsx(Bd,{size:12,color:"var(--mantine-color-red-6)"})})})},vJ=()=>{const[e,{open:t,close:n}]=_t(!1),{showSuccess:r}=St(),s=Ae(),{currentServerId:o}=re(d=>d.testServerStore),[a,c]=I.useState(!1),f=async()=>{n(),c(!0),(await s(Zf({serverId:o}))).meta.requestStatus==="fulfilled"&&r(" "),c(!1)};return u.jsxs(u.Fragment,{children:[u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:" "}),u.jsx(Ne,{color:"red",leftSection:u.jsx(rb,{size:16}),radius:"md",onClick:t,disabled:a,children:""})]}),u.jsx(dt,{centered:!0,opened:e,onClose:n,withCloseButton:!1,children:u.jsxs(ge,{children:[u.jsx(me,{children:" ,    ?"}),u.jsxs(ve,{justify:"flex-end",children:[u.jsx(Ne,{radius:"md",variant:"outline",onClick:n,children:""}),u.jsx(Ne,{color:"red",radius:"md",onClick:f,children:""})]})]})})]})},yJ=({opened:e,onClose:t})=>{const n=Ae(),{currentServerId:r,serverData:s}=re(y=>y.testServerStore),[o,a]=I.useState(null),[c,f]=I.useState(null),[d,p]=I.useState(!1),h=new Date(Date.now()+10*60*1e3),g=s.invitationString,S=async()=>{if(!o){f("     ");return}p(!0),f(null),n(Sp({serverId:r,expiredAt:o.toISOString()})),p(!1)};return u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},size:"auto",children:u.jsxs(ge,{gap:"md",children:[u.jsx(ng,{description:"   ( +10 )",value:o,onChange:a,minDate:h,valueFormat:"DD.MM.YYYY HH:mm",placeholder:"   ",withSeconds:!1,error:c&&!g?"  ":void 0,disabled:!!g}),g?u.jsx(ge,{children:u.jsxs(ch,{radius:"md",variant:"outline",color:"gray",title:" !",children:[u.jsx(uS,{value:`https://gambrinusup.github.io/hitscord-frontend/#/invite/${g}`,children:({copied:y,copy:b})=>u.jsx(Ne,{radius:"md",variant:"light",onClick:b,children:y?"":" "})}),u.jsx(Ne,{radius:"md",color:"gray",onClick:t,mt:"sm",fullWidth:!0,children:""})]})}):u.jsx(Ne,{onClick:S,disabled:!o||d,loading:d,fullWidth:!0,children:" "}),c&&!g&&u.jsx(ch,{color:"red",title:"",children:c})]})})},wJ=()=>{const e=Ae(),t=Ws(),{isConnected:n}=Un(),{serversList:r}=re(a=>a.testServerStore),{accessToken:s}=re(a=>a.userStore),o=async()=>{(await e(Rp())).meta.requestStatus==="fulfilled"&&t("/")};return I.useEffect(()=>{s&&e(ni())},[s,e]),u.jsxs(Cn,{w:"100%",h:"100%",maw:70,bg:"#0E0E10",align:"center",direction:"column",justify:"space-between",p:`10px 0 ${n?130:85}px 0`,children:[u.jsxs(Cn,{direction:"column",align:"center",h:"calc(100% - 40px)",children:[u.jsx(tt,{size:"lg",variant:"transparent",onClick:()=>e(ys(!0)),children:u.jsx(ZH,{size:28,color:"#fff"})}),u.jsx(vn,{my:"sm"}),u.jsx(Pt.Autosize,{mah:"100%",children:u.jsx(ge,{gap:"sm",align:"center",children:r.map(a=>u.jsx(cJ,{serverId:a.serverId,serverName:a.serverName,nonReadedCount:a.nonReadedCount,nonReadedTaggedCount:a.nonReadedTaggedCount,serverIcon:a.icon},a.serverId))})}),u.jsx(vn,{my:"sm"}),u.jsx(dJ,{})]}),u.jsx(tt,{size:"lg",variant:"transparent",onClick:o,children:u.jsx(Wj,{size:28,color:"#fff"})})]})},SJ=({opened:e,onClose:t})=>{const n=Ae(),{currentServerId:r}=re(c=>c.testServerStore),{showSuccess:s}=St(),o=ks({initialValues:{newName:""},validate:{newName:c=>{const f=c.trim().length;return f<6?"    6 ":f>50?"    50 ":null}}}),a=async c=>{r&&(await n(ap({serverId:r,name:c.newName}))).meta.requestStatus==="fulfilled"&&(s("  "),o.setValues({newName:""}),t())};return u.jsx(dt,{opened:e,onClose:t,title:"   ",centered:!0,c:"#ffffff",styles:{header:{backgroundColor:"#1a1b1e"},content:{backgroundColor:"#1a1b1e"}},children:u.jsx("form",{onSubmit:o.onSubmit(a),children:u.jsxs(ge,{gap:"xs",children:[u.jsx(qt,{label:" ",placeholder:"  ",description:" 6  50 ",...o.getInputProps("newName"),maxLength:50}),u.jsx(ve,{justify:"flex-end",mt:"md",children:u.jsx(Ne,{variant:"filled",type:"submit",children:""})})]})})})},bJ=({opened:e,onClose:t})=>{const n=Ae(),{showSuccess:r}=St(),{currentServerId:s}=re(h=>h.testServerStore),{role:o}=re(h=>h.rolesStore),[a,c]=I.useState(""),[f,d]=I.useState(""),p=async()=>{a.trim().length>1&&f.trim().length>1&&s&&o&&(await n(qp({updatedRole:{serverId:s,roleId:o.role.id,name:a.trim(),color:f.trim()}}))).meta.requestStatus==="fulfilled"&&(r("  "),n(VV({serverId:s,roleId:o.role.id,name:a.trim(),color:f.trim()})),n(xh(null)),t())};return I.useEffect(()=>{o&&(c(o.role.name),d(o.role.color))},[o]),u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",size:"auto",children:u.jsxs(ge,{children:[u.jsx(qt,{label:" ",placeholder:"  ",value:a,onChange:h=>c(h.currentTarget.value),disabled:(o==null?void 0:o.role.type)!==hn.Custom}),u.jsx(Wh,{withEyeDropper:!1,label:" ",placeholder:"#000000",value:f,onChange:d}),u.jsx(Ne,{leftSection:u.jsx(Fm,{}),variant:"light",radius:"md",onClick:p,children:""})]})})},xJ=({opened:e,onClose:t})=>{const n=Ae(),{showSuccess:r}=St(),{currentServerId:s}=re(h=>h.testServerStore),{role:o}=re(h=>h.rolesStore),[a,c]=I.useState(!1),f=ks({mode:"uncontrolled"}),d=async()=>{if(s&&o){const h=f.getValues();let g=!1;c(!0);const S={[Ct.CanChangeRole]:"canChangeRole",[Ct.CanWorkChannels]:"canWorkChannels",[Ct.CanDeleteUsers]:"canDeleteUsers",[Ct.CanMuteOther]:"canMuteOther",[Ct.CanDeleteOthersMessages]:"canDeleteOthersMessages",[Ct.CanIgnoreMaxCount]:"canIgnoreMaxCount",[Ct.CanCreateRole]:"canCreateRoles",[Ct.CanCreateLessons]:"canCreateLessons",[Ct.CanCheckAttendance]:"canCheckAttendance",[Ct.CanUseInvitations]:"canUseInvitations"};for(const[y,b]of Object.entries(S)){const C=h[b],T=o.settings[b];C!==T&&(await n(Gp({updatedRoleSettings:{serverId:s,roleId:o.role.id,setting:Number(y),add:C}}))).meta.requestStatus==="fulfilled"&&(g=!0)}g&&r("  "),c(!1)}},p=()=>{n(xh(null)),t()};return I.useEffect(()=>{o&&f.setValues({...o.settings})},[o]),u.jsx(dt,{opened:e,onClose:p,centered:!0,size:"auto",children:u.jsxs(ge,{children:[u.jsx(Xt,{order:5,children:" "}),u.jsx(Pt.Autosize,{maw:"100%",mah:500,children:u.jsx(ge,{children:o&&Object.entries(o.settings).map(([h])=>u.jsxs(wt.Fragment,{children:[u.jsx(me,{children:GS[h]||h}),u.jsx(rn,{size:"lg",...f.getInputProps(h,{type:"checkbox"})},f.key(h))]},h))})}),u.jsx(Ne,{disabled:a,loading:a,leftSection:u.jsx(Fm,{}),variant:"light",radius:"md",onClick:d,children:""})]})})},CJ=({opened:e,onClose:t})=>{const n=Ae(),{showSuccess:r}=St(),{currentServerId:s}=re(C=>C.testServerStore),[o,a]=I.useState(""),[c,f]=I.useState("#ffffff"),[d,p]=I.useState(""),[h,g]=I.useState(!1),S=C=>/^#([A-Fa-f0-9]{6})$/.test(C),y=async()=>{if(!S(c)){p("     #000000");return}p(""),o.trim().length>1&&c.trim().length>1&&s&&(g(!0),(await n(Hp({role:{serverId:s,name:o.trim(),color:c}}))).meta.requestStatus==="fulfilled"&&(r("  "),a(""),f("#ffffff"),p(""),t())),g(!1)},b=h||o.trim().length<1||!S(c);return u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",size:"auto",children:u.jsxs(ge,{children:[u.jsx(qt,{label:" ",placeholder:"  ",value:o,onChange:C=>a(C.currentTarget.value)}),u.jsx(Wh,{withEyeDropper:!1,label:" ",placeholder:"#000000",value:c,onChange:C=>{f(C),S(C)&&p("")},error:d}),u.jsx(Ne,{leftSection:u.jsx(Fm,{}),variant:"light",radius:"md",onClick:y,disabled:b,children:""})]})})},_J=({role:e,editRole:t,editSettings:n})=>{const r=Ae(),{showSuccess:s}=St(),{currentServerId:o,serverData:a}=re(d=>d.testServerStore),c=a.permissions.canChangeRole,f=async()=>{o&&(await r(Wp({serverId:o,roleId:e.role.id}))).meta.requestStatus==="fulfilled"&&s("  ")};return u.jsx(Bn,{p:"md",radius:"md",children:u.jsxs(ge,{children:[u.jsxs(ve,{justify:"space-between",children:[u.jsxs(ve,{children:[u.jsx(Ic,{color:e.role.color}),u.jsxs(ge,{gap:"0",children:[u.jsx(Xt,{order:3,children:e.role.name}),u.jsxs(me,{c:"dimmed",children:["#",e.role.tag]})]})]}),u.jsxs(ve,{children:[u.jsx(Ne,{variant:"light",radius:"md",leftSection:u.jsx(Jj,{}),onClick:()=>n(e),disabled:e.role.type!==hn.Custom||!c,children:""}),u.jsx(Ne,{variant:"light",radius:"md",leftSection:u.jsx($m,{}),onClick:()=>t(e),disabled:!c,children:""}),u.jsx(Ne,{variant:"light",radius:"md",leftSection:u.jsx(zm,{}),onClick:f,disabled:e.role.type!==hn.Custom||!c,children:""})]})]}),u.jsx(ve,{children:Object.entries(e.settings).filter(([d,p])=>p===!0).map(([d])=>u.jsx(aa,{radius:"sm",children:GS[d]||d},d))})]})})},RJ=({opened:e,onClose:t})=>{const n=Ae(),[r,{open:s,close:o}]=_t(!1),[a,{open:c,close:f}]=_t(!1),[d,{open:p,close:h}]=_t(!1),{accessToken:g}=re(T=>T.userStore),{currentServerId:S,serverData:y}=re(T=>T.testServerStore),{rolesList:b}=re(T=>T.rolesStore),C=y.permissions.canCreateRoles;return I.useEffect(()=>{g&&S&&C&&n(pc({serverId:S}))},[g,S,C]),u.jsxs(u.Fragment,{children:[u.jsx(dt,{opened:e,onClose:t,centered:!0,size:"auto",children:u.jsxs(ge,{children:[u.jsxs(ve,{justify:"space-between",children:[u.jsx(Xt,{order:3,children:" "}),C&&u.jsx(Ne,{leftSection:u.jsx(yo,{}),variant:"light",radius:"md",onClick:()=>s(),disabled:!y.permissions.canCreateRoles,children:" "})]}),u.jsx(Pt.Autosize,{mah:"700px",maw:"100%",children:u.jsx(ge,{children:b.map(T=>u.jsx(_J,{role:T,editRole:R=>{n(xh(R)),p()},editSettings:R=>{n(xh(R)),c()}},T.role.id))})})]})}),u.jsx(CJ,{opened:r,onClose:o}),u.jsx(xJ,{opened:a,onClose:f}),u.jsx(bJ,{opened:d,onClose:h})]})},TJ=({opened:e,onClose:t})=>{const{permissions:n}=re(r=>r.testServerStore.serverData);return u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",size:"auto",children:u.jsx(ge,{gap:"xs",children:Object.entries(n).filter(([r,s])=>s===!0).map(([r])=>u.jsx(aa,{radius:"sm",children:GS[r]||r},r))})})},EJ=({user:e})=>{var y;const t=Ae(),{showSuccess:n}=St(),{serverData:r,currentServerId:s}=re(b=>b.testServerStore),{iconBase64:o}=Es((y=e.icon)==null?void 0:y.fileId),[a,c]=I.useState(!1),[f,d]=I.useState(null),{roles:p}=r,h=p.filter(b=>b.type!==hn.Creator).map(b=>({value:b.id,label:b.name})),g=async()=>{c(!0),f&&s&&(await t(ep({serverId:s,userId:e.userId,role:f}))).meta.requestStatus==="fulfilled"&&n("   "),c(!1)},S=async b=>{c(!0),s&&(await t(tp({serverId:s,userId:e.userId,role:b}))).meta.requestStatus==="fulfilled"&&n("    "),c(!1)};return u.jsx(Bn,{radius:"md",children:u.jsxs(ge,{gap:"md",children:[u.jsxs(ve,{children:[u.jsx($t,{size:40,radius:"xl",src:o,alt:e.userName}),u.jsxs(ge,{gap:"0",children:[u.jsx(me,{fw:700,children:e.userName}),u.jsx(me,{c:"dimmed",children:e.userTag})]})]}),u.jsx(aa.Group,{children:e.roles.map(b=>u.jsx(aa,{withRemoveButton:e.roles.length>1,onRemove:()=>S(b.roleId),disabled:a,children:b.roleName},b.roleId))}),u.jsxs(ve,{gap:"md",children:[u.jsx(rr,{placeholder:" ",value:f,onChange:d,data:h}),u.jsx(tt,{size:"lg",onClick:g,disabled:a,children:u.jsx(yo,{size:24,color:"#fff"})})]})]})})},kJ=()=>{const{serverData:e}=re(s=>s.testServerStore),{serverName:t,icon:n}=e,{iconBase64:r}=Es(n==null?void 0:n.fileId);return u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:" "}),u.jsxs(ve,{gap:"md",children:[u.jsx($t,{size:"xl",color:"blue",src:r,children:t[0]}),u.jsxs(ge,{children:[u.jsx(me,{children:n?" ":"   "}),u.jsx(Tb,{type:"server"})]})]})]})},K2=({opened:e,onClose:t})=>{const n=Ae(),{serverData:r,currentServerId:s,error:o}=re(L=>L.testServerStore),{rolesLoading:a}=re(L=>L.rolesStore),{user:c}=re(L=>L.userStore),[f,d]=I.useState("roles"),[p,h]=I.useState(!1),[g,S]=I.useState(r.serverName),{showSuccess:y}=St(),[b,C]=I.useState(""),[T,R]=I.useState(""),m=r.isCreator,v=r.permissions.canDeleteUsers,x=r.permissions.canChangeRole,_=r.permissions.canCreateRoles,k=r.users,D=r.isClosed,M=async()=>{g.length<6||s&&(h(!0),(await n(ip({serverId:s,name:g}))).meta.requestStatus==="fulfilled"&&(h(!1),y("  "),t()))},P=async()=>{s&&b&&(h(!0),(await n(cp({serverId:s,userId:b,banReason:T.trim()!==""?T:void 0}))).meta.requestStatus==="fulfilled"&&(h(!1),y("  "),C(null),R(""),t()))};return I.useEffect(()=>{_&&a===Ie.IDLE&&s&&n(pc({serverId:s}))},[a,_,s]),I.useEffect(()=>{o&&h(!1)},[o]),u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",size:"auto",children:u.jsxs(ve,{align:"flex-start",gap:"md",children:[u.jsxs(ge,{gap:"xs",style:{width:200},children:[x&&u.jsx(Ht,{label:"",leftSection:u.jsx(yo,{size:16}),active:f==="roles",onClick:()=>d("roles")}),m&&u.jsx(Ht,{label:" ",leftSection:u.jsx(yo,{size:16}),active:f==="name",onClick:()=>d("name")}),(m||v)&&u.jsx(Ht,{label:" ",leftSection:u.jsx(KW,{size:16}),active:f==="deleteUser",onClick:()=>d("deleteUser")}),v&&u.jsx(Ht,{label:" ",leftSection:u.jsx(WW,{size:16}),active:f==="unbanUser",onClick:()=>d("unbanUser")}),m&&u.jsx(Ht,{label:" ",leftSection:u.jsx(tW,{size:16}),active:f==="changeIcon",onClick:()=>d("changeIcon")}),m&&u.jsx(Ht,{label:"  ",leftSection:u.jsx(Hj,{size:16}),active:f==="changeIsClosed",onClick:()=>d("changeIsClosed")}),D&&u.jsx(Ht,{label:"  ",leftSection:u.jsx(KH,{size:16}),active:f==="serverApplications",onClick:()=>d("serverApplications")}),m&&u.jsx(Ht,{label:" ",leftSection:u.jsx(rb,{size:16}),active:f==="deleteServer",onClick:()=>d("deleteServer")})]}),u.jsxs(Pt,{children:[f==="roles"&&u.jsx(Pt.Autosize,{mah:400,miw:500,mx:"auto",children:u.jsx(ge,{gap:"md",children:k.map(L=>u.jsx(EJ,{user:L},L.userId))})}),f==="name"&&m&&u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:"  "}),u.jsx(qt,{label:"  ",value:g,onChange:L=>S(L.target.value),placeholder:r.serverName,description:" 6  50 ",maxLength:50}),u.jsx(Ne,{onClick:M,loading:p,children:" "})]}),f==="deleteUser"&&(m||v)&&u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:"   "}),u.jsx(rr,{label:" ",placeholder:" ",data:r.users.filter(L=>L.userId!==c.id).map(L=>({value:L.userId,label:L.userName})),value:b,onChange:C}),u.jsx(qt,{label:"   ()",placeholder:" ",value:T,onChange:L=>R(L.currentTarget.value)}),u.jsx(Ne,{onClick:P,loading:p,children:""})]}),f==="unbanUser"&&v&&u.jsx(fJ,{opened:e,loading:p,setLoading:h}),f==="changeIcon"&&u.jsx(kJ,{}),f==="changeIsClosed"&&u.jsx(pJ,{}),f==="serverApplications"&&u.jsx(mJ,{}),f==="deleteServer"&&u.jsx(vJ,{})]})]})})},IJ=({opened:e,onClose:t})=>{const n=Ws(),r=Ae(),s=$c(),{showSuccess:o,showError:a}=St(),{serverData:c,currentVoiceChannelId:f}=re(y=>y.testServerStore),{accessToken:d,user:p}=re(y=>y.userStore),[h,g]=I.useState(""),S=async()=>{if(!h){a("  ");return}s(d,f),r(xr(!1)),r(ta(null)),(await r(DV({serverId:c.serverId,newCreatorId:h}))).meta.requestStatus==="fulfilled"&&(o("  "),r(ni()),r(ys(!0)),r(YS()),g(""),n("/main"))};return u.jsx(dt,{opened:e,onClose:t,title:"  ",centered:!0,c:"#ffffff",styles:{header:{backgroundColor:"#1a1b1e"},content:{backgroundColor:"#1a1b1e"}},children:u.jsxs(ge,{gap:"xs",children:[u.jsx(rr,{label:"  ",placeholder:" ",data:c.users.filter(y=>y.userId!==p.id).map(y=>({value:y.userId,label:y.userName})),value:h,onChange:g}),u.jsx(ve,{justify:"flex-end",mt:"md",children:u.jsx(Ne,{variant:"filled",onClick:S,children:""})})]})})},DJ=({opened:e,onClose:t})=>{const n=Ae(),{showSuccess:r}=St(),{currentServerId:s,serverData:o}=re(b=>b.testServerStore),{systemRoles:a,systemRolesLoading:c,presets:f,presetsLoading:d}=re(b=>b.presetsStore),p=ks({initialValues:{systemRoleId:"",serverRoleId:""},validate:{systemRoleId:b=>b?null:"  ",serverRoleId:b=>b?null:"  "}}),h=o.roles.map(b=>({value:b.id,label:b.name})),g=a.map(b=>({value:b.id,label:b.name})),S=async b=>{(await n(Jl({serverId:s,serverRoleId:b.serverRoleId,systemRoleId:b.systemRoleId}))).meta.requestStatus==="fulfilled"&&(r("  "),p.reset())},y=async(b,C)=>{(await n(Zl({serverId:s,serverRoleId:b,systemRoleId:C}))).meta.requestStatus==="fulfilled"&&r("  ")};return I.useEffect(()=>{e&&s&&(a.length===0&&n(Kp({serverId:s})),f.length===0&&n(Yp({serverId:s})))},[e,s,a.length,f.length,n]),u.jsx(dt,{opened:e,onClose:t,centered:!0,title:"  ",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},size:"70vw",children:u.jsx(Pt.Autosize,{w:"100%",h:"100%",children:u.jsxs(ge,{gap:"md",children:[u.jsx(Xt,{order:4,children:" "}),c===Ie.PENDING?u.jsx(Rr,{}):u.jsxs(mt,{children:[u.jsx(mt.Thead,{children:u.jsxs(mt.Tr,{children:[u.jsx(mt.Th,{children:""}),u.jsx(mt.Th,{children:""}),u.jsx(mt.Th,{children:"ID"}),u.jsx(mt.Th,{children:" "}),u.jsx(mt.Th,{children:"ID  "})]})}),u.jsx(mt.Tbody,{children:a.map(b=>u.jsxs(mt.Tr,{children:[u.jsx(mt.Td,{children:b.name}),u.jsx(mt.Td,{children:b.type}),u.jsx(mt.Td,{children:b.id}),u.jsx(mt.Td,{children:b.parentName}),u.jsx(mt.Td,{children:b.parentId})]},b.name))})]}),u.jsx(Xt,{order:4,children:" "}),u.jsx("form",{onSubmit:p.onSubmit(S),children:u.jsxs(ve,{gap:"md",grow:!0,children:[u.jsx(rr,{radius:"md",placeholder:"  ",data:h,...p.getInputProps("serverRoleId")}),u.jsx(rr,{radius:"md",placeholder:"  ",data:g,...p.getInputProps("systemRoleId")}),u.jsx(Ne,{leftSection:u.jsx(yo,{}),radius:"md",type:"submit",children:""})]})}),u.jsx(Xt,{order:4,children:" "}),d===Ie.PENDING?u.jsx(Rr,{}):u.jsxs(mt,{children:[u.jsx(mt.Thead,{children:u.jsxs(mt.Tr,{children:[u.jsx(mt.Th,{children:" "}),u.jsx(mt.Th,{children:" "}),u.jsx(mt.Th,{children:""})]})}),u.jsx(mt.Tbody,{children:f.map((b,C)=>u.jsxs(mt.Tr,{children:[u.jsx(mt.Td,{children:b.serverRoleName}),u.jsx(mt.Td,{children:b.systemRoleName}),u.jsx(mt.Td,{children:u.jsx(tt,{color:"red",variant:"subtle",onClick:()=>y(b.serverRoleId,b.systemRoleId),children:u.jsx(rb,{size:16})})})]},`${b.serverRoleId}-${b.systemRoleId}-${C}`))})]})]})})})},Qy={channelBox:()=>({display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",maxWidth:230}),buttonRoot:(e,t)=>({backgroundColor:t?"#999999":"transparent","--button-hover-color":"#4f4f4f",transition:"color 0.3s ease",borderTopRightRadius:e?0:"var(--mantine-radius-default)",borderBottomRightRadius:e?0:"var(--mantine-radius-default)"}),breakLabel:()=>({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"break-all",maxWidth:"100%"})},jJ=(e,t)=>{switch(e){case Rt.TEXT_CHANNEL:case Rt.NOTIFICATION_CHANNEL:return t&&t>0?u.jsx(Et,{circle:!0,children:t}):u.jsx(QH,{});case Rt.VOICE_CHANNEL:return u.jsx(sb,{});default:return null}},PJ=(e,t)=>{const{serverData:n}=re(a=>a.testServerStore),r=n.channels.textChannels,s=n.channels.notificationChannels;return{channelData:(()=>{if(t===Rt.TEXT_CHANNEL)return r.find(a=>a.channelId===e);if(t===Rt.NOTIFICATION_CHANNEL)return s.find(a=>a.channelId===e)})()}},Eb=({channelId:e,channelName:t,openChannel:n,editAction:r,channelType:s,maxCount:o,currentCount:a})=>{var b;const{serverData:c,currentChannelId:f,currentNotificationChannelId:d}=re(C=>C.testServerStore),p=PJ(e,s),h=c.permissions.canWorkChannels,g=((b=p.channelData)==null?void 0:b.nonReadedCount)||0,[S,y]=I.useState("");return u.jsx(kt,{label:t,children:u.jsxs(ie,{style:Qy.channelBox(),onMouseEnter:()=>y(e),onMouseLeave:()=>y(""),children:[u.jsx(Ne,{leftSection:jJ(s,g),rightSection:s===Rt.VOICE_CHANNEL?`${a}/${o}`:void 0,variant:"subtle",p:0,color:"#ffffff",justify:"flex-start",styles:{root:Qy.buttonRoot(S===e,f===e||d===e),label:Qy.breakLabel()},fullWidth:!0,onClick:n,children:t}),S===e&&!(h===!1&&s===Rt.VOICE_CHANNEL)&&r]},e)})},MJ={buttonSettings:e=>({backgroundColor:e?"#999999":"transparent","--button-hover-color":"#4f4f4f",transition:"color 0.3s ease",borderTopLeftRadius:0,borderBottomLeftRadius:0})},NJ=({channelId:e})=>{const t=Ae(),{showSuccess:n}=St(),{serverData:r}=re(d=>d.testServerStore),s=r.channels.textChannels.find(d=>d.channelId===e),o=r.channels.notificationChannels.find(d=>d.channelId===e),c=s?s.isNotifiable:o?o.isNotifiable:!1,f=async()=>{(await t(id({channelId:e}))).meta.requestStatus==="fulfilled"&&n("  ")};return u.jsx(rn,{checked:c,onChange:f,color:"teal",size:"md",label:c?" ":"  ",thumbIcon:c?u.jsx(gi,{size:12,color:"var(--mantine-color-teal-6)"}):u.jsx(Bd,{size:12,color:"var(--mantine-color-red-6)"})})},LJ=({channelType:e})=>{const{roleSettings:t}=re(c=>c.testServerStore),n=t.canSee,r=t.canJoin,s=t.canWrite,o=t.canWriteSub,a=t.notificated;return u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:" "}),n&&u.jsxs(u.Fragment,{children:[u.jsxs(me,{children:[""," ",e===Rt.TEXT_CHANNEL?"":"",":"]}),u.jsx(ge,{gap:"xs",children:n.map(c=>u.jsx(Et,{color:c.color,size:"lg",variant:"light",radius:"md",children:c.name},c.id))})]}),r&&u.jsxs(u.Fragment,{children:[u.jsx(me,{children:" :"}),u.jsx(ge,{gap:"xs",children:r.map(c=>u.jsx(Et,{color:c.color,size:"lg",variant:"light",radius:"md",children:c.name},c.id))})]}),s&&u.jsxs(u.Fragment,{children:[u.jsx(me,{children:" :"}),u.jsx(ge,{gap:"xs",children:s.map(c=>u.jsx(Et,{color:c.color,size:"lg",variant:"light",radius:"md",children:c.name},c.id))})]}),o&&u.jsxs(u.Fragment,{children:[u.jsx(me,{children:"  :"}),u.jsx(ge,{gap:"xs",children:o.map(c=>u.jsx(Et,{color:c.color,size:"lg",variant:"light",radius:"md",children:c.name},c.id))})]}),a&&u.jsxs(u.Fragment,{children:[u.jsx(me,{children:" :"}),u.jsx(ge,{gap:"xs",children:a.map(c=>u.jsx(Et,{color:c.color,size:"lg",variant:"light",radius:"md",children:c.name},c.id))})]})]})},OJ=({channelId:e,loading:t,setLoading:n,onClose:r})=>{const s=Ae(),{showSuccess:o}=St(),a=async()=>{n(!0),(await s(op({channelId:e}))).meta.requestStatus==="fulfilled"&&(n(!1),o("  "),r())};return u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:" "}),u.jsx(Ne,{color:"red",onClick:a,loading:t,children:" "})]})},AJ=({channelName:e,channelId:t,loading:n,setLoading:r,onClose:s})=>{const o=Ae(),{showSuccess:a}=St(),[c,f]=I.useState(e),d=async()=>{r(!0),(await o(dp({id:t,name:c}))).meta.requestStatus==="fulfilled"&&(r(!1),a("   "),s())};return u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:"  "}),u.jsx(qt,{label:"  ",value:c,onChange:p=>f(p.target.value),placeholder:e,disabled:n}),u.jsx(Ne,{onClick:d,disabled:n,loading:n,children:" "})]})},$J=({channelId:e,loading:t,setLoading:n,onClose:r})=>{const s=Ae(),{serverData:o}=re(p=>p.testServerStore),{showSuccess:a}=St(),[c,f]=I.useState(1),d=async()=>{n(!0),(await s(gp({voiceChannelId:e,maxCount:Number(c)}))).meta.requestStatus==="fulfilled"&&(n(!1),a("  "),r())};return I.useEffect(()=>{const p=o.channels.voiceChannels.find(h=>h.channelId===e);p&&f(p==null?void 0:p.maxCount)},[o]),u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:" -  "}),u.jsx(ve,{align:"center",children:u.jsx(Dd,{label:" ",placeholder:"  2  999",value:c,onChange:f,min:2,max:999})}),u.jsx(Ne,{onClick:d,loading:t,children:" "})]})},FJ=({channelId:e,channelType:t,loading:n,setLoading:r,onClose:s})=>{const o=Ae(),{serverData:a}=re(b=>b.testServerStore),{showSuccess:c}=St(),[f,d]=I.useState(null),[p,h]=I.useState(null),[g,S]=I.useState(""),y=async()=>{r(!0),t===Rt.TEXT_CHANNEL&&f&&p&&g&&(await o(fp({settings:{channelId:e,add:Vp(f),type:Number(p),roleId:g}}))).meta.requestStatus==="fulfilled"&&(r(!1),c("  "),s()),t===Rt.VOICE_CHANNEL&&f&&p&&g&&(await o(hp({settings:{channelId:e,add:Vp(f),type:Number(p),roleId:g}}))).meta.requestStatus==="fulfilled"&&(r(!1),c("  "),s()),t===Rt.NOTIFICATION_CHANNEL&&f&&p&&g&&(await o(lp({settings:{channelId:e,add:Vp(f),type:Number(p),roleId:g}}))).meta.requestStatus==="fulfilled"&&(r(!1),c("  "),s()),r(!1)};return u.jsxs(ge,{gap:"md",children:[u.jsx(me,{size:"lg",w:500,children:"   "}),u.jsxs(ve,{align:"center",children:[u.jsx(rr,{label:"",placeholder:" ",data:[{value:"true",label:""},{value:"false",label:""}],value:f,onChange:d,disabled:n}),u.jsx(rr,{label:"",placeholder:" ",data:PX(t),value:p,onChange:h,disabled:n}),u.jsx(rr,{label:" ",placeholder:" ",data:a.roles.filter(b=>b.type!==hn.Creator).map(b=>({value:b.id,label:b.name})),value:g,onChange:S,disabled:n})]}),u.jsx(Ne,{onClick:y,disabled:n,loading:n,children:" "})]})},zJ=({opened:e,onClose:t,channelId:n,channelName:r,channelType:s})=>{const o=Ae(),{serverData:a,error:c}=re(S=>S.testServerStore),f=a.permissions.canWorkChannels,[d,p]=I.useState(f?"name":"notifiable"),[h,g]=I.useState(!1);return I.useEffect(()=>{f&&e&&o(pp({channelId:n}))},[f,e]),I.useEffect(()=>{c!==""&&g(!1)},[c]),u.jsx(dt,{opened:e,onClose:t,centered:!0,title:" ",size:"auto",styles:{content:{backgroundColor:"#2c2e33",color:"#ffffff"},header:{backgroundColor:"#2c2e33"}},children:u.jsxs(ve,{align:"flex-start",gap:"md",children:[u.jsxs(ge,{gap:"xs",style:{width:200},children:[u.jsx(Ht,{label:"",leftSection:u.jsx(gi,{size:16}),active:d==="notifiable",onClick:()=>p("notifiable")}),f&&u.jsx(Ht,{label:"",leftSection:u.jsx($m,{size:16}),active:d==="name",onClick:()=>p("name")}),f&&u.jsx(Ht,{label:"",leftSection:u.jsx(zm,{size:16}),active:d==="delete",onClick:()=>p("delete")}),f&&u.jsx(Ht,{label:"",leftSection:u.jsx(Jj,{size:16}),active:d==="watchSettings",onClick:()=>p("watchSettings")}),f&&u.jsx(Ht,{label:"",leftSection:u.jsx(Zj,{size:16}),active:d==="settings",onClick:()=>p("settings")}),f&&s===Rt.VOICE_CHANNEL&&u.jsx(Ht,{label:"  ",leftSection:u.jsx(eq,{size:16}),active:d==="count",onClick:()=>p("count")})]}),u.jsxs(Pt,{children:[d==="notifiable"&&u.jsx(NJ,{channelId:n}),d==="name"&&u.jsx(AJ,{channelName:r,channelId:n,loading:h,setLoading:g,onClose:t}),d==="delete"&&u.jsx(OJ,{channelId:n,loading:h,setLoading:g,onClose:t}),d==="watchSettings"&&u.jsx(LJ,{channelType:s}),d==="settings"&&u.jsx(FJ,{channelId:n,channelType:s,loading:h,setLoading:g,onClose:t}),d==="count"&&u.jsx($J,{channelId:n,loading:h,setLoading:g,onClose:t})]})]})})},kb=({channelName:e,channelId:t,channelType:n=Rt.TEXT_CHANNEL})=>{const{currentChannelId:r,currentNotificationChannelId:s}=re(d=>d.testServerStore),[o,{open:a,close:c}]=_t(!1),f=()=>{a()};return u.jsxs(u.Fragment,{children:[u.jsx(Ne,{variant:"subtle",p:0,color:"#ffffff",justify:"flex-start",w:"20px",styles:{root:MJ.buttonSettings(r===t||s===t)},onClick:f,children:u.jsx(Vd,{size:16})}),u.jsx(zJ,{opened:o,onClose:c,channelId:t,channelName:e,channelType:n})]})},BJ=e=>{switch(e){case Rt.TEXT_CHANNEL:return"  ";case Rt.VOICE_CHANNEL:return"  ";case Rt.NOTIFICATION_CHANNEL:return"   ";default:return" "}},UJ=({opened:e,onClose:t,channelType:n})=>{const r=Ae(),{currentServerId:s}=re(c=>c.testServerStore),o=ks({initialValues:{name:"",count:3},validate:{name:Ss(Cr(1," "),ws(100," "))}}),a=async c=>{if(!s)return;(await r(sp({serverId:s,name:c.name,channelType:n,maxCount:n===Rt.VOICE_CHANNEL?c.count:void 0}))).meta.requestStatus==="fulfilled"&&r(An({serverId:s})),t()};return u.jsx(dt,{opened:e,onClose:t,title:BJ(n),centered:!0,c:"#ffffff",styles:{header:{backgroundColor:"#1a1b1e"},content:{backgroundColor:"#1a1b1e"}},children:u.jsxs("form",{onSubmit:o.onSubmit(a),children:[u.jsx(qt,{label:" ",placeholder:"  ",...o.getInputProps("name")}),n===Rt.VOICE_CHANNEL&&u.jsx(Dd,{label:" ",placeholder:"  3  999",...o.getInputProps("count"),min:3,max:999}),u.jsxs(ve,{justify:"flex-end",mt:"md",children:[u.jsx(Ne,{variant:"outline",onClick:t,children:""}),u.jsx(Ne,{type:"submit",children:""})]})]})})},Ib=({channelType:e})=>{const[t,{open:n,close:r}]=_t(!1),s=()=>{n()};return u.jsxs(u.Fragment,{children:[u.jsx(tt,{variant:"transparent",onClick:s,children:u.jsx(yo,{color:"#ffffff"})}),u.jsx(UJ,{opened:t,onClose:r,channelType:e})]})},Y2=({onClose:e})=>{const t=Ae(),[n,{toggle:r}]=_t(!0),{serverData:s}=re(c=>c.testServerStore),o=s.permissions.canWorkChannels,a=c=>{t(Pj(c)),t(xr(!1)),e()};return u.jsxs(ge,{align:"flex-start",gap:"xs",children:[u.jsxs(ve,{justify:"space-between",w:"100%",wrap:"nowrap",children:[u.jsx(Ne,{leftSection:n?u.jsx(Ud,{}):u.jsx(ao,{}),variant:"transparent",onClick:r,p:0,color:"#fffff",styles:{root:{"--button-hover-color":"#4f4f4f",transition:"color 0.3s ease"}},children:" "}),o&&u.jsx(Ib,{channelType:Rt.TEXT_CHANNEL})]}),u.jsx(Td,{in:n,w:"100%",children:u.jsx(ge,{gap:"xs",children:s.channels.textChannels.map(({channelId:c,channelName:f})=>u.jsx(Eb,{channelId:c,channelName:f,openChannel:()=>a(c),editAction:u.jsx(kb,{channelName:f,channelId:c,channelType:Rt.TEXT_CHANNEL}),channelType:Rt.TEXT_CHANNEL},c))})})]})},VJ=({opened:e,toggle:t,canWorkChannels:n})=>u.jsxs(ve,{justify:"space-between",w:"100%",wrap:"nowrap",children:[u.jsx(Ne,{leftSection:e?u.jsx(Ud,{}):u.jsx(ao,{}),variant:"transparent",onClick:t,p:0,color:"#fffff",styles:{root:{"--button-hover-color":"#4f4f4f",transition:"color 0.3s ease"}},children:" "}),n&&u.jsx(Ib,{channelType:Rt.VOICE_CHANNEL})]}),HJ=({socketId:e,isSpeaking:t,userName:n,producerIds:r,userVolume:s,handleVolumeChange:o,handleOpenStream:a,handleKickUser:c,channelId:f,userId:d,handleMuteUser:p})=>{var m;const{isCreator:h}=re(v=>v.testServerStore.serverData),g=re(v=>v.testServerStore.serverData.permissions.canWorkChannels),{voiceChannels:S}=re(v=>v.testServerStore.serverData.channels),y=(m=S.find(v=>v.channelId===f))==null?void 0:m.users,{user:b}=re(v=>v.userStore),C=y==null?void 0:y.find(v=>v.userId===d),T=(C==null?void 0:C.muteStatus)===1,R=(C==null?void 0:C.muteStatus)===2;return u.jsxs(lt,{shadow:"md",width:200,closeOnItemClick:!0,children:[u.jsx(lt.Target,{children:u.jsxs(ve,{style:{cursor:"pointer",overflow:"hidden",width:"100%",minWidth:0},wrap:"nowrap",children:[u.jsx(e2,{color:t?"#43b581":void 0,style:{flexShrink:0}}),(R||T)&&u.jsx(ad,{color:R?"#ff0000":"#43b581",size:20,style:{flexShrink:0}}),u.jsx(me,{style:{flex:1,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",wordBreak:"break-word",lineHeight:"1.2em",maxHeight:"2.4em",minWidth:0},title:n,children:n}),r.length>1&&u.jsx(wh,{color:"#43b581",style:{marginLeft:"auto",flexShrink:0}})]})}),u.jsxs(lt.Dropdown,{children:[d!==b.id&&u.jsx(lt.Item,{leftSection:u.jsx(sb,{}),children:u.jsx(lo,{label:"",value:s,onChange:v=>o(e,v),min:1,max:100})}),r.length>1&&u.jsx(lt.Item,{leftSection:u.jsx(wh,{}),onClick:()=>a(e),children:" "}),(h||g)&&d!==b.id&&u.jsx(lt.Item,{leftSection:u.jsx(BW,{}),onClick:()=>c(e),children:" "}),(h||g)&&d!==b.id&&u.jsx(u.Fragment,{children:R?u.jsx(lt.Item,{leftSection:u.jsx(ad,{}),onClick:()=>p(d,R),children:"  "}):u.jsx(lt.Item,{leftSection:u.jsx(ad,{}),onClick:()=>p(d,R),children:"  "})})]})]},e)},WJ=()=>{const[e,t]=I.useState([]);return I.useEffect(()=>{if(ot)return ot.on("active-speakers",({activeSpeakers:n})=>{t(n)}),()=>{ot.off("active-speakers")}},[]),e},X2=()=>{const e=WG(),t=$c(),{isConnected:n,consumers:r,users:s,setSelectedUserId:o}=Un(),{user:a,accessToken:c}=re(L=>L.userStore),{serverData:f,currentVoiceChannelId:d}=re(L=>L.testServerStore),p=Ae(),[h,{toggle:g}]=_t(!0),S=WJ(),{setVolume:y,registerProducerUser:b,userVolumes:C}=QG(),T=hb(s),R=f.permissions.canWorkChannels,m=f.permissions.canIgnoreMaxCount,v=async(L,O)=>{const V=T.filter(H=>H.roomName===L).flatMap(H=>Object.values(H.users)).length;!m&&V>=O||(n?L===d?p(w2()):(d&&await t(c,d),p(xr(!1)),p(ta(L)),p(Vw(L)),p(Hw(f.serverId)),e(L,a.name,a.id,f.serverId,c)):(p(ta(L)),p(Vw(L)),p(Hw(f.serverId)),e(L,a.name,a.id,f.serverId,c)))},x=(L,O)=>{if(!d)return;const V=T.find(N=>N.roomName===d);if(!V)return;const H=V.users[L];if(!H)return;H.producers.map(N=>N.producerId).find(N=>!!r.find($=>{var F;return $.producerId===N&&$.kind==="audio"&&((F=$.appData)==null?void 0:F.source)!=="screen-audio"}))&&H.userId&&y(H.userId,O)},_=L=>{ot.emit("kickUser",{targetSocketId:L},O=>{O.success?console.log("  :",O.message):console.error("  :",O.message)})},k=L=>{const O=C[L],V=bh(L);return(O!==void 0?O:V)*100},D=(L,O)=>L.some(H=>S.some(q=>q.producerId===H))&&O===d,M=L=>{o(L),p(xr(!0))},P=(L,O)=>{console.log(O),O?ot.emit("unmuteUserById",{userId:L,accessToken:c},V=>{V.success?console.log(V.message):console.error("  :",V.message)}):ot.emit("muteUserById",{userId:L,accessToken:c},V=>{V.success?console.log(V.message):console.error("  :",V.message)})};return I.useEffect(()=>{if(ot)return ot.on("kickedUser",()=>{t(c,d),p(xr(!1)),p(ta(null))}),()=>{ot.off("producerClosed")}},[t,p]),u.jsxs(ge,{align:"flex-start",gap:"xs",children:[u.jsx(VJ,{opened:h,toggle:g,canWorkChannels:R}),u.jsx(Td,{in:h,w:"100%",children:u.jsx(ge,{gap:"xs",children:f.channels.voiceChannels.map(({channelId:L,channelName:O,maxCount:V})=>u.jsxs(wt.Fragment,{children:[u.jsx(Eb,{channelId:L,channelName:O,openChannel:()=>v(L,V),editAction:u.jsx(kb,{channelName:O,channelId:L,channelType:Rt.VOICE_CHANNEL}),maxCount:V,currentCount:T.filter(H=>H.roomName===L).flatMap(H=>Object.values(H.users)).length,channelType:Rt.VOICE_CHANNEL},L),u.jsx(ge,{gap:"xs",style:{width:"100%",minWidth:0},children:T.filter(H=>H.roomName===L).flatMap(H=>Object.entries(H.users).map(([q,{producers:N,userName:B,userId:$}])=>{const F=N.map(G=>G.producerId);$&&N.forEach(G=>{r.some(ne=>{var Q;return ne.producerId===G.producerId&&ne.kind==="audio"&&((Q=ne.appData)==null?void 0:Q.source)!=="screen-audio"})&&b(G.producerId,$)});const z=D(F,L),U=$?k($):100;return u.jsx(HJ,{socketId:q,isSpeaking:z,userName:B,producerIds:F,userVolume:U,handleOpenStream:M,handleVolumeChange:x,handleKickUser:_,channelId:L,userId:$,handleMuteUser:P},q)}))})]},L))})})]})},qJ=()=>{const e=Ae(),[t,{toggle:n}]=_t(!0),{serverData:r}=re(a=>a.testServerStore),s=r.permissions.canWorkChannels,o=a=>{e(KV(a)),e(xr(!1))};return u.jsxs(ge,{align:"flex-start",gap:"xs",children:[u.jsxs(ve,{justify:"space-between",w:"100%",wrap:"nowrap",children:[u.jsx(Ne,{leftSection:t?u.jsx(Ud,{}):u.jsx(ao,{}),variant:"transparent",onClick:n,p:0,color:"#fffff",styles:{root:{"--button-hover-color":"#4f4f4f",transition:"color 0.3s ease"}},children:" "}),s&&u.jsx(Ib,{channelType:Rt.NOTIFICATION_CHANNEL})]}),u.jsx(Td,{in:t,w:"100%",children:u.jsx(ge,{gap:"xs",children:r.channels.notificationChannels.map(({channelId:a,channelName:c})=>u.jsx(Eb,{channelId:a,channelName:c,openChannel:()=>o(a),editAction:u.jsx(kb,{channelName:c,channelId:a,channelType:Rt.NOTIFICATION_CHANNEL}),channelType:Rt.NOTIFICATION_CHANNEL},a))})})]})},GJ=({onClose:e})=>{const t=Ws(),n=Ae(),r=$c(),{isConnected:s}=Un(),[o,{open:a,close:c}]=_t(!1),[f,{open:d,close:p}]=_t(!1),[h,{open:g,close:S}]=_t(!1),[y,{open:b,close:C}]=_t(!1),[T,{open:R,close:m}]=_t(!1),[v,{open:x,close:_}]=_t(!1),[k,{open:D,close:M}]=_t(!1),[P,{open:L,close:O}]=_t(!1),{serverData:V,isLoading:H,currentVoiceChannelId:q}=re(ne=>ne.testServerStore),{accessToken:N}=re(ne=>ne.userStore),B=V.permissions.canChangeRole,$=V.permissions.canDeleteUsers,F=V.permissions.canCreateRoles,z=V.permissions.canUseInvitations,U=V.isCreator,G=V.serverType===ri.Teacher,te=async()=>{r(N,q),n(xr(!1)),n(ta(null)),(await n(rd({serverId:V.serverId}))).meta.requestStatus==="fulfilled"&&(n(ni()),n(ys(!0)),n(YS()),t("/main"))};return u.jsxs(u.Fragment,{children:[u.jsxs(ge,{gap:"xs",bg:"#1A1B1E",p:`10px 10px ${s?130:85}px 10px`,miw:250,maw:250,h:"100%",visibleFrom:"sm",children:[u.jsxs(lt,{shadow:"md",width:200,children:[u.jsx(lt.Target,{children:u.jsx(kt,{label:V.serverName,children:u.jsxs(ve,{justify:"space-between",style:{cursor:"pointer"},children:[H?u.jsx(mm,{height:10,width:"40%",radius:"md"}):u.jsx(me,{style:{wordWrap:"break-word",whiteSpace:"pre-wrap",wordBreak:"break-word",maxWidth:190},lineClamp:1,children:V.serverName}),u.jsx(Ud,{})]})})}),u.jsxs(lt.Dropdown,{children:[(B||U||$)&&u.jsx(lt.Item,{leftSection:u.jsx(Vd,{size:16}),onClick:a,children:" "}),U&&G&&u.jsx(lt.Item,{onClick:()=>x(),leftSection:u.jsx(zj,{size:16}),children:" "}),(B||F)&&u.jsx(lt.Item,{onClick:()=>b(),leftSection:u.jsx(t2,{size:16}),children:" "}),u.jsx(lt.Item,{onClick:()=>R(),leftSection:u.jsx(oW,{size:16}),children:" "}),u.jsx(lt.Item,{onClick:d,leftSection:u.jsx(Xj,{size:16}),children:"   "}),u.jsx(lt.Item,{onClick:D,leftSection:u.jsx(gi,{size:16}),children:" "}),z&&u.jsx(lt.Item,{onClick:L,leftSection:u.jsx(vX,{size:16}),children:" "}),!U&&u.jsx(lt.Item,{onClick:te,leftSection:u.jsx(Ww,{size:16}),children:"  "}),U&&u.jsx(lt.Item,{onClick:()=>g(),leftSection:u.jsx(Ww,{size:16}),children:"  "})]})]}),u.jsx(vn,{}),u.jsxs(Pt.Autosize,{mah:"100%",maw:"100%",scrollbarSize:0,children:[u.jsx(Y2,{onClose:e}),u.jsx(qJ,{}),u.jsx(X2,{})]})]}),u.jsx(K2,{opened:o,onClose:c}),u.jsx(SJ,{opened:f,onClose:p}),u.jsx(IJ,{opened:h,onClose:S}),u.jsx(RJ,{opened:y,onClose:C}),u.jsx(TJ,{opened:T,onClose:m}),u.jsx(DJ,{opened:v,onClose:_}),u.jsx(gJ,{opened:k,onClose:M}),u.jsx(yJ,{opened:P,onClose:O})]})},KJ=()=>{var R,m,v,x;const{isConnected:e,toggleMute:t,isMuted:n,isStreaming:r,isCameraOn:s}=Un(),o=$c(),{startScreenSharing:a,stopScreenSharing:c}=S2(),{toggleCamera:f}=b2(),d=Ae(),{user:p,accessToken:h}=re(_=>_.userStore),{currentVoiceChannelId:g,serverData:S}=re(_=>_.testServerStore),y=(m=(R=S.channels)==null?void 0:R.voiceChannels)==null?void 0:m.find(_=>_.channelId===g),b=(y==null?void 0:y.channelName)||null,C=()=>{r?c():a()},T=()=>{o(h,g),d(xr(!1)),d(ta(null))};return u.jsxs(ge,{gap:"sm",p:"md",style:{backgroundColor:"#1A1B1E",borderTop:"1px solid #2C2E33",borderRadius:"8px",maxWidth:"100%",boxSizing:"border-box"},children:[u.jsx(ve,{gap:"sm",justify:"space-between",children:u.jsxs(ve,{gap:"sm",style:{flex:1,minWidth:0},children:[u.jsx($t,{size:"md",radius:"xl",color:"blue",style:{flexShrink:0},children:((x=(v=p.name)==null?void 0:v[0])==null?void 0:x.toUpperCase())||"U"}),u.jsxs(ge,{gap:2,style:{flex:1,minWidth:0},children:[u.jsx(me,{size:"sm",fw:500,truncate:!0,style:{color:"#FFFFFF"},children:p.name}),b&&e&&u.jsx(ve,{gap:4,children:u.jsx(Et,{size:"xs",variant:"light",color:"blue",style:{backgroundColor:"#25262B",color:"#A0A0A0",border:"1px solid #373A40"},children:b})})]})]})}),e&&u.jsxs(ve,{gap:"xs",justify:"center",children:[u.jsx(kt,{label:n?" ":" ",openDelay:500,children:u.jsx(tt,{variant:n?"filled":"light",color:n?"red":"gray",size:"lg",radius:"md",onClick:t,style:{backgroundColor:n?"#FA5252":"#2C2E33",color:"#FFFFFF",border:"none"},children:n?u.jsx(ad,{size:18}):u.jsx(qj,{size:18})})}),u.jsx(kt,{label:s?" ":" ",openDelay:500,children:u.jsx(tt,{variant:s?"filled":"light",color:s?"blue":"gray",size:"lg",radius:"md",onClick:f,style:{backgroundColor:s?"#228BE6":"#2C2E33",color:"#FFFFFF",border:"none"},children:s?u.jsx(wh,{size:18}):u.jsx(n2,{size:18})})}),u.jsx(kt,{label:r?"  ":"  ",openDelay:500,children:u.jsx(tt,{variant:r?"filled":"light",color:r?"green":"gray",size:"lg",radius:"md",onClick:C,style:{backgroundColor:r?"#51CF66":"#2C2E33",color:"#FFFFFF",border:"none"},children:r?u.jsx(Kj,{size:18}):u.jsx(Gj,{size:18})})}),u.jsx(kt,{label:"",openDelay:500,children:u.jsx(tt,{variant:"light",color:"red",size:"lg",radius:"md",onClick:T,style:{backgroundColor:"#2C2E33",color:"#FA5252",border:"none"},children:u.jsx(Yj,{size:18})})})]})]})},YJ=({onClose:e,opened:t})=>{const n=Ws(),r=Ae(),[s,{open:o,close:a}]=_t(!1),{serverData:c,isLoading:f}=re(g=>g.testServerStore),d=c.isCreator,p=g=>{navigator.clipboard.writeText(g)},h=async()=>{(await r(rd({serverId:c.serverId}))).meta.requestStatus==="fulfilled"&&(r(ni()),r(ys(!0)),r(YS()),n("/main"))};return u.jsxs(u.Fragment,{children:[u.jsxs(Wr,{opened:t,onClose:e,size:"xs",styles:{content:{backgroundColor:"#1A1B1E",color:"#ffffff"},header:{backgroundColor:"#1A1B1E"},body:{height:"calc(100dvh - 60px)"}},children:[u.jsxs(lt,{shadow:"md",width:200,children:[u.jsx(lt.Target,{children:u.jsxs(ve,{justify:"space-between",style:{cursor:"pointer"},children:[f?u.jsx(mm,{height:10,width:"40%",radius:"md"}):u.jsx(me,{children:c.serverName}),u.jsx(Ud,{})]})}),u.jsxs(lt.Dropdown,{children:[d&&u.jsx(lt.Item,{leftSection:u.jsx(Vd,{size:16}),onClick:o,children:" "}),u.jsx(lt.Item,{onClick:()=>p(c.serverId),leftSection:u.jsx(Bj,{size:16}),children:" ID "}),!d&&u.jsx(lt.Item,{onClick:h,leftSection:u.jsx(Ww,{size:16}),children:"  "})]})]}),u.jsx(vn,{}),u.jsx(Y2,{onClose:e}),u.jsx(X2,{}),u.jsx(KJ,{})]}),u.jsx(K2,{opened:s,onClose:a})]})},Fi={container:()=>({backgroundColor:"#1A1B1E",borderTop:"1px solid #2C2E33",borderRadius:"8px",maxWidth:"100%",boxSizing:"border-box"}),badge:()=>({backgroundColor:"#25262B",color:"#A0A0A0",border:"1px solid #373A40",cursor:"pointer"}),microphoneIcon:e=>({backgroundColor:e?"#FA5252":"#2C2E33",color:"#FFFFFF",border:"none"}),cameraIcon:e=>({backgroundColor:e?"#228BE6":"#2C2E33",color:"#FFFFFF",border:"none"}),streamIcon:e=>({backgroundColor:e?"#51CF66":"#2C2E33",color:"#FFFFFF",border:"none"}),settingsIcon:()=>({backgroundColor:"#2C2E33",color:"#FFFFFF",border:"none"}),disconnectIcon:()=>({backgroundColor:"#2C2E33",color:"#FA5252",border:"none"})},XJ=()=>{var P,L;const e=Ae(),{isConnected:t,toggleMute:n,isMuted:r,isUserMute:s,isStreaming:o,isCameraOn:a,micSettings:c,setMicSettings:f}=Un(),d=$c(),{startScreenSharing:p,stopScreenSharing:h}=S2(),{toggleCamera:g}=b2(),{user:S,accessToken:y}=re(O=>O.userStore),{currentVoiceChannelId:b,currentVoiceChannelName:C,currentVoiceChannelServerId:T,currentServerId:R}=re(O=>O.testServerStore),{isOpenHome:m}=re(O=>O.appStore),[v,{open:x,close:_}]=_t(!1),k=()=>{o?h():p()},D=()=>{T===R&&!m||(R!==T&&(e(KS(T)),ot.emit("setServer",{serverId:T,userName:S.name,userId:S.id})),e(xr(!0)),m&&e(ys(!1)))},M=()=>{d(y,b),e(xr(!1)),e(ta(null)),e(Vw(null)),e(Hw(null))};return u.jsxs(ge,{gap:"sm",p:"md",style:Fi.container(),children:[u.jsx(ve,{gap:"sm",justify:"space-between",children:u.jsxs(ve,{gap:"sm",style:{flex:1,minWidth:0},children:[u.jsx($t,{size:"md",radius:"xl",color:"blue",style:{flexShrink:0},children:((L=(P=S.name)==null?void 0:P[0])==null?void 0:L.toUpperCase())||"U"}),u.jsxs(ge,{gap:2,style:{flex:1,minWidth:0},children:[u.jsx(me,{size:"sm",fw:500,truncate:!0,style:{color:"#FFFFFF"},children:S.name}),C&&t&&u.jsx(ve,{gap:4,children:u.jsx(Et,{size:"xs",variant:"light",color:"blue",style:Fi.badge(),onClick:D,children:C})})]})]})}),t&&u.jsxs(ve,{gap:"xs",justify:"center",children:[u.jsx(kt,{label:r||s?" ":" ",openDelay:500,children:u.jsx(tt,{variant:r||s?"filled":"light",color:r||s?"red":"gray",size:"lg",radius:"md",onClick:n,style:Fi.microphoneIcon(r||s),disabled:s,children:r||s?u.jsx(ad,{size:18}):u.jsx(qj,{size:18})})}),u.jsx(kt,{label:a?" ":" ",openDelay:500,children:u.jsx(tt,{variant:a?"filled":"light",color:a?"blue":"gray",size:"lg",radius:"md",onClick:g,style:Fi.cameraIcon(a),children:a?u.jsx(wh,{size:18}):u.jsx(n2,{size:18})})}),u.jsx(kt,{label:o?"  ":"  ",openDelay:500,children:u.jsx(tt,{variant:o?"filled":"light",color:o?"green":"gray",size:"lg",radius:"md",onClick:k,style:Fi.streamIcon(o),children:o?u.jsx(Kj,{size:18}):u.jsx(Gj,{size:18})})}),u.jsx(kt,{label:" ",openDelay:500,children:u.jsx(tt,{variant:"light",color:"gray",size:"lg",radius:"md",onClick:x,style:Fi.settingsIcon(),children:u.jsx(LW,{size:18})})}),u.jsx(kt,{label:"",openDelay:500,children:u.jsx(tt,{variant:"light",color:"red",size:"lg",radius:"md",onClick:M,style:Fi.disconnectIcon(),children:u.jsx(Yj,{size:18})})})]}),u.jsx(dt,{opened:v,onClose:_,centered:!0,title:" ",children:u.jsxs(ge,{gap:"md",children:[u.jsxs(ge,{gap:6,children:[u.jsxs(ve,{justify:"space-between",children:[u.jsx(me,{size:"sm",children:""}),u.jsxs(me,{size:"sm",c:"dimmed",children:[c.volume,"%"]})]}),u.jsx(lo,{min:0,max:100,step:1,value:c.volume,onChange:O=>f(V=>({...V,volume:O}))})]}),u.jsxs(ge,{gap:6,children:[u.jsxs(ve,{justify:"space-between",children:[u.jsx(me,{size:"sm",children:"Gain"}),u.jsxs(me,{size:"sm",c:"dimmed",children:[c.gainDb," dB"]})]}),u.jsx(lo,{min:-10,max:20,step:1,value:c.gainDb,onChange:O=>f(V=>({...V,gainDb:O}))})]}),u.jsx(rn,{label:"",checked:c.noiseSuppression,onChange:O=>f(V=>({...V,noiseSuppression:O.currentTarget.checked}))}),u.jsx(rn,{label:"",checked:c.echoCancellation,onChange:O=>f(V=>({...V,echoCancellation:O.currentTarget.checked}))}),u.jsx(rn,{label:"",checked:c.autoGainControl,onChange:O=>f(V=>({...V,autoGainControl:O.currentTarget.checked}))})]})})]})},QJ={container:()=>({flex:1,minWidth:0,padding:"10px",display:"flex",flexDirection:"column",backgroundColor:"#2C2E33"})},JJ=({isPreviewActive:e,onPreviewToggle:t,onOpenStream:n})=>u.jsxs(u.Fragment,{children:[u.jsx(kt,{label:e?" ":" ",position:"bottom",children:u.jsx(Ne,{variant:e?"filled":"light",color:e?"blue":"gray",size:"xs",leftSection:u.jsx(V2,{size:16}),onClick:t,fullWidth:!0,children:""})}),u.jsx(kt,{label:" ",position:"bottom",children:u.jsx(Ne,{variant:"filled",color:"blue",size:"xs",leftSection:u.jsx(H2,{size:16}),onClick:n,fullWidth:!0,children:""})})]}),pd={container:()=>({width:"100%",height:"100%",position:"relative",overflow:"hidden"}),video:()=>({width:"100%",height:"100%",objectFit:"cover"}),badge:()=>({position:"absolute",top:8,right:8})},Q2=I.memo(({videoRef:e})=>u.jsxs(ie,{style:pd.container(),children:[u.jsx("video",{ref:e,autoPlay:!0,muted:!0,playsInline:!0,style:pd.video()}),u.jsx(Et,{size:"sm",variant:"light",color:"green",children:"LIVE"})]}));Q2.displayName="CameraPreview";const ZJ={container:e=>({position:"absolute",bottom:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"6px",opacity:e?1:0,transition:"opacity 0.2s ease"})},eZ=({hovered:e,isPreviewActive:t,onPreviewToggle:n,onOpenStream:r})=>u.jsxs(ve,{gap:"xs",style:ZJ.container(e),className:"card-buttons",children:[u.jsx(kt,{label:t?" ":" ",position:"top",children:u.jsx(tt,{variant:t?"filled":"light",color:t?"blue":"gray",size:"md",onClick:n,style:{flex:1},children:u.jsx(V2,{size:14})})}),u.jsx(kt,{label:" ",position:"top",children:u.jsx(tt,{variant:"filled",color:"blue",size:"md",onClick:r,style:{flex:1},children:u.jsx(H2,{size:14})})})]}),tZ={box:()=>({position:"absolute",top:8,left:8,background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"6px",padding:"6px 8px",display:"flex",alignItems:"center",gap:"4px",zIndex:10})},nZ=()=>u.jsx(kt,{label:" ",position:"top-end",children:u.jsx(ie,{style:tZ.box(),children:u.jsx(wX,{size:16,style:{color:"rgba(239, 68, 68, 0.8)"}})})}),J2=I.memo(({videoRef:e})=>u.jsxs(ie,{style:pd.container(),children:[u.jsx("video",{ref:e,autoPlay:!0,muted:!0,playsInline:!0,style:pd.video()}),u.jsx(Et,{size:"sm",variant:"light",color:"green",style:pd.badge(),children:"LIVE"})]}));J2.displayName="StreamPreview";const Z2=I.memo(({userName:e,userId:t})=>{const{getUserIcon:n}=Ac(at.CHANNEL),r=I.useMemo(()=>n(t),[n,t]),{iconBase64:s}=Es(r);return u.jsx($t,{radius:"xl",size:"xl",color:"blue",src:s,style:{width:"80px",height:"80px"},children:e[0]})});Z2.displayName="UserAvatar";const rZ={name:()=>({display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",transition:"color 0.2s ease"})},sZ=({isSpeaking:e,userName:t,isStreaming:n})=>u.jsxs(ie,{children:[u.jsx(ve,{justify:"space-between",align:"center",gap:"xs",children:u.jsx(me,{fw:600,c:e?"#22c55e":"white",size:"md",style:rZ.name(),children:t})}),n&&u.jsx(Et,{size:"xs",variant:"dot",color:"red",mt:4,children:""})]}),Jy={card:e=>({background:"linear-gradient(135deg, rgba(45, 45, 50, 0.8) 0%, rgba(35, 35, 40, 0.9) 100%)",border:e?"2px solid rgba(34, 197, 94, 0.6)":"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease",cursor:"default",boxShadow:e?"0 0 20px rgba(34, 197, 94, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.3)",position:"relative",overflow:"hidden"}),previewContainer:e=>({position:"relative",width:"100%",height:e?"100px":void 0,aspectRatio:"16 / 10",background:"linear-gradient(135deg, #1a1a1f 0%, #0d0d12 100%)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"}),video:()=>({width:"100%",height:"100%",background:"linear-gradient(45deg, rgba(88, 166, 255, 0.1) 0%, rgba(140, 100, 255, 0.1) 100%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"}),badge:()=>({position:"absolute",top:8,right:8}),compactCamera:()=>({position:"absolute",bottom:0,right:0,width:"40%",height:"40%",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(0, 0, 0, 0.5)"})},oZ=(e,t)=>{const n=e.isCameraEnabled===t.isCameraEnabled&&e.isStreaming===t.isStreaming&&e.isPreviewActive===t.isPreviewActive&&e.userName===t.userName&&e.userId===t.userId&&e.socketId===t.socketId&&e.isCompact===t.isCompact,r=e.consumers??[],s=t.consumers??[],o=r.length===s.length&&r.every((d,p)=>{var h,g;return d.id===((h=s[p])==null?void 0:h.id)&&d.producerId===((g=s[p])==null?void 0:g.producerId)}),a=e.userProducerIds??[],c=t.userProducerIds??[],f=a.length===c.length&&a.every((d,p)=>d===c[p]);return!n||!o||!f?!1:e.isMuted===t.isMuted&&e.isSpeaking===t.isSpeaking&&e.onOpenStream===t.onOpenStream&&e.onPreviewStream===t.onPreviewStream},iZ=({socketId:e,userName:t,userId:n,isStreaming:r,onOpenStream:s,isCameraEnabled:o=!1,onPreviewStream:a,isSpeaking:c=!1,isMuted:f=!1,isPreviewActive:d=!1,consumers:p=[],userProducerIds:h=[],isCompact:g=!1})=>{const[S,y]=I.useState(!1),{videoRef:b}=Aj({isStreaming:r,isPreviewActive:d,consumers:p,userProducerIds:h}),{videoRef:C}=aH({consumers:p,userProducerIds:h}),T=()=>{a&&a(e)},R=I.useMemo(()=>r&&d?u.jsx(J2,{videoRef:b},"stream"):o&&!d?u.jsx(ie,{style:Jy.video(),children:u.jsx(Q2,{videoRef:C})},"camera"):u.jsx(Z2,{userName:t,userId:n},"avatar"),[o,r,d,t,n]);return u.jsxs(Bn,{shadow:"md",padding:"0",radius:"lg",withBorder:!0,style:Jy.card(c),onMouseEnter:m=>{c||(m.currentTarget.style.borderColor="rgba(88, 166, 255, 0.5)",m.currentTarget.style.boxShadow="0 8px 24px rgba(88, 166, 255, 0.2)"),g&&y(!0)},onMouseLeave:m=>{c||(m.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",m.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"),g&&y(!1)},children:[u.jsxs(ie,{style:Jy.previewContainer(g),children:[f&&u.jsx(nZ,{}),R,g&&r&&!o&&u.jsx(eZ,{hovered:S,isPreviewActive:d,onPreviewToggle:T,onOpenStream:()=>s(e)})]}),!g&&u.jsx(ie,{p:"md",children:u.jsxs(ge,{gap:"sm",children:[u.jsx(sZ,{isSpeaking:c,userName:t,isStreaming:r}),u.jsxs(ve,{gap:"xs",grow:!0,children:[r&&u.jsx(JJ,{isPreviewActive:d,onPreviewToggle:T,onOpenStream:()=>s(e)}),!r&&u.jsx(me,{size:"xs",c:"dimmed",ta:"center",style:{padding:"8px 0"},children:"  "})]})]})})]})},Db=I.memo(iZ,oZ);Db.displayName="VoiceUserCard";const aZ=()=>{const e=Ae(),{users:t,setSelectedUserId:n,previewUserIds:r,togglePreview:s,consumers:o}=Un(),{calculateIsSpeaking:a,getIsMuted:c}=Oj(),{currentVoiceChannelId:f}=re(y=>y.testServerStore),p=hb(t).find(y=>y.roomName===f),h=I.useCallback(y=>{n(y)},[n]),g=I.useCallback(y=>{s(y)},[s]),S=I.useCallback(()=>{e(w2())},[e]);return u.jsxs(Pt,{style:{flex:1,maxHeight:"100%"},children:[u.jsx(ve,{justify:"flex-end",children:u.jsx(tt,{variant:"transparent",onClick:S,children:u.jsx(hH,{})})}),u.jsx(hm,{cols:{base:2,lg:3},spacing:"sm",children:p&&Object.entries(p.users).map(([y,{userName:b,userId:C,producers:T}])=>{const R=!!T.find(D=>D.source==="screen-video"),m=T.map(D=>D.producerId),v=a(m,f),x=c(C),_=r.has(y),k=!!T.find(D=>D.source==="camera");return u.jsx(Db,{socketId:y,userName:b,userId:C,isStreaming:R,onOpenStream:h,onPreviewStream:g,isMuted:x,isSpeaking:v,isPreviewActive:_,consumers:o,userProducerIds:m,isCameraEnabled:k},y)})})]})},tE={container:()=>({display:"flex",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",overflow:"hidden",gap:"8px",padding:"10px 8px",height:"132px",flexShrink:0,width:"100%",maxWidth:"100%"}),scrollBox:()=>({display:"flex",gap:"8px",width:"max-content",height:"100%",alignItems:"center",padding:"0 4px",flexWrap:"nowrap"})},cZ=({children:e})=>{const t=I.useRef(null),n=()=>{t.current&&t.current.scrollBy({left:-100,behavior:"smooth"})},r=()=>{t.current&&t.current.scrollBy({left:100,behavior:"smooth"})};return u.jsxs(ie,{style:tE.container(),children:[u.jsx(Ne,{variant:"subtle",color:"gray",onClick:n,style:{flexShrink:0,zIndex:11},children:u.jsx(jH,{size:20})}),u.jsx(Pt,{viewportRef:t,style:{flex:1,height:"100%",minWidth:0},children:u.jsx(ie,{style:tE.scrollBox(),children:e})}),u.jsx(Ne,{variant:"subtle",color:"gray",onClick:r,style:{flexShrink:0,zIndex:11},children:u.jsx(ao,{size:20})})]})},nc={container:()=>({flex:1,position:"relative",overflow:"hidden",borderRadius:"8px",marginBottom:"10px"}),video:()=>({width:"100%",height:"100%",objectFit:"contain",backgroundColor:"#000"}),controls:()=>({position:"absolute",bottom:"10px",right:"10px",zIndex:10,gap:"8px"}),volumeControl:()=>({display:"flex",alignItems:"center",gap:"8px",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"8px 12px",borderRadius:"6px",minWidth:"200px"}),volumeSlider:()=>({flex:1}),button:()=>({width:"100%"})},lZ=({videoRef:e,volume:t,onVolumeChange:n})=>{const{setSelectedUserId:r}=Un(),s=()=>{r(null),e.current&&(e.current.srcObject=null)},o=a=>{n(a),e.current&&(e.current.volume=a)};return u.jsxs(ie,{style:nc.container(),children:[u.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,style:nc.video()}),u.jsxs(ge,{style:nc.controls(),children:[u.jsxs(ie,{style:nc.volumeControl(),children:[u.jsx(sb,{size:18,style:{color:"#fff"}}),u.jsx(lo,{value:t,onChange:o,min:0,max:1,step:.01,style:nc.volumeSlider(),label:a=>`${Math.round(a*100)}%`})]}),u.jsxs(Ne,{variant:"filled",color:"red",onClick:s,style:nc.button(),children:[u.jsx(To,{size:20})," "]})]})]})},nE={container:()=>({flex:1,display:"flex",flexDirection:"column",backgroundColor:"#2C2E33",overflow:"hidden",minWidth:0}),box:()=>({position:"relative",flex:1,display:"flex",flexDirection:"column",overflow:"hidden",minWidth:0})},dZ=()=>{const[e,t]=I.useState(1),{consumers:n,users:r,selectedUserId:s,setSelectedUserId:o,previewUserIds:a,togglePreview:c}=Un(),{currentVoiceChannelId:f}=re(v=>v.testServerStore),{calculateIsSpeaking:d,getIsMuted:p}=Oj(),g=hb(r).find(v=>v.roomName===f),S=s?g==null?void 0:g.users[s]:null,y=S==null?void 0:S.producers.map(v=>v.producerId),{videoRef:b}=Aj({isStreaming:!!S,consumers:n,userProducerIds:y??[],volume:e});I.useEffect(()=>{s&&t(bh(s))},[s]);const C=v=>{o(v)},T=()=>{o(null),b.current&&(b.current.srcObject=null)},R=v=>{c(v)},m=v=>{t(v),s&&c2(s,v)};return I.useEffect(()=>{if(!ot||!g)return;const v=({producerId:x})=>{var k,D;let _=!1;if(x)_=!!((D=(k=g==null?void 0:g.users[s])==null?void 0:k.producers)!=null&&D.some(P=>P.producerId===x&&P.source==="screen-video"));else{const M=r.find(P=>P.roomName===f);M&&(M.users.find(L=>L.socketId===s)||(_=!0))}_&&T()};return ot.on("producerClosed",v),ot.on("producer-closed",v),()=>{ot.off("producerClosed",v),ot.off("producer-closed",v)}},[ot,n,g,s]),u.jsx(ie,{style:nE.container(),children:u.jsx(ie,{style:nE.box(),children:s&&S&&u.jsxs(u.Fragment,{children:[u.jsx(lZ,{videoRef:b,volume:e,onVolumeChange:m}),u.jsx(cZ,{children:g&&Object.entries(g.users).map(([v,{userName:x,userId:_,producers:k}])=>{const D=!!k.find(H=>H.source==="screen-video"),M=k.map(H=>H.producerId),P=d(M,f),L=p(_),O=a.has(v),V=!!k.find(H=>H.source==="camera");return u.jsx(ie,{style:{flexShrink:0,width:"120px"},children:u.jsx(Db,{socketId:v,userName:x,userId:_,isStreaming:D,onOpenStream:C,onPreviewStream:R,isMuted:L,isSpeaking:P,isPreviewActive:O,consumers:n,userProducerIds:M,isCompact:!0,isCameraEnabled:V})},v)})})]})})})},uZ=()=>{const{selectedUserId:e}=Un();return console.log(e),u.jsx(ie,{style:QJ.container(),children:e?u.jsx(dZ,{}):u.jsx(aZ,{})})},fZ=()=>{const e=Ws(),t=Ae(),{isUserStreamView:n,isOpenHome:r}=re(C=>C.appStore),{isLoggedIn:s}=re(C=>C.userStore),{currentServerId:o,currentChannelId:a,currentNotificationChannelId:c,startMessageId:f}=re(C=>C.testServerStore),[d,{open:p,close:h}]=_t(!1),[g,{open:S,close:y}]=_t(!1),b=a??c;return I.useEffect(()=>{s||e("/")},[s,e]),I.useEffect(()=>{t(cd())},[t]),I.useEffect(()=>{o&&t(An({serverId:o}))},[o,t]),I.useEffect(()=>{b&&t(rp({channelId:b,number:mn,fromMessageId:f,down:f===0}))},[b,t]),u.jsxs(ie,{style:{display:"flex",height:"100dvh",position:"relative"},children:[u.jsx(wJ,{}),r?u.jsx(aJ,{}):u.jsxs(u.Fragment,{children:[u.jsx(GJ,{onClose:h}),n?u.jsx(uZ,{}):u.jsx(HX,{openSidebar:p,openDetailsPanel:S}),u.jsx(YX,{}),u.jsx(YJ,{onClose:h,opened:d}),u.jsx(XX,{onClose:y,opened:g})]}),u.jsx(ie,{style:{position:"fixed",bottom:5,left:5,right:0,zIndex:100,maxWidth:310,boxShadow:"0 -2px 10px rgba(0, 0, 0, 0.3)"},children:u.jsx(XJ,{})})]})},pZ=()=>{const e=Ae(),t=Ws(),{accessToken:n}=re(a=>a.userStore),r=ks({initialValues:{mail:"",accountName:"",password:""},validate:{mail:Ss(Cr(6,"Email"),ws(50,"Email"),gb),accountName:Ss(Cr(6,""),ws(50,"")),password:Cr(6,"")}}),s=async a=>{(await e(Cp(a))).meta.requestStatus==="fulfilled"&&t("/main")},o=()=>{t("/")};return I.useEffect(()=>{n&&t("/main")},[n,t]),u.jsxs(Bn,{shadow:"sm",padding:"lg",radius:"md",bg:"#1c1c1c",c:"white",w:"30vw",miw:"300px",children:[u.jsxs(ve,{justify:"space-between",align:"center",mb:"md",children:[u.jsx(me,{fw:500,children:"   "}),u.jsx(tt,{variant:"subtle",onClick:o,children:u.jsx(eb,{size:24})})]}),u.jsx("form",{onSubmit:r.onSubmit(s),children:u.jsxs(ge,{gap:"md",children:[u.jsx(qt,{label:"Email",placeholder:" email",...r.getInputProps("mail"),maxLength:50,required:!0}),u.jsx(qt,{label:"",placeholder:" ",description:" 6  50 ",...r.getInputProps("accountName"),maxLength:50,required:!0}),u.jsx(fm,{label:"",placeholder:" ",description:" 6 ",...r.getInputProps("password"),required:!0}),u.jsx(ve,{justify:"center",mt:"md",children:u.jsx(Ne,{type:"submit",children:""})})]})})]})},hZ=()=>u.jsx(Cn,{w:"100vw",h:"100vh",gap:"md",justify:"center",align:"center",direction:"column",bg:"linear-gradient(135deg, #4a90e2, #7b4397)",children:u.jsx(pZ,{})}),mZ=({children:e})=>{const t=re(f=>f.testServerStore.error),n=re(f=>f.userStore.error),r=re(f=>f.chatsStore.error),s=re(f=>f.rolesStore.error),o=re(f=>f.presetsStore.error),a=re(f=>f.serverApplicationsStore.error),{showError:c}=St();return I.useEffect(()=>{t!==""&&c(t)},[t]),I.useEffect(()=>{n!==""&&c(n)},[n]),I.useEffect(()=>{r!==""&&c(r)},[r]),I.useEffect(()=>{s!==""&&c(s)},[s]),I.useEffect(()=>{o!==""&&c(o)},[o]),I.useEffect(()=>{a!==""&&c(a)},[a]),u.jsx(u.Fragment,{children:e})},gZ=["/auth/registration","/auth/login","/auth/refresh"],vZ=({children:e})=>{const t=Ae(),[n,r]=I.useState(!1),{accessToken:s,refreshToken:o}=re(p=>p.userStore),a=I.useRef({access:"",refresh:""}),c=I.useRef(!1),f=I.useRef([]);I.useEffect(()=>{a.current.access=s||"",a.current.refresh=o||""},[s,o]);const d=(p,h=null)=>{f.current.forEach(g=>{p?g.reject(p):g.resolve(h)}),f.current=[]};return I.useEffect(()=>{const p=ke.interceptors.request.use(g=>{const S=g.url||"";if(!gZ.includes(S)){const y=a.current.access||localStorage.getItem(zt.ACCESS);y&&(g.headers.Authorization=`Bearer ${y}`)}return g},g=>Promise.reject(g)),h=ke.interceptors.response.use(g=>g,async g=>{var y,b,C;const S=g.config;if(((y=g.response)==null?void 0:y.status)===401&&!((b=S.url)!=null&&b.includes("/auth/logout"))){const T=a.current.refresh||localStorage.getItem(zt.REFRESH);if(!T||(C=S.url)!=null&&C.includes("/refresh"))return t(NT()),localStorage.removeItem(zt.ACCESS),localStorage.removeItem(zt.REFRESH),Promise.reject(g);if(c.current)return new Promise((R,m)=>{f.current.push({resolve:v=>{v&&S.headers&&(S.headers.Authorization=`Bearer ${v}`),R(ke(S))},reject:v=>{m(v)}})});c.current=!0;try{const R=await t(Tp({refreshToken:T})).unwrap(),m=R.accessToken,v=R.refreshToken;return localStorage.setItem(zt.ACCESS,m),localStorage.setItem(zt.REFRESH,v),ke.defaults.headers.common.Authorization=`Bearer ${m}`,S.headers.Authorization=`Bearer ${m}`,d(null,m),ke(S)}catch(R){return d(R,null),t(NT()),localStorage.removeItem(zt.ACCESS),localStorage.removeItem(zt.REFRESH),Promise.reject(R)}finally{c.current=!1}}return Promise.reject(g)});return r(!0),()=>{ke.interceptors.request.eject(p),ke.interceptors.response.eject(h)}},[t]),n?u.jsx(u.Fragment,{children:e}):null},yZ=()=>u.jsx(vZ,{children:u.jsx(YG,{children:u.jsx(XG,{children:u.jsx(dX,{children:u.jsx(kz,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:u.jsxs(jE,{defaultColorScheme:"dark",children:[u.jsx(Ro,{}),u.jsx(mZ,{children:u.jsxs(bz,{children:[u.jsx(oc,{path:"/",element:u.jsx(yK,{})}),u.jsx(oc,{path:"/main",element:u.jsx(fZ,{})}),u.jsx(oc,{path:"/login",element:u.jsx(gK,{})}),u.jsx(oc,{path:"/register",element:u.jsx(hZ,{})}),u.jsx(oc,{path:"/invite/:code",element:u.jsx(vK,{})})]})})]})})})})})}),wZ=B7({reducer:{userStore:jG,appStore:KG,testServerStore:XV,chatsStore:ZU,rolesStore:FX,filesStore:iH,friendshipStore:aX,subChatStore:FG,presetsStore:AQ,serverApplicationsStore:rJ}});sN.createRoot(document.getElementById("root")).render(u.jsx(wN,{store:wZ,children:u.jsx(yZ,{})}));export{Vl as c,ci as g};
